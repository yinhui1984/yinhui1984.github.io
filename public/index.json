[{"categories":["windows"],"content":"å¦‚ä½•è®©MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£å¹¶æ‰“å°æ—¥å¿—è¾“å‡º ä¹ æƒ¯äº†linuxä¸Šè¿è¡Œç¨‹åºæ—¶åœ¨terminalä¸­æŸ¥çœ‹æ‰“å°çš„æ—¥å¿—. ä½†åœ¨MFCçª—å£ç¨‹åºä¸­å´ä¸è¡Œ. æŠ˜è…¾äº†ä¸€ä¸‹, ç»“æœå¦‚ä¸‹ ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:0:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"å¼¹å‡ºå‘½ä»¤è¡Œçª—å£ åœ¨ä¸»ç¨‹åºçš„XXX::InitInstance()å‡½æ•°ä¸­æ·»åŠ  #ifdef _DEBUG if (!AllocConsole()) AfxMessageBox(\"Failed to create the console!\", MB_ICONEXCLAMATION); #endif åœ¨å¯¹åº”çš„XXX::ExitInstance()ä¸­æ·»åŠ  #ifdef _DEBUG if (!FreeConsole()) AfxMessageBox(\"Could not free the console!\"); #endif è¿™æ ·åœ¨DEBUGæ¨¡å¼ä¸‹å¯åŠ¨ç¨‹åºæ—¶, ä¼šå¼¹å‡ºå‘½ä»¤è¡Œçª—å£ ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:1:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"æ‰“å°æ—¥å¿—(å«æ–‡ä»¶å, ä»£ç è¡Œå·) #define LOG2CONSOLE(X) \\ { \\ std::string file = __FILE__; \\ size_t index; \\ for (index = file.size()-1; index \u003e 0; index--) { \\ if (file[index] == '\\\\') break; \\ } \\ std::string fileName = file.substr(index + 1); \\ std::stringstream ss; \\ ss \u003c\u003c X; \\ std::string s = ss.str(); \\ _cprintf(\"%s:%i %s\\n\", fileName.c_str(), __LINE__, s.c_str()); \\ } 1, æ³¨æ„è¦ä½¿ç”¨å®, è€Œä¸æ˜¯å‡½æ•°, å¦åˆ™ä»£ç æ–‡ä»¶åå’Œä»£ç è¡Œå§‹ç»ˆæ˜¯å®šä¹‰çš„ä½ç½® 2, å®æ¢è¡Œçš„è¯, é™¤äº†æœ€åä¸€ä¸ªå¤§æ‹¬å·, æ¯ä¸€è¡Œåé¢éƒ½è¦æ¥ä¸€ä¸ª \\ ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:2:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"ä½¿ç”¨ LOG2CONSOLE(\"[Clicked] my button clicked. the xxx value is:\" \u003c\u003c something); ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:3:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"å…³äºç¼–è¯‘Windows MFC é¡¹ç›®é‡åˆ°çš„Error : WINDOWS.H Already Includedçš„è§£å†³æ–¹æ³• ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:0:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["windows"],"content":"ç°è±¡ ä»Šå¤©æ¥åˆ°ä¸€ä¸ªè€æ—§çš„MFCé¡¹ç›®, å®‰è£…windowsè™šæ‹Ÿæœº, VS2010 (çœŸæ˜¯è€æ‰ç‰™å‘€) , æœ€åç¼–è¯‘æ—¶å‡ºç°ä¸€å †å¦‚ä¸‹æŠ¥é”™: 1\u003e app.cpp 1\u003ec:\\program files (x86)\\microsoft visual studio 10.0\\vc\\atlmfc\\include\\afxv_w32.h(16): fatal error C1189: #error : WINDOWS.H already included. MFC apps must not #include \u003cwindows.h\u003e ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:1:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["windows"],"content":"è§£å†³æ–¹æ³• ç»è¿‡ä¸€ç•ªæŠ˜è…¾, ç›´æ¥è¯´ç»“è®º: #include â€œstdafx.hâ€ å¿…é¡»æ”¾åœ¨å…¶ä»–å¤´æ–‡ä»¶ä¹‹å‰ è¿™æ¶‰åŠåˆ°ä¸€ä¸ªå¾ˆæ¶å¿ƒçš„é—®é¢˜, å¦‚æœå¤šä¸ªå¤´æ–‡ä»¶å±‚å±‚include, å¾—è€å¿ƒåœ°æ…¢æ…¢è°ƒæ•´é¡ºåº ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:2:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["windows"],"content":"ä¸¾ä¾‹ æ¯”å¦‚ ä¸‹é¢è¿™ä¸ªå°±ä¼šæŠ¥é”™: //a.h #include \"b.h\"#include \"c.h\" //b.h #include \"xxx.h\" //c.h #include \"yyy.h\"#include \"stdafx.h\" éœ€è¦è°ƒæ•´2å¤„: 1, c.h ä¸­ #include \"stdafx.h\" éœ€è¦æ”¾åˆ° #include \"yyy.h\" å‰é¢ 2, a.h ä¸­ #include \"c.h\" éœ€è¦æ”¾åˆ° #include \"b.h\" å‰é¢ æœ€åè¿™æ ·: //a.h #include \"c.h\"#include \"b.h\" //b.h #include \"xxx.h\" //c.h #include \"stdafx.h\"#include \"yyy.h\" ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:3:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["aviation"],"content":"ARINC-429 å®šä¹‰äº†å•†ç”¨é£æœºèˆªç©ºç”µå­ç³»ç»Ÿä¹‹é—´æ•°å­—æ•°æ®ä¼ è¾“çš„æ ‡å‡†è¦æ±‚å’Œåè®®ã€‚è®¾å¤‡åˆ¶é€ å•†éµå¾ªè¿™äº›æ ‡å‡†ï¼Œä»è€Œå®ç°èˆªç©ºç”µå­è®¾å¤‡çš„äº’æ¢æ€§. ","date":"2022-07-12","objectID":"/arinc429/:0:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"ç‰¹ç‚¹ ARINC 429 æ•°æ®ä¼ è¾“çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå…¶ç®€å•çš„å•å‘æ€»çº¿é€šä¿¡æ•°æ®æµã€‚è™½ç„¶å…¸å‹çš„æ•°æ®æ€»çº¿åœ¨ä¸€ç»„ç”µçº¿ä¸Šçš„å„ä¸ªæ€»çº¿ç‚¹ä¹‹é—´æä¾›å¤šå‘æ•°æ®ä¼ è¾“ã€‚ ARINC-429 å¹¶éå¦‚æ­¤, ä¼ è¯´æ˜¯ä¸ºäº†ç³»ç»Ÿå¯é æ€§ã€‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚RECEIVER_1â”‚ â”‚ ... â”‚ â”‚ RECEIVER_N â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â–² â–² â–² â”‚ SENDER â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Senderå¯ä»¥æ”¯æŒæœ€é«˜20ä¸ªReceiver è¦æƒ³åŒå‘ä¼ è¾“, å†æ·»åŠ ä¸€æ ¹çº¿ç¼†, Receiverå˜Sender Sendå’ŒReceiveé€šé“åœ¨ä¸åŒçš„ç«¯å£ä¸Š ä»¥ 32 ä½(bit)ä¸ºä¸€ä¸ªæ•°æ®å­—(WORD), æ¯ä¸ªå­—ä»£è¡¨ä¸€ä¸ªå·¥ç¨‹å•ä½ï¼Œä¾‹å¦‚é«˜åº¦æˆ–æ°”å‹ ä¼ è¾“é€šé“åˆ†ä¸ºé«˜é€Ÿå’Œä½é€Ÿä¸¤ç§, å‰è€…100kb/s , åè€… 12.5kb/s ","date":"2022-07-12","objectID":"/arinc429/:1:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"æ•°æ®å­—ç»“æ„ â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚P â”‚ SSM â”‚ DATA â”‚ SDI â”‚ LABLE â”‚ â””â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â” â”‚32â”‚31â”‚30â”‚29â”‚28â”‚27â”‚..â”‚14â”‚13â”‚12â”‚11â”‚10â”‚9 â”‚8 â”‚7 â”‚6 â”‚5 â”‚4 â”‚3 â”‚2 â”‚1 â”‚ â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜ æ•°æ®ä»¥ 32 ä½å­—é€šè¿‡ ARINC-429 æ€»çº¿å‘é€ï¼Œæ¯ä¸ªå­—ä»£è¡¨ä¸€ä¸ªå·¥ç¨‹å•ä½ï¼Œä¾‹å¦‚é«˜åº¦æˆ–æ°”å‹ã€‚æ¶ˆæ¯çš„ä¸åŒéƒ¨åˆ†å¦‚ä¸Šå›¾æ‰€ç¤º. LABEL: 8 ä½æ ‡ç­¾ç”¨äºè§£é‡Šæ¶ˆæ¯çš„å…¶ä»–å­—æ®µâ€”â€”æ¯ç§ç±»å‹çš„è®¾å¤‡éƒ½æœ‰ä¸€ç»„ç”±æ ‡ç­¾ç¼–å·æ ‡è¯†çš„æ ‡å‡†å‚æ•°ï¼Œè€Œä¸åˆ¶é€ å•†æ— å…³ã€‚ä¾‹å¦‚ï¼Œä»»ä½•èˆªå‘å‚è€ƒç³»ç»Ÿçš„æ ‡ç­¾ 372 å°†æä¾›é£å‘ï¼Œä»»ä½•ç©ºæ°”æ•°æ®è®¡ç®—æœºçš„æ ‡ç­¾ 203 å°†æä¾›æ°”å‹é«˜åº¦ ","date":"2022-07-12","objectID":"/arinc429/:2:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["BlockChain"],"content":"â€œå¦‚ä½•è¾¾æˆå…±è¯†\"æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€ä¸ªæœ€åŸºæœ¬çš„é—®é¢˜. åŒºå—é“¾ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ, è¿™ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„é—®é¢˜. å…±è¯†ç®—æ³•å¾ˆå¤š, PoWã€ BFT ã€POS .. ä»¥åŠçš„å˜ä½“, æ¯”å¦‚PBFTã€ IBFTã€Tendermintã€DPoSã€ HotStuff ç­‰. ä½†ä½œä¸ºåŒºå—é“¾çš„é¼»ç¥–çš„BTCå’Œå…ƒè€çš„ETHéƒ½ä½¿ç”¨çš„PoW, ETHæ­£åœ¨è¿‡åº¦åˆ°PoS, å¦å¤–æœ‰ä¸€äº›åŒºå—é“¾é‡‡ç”¨äº†PoSçš„ä¸€ä¸ªå˜ä½“DPoS.æˆ‘ä»¬ä¸»è¦å…³æ³¨è¿™å‡ ç§. ä»Šå¤©å…ˆè¯´è¯´PoW coming soonâ€¦ ","date":"2022-07-08","objectID":"/pow/:0:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["BlockChain"],"content":"å¯¹åˆ›ä¸–æ–‡ä»¶çš„ä»‹ç» åœ¨ https://yinhui1984.github.io/ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ /#ç¼–å†™åˆ›ä¸–æ–‡ä»¶ä¸­æåˆ°äº†genesis.json, å®ƒæ˜¯åŒºå—é“¾çš„åˆå§‹é…ç½®æ–‡ä»¶, ç§°ä¸ºåˆ›ä¸–æ–‡ä»¶, åŒºå—é“¾ä¸­çš„ç¬¬ä¸€ä¸ªå—(Block)éœ€è¦ç”¨å®ƒæ¥è¿›è¡Œç”Ÿæˆ. è¿™ä¸ªå—ç§°ä¸ºåˆ›ä¸–å— ","date":"2022-07-06","objectID":"/genesis.json/:0:0","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Genesis struct åœ¨go-ethereumä¸­å®šä¹‰å¦‚ä¸‹: //go-ethereum-1.10.20/params/config.go type Genesis struct { Config *params.ChainConfig `json:\"config\"` Nonce uint64 `json:\"nonce\"` Timestamp uint64 `json:\"timestamp\"` ExtraData []byte `json:\"extraData\"` GasLimit uint64 `json:\"gasLimit\" gencodec:\"required\"` Difficulty *big.Int `json:\"difficulty\" gencodec:\"required\"` Mixhash common.Hash `json:\"mixHash\"` Coinbase common.Address `json:\"coinbase\"` Alloc GenesisAlloc `json:\"alloc\" gencodec:\"required\"` // These fields are used for consensus tests. Please don't use them // in actual genesis blocks. Number uint64 `json:\"number\"` GasUsed uint64 `json:\"gasUsed\"` ParentHash common.Hash `json:\"parentHash\"` BaseFee *big.Int `json:\"baseFeePerGas\"` } å…¶ä¸­ Configå­—æ®µ: //go-ethereum-1.10.20/params/config.go // ChainConfig is the core config which determines the blockchain settings. // // ChainConfig is stored in the database on a per block basis. This means // that any network, identified by its genesis block, can have its own // set of configuration options. type ChainConfig struct { ChainID *big.Int `json:\"chainId\"` // chainId identifies the current chain and is used for replay protection HomesteadBlock *big.Int `json:\"homesteadBlock,omitempty\"` // Homestead switch block (nil = no fork, 0 = already homestead) DAOForkBlock *big.Int `json:\"daoForkBlock,omitempty\"` // TheDAO hard-fork switch block (nil = no fork) DAOForkSupport bool `json:\"daoForkSupport,omitempty\"` // Whether the nodes supports or opposes the DAO hard-fork // EIP150 implements the Gas price changes (https://github.com/ethereum/EIPs/issues/150) EIP150Block *big.Int `json:\"eip150Block,omitempty\"` // EIP150 HF block (nil = no fork) EIP150Hash common.Hash `json:\"eip150Hash,omitempty\"` // EIP150 HF hash (needed for header only clients as only gas pricing changed) EIP155Block *big.Int `json:\"eip155Block,omitempty\"` // EIP155 HF block EIP158Block *big.Int `json:\"eip158Block,omitempty\"` // EIP158 HF block ByzantiumBlock *big.Int `json:\"byzantiumBlock,omitempty\"` // Byzantium switch block (nil = no fork, 0 = already on byzantium) ConstantinopleBlock *big.Int `json:\"constantinopleBlock,omitempty\"` // Constantinople switch block (nil = no fork, 0 = already activated) PetersburgBlock *big.Int `json:\"petersburgBlock,omitempty\"` // Petersburg switch block (nil = same as Constantinople) IstanbulBlock *big.Int `json:\"istanbulBlock,omitempty\"` // Istanbul switch block (nil = no fork, 0 = already on istanbul) MuirGlacierBlock *big.Int `json:\"muirGlacierBlock,omitempty\"` // Eip-2384 (bomb delay) switch block (nil = no fork, 0 = already activated) BerlinBlock *big.Int `json:\"berlinBlock,omitempty\"` // Berlin switch block (nil = no fork, 0 = already on berlin) LondonBlock *big.Int `json:\"londonBlock,omitempty\"` // London switch block (nil = no fork, 0 = already on london) ArrowGlacierBlock *big.Int `json:\"arrowGlacierBlock,omitempty\"` // Eip-4345 (bomb delay) switch block (nil = no fork, 0 = already activated) GrayGlacierBlock *big.Int `json:\"grayGlacierBlock,omitempty\"` // Eip-5133 (bomb delay) switch block (nil = no fork, 0 = already activated) MergeNetsplitBlock *big.Int `json:\"mergeNetsplitBlock,omitempty\"` // Virtual fork after The Merge to use as a network splitter // TerminalTotalDifficulty is the amount of total difficulty reached by // the network that triggers the consensus upgrade. TerminalTotalDifficulty *big.Int `json:\"terminalTotalDifficulty,omitempty\"` // Various consensus engines Ethash *EthashConfig `json:\"ethash,omitempty\"` Clique *CliqueConfig `json:\"clique,omitempty\"` } ","date":"2022-07-06","objectID":"/genesis.json/:1:0","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"ChainID åŒºå—é“¾ID, æ¯ä¸€ä¸ªå¯¹å¤–å…¬å¼€çš„é“¾IDæ˜¯å”¯ä¸€çš„, è¿™ä¸ªIDå¯ä»¥åœ¨https://chainlist.orgä¸Šè¿›è¡ŒæŸ¥è¯¢å’Œç”³è¯· ä¹‹æ‰€ä»¥åŠ è¿™æ ·ä¸€ä¸ªChainIDæ˜¯ä¸ºäº†é˜²æ­¢\"é‡æ”¾æ”»å‡»\":æ˜¯åœ¨ä¸€ä¸ªåŒºå—é“¾ä¸Šè¿›è¡Œäº¤æ˜“ï¼Œå¹¶æ¶æ„æˆ–æ¬ºè¯ˆæ€§åœ°åœ¨å¦ä¸€ä¸ªåŒºå—é“¾ä¸Šé‡å¤è¯¥äº¤æ˜“. å‚è€ƒè¿™é‡ŒEIP155 æˆ–è¿™é‡Œ EIP : Ethereum Improvement Proposals ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ ","date":"2022-07-06","objectID":"/genesis.json/:1:1","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"HomesteadBlock HomesteadBlock ä»¥åŠåé¢çš„å„ç§xxxBlockéƒ½æ˜¯æŒ‡çš„æ˜¯ETHçš„ç¡¬åˆ†å‰é«˜åº¦. å…³äºåˆ†å‰,å‚è€ƒè¿™é‡Œ è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸»ç½‘çš„åˆ†å‰å†å² : https://ethereum.org/en/history/ å¯¹äºæ–°å»ºæµ‹è¯•ç½‘è€Œè¨€, åº”è¯¥è®¾ç½®ä¸º0 , è¡¨ç¤ºä½ æ²¡æœ‰åˆ†å‰ ","date":"2022-07-06","objectID":"/genesis.json/:1:2","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"TerminalTotalDifficulty TTD, ç»ˆç«¯æ€»éš¾åº¦, ç½‘ç»œè¾¾åˆ°çš„æ€»éš¾åº¦ æœ€è¿‘æåˆ°TTDçš„ä¸€ä¸ªæ–°é—»æ˜¯ETHå°†åœ¨Ropstenæµ‹è¯•ç½‘çš„TTDè¾¾åˆ°ä¸€ä¸ªå€¼æ—¶è§¦å‘é“¾ä¸Šåˆå¹¶, ä»¥å°†å…¶POW(å·¥ä½œé‡è¯æ˜)å‡çº§ä¸ºPOS(æƒç›Šè¯æ˜, proof-of-stake) ","date":"2022-07-06","objectID":"/genesis.json/:1:3","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Ethash Ethashæ˜¯Ethereumä½¿ç”¨çš„POWç®—æ³•ã€‚è¿™æ˜¯ç›®å‰ä¸»ç½‘ä½¿ç”¨çš„ç®—æ³•. å…·ä½“å‚è€ƒ https://ethereum.org/en/developers/docs/consensus-mechanisms/pow/mining-algorithms/ å’Œ https://ethereum.org/en/developers/docs/consensus-mechanisms/pow/mining-algorithms/ethash/ ä»¥åŠ https://ethereum.stackexchange.com/questions/14/what-proof-of-work-function-does-ethereum-use ","date":"2022-07-06","objectID":"/genesis.json/:1:4","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Clique Clique [/kliËk/] æ˜¯æµ‹è¯•ç½‘ä½¿ç”¨çš„æƒç›Šè¯æ˜POS ç®—æ³•, ä¸»ç½‘ä¸€ç›´åœ¨åŠªåŠ›å°½å¿«åˆ‡æ¢åˆ°POS å…·ä½“å‚è€ƒè¿™é‡Œ https://ethereum.org/en/developers/docs/consensus-mechanisms/pos/ ","date":"2022-07-06","objectID":"/genesis.json/:1:5","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Nonce å’Œ Mixhash Nonceæ˜¯ä¸€ä¸ª64ä½çš„å“ˆå¸Œå€¼, mixhashå­—æ®µåŒ…å«ä¸€ä¸ª256ä½çš„å“ˆå¸Œå€¼ï¼Œä¸€æ—¦ä¸nonceç»“åˆï¼Œå°±å¯ä»¥ç”¨æ¥è¯æ˜ä¸ºäº†åˆ›å»ºè¿™ä¸ªåŒºå—ï¼Œå·²ç»èŠ±è´¹äº†è¶³å¤Ÿçš„ç®—åŠ›. åé¢æç¯‡åšå®¢ä¸“é—¨æ¥è®²å·¥ä½œé‡è¯æ˜ ","date":"2022-07-06","objectID":"/genesis.json/:1:6","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Timestamp Unixæ—¶é—´æˆ³ ã€‚åˆ©ç”¨å—ä¸å—ä¹‹é—´çš„æ—¶é—´æˆ³æ¥è°ƒæ•´éš¾åº¦, ä»¥ä¿è¯å‡ºå—æ—¶é—´çš„ç¨³å®šæ€§. æœ€åä¸¤ä¸ªå—ä¹‹é—´çš„è¾ƒå°å‘¨æœŸå¯¼è‡´éš¾åº¦çº§åˆ«å¢åŠ ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„è®¡ç®—æ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ªæœ‰æ•ˆå—ã€‚å¦‚æœå‘¨æœŸå¤ªå¤§ï¼Œåˆ™éš¾åº¦å’Œä¸‹ä¸€ä¸ªåŒºå—çš„é¢„æœŸæ—¶é—´ä¼šé™ä½ã€‚æ—¶é—´æˆ³è¿˜å…è®¸éªŒè¯é“¾ä¸­å—çš„é¡ºåº. ","date":"2022-07-06","objectID":"/genesis.json/:1:7","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"ExtraData é¢å¤–æ•°æ®. æƒ³å†™å…¥åŒºå—é“¾çš„ä»»æ„æ•°æ®, ä½†åªæœ‰32 ä¸ªå­—èŠ‚ ","date":"2022-07-06","objectID":"/genesis.json/:1:8","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"GasLimit æ¯ä¸ªåŒºå—çš„Gasæ”¯å‡ºé™é¢ ","date":"2022-07-06","objectID":"/genesis.json/:1:9","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Difficulty éš¾åº¦. å®ƒä»£è¡¨äº†è¯æ˜PoWæ‰€éœ€çš„å“ˆå¸Œå€¼çš„éš¾åº¦ç­‰çº§ã€‚ å®ƒå®šä¹‰äº†æŒ–çŸ¿ç›®æ ‡ï¼Œå¯ä»¥æ ¹æ®å‰ä¸€ä¸ªåŒºå—çš„éš¾åº¦çº§åˆ«å’Œæ—¶é—´æˆ³æ¥è®¡ç®—ã€‚éš¾åº¦è¶Šé«˜ï¼ŒçŸ¿å·¥ä¸ºäº†å‘ç°æœ‰æ•ˆåŒºå—å¿…é¡»æ‰§è¡Œçš„ç»Ÿè®¡è®¡ç®—å°±è¶Šå¤šã€‚è¯¥å€¼ç”¨äºæ§åˆ¶åŒºå—é“¾çš„å‡ºå—æ—¶é—´ï¼Œä½¿å‡ºå—é¢‘ç‡ä¿æŒåœ¨ç›®æ ‡èŒƒå›´å†… ","date":"2022-07-06","objectID":"/genesis.json/:1:10","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Coinbase è¿™æ˜¯ä¸€ä¸ª160ä½çš„åœ°å€ï¼ŒæŒ–çŸ¿æˆåŠŸåï¼ŒæŒ–çŸ¿å¥–åŠ±å°±ä¼šå‘é€åˆ°è¿™é‡Œã€‚ æœ‰äº›åœ°æ–¹ç§°ä¹‹ä¸º Etherbase, æ¯”å¦‚ miner.setEtherbase(personal.listAccounts[0]) ","date":"2022-07-06","objectID":"/genesis.json/:1:11","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"alloc è¿™ä¸ªå‚æ•°åŒ…å«é¢„å…ˆåˆ†é…çš„é’±åŒ…å’Œä½™é¢åˆ—è¡¨. åˆå§‹åŒ–åŒºå—é“¾çš„æ—¶å€™, è¿™ä¸ªå‚æ•°å¿…é¡»è¢«å¡«å†™, å¦åˆ™æ²¡é’±æ”¯ä»˜æŒ–çŸ¿è´¹ç”¨, äº§ç”Ÿä¸äº†å—. ","date":"2022-07-06","objectID":"/genesis.json/:1:12","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"Number, GasUsed, ParentHash, BaseFee // These fields are used for consensus tests. Please don't use them // in actual genesis blocks. ","date":"2022-07-06","objectID":"/genesis.json/:1:13","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["BlockChain"],"content":"ä»‹ç»äº†è°ƒç”¨æ™ºèƒ½åˆçº¦ä¸­\"è¯»æ–¹æ³•\"ä¸\"å†™æ–¹æ³•\"çš„åŒºåˆ« ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:0:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["BlockChain"],"content":"æ–¹æ³•(å‡½æ•°)çš„åˆ†ç±» æ™ºèƒ½åˆçº¦ä¸­çš„æ–¹æ³•å¯ä»¥ç²—æš´çš„åˆ†ä¸ºä¸¤ç±»: ä¸ä¼šæ”¹å˜è™šæ‹ŸæœºçŠ¶æ€çš„æ–¹æ³• ä¼šæ”¹å˜è™šæ‹ŸæœºçŠ¶æ€çš„æ–¹æ³• å‡è®¾æˆ‘ä»¬å°†ä»–ä»¬ç§°ä¸º\"è¯»æ–¹æ³•\"å’Œ\"å†™æ–¹æ³•\", é‚£ä¹ˆè¯»æ–¹æ³•è€Œè¨€, å…¶æ˜¯ä¸ä¼šåˆ›å»ºäº¤æ˜“å’ŒèŠ±è´¹GASçš„, æ˜¯å…è´¹çš„. å¯¹äºå†™æ–¹æ³•è€Œè¨€, éœ€è¦æ”¶å–â€™æ‰‹ç»­è´¹â€™è¿›è¡ŒæŒ–çŸ¿çš„. å…³é”®å­— æè¿° æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€? pure ä¸è¯»æ•°æ®, ä¹Ÿä¸å†™æ•°æ® NO view è¯»æ•°æ®, ä½†ä¸å†™æ•°æ® NO payable æ”¯ä»˜ä»¥å¤ª, è‚¯å®šå†™æ•°æ® YES æœªæ˜ç¡®æŒ‡ç¤ºçš„ å…¶å®ƒå¯èƒ½å†™æ•°æ®çš„ YES ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:1:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["BlockChain"],"content":"Web3.jsçš„ call() ä¸Send() å¯¹äºä¸Šé¢ä¸¤ç±»æ–¹æ³•, Web3.jsä¸­åˆ†åˆ«å¯¹åº”Callæ–¹æ³•å’ŒSendæ–¹æ³•æ¥è¿›è¡Œè°ƒç”¨ åˆ›å»ºäº¤æ˜“ æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€ Call() NO NO Send() YES YES å®é™…ä¸Šä»è¯­æ³•å±‚é¢ä¸Šè€Œè¨€, æ— è®ºæ˜¯è¯»æ–¹æ³•è¿˜æ˜¯å†™æ–¹æ³•, éƒ½å¯ä»¥è°ƒç”¨ call , ä½†å¯¹äºå†™æ–¹æ³•, è°ƒç”¨callè™šæ‹ŸæœºçŠ¶æ€å¹¶ä¸ä¼šæ”¹å˜, å¹¶ä¸”ä¸ä¼šæŠ¥é”™. ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:2:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["BlockChain"],"content":"ä¸¾ä¾‹ // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract temp { int private counter; function add() public { counter ++; } function get() public view returns(int){ return counter; } } è°ƒç”¨ä»£ç  const base = require('./base'); const c = base.initContract('temp'); async function test(){ await c.methods.get().call().then(x=\u003e{ console.log(\"current value:\", x); }) await c.methods.add().call() await c.methods.get().call().then(x=\u003e{ console.log(\"after call add(): current value:\", x); }) let accounts = await base.web3Instance.eth.getAccounts(); await c.methods.add().send({from: accounts[0], gas: 3000000}) await c.methods.get().call().then(x=\u003e{ console.log(\"after send add(): current value:\", x); }) } test() è¾“å‡º current value: 0 after call add(): current value: 0 after send add(): current value: 1 å¯ä»¥çœ‹åˆ°ä½¿ç”¨ call è°ƒç”¨ add()å å€¼å¹¶æ²¡æœ‰å˜, è€Œç”¨ sendè°ƒç”¨add()å, å€¼è¢«ç´¯åŠ 1 ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:3:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["BlockChain"],"content":"web3.py web3.py ä¸­å¯¹åº”çš„æ˜¯ call()å’Œtransact() ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:4:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["BlockChain"],"content":"è®©è‡ªå·±ä½¿ç”¨gethè¿è¡Œçš„åŒºå—é“¾åƒGancheä¸€æ ·å¯ä»¥AUTOMINING åœ¨åšæ™ºèƒ½åˆçº¦å¼€å‘è¿‡ç¨‹ä¸­, å¦‚æœä½¿ç”¨Gancheçš„è¯, å¯ä»¥å‘ç°å…¶æœ‰ä¸€ä¸ªéå¸¸çˆ½çš„åŠŸèƒ½:AUTOMINING è‡ªåŠ¨æŒ–çŸ¿ æˆ–æŒ‰éœ€æŒ–çŸ¿, ä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦æŒ–çŸ¿çš„æ—¶å€™å°±åˆ«æŒ–, å¦åˆ™éå¸¸è€—ç”µè„‘èµ„æº. å¦‚æœæˆ‘ä»¬æ˜¯è‡ªå·±ä½¿ç”¨gethè¿è¡Œçš„æµ‹è¯•é“¾, åˆ™æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½, éœ€è¦æ‰‹åŠ¨attachåˆ°æ§åˆ¶å°è¿›è¡Œminer.start()å’Œminer.stop, éå¸¸ä¸æ–¹ä¾¿. ","date":"2022-07-03","objectID":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/:0:0","tags":["web3.py","python"],"title":"ä½¿ç”¨web3.pyå®ç°åŒºå—é“¾æŒ‰éœ€æŒ–çŸ¿","uri":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/"},{"categories":["BlockChain"],"content":"Web3.js å¦‚æœä½¿ç”¨Web3.js,è²Œä¼¼æ²¡æœ‰çœ‹åˆ°mineræ§åˆ¶çš„API, ä¸è¿‡Gitubä¸Šæœ‰ä¸€ä¸ªæ‰©å±•, å¯ä»¥å®ç° https://github.com/DecentricCorp/web3admin åˆ©ç”¨è¿™ä¸ªæ‰©å±•å¯ä»¥å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½. ","date":"2022-07-03","objectID":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/:1:0","tags":["web3.py","python"],"title":"ä½¿ç”¨web3.pyå®ç°åŒºå—é“¾æŒ‰éœ€æŒ–çŸ¿","uri":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/"},{"categories":["BlockChain"],"content":"Web3.py Web3.pyè‡ªå¸¦mineræ§åˆ¶çš„API, è¿™å°±æ¯”è¾ƒæ–¹ä¾¿äº†. æ¯éš”å‡ ç§’è½®è¯¢ä¸€ä¸‹æ˜¯å¦æœ‰pendingçš„block, å¦‚æœæœ‰åˆ™æŒ–, å¦åˆ™åœæ­¢æŒ–çŸ¿ è„šæœ¬å¦‚ä¸‹ #!/usr/bin/env python3 import os import time from web3 import Web3 # pip3 install web3 # æŒ‰éœ€æŒ–çŸ¿ #ä½¿ç”¨å‰è¯·å…ˆä¿®æ”¹provide w3 = Web3(Web3.IPCProvider('../mychain/data/geth.ipc')) num_threads = os.cpu_count() def main(): # kill this script os.system(\"killall -9 python \u003e /dev/null 2\u003e\u00261\") print('Connected to Ethereum client: %s' % w3.clientVersion) print(\"å¯åŠ¨è‡ªåŠ¨æŒ–çŸ¿...\") while True: time.sleep(3) if w3.eth.getBlock('pending').transactions: print( time.strftime(\"%H:%M:%S\", time.localtime()) + \":Mining for pending transactions: %s\" % w3.eth.getBlock( 'pending').transactions) w3.geth.miner.start(num_threads) else: print(time.strftime(\"%H:%M:%S\", time.localtime()) + ':No pending transactions, sleeping...', end='\\r') w3.geth.miner.stop() if __name__ == \"__main__\": try: main() except KeyboardInterrupt: print(\"\\n\\nCtrl+C, bye!\") w3.geth.miner.stop() exit(0) except Exception as e: print(\"å‘ç”Ÿé”™è¯¯: %s\" % e) exit(0) è¿è¡Œæ—¶çš„æ ·å­ Connected to Ethereum client: Geth/v1.10.16-stable/darwin-amd64/go1.17.6 å¯åŠ¨è‡ªåŠ¨æŒ–çŸ¿... 13:24:42:Mining for pending transactions: [HexBytes('0x0cecdc430a73adc915d9944798e71735a48940b90e38965a3e4a5c8db6b48cb5')] 13:24:57:No pending transactions, sleeping... ","date":"2022-07-03","objectID":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/:2:0","tags":["web3.py","python"],"title":"ä½¿ç”¨web3.pyå®ç°åŒºå—é“¾æŒ‰éœ€æŒ–çŸ¿","uri":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/"},{"categories":["BlockChain"],"content":"å‰é¢åœ¨ ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶ ä¸­ ä½¿ç”¨ truffleå¥—ä»¶ä»é›¶å¼€å§‹æ­å»ºç¯å¢ƒ, ç¼–å†™ã€éƒ¨ç½²ã€æµ‹è¯•å’Œè°ƒç”¨æ™ºèƒ½åˆçº¦, è¿™æ¬¡æˆ‘ä»¬åªä½¿ç”¨ä¸€äº›å‘½ä»¤è¡Œå·¥å…·æ¥è¿›è¡Œ\"æ‰‹å·¥æ‰“é€ \" é…å¥—ä»£ç : https://github.com/yinhui1984/stepByStepSmartContract ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:0:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"åˆ›å»ºæµ‹è¯•é“¾ è¿˜æ˜¯ä»¥ETHä¸ºä¾‹, ä½¿ç”¨ Go Ethereum https://geth.ethereum.org æ¥åˆ›å»º ä½¿ç”¨POWå…±è¯†ç®—æ³•çš„ä¸€ä¸ªç®€å•ç§æœ‰é“¾. ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"å®‰è£…geth å®˜æ–¹æ•™ç¨‹ https://geth.ethereum.org/docs/install-and-build/installing-geth æˆ–è€…è‡ªå·±ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£… https://geth.ethereum.org/downloads/ å®‰è£…å®Œæˆå, è¿è¡Œä¸€ä¸‹versionè¡¨ç¤ºæˆåŠŸ OSX MP16 ~/Downloads/privateNetwork â¯ geth version Geth Version: 1.10.16-stable Architecture: amd64 Go Version: go1.17.6 Operating System: darwin GOPATH= GOROOT=go ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:1","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"åˆ›å»ºä¸€ä¸ªè´¦æˆ· ä¸‹é¢çš„åˆ›ä¸–æ–‡ä»¶ä¸­çš„coinbaseä¼šç”¨åˆ°è¿™ä¸ªè´¦æˆ·, ç”¨æ¥æ¥æ”¶æŒ–çŸ¿çš„æ”¶å…¥ ä¸ºæ–¹ä¾¿èµ·è§, å°†è´¦æˆ·å¯†ç å†™åˆ°password.txt , å½“ç„¶è¿™æ˜¯ä¸å®‰å…¨çš„è¡Œä¸º. echo 123456 \u003e password.txt æ–°å»ºè´¦æˆ·: geth --datadir ./data/ account new --password ./password.txt å…¶ä¸­çš„datadiræ˜¯æ•°æ®å­˜å‚¨ç›®å½•, åé¢çš„æ•°æ®æ–‡ä»¶éƒ½å°†å­˜åˆ°è¿™ä¸ªç›®å½•ä¸­ OSX MP16 ~/Downloads/privateNetwork â¯ geth --datadir ./data/ account new --password ./password.txt INFO [07-01|10:10:34.007] Maximum peer count ETH=50 LES=0 total=50 Your new key was generated Public address of the key: 0x79dF0D3c23f22370881dC92aF524A1D5E52e3552 Path of the secret key file: data/keystore/UTC--2022-07-01T02-10-34.008109000Z--79df0d3c23f22370881dc92af524a1d5e52e3552 - You can share your public address with anyone. Others need it to interact with you. - You must NEVER share the secret key with anyone! The key controls access to your funds! - You must BACKUP your key file! Without the key, it's impossible to access account funds! - You must REMEMBER your password! Without the password, it's impossible to decrypt the key! æ‰“å°å†…å®¹ä¸­çš„ 0x79dF0D3c23f22370881dC92aF524A1D5E52e3552æ˜¯å…¬é’¥, ä¹Ÿæ˜¯æˆ‘ä»¬çš„è´¦æˆ·åœ°å€ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:2","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"æ‰¾ä¸€ä¸ªç½‘ç»œID chainIdæˆ–è€…network ID ç”¨äºéš”ç¦»ä»¥å¤ªåŠå¯¹ç­‰ç½‘ç»œã€‚åªæœ‰å½“ä¸¤ä¸ªå¯¹ç­‰ç‚¹ä½¿ç”¨ç›¸åŒçš„åˆ›ä¸–å—å’Œç½‘ç»œ ID æ—¶ï¼ŒåŒºå—é“¾èŠ‚ç‚¹ä¹‹é—´æ‰ä¼šå‘ç”Ÿè¿æ¥ã€‚ä½¿ç”¨ â€“networkid å‘½ä»¤è¡Œé€‰é¡¹è®¾ç½® geth ä½¿ç”¨çš„ç½‘ç»œ IDã€‚ ä»¥å¤ªç½‘ä¸»ç½‘ ID ä¸º 1ã€‚å¦‚æœæ‚¨æä¾›ä¸ä¸»ç½‘ä¸åŒçš„è‡ªå®šä¹‰ç½‘ç»œ IDï¼Œæ‚¨çš„èŠ‚ç‚¹å°†ä¸ä¼šè¿æ¥åˆ°å…¶ä»–èŠ‚ç‚¹å¹¶å½¢æˆä¸“ç”¨ç½‘ç»œã€‚å¦‚æœæ‚¨æ‰“ç®—åœ¨ Internet ä¸Šè¿æ¥åˆ°æ‚¨çš„ç§æœ‰é“¾ï¼Œæœ€å¥½é€‰æ‹©ä¸€ä¸ªå°šæœªä½¿ç”¨çš„ç½‘ç»œ IDã€‚æ‚¨å¯ä»¥åœ¨ https://chainid.network æ‰¾åˆ°ç”±ç¤¾åŒºè¿è¡Œçš„ä»¥å¤ªåŠç½‘ç»œæ³¨å†Œè¡¨ã€‚ è¿™é‡Œæˆ‘ä»¬åªæ˜¯åœ¨æœ¬åœ°è¿è¡Œ, éšä¾¿ä½¿ç”¨ä¸€ä¸ªIDå°±å¯ä»¥äº†, æ¯”å¦‚1235 ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:3","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"ç¼–å†™\"åˆ›ä¸–æ–‡ä»¶\" ä¸€ä¸ªæ–°çš„åŒºå—é“¾åœ¨ç”Ÿæˆç¬¬ä¸€ä¸ªåŒºå—, ä¹Ÿå°±æ˜¯åˆ›ä¸–å—çš„æ—¶å€™, éœ€è¦ä»åˆ›ä¸–æ–‡ä»¶æ¥è¿›è¡Œç”Ÿæˆ touch genesis.json { \"nonce\": \"0x0000000000000042\", \"timestamp\": \"0x00\", \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\", \"extraData\": \"0x00\", \"gasLimit\": \"0x8000000\", \"difficulty\": \"0x0400\", \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\", \"coinbase\": \"0x79dF0D3c23f22370881dC92aF524A1D5E52e3552\", \"alloc\": { \"0x79dF0D3c23f22370881dC92aF524A1D5E52e3552\": { \"balance\": \"1000000000000000000000\" } }, \"config\": { \"chainId\": 1235, \"homesteadBlock\": 0, \"byzantiumBlock\": 0, \"constantinopleBlock\": 0, \"eip150Block\": 0, \"eip155Block\": 0, \"eip158Block\": 0 } } å…³äºåˆ›ä¸–æ–‡ä»¶ä¸­çš„å„ä¸ªå­—æ®µçš„å«ä¹‰, åé¢ä¼šæœ‰ä¸€ç¯‡ä¸“é—¨çš„åšå®¢æ¥è®² æ³¨æ„: å°†coinbase ä»¥åŠ allocä¸­çš„åœ°å€ä¿®æ”¹ä¸ºä¸Šé¢åˆ›å»ºè´¦æˆ·æ—¶ä½ æ‰€å¾—åˆ°çš„åœ°å€ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:4","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"åˆå§‹åŒ–åŒºå—é“¾ geth --datadir ./data init ./genesis.json è¾“å‡º INFO [07-01|10:50:50.915] Maximum peer count ETH=50 LES=0 total=50 INFO [07-01|10:50:50.919] Set global gas cap cap=50,000,000 INFO [07-01|10:50:50.919] Allocated cache and file handles database=/Users/zhouyinhui/Downloads/privateNetwork/data/geth/chaindata cache=16.00MiB handles=16 INFO [07-01|10:50:51.007] Writing custom genesis block INFO [07-01|10:50:51.010] Persisted trie from memory database nodes=0 size=0.00B time=\"21.005Âµs\" gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [07-01|10:50:51.011] Successfully wrote genesis state database=chaindata hash=0ca0fb..b61b69 INFO [07-01|10:50:51.011] Allocated cache and file handles database=/Users/zhouyinhui/Downloads/privateNetwork/data/geth/lightchaindata cache=16.00MiB handles=16 INFO [07-01|10:50:51.090] Writing custom genesis block INFO [07-01|10:50:51.090] Persisted trie from memory database nodes=0 size=0.00B time=\"2.71Âµs\" gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [07-01|10:50:51.091] Successfully wrote genesis state database=lightchaindata hash=0ca0fb..b61b69 OSX MP16 ~/Downloads/privateNetwork â¯ ç”Ÿæˆçš„æ–‡ä»¶åœ¨ ./data/gethä¸‹ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:5","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"è¿è¡ŒåŒºå—é“¾ geth --datadir ./data/ --networkid 1235 --port 8545 --http --http.api 'admin,eth,miner,net,txpool,personal,web3' --mine --allow-insecure-unlock --unlock '0x79dF0D3c23f22370881dC92aF524A1D5E52e3552' --password password.txt --datadir æ•°æ®æ–‡ä»¶ç›®å½• --networkid ç½‘ç»œID --port RPCç«¯å£ --http å¯ç”¨http-rpcæœåŠ¡ --http.apiæä¾›é‚£äº›API --mine å¯ç”¨æŒ–çŸ¿ --allow-insecure-unlock å½“è´¦æˆ·ç›¸å…³çš„RPCè¢«httpæš´éœ²æ—¶ï¼Œå…è®¸ä¸å®‰å…¨çš„è´¦æˆ·è§£é” --unlock è§£é”è´¦æˆ· (å¤šä¸ªè´¦æˆ·ç”¨é€—å·åˆ†å‰²) --password è§£é”è´¦æˆ·ç”¨åˆ°çš„å¯†ç æ–‡ä»¶ æˆåŠŸè¿è¡Œå, ä¼šçœ‹åˆ°å¾ˆå¤šæ‰“å°ä¿¡æ¯, å…¶ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ä¸‹é¢è¿™ä¸¤è¡Œ, ä¸€ä¸ªæ˜¯ipc, ä¸€ä¸ªæ˜¯http server, æˆ‘ä»¬ä¼šä½¿ç”¨ä»–ä»¬æ¥å’Œæˆ‘ä»¬çš„åŒºå—é“¾è¿›è¡Œé€šè®¯ INFO [07-01|11:08:58.245] IPC endpoint opened url=/Users/zhouyinhui/Downloads/privateNetwork/data/geth.ipc INFO [07-01|11:08:58.245] HTTP server started endpoint=127.0.0.1:8545 prefix= cors= vhosts=localhost å¦å¤–ä¸€æ¡æ˜¯ æˆ‘ä»¬ä½œä¸ºåŒºå—é“¾ä¸­çš„å¯¹ç­‰èŠ‚ç‚¹PEER NODEæ—¶çš„ä¿¡æ¯, è¿™é‡Œæˆ‘ä»¬è¿˜ç”¨ä¸åˆ° Started P2P networking self=enode://de2537c5f309be45bcb2d011cd172138db40295f74a288b07e03635e2194e7c2987cf97c9d295dc502053d9f7adda11052597c7f1bc5a5ec3d8182777138a0f1@127.0.0.1:8545 è¯·ä¿æŒåŒºå—é“¾åœ¨åå°è¿è¡Œ, åé¢çš„ä»£ç éƒ½éœ€è¦ç”¨åˆ° ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:2:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"ä¸æµ‹è¯•é“¾è¿›è¡Œäº¤äº’ attachåˆ°æµ‹è¯•é“¾, å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªjs console, å’Œtruffle consoleåŠŸèƒ½ä¸€æ · æ–¹å¼1, é€šè¿‡IPCè¿›è¡Œattach geth attach /Users/zhouyinhui/Downloads/privateNetwork/data/geth.ipc OSX MP16 ~/blockchain/private_net/tempchain â¯ geth attach /Users/zhouyinhui/Downloads/privateNetwork/data/geth.ipc Welcome to the Geth JavaScript console! .... To exit, press ctrl-d or type exit \u003e eth.chainId() \"0x4d3\" \u003e \"0x4d3\" ä¹Ÿå°±æ˜¯ æˆ‘ä»¬çš„ 1235 å…¶ä¸­ *.ipc å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ æ–¹å¼2, é€šè¿‡httpæœåŠ¡è¿›è¡Œattach geth attach http://127.0.0.1:8545 ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:3:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"ä¸€é”®ç”Ÿæˆæµ‹è¯•é“¾ ä¸Šé¢é‚£äº›ç¹ççš„æ­¥éª¤å¯ä»¥ææˆä¸€ä¸ªè„šæœ¬, ä¸€é”®ç”Ÿæˆ, è¿™æ ·æ¥å¾—æ›´æ–¹ä¾¿ è„šæœ¬åœ¨è¿™é‡Œ: https://github.com/yinhui1984/stepByStepSmartContract/blob/main/autogen/autoGenChain.py (ç›´æ¥å°†ä»£ç è´´åˆ°è¿™é‡Œä¼šå¯¼è‡´GitHub Pages failed to build your siteÂ ğŸ˜‚) ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:4:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"ç¼–å†™æ™ºèƒ½åˆçº¦ æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ ä¸Šç¯‡åšå®¢ä¸­çš„æ™ºèƒ½åˆçº¦ mkdir ./contracts cd ./contracts touch Calculator.sol // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract Calculator { function add(int a, int b) public pure returns (int) { return a + b; } function subtract(int a, int b) public pure returns (int) { return a - b; } } ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:5:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"ç¼–è¯‘æ™ºèƒ½åˆçº¦ å¦‚æœä½ çš„ç”µè„‘ä¸Šæ²¡æœ‰solc, è¯·äº‹å…ˆå®‰è£…, å®ƒæ˜¯solidityçš„ç¼–è¯‘å™¨, å®˜æ–¹æ•™ç¨‹: https://docs.soliditylang.org/en/v0.8.15/installing-solidity.html#installing-solidity ç¼–è¯‘: solc --bin --abi -o ./build ./Calculator.sol --bin ç”Ÿæˆ16è¿›åˆ¶æ–‡ä»¶ --abiç”Ÿæˆabiæ–‡ä»¶ -oè¾“å‡ºç›®å½• å¯ä»¥å†™ä¸€ä¸ªMakefileæ¥å¹²è¿™ä¸ªäº‹æƒ…: all: solc --bin --abi --overwrite -o ./build ./Calculator.sol clean: rm -rf ./build/* OSX MP16 ~/Downloads/privateNetwork/contracts â¯ tree . â”œâ”€â”€ Calculator.sol â”œâ”€â”€ Makefile â””â”€â”€ build â”œâ”€â”€ Calculator.abi â””â”€â”€ Calculator.bin ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:6:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"éƒ¨ç½²æ™ºèƒ½åˆçº¦ æ–°å»ºä¸€ä¸ªnode.js é¡¹ç›®deploy mkdir -p deploy/ cd deploy/ npm init touch index.js å®‰è£…web3.js npm install web3 åœ¨index.jsä¸­åŠ å…¥å¦‚ä¸‹ä»£ç : const fs = require('fs'); const Web3 = require('web3'); const web3 = new Web3('http://127.0.0.1:8545'); const bytecode = fs.readFileSync('../build/Calculator.bin').toString(); const abi = JSON.parse(fs.readFileSync('../build/Calculator.abi').toString()); (async function () { const accounts = await web3.eth.getAccounts(); const calculator = new web3.eth.Contract(abi); calculator.deploy({ data: bytecode }).send({ from: accounts[0], }).then((deployment) =\u003e { console.log('Contract was deployed at the following address:'); console.log(deployment.options.address); }).catch((err) =\u003e { console.error(err); }); })(); æ³¨æ„, ä¸Šé¢çš„éƒ¨ç½²ä»£ç æ²¡æœ‰ä½¿ç”¨è´¦æˆ·çš„ç§é’¥, æ˜¯å› ä¸ºåœ¨å‰é¢çš„æ­¥éª¤ä¸­, è´¦æˆ·å·²ç»è§£é”äº† åœ¨éƒ¨ç½²ä¹‹å‰éœ€è¦å…ˆå¯åŠ¨æŒ–çŸ¿ OSX MP16 ~/Downloads/pri/mychain â¯ ./attach.sh ... \u003e miner.start() null \u003e eth.blockNumber 26 éƒ¨ç½²: OSX MP16 ~/Downloads/pri/c/d/deploy_js â¯ node ./index.js Contract was deployed at the following address: 0x1F55d61D5Aa8eC92FD1Da0f19FaC9D552A29DBBF éƒ¨ç½²æˆåŠŸ, åœæ‰æŒ–çŸ¿, å¦åˆ™ç”µè„‘å·¨çƒ«â€¦ \u003e miner.stop() null ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:7:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"è°ƒç”¨æ™ºèƒ½åˆçº¦ è°ƒç”¨æ™ºèƒ½åˆçº¦å°±å’Œ ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨truffleå¥—ä»¶ä¸­çš„ä¸€æ ·äº†, å¯ä»¥è·³è½¬åˆ°é‚£é‡Œè¿›è¡Œå‚è€ƒ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:8:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["BlockChain"],"content":"è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä½¿ç”¨traffleå¥—ä»¶ä»é›¶å¼€å§‹æ­å»ºç¯å¢ƒ, ç¼–å†™ã€éƒ¨ç½²ã€æµ‹è¯•å’Œè°ƒç”¨æ™ºèƒ½åˆçº¦ã€‚ é…å¥—ä»£ç åœ¨ https://github.com/yinhui1984/HelloTruffle ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:0:0","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"ä½¿ç”¨traffleå¥—ä»¶ ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:0","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"1. å®‰è£…node.js https://nodejs.org/en/ å®‰è£…å®Œæˆå, æŸ¥çœ‹æ˜¯å¦ç‰ˆæœ¬ä»¥ç¡®ä¿æˆåŠŸ npm -v node -v ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:1","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"2. å®‰è£…truffleå’ŒGanache truffleæ˜¯ä¸€å¥—æ™ºèƒ½åˆçº¦çš„å¼€å‘æµ‹è¯•ç¯å¢ƒ Ganacheç”¨äºåˆ›å»ºæµ‹è¯•é“¾(å¯ä»¥åˆ›å»ºETH FILECOINç­‰æµ‹è¯•é“¾), ç”¨æ¥è·‘è‡ªå·±åˆ›å»ºçš„åˆçº¦. https://trufflesuite.com ä½¿ç”¨npmå®‰è£…truffle npm install -g truffle å®‰è£…å®Œæˆå, æŸ¥çœ‹ç‰ˆæœ¬ä»¥ç¡®ä¿æˆåŠŸ truffle version å¦‚æœé‡åˆ°permission denied: truffle æ‰¾åˆ°truffleæ–‡ä»¶ ll /usr/local/bin/truffle å¯ä»¥çœ‹åˆ°å…¶è½¯è¿æ¥åˆ°cli.bundled.js Permissions Size User Date Modified Name lrwxr-xr-x 48 zhouyinhui 29 Jun 14:06 ï€– /usr/local/bin/truffle -\u003e ../lib/node_modules/truffle/build/cli.bundled.js ç»™è¿™ä¸ªjsåŠ ä¸Šæ‰§è¡Œæƒé™å³å¯ chmod +x /usr/local/lib/node_modules/truffle/build/cli.bundled.js å®‰è£…Ganache åˆ°è¿™é‡Œç›´æ¥ä¸‹è½½å³å¯ https://trufflesuite.com/ganache/ ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:2","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"3. ä½¿ç”¨truffleæ–°å»ºé¡¹ç›® æ–°å»ºä¸€ä¸ªç›®å½•, æ¯”å¦‚~/Downloads/truffleTest åˆ°è¿™ä¸ªç›®å½•ä¸‹ OSX MP16 ~/Downloads/truffleTest â¯ truffle init Starting init... ================ \u003e Copying project files to /Users/zhouyinhui/Downloads/truffleTest Init successful, sweet! Try our scaffold commands to get started: $ truffle create contract YourContractName # scaffold a contract $ truffle create test YourTestName # scaffold a test http://trufflesuite.com/docs å…¶æ–°å»ºäº†è¿™äº›æ–‡ä»¶ OSX MP16 ~/Downloads/truffleTest â¯ tree . â”œâ”€â”€ contracts â”‚Â â””â”€â”€ Migrations.sol â”œâ”€â”€ migrations â”‚Â â””â”€â”€ 1_initial_migration.js â”œâ”€â”€ test â””â”€â”€ truffle-config.js contractsæ–‡ä»¶å¤¹å­˜æ”¾åˆçº¦çš„åœ°æ–¹, åœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ªsolidityæºç æ–‡ä»¶, æ¯”å¦‚Calculator.sol touch ./contracts/Calculator.sol åœ¨Calculator.solä¸­æ·»åŠ å¦‚ä¸‹ä»£ç æ¥åšä¸ªåŠ å‡æ³• // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract Calculator { function add(int a, int b) public pure returns (int) { return a + b; } function subtract(int a, int b) public pure returns (int) { return a - b; } } å…¶ä¸­çš„pureè¡¨ç¤ºæ”¹å‡½æ•°æ—¢ä¸è¯»ä¹Ÿä¸å†™çŠ¶æ€æœºå˜é‡ https://hashnode.com/post/pure-vs-view-in-solidity-cl04tbzlh07kaudnv1ial1gio å¤åˆ¶ä¸Šé¢ä»£ç æ—¶æ³¨æ„ pragma solidity ^0.8.0;è¿™ä¸€è¡Œå’Œ trffle-config.jsä¸­çš„ä¸‹é¢çš„é…ç½®ç›¸åŒ¹é… // Configure your compilers compilers: { solc: { version: \"0.8.15\", //.... }, } pragma solidity ^0.8.0 è¡¨ç¤ºç¼–è¯‘å™¨ä½¿ç”¨0.8åˆ°0.9ç‰ˆæœ¬ä¹‹é—´çš„(ä¸åŒ…å«0.9), é‚£ä¹ˆtrffle-config.jsä¸­é…ç½®çš„ç¼–è¯‘å™¨ç‰ˆæœ¬è¦åœ¨è¿™ä¸ªèŒƒå›´å†… ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:3","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"4.ç¼–è¯‘ truffle compile OSX MP16 ~/Downloads/truffleTest â¯ truffle compile Compiling your contracts... =========================== \u003e Compiling ./contracts/Calculator.sol \u003e Artifacts written to /Users/zhouyinhui/Downloads/truffleTest/build/contracts \u003e Compiled successfully using: - solc: 0.8.15+commit.e14f2714.Emscripten.clang ç¼–è¯‘å®Œæˆå, ä¼šå°†ç»“æœæ”¾åˆ°buildç›®å½•ä¸‹: æˆ‘ä»¬è¿™é‡Œå…³å¿ƒçš„æ˜¯Calculator.json OSX MP16 ~/Downloads/truffleTest â¯ tree . â”œâ”€â”€ build â”‚Â â””â”€â”€ contracts â”‚Â â”œâ”€â”€ Calculator.json â”‚Â â””â”€â”€ Migrations.json â”œâ”€â”€ contracts â”‚Â â”œâ”€â”€ Calculator.sol â”‚Â â””â”€â”€ Migrations.sol â”œâ”€â”€ migrations â”‚Â â””â”€â”€ 1_initial_migration.js â”œâ”€â”€ test â””â”€â”€ truffle-config.js 5 directories, 6 files ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:4","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"5.éƒ¨ç½²åˆ°æµ‹è¯•é“¾ å¯åŠ¨æµ‹è¯•é“¾ å¯åŠ¨ ganache App, ç‚¹å‡»QUICKSTART å…¶å°±è‡ªåŠ¨åˆ›å»ºäº†ETHæµ‹è¯•é“¾, æŸ¥çœ‹çª—å£ä¸ŠåŠéƒ¨åˆ†æ˜¾ç¤ºçš„çš„RPC serverä¿¡æ¯, æ¯”å¦‚ HTTP://127.0.0.1:8545 ä¿®æ”¹ truffle-config.jsä¸­çš„éƒ¨ç½²é…ç½®, ä½¿å…¶ä¸ä¸Šé¢çš„RPC serverå‘åŒ¹é… networks: { //... development: { host: \"127.0.0.1\", // Localhost (default: none) port: 8545, // Standard Ethereum port (default: none) network_id: \"*\", // Any network (default: none) }, Note è¯·ä¿æŒganacheåœ¨åå°è¿è¡Œ, åé¢çš„ä»£ç éƒ½éœ€è¦è®¿é—®æµ‹è¯•é“¾ æ·»åŠ éƒ¨ç½²ä»£ç  touch migrations/2_deploy_contracts.js åœ¨2_deploy_contracts.jsä¸­åŠ å…¥å¦‚ä¸‹ä»£ç  var Calculator = artifacts.require(\"./Calculator.sol\"); module.exports = function(deployer) { deployer.deploy(Calculator); } éƒ¨ç½²åˆçº¦ è¿è¡Œ truffle migrate å‘½ä»¤è¿›è¡Œéƒ¨ç½² OSX MP16 ~/Downloads/truffleTest â¯ truffle migrate Compiling your contracts... =========================== \u003e Everything is up to date, there is nothing to compile. Starting migrations... ====================== \u003e Network name: 'development' \u003e Network id: 5777 \u003e Block gas limit: 6721975 (0x6691b7) 1_initial_migration.js ====================== Deploying 'Migrations' ---------------------- \u003e transaction hash: 0xc4b0bf65cbac8d1cf68b72fc6408bd443c18e6bf3e44c5985dede50b191a80d1 \u003e Blocks: 0 Seconds: 0 \u003e contract address: 0xe2fd5fA1303B9791417EF637AABd50aE9DB9Af44 \u003e block number: 1 \u003e block timestamp: 1656490514 \u003e account: 0xe149d5f732685669C9E494B233fDB4312d19b5cF \u003e balance: 99.99502292 \u003e gas used: 248854 (0x3cc16) \u003e gas price: 20 gwei \u003e value sent: 0 ETH \u003e total cost: 0.00497708 ETH \u003e Saving migration to chain. \u003e Saving artifacts ------------------------------------- \u003e Total cost: 0.00497708 ETH 2_deploy_contracts.js ===================== Deploying 'Calculator' ---------------------- \u003e transaction hash: 0xc8cce4b870d187dadf38353e6ef71aabd0751375a2f2b8c763ed4a35d8067a0c \u003e Blocks: 0 Seconds: 0 \u003e contract address: 0x6B62e4E253823FBC65E0B93d63ee149350158a18 \u003e block number: 3 \u003e block timestamp: 1656490515 \u003e account: 0xe149d5f732685669C9E494B233fDB4312d19b5cF \u003e balance: 99.98984578 \u003e gas used: 216344 (0x34d18) \u003e gas price: 20 gwei \u003e value sent: 0 ETH \u003e total cost: 0.00432688 ETH \u003e Saving migration to chain. \u003e Saving artifacts ------------------------------------- \u003e Total cost: 0.00432688 ETH Summary ======= \u003e Total deployments: 2 \u003e Final cost: 0.00930396 ETH ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:5","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"6. æµ‹è¯•åˆçº¦ ä½¿ç”¨truffle console æ‰‹åŠ¨è°ƒç”¨ è¿è¡Œ truffle console æ‰“å¼€æ§åˆ¶å° truffle(development)\u003e let cal = await Calculator.deployed() truffle(development)\u003e cal.add(1,2) BN { negative: 0, words: [ 3, \u003c1 empty item\u003e ], length: 1, red: null } truffle(development)\u003e cal.subtract(10, 2) BN { negative: 0, words: [ 8, \u003c1 empty item\u003e ], length: 1, red: null } åœ¨æ§åˆ¶å°ä¸­å¯ä»¥ä½¿ç”¨TABæŒ‰é”®æ¥æç¤ºæˆå‘˜å˜é‡æˆ–å‡½æ•° ä½¿ç”¨jsç¼–å†™å•å…ƒæµ‹è¯• touch test/testCalculator.test.js //testCalculator.test.js //å¼€å‘æ¡†æ¶å¯¼å…¥åˆçº¦ const Calculator = artifacts.require(\"Calculator\"); //æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ç”¨äºæµ‹è¯•çš„åˆçº¦ï¼Œç„¶åå°†è´¦æˆ·ä½œä¸ºåŒ…å«æ‰€æœ‰åœ°å€çš„å‚æ•°ä¼ é€’ã€‚ contract(\"Calculator\", accounts =\u003e { //itåŒ…å«å¯¹æˆ‘ä»¬è¦è¿è¡Œçš„æµ‹è¯•çš„ç®€çŸ­æè¿°ï¼Œ // å®ƒæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰æµ‹è¯•ç›¸å…³è„šæœ¬çš„å¼‚æ­¥å‡½æ•° it(\"should add two numbers\", async () =\u003e { //cal: å®šä¹‰å­˜å‚¨å·²éƒ¨ç½²åˆçº¦çš„å®ä¾‹ã€‚ const cal = await Calculator.deployed(); const result = await cal.add(4, 2); assert.equal(result.toNumber(), 6); }).timeout(10000); it(\"should subtract two numbers\", async () =\u003e { const cal = await Calculator.deployed(); const result = await cal.subtract(3, 2); assert.equal(result.toNumber(), 1); }).timeout(10000); }); è¿è¡Œ truffle test è·‘æµ‹è¯• OSX MP16 ~/Downloads/truffleTest â¯ truffle test Using network 'development'. Compiling your contracts... =========================== \u003e Everything is up to date, there is nothing to compile. Contract: Calculator âœ” should add two numbers âœ” should subtract two numbers (48ms) 2 passing (126ms) ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:6","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"7. demoAppè°ƒç”¨åˆçº¦ ä½¿ç”¨web3.js æˆ‘ä»¬ä½¿ç”¨web3.js åˆ›å»ºä¸€ä¸ªappæ¥å®é™…ä½¿ç”¨æˆ‘ä»¬çš„åˆçº¦ åˆå§‹åŒ–ä¸€ä¸ªnode.js app mkdir -p ./demo/jsApp cd ./demo/jsApp/ npm init ç„¶åä¸€è·¯é»˜è®¤å›è½¦ touch index.js å®‰è£…web3.js npm install web3 åœ¨index.jsä¸­åŠ å…¥å¦‚ä¸‹ä»£ç  const Web3 = require('web3'); //æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸ªå‘ï¼Œ æœ‰æ—¶å€™http://localhost:8545 ç”¨localhostå¯ä»¥ï¼Œæœ‰æ—¶å€™è¿æ¥ä¸ä¸Š //æœ€å¥½ç”¨127.0.0.1 const web3 = new Web3(new Web3.providers.HttpProvider(\"http://127.0.0.1:8545\")); //web3.eth.getAccounts().then(console.log) //modify the following line to your own contract address let contractAddress = \"0x6B62e4E253823FBC65E0B93d63ee149350158a18\"; //copy abi from ./build/contracts/Calculator.json let abi = [ { \"inputs\": [ { \"internalType\": \"int256\", \"name\": \"a\", \"type\": \"int256\" }, { \"internalType\": \"int256\", \"name\": \"b\", \"type\": \"int256\" } ], \"name\": \"add\", \"outputs\": [ { \"internalType\": \"int256\", \"name\": \"\", \"type\": \"int256\" } ], \"stateMutability\": \"pure\", \"type\": \"function\", \"constant\": true }, { \"inputs\": [ { \"internalType\": \"int256\", \"name\": \"a\", \"type\": \"int256\" }, { \"internalType\": \"int256\", \"name\": \"b\", \"type\": \"int256\" } ], \"name\": \"subtract\", \"outputs\": [ { \"internalType\": \"int256\", \"name\": \"\", \"type\": \"int256\" } ], \"stateMutability\": \"pure\", \"type\": \"function\", \"constant\": true } ] let contract = new web3.eth.Contract(abi,contractAddress); contract.methods.add(4,2).call().then(console.log); contract.methods.subtract(3,2).call().then(console.log); å…¶ä¸­çš„ contractAddressæ˜¯æˆ‘ä»¬éƒ¨ç½²çš„Caculatoråˆçº¦åœ°å€ å¦‚ä½•æ‰¾åˆ°åˆçº¦åœ°å€? æ–¹å¼1, åœ¨ä¸Šé¢çš„truffle migrateè¿›è¡Œåˆçº¦éƒ¨ç½²æ—¶,ä¼šæ‰“å° æ–¹å¼2, åœ¨Ganacheè½¯ä»¶ç•Œé¢çš„Transactionsä¸­æ‰¾, è²Œä¼¼ä¸æ–¹ä¾¿ æ–¹å¼3, åœ¨Ganacheè½¯ä»¶ç•Œé¢ : Settings -\u003e Workspace ä¸­ç‚¹å‡»ADD Project æ·»åŠ  truffle-config.jsæ–‡ä»¶å…³è”é¡¹ç›®, ç„¶åç‚¹å‡»RESTARTé‡æ–°å›åˆ°ä¸»ç•Œé¢çš„CONTRACTSå°±å¯ä»¥çœ‹åˆ°äº† æ–¹å¼4, è¿è¡Œtruffle console truffle(development)\u003e Calculator.address '0x6B62e4E253823FBC65E0B93d63ee149350158a18' å…¶ä¸­çš„abiæ˜¯åˆçº¦å¯¹åº”çš„abi å¦‚ä½•æ‰¾åˆ°abi? æ–¹å¼1, solc --abi ./contracts/Calculator.sol æ–¹å¼2, åˆ°./build/contracts/Calculator.jsonä¸­, æ‰¾åˆ°\"abi\"å¯¹åº”çš„å€¼ ä¸è¦ä½¿ç”¨truffle consoleä¸­çš„Calculator.abi è¿è¡Œapp OSX MP16 ~/Downloads/truffleTest/demo/jsApp â¯ node index.js 6 1 ä½¿ç”¨golang mkdir -p ./demo/goApp cd ./demo/goApp touch main.go go mod init goApp éœ€è¦ä½¿ç”¨åˆ° \"github.com/ethereum/go-ethereum/ethclient\"è¿™ä¸ªåŒ… go get \"github.com/ethereum/go-ethereum/ethclient\" è¿™ä¸ªåŒ…å¦‚æœè¦è°ƒç”¨åˆçº¦, åˆ™éœ€è¦ä¸€äº›é¢å¤–çš„æ“ä½œ é¢å¤–çš„æ“ä½œ: åˆ©ç”¨ abigen ä»solidityæºæ–‡ä»¶ç”Ÿæˆgolangä»£ç  OSX MP16 ~/Downloads/truffleTest/demo/goApp â¯ mkdir contracts abigen --pkg contracts --sol ../../contracts/Calculator.sol --out ./contracts/calculatorContract.go â€“pkg contracts : æŒ‡å®šç”Ÿæˆçš„ä»£ç çš„ package name â€“sol ../../contracts/Calculator.sol : æŒ‡å®šåˆçº¦ä»£ç ä½ç½® â€“out ./contracts/calculatorContract.go: æŒ‡å®šç”Ÿæˆçš„ä»£ç ä½ç½® ç”Ÿæˆå®Œæˆå, goAppçš„ç›®å½•ç»“æ„å¦‚ä¸‹: tree ~/Downloads/truffleTest/demo/goApp /Users/zhouyinhui/Downloads/truffleTest/demo/goApp â”œâ”€â”€ contracts â”‚Â â””â”€â”€ calculatorContract.go â”œâ”€â”€ go.mod â”œâ”€â”€ go.sum â””â”€â”€ main.go ç”Ÿæˆåçš„calculatorContract.goä¸­importåŒ…,å¯èƒ½å¹¶ä¸åœ¨go.modä¸­, æ‰€ä»¥è¿è¡Œä¸€æ¬¡ go mod tidyä»¥é¿å…ç¼–è¯‘æ—¶æ‰¾ä¸åˆ°åŒ… main.goä¸­ä»£ç å¦‚ä¸‹: package main import ( \"fmt\" \"github.com/ethereum/go-ethereum/accounts/abi/bind\" \"github.com/ethereum/go-ethereum/common\" \"github.com/ethereum/go-ethereum/ethclient\" \"goApp/contracts\" \"math/big\" ) //https://goethereumbook.org/client-setup/ func main() { client, err := ethclient.Dial(\"http://localhost:8545\") if err != nil { fmt.Println(\"could not connect to local node, err:\", err) return } contractAddress := common.HexToAddress(\"0x6B62e4E253823FBC65E0B93d63ee149350158a18\") calculator, err := contracts.NewCalculator(contractAddress, client) if err != nil { fmt.Println(\"could not instantiate contract, err:\", err) return } callOpts := bind.CallOpts{ Context: nil, Pending: false, } a := big.NewInt(1) b := big.NewInt(2) result, err := calculator.Add(\u0026callOpts, a, b) if err != nil { fmt.Println(\"could not call contract, err:\", err) return } fmt.Println(\"add result:\", result) result, err = calculator.Subtract(\u0026callOpts, a, b) if err != nil { fmt.Println(\"could not call contract, err:\", err) return } fmt.Println(\"subtract result:\", result) } è¿è¡Œ OSX MP16 ~/Downloads/truffleTest/demo/goApp â¯ go run . add result: 3 subtract result: -1 ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:7","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["BlockChain"],"content":"æ‰‹å·¥æ’¸ è¿™é‡Œ: https://yinhui1984.github.io/ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ / ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:2:0","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["golang"],"content":"æˆ‘ä»¬å°†ç”¨äº›ç®€å•çš„ä¾‹å­æ¥å°è¯•golangä¸­syncåŒ…çš„å„ç§æœ‰è¶£çš„æƒ…å†µ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:0:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ä¸€ä¸ªç®€å•çš„DEMO package main import \"fmt\" var ( sharedCounter = 0 ) func add(count int) { for i := 0; i \u003c count; i++ { sharedCounter++ } } func sub(count int) { for i := 0; i \u003c count; i++ { sharedCounter-- } } func show() { fmt.Println(sharedCounter) } func main() { add(1000000) sub(1000000) show() } ç¨‹åºå¾ˆç®€å•, æˆ‘ä»¬ç”¨ä¸€ä¸ªå…±äº«å˜é‡sharedCounterä½œä¸ºä¸€ä¸ªè®¡æ•°å™¨. addå‡½æ•°åœ¨è®¡æ•°å™¨ä¸Šå¾ªç¯æ·»åŠ ä¸€å®šçš„æ•°å€¼, subåˆ™ç›¸å, showåˆ™æ˜¯æ‰“å°è®¡æ•°å™¨å½“å‰çš„å€¼. ç¨‹åºè¿è¡Œç»“æŸå, sharedCounteråº”è¯¥ä¸º0, ä¸Šé¢ä»£ç çš„è¾“å‡ºçš„ç¡®å¦‚æ­¤. ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:1:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ä½¿ç”¨ä¸€ä¸ªåç¨‹ å¦‚æœå¯¹è®¡æ•°å™¨è¿›è¡ŒåŠ å‡çš„è°ƒç”¨åœ¨ä¸åŒçš„åç¨‹é‡Œé¢, ä¼šæ€ä¹ˆæ ·å‘¢? func main() { add(1000000) go sub(1000000) show() } ä¼šå¾—åˆ°1000000 , å› ä¸ºgo sub(1000000)åˆšå¯åŠ¨, ç¨‹åºå°±é€€å‡ºäº†. æˆ–è®¸æˆ‘ä»¬åº”è¯¥ç­‰åˆ°subå‡½æ•°æ‰§è¡Œç»“æŸ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:2:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ç­‰å¾…åç¨‹ç»“æŸ é”™è¯¯çš„æ–¹å¼ å¦‚æœæœ‰Cè¯­è¨€å¼€å‘èƒŒæ™¯, å¯èƒ½ä¼šæƒ³åˆ°é€šè¿‡è®¾ç½®ä¸€ä¸ªflagæ¥æŒ‡ç¤ºè¿ç®—æ˜¯å¦ç»“æŸ, æ¯”å¦‚: func sub(count int, done *bool) { for i := 0; i \u003c count; i++ { sharedCounter-- } *done = true } //.... func main() { add(1000000) done := false go sub(1000000, \u0026done) for !done { time.Sleep(time.Millisecond * 10) } show() } è¿™è™½ç„¶ä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®çš„è¾“å‡º, ä½†éå¸¸ä¸ä¼˜é›…. æ­£ç¡®çš„æ–¹å¼1 å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ— ç¼“å†²çš„ä¿¡é“(æˆ–è€…è¯´å®¹é‡ä¸º1çš„ä¿¡é“)æ¥å……å½“flag //... func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { sharedCounter-- } done \u003c- true } //.... func main() { add(1000000) done := make(chan bool) go sub(1000000, done) \u003c-subDone show() } è¿™é‡Œåˆ©ç”¨äº†ä¿¡é“çš„ç‰¹ç‚¹: å½“ä»ä¿¡é“ä¸­è¯»å–æ•°æ®æ—¶,å¦‚æœä¿¡é“ä¸ºç©º,è¯»å–å°†è¢«é˜»å¡ç›´åˆ°æœ‰æ•°æ®åˆ°è¾¾. æ‰€ä»¥ \u003c-subDone ä¼šä¸€ç›´é˜»å¡, ç›´åˆ°é€šè¿‡subDone \u003c- trueå‘å…¶ä¸­å†™å…¥äº†æ•°æ® ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:2:1","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ä½¿ç”¨2ä¸ªåç¨‹ ä¸Šé¢çš„ä¾‹å­ä¸­, sub(1000000, done)æ˜¯åœ¨æ–°çš„åç¨‹ä¸­è¿è¡Œçš„, add(1000000)å´ä¸æ˜¯, å¦‚æœä»–ä»¬éƒ½åœ¨æ–°åç¨‹ä¸­è¿è¡Œ, ä¸»ç¨‹åºåº”è¯¥å¦‚ä½•ç­‰å¾…ä»–ä»¬ç»“æŸå‘¢ å¾ˆå®¹æ˜“æƒ³åˆ°, ä½¿ç”¨ä¸¤æ¬¡\u003c-done ä¹Ÿå°±æ˜¯è¯´å‘ä¿¡é“ç´¢è¦ä¸¤ä¸ªè®¡ç®—å®Œæˆçš„æ ‡å¿—, addå’Œ sub è®¡ç®—å®Œæˆååˆ†åˆ«å‘å…¶ä¸­æ”¾å…¥æ ‡å¿—. package main import \"fmt\" var ( sharedCounter = 0 ) func add(count int, done chan bool) { for i := 0; i \u003c count; i++ { sharedCounter++ } fmt.Println(\"add done\") done \u003c- true } func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { sharedCounter-- } fmt.Println(\"sub done\") done \u003c- true } func show() { fmt.Println(sharedCounter) } func main() { done := make(chan bool) go add(1000000, done) go sub(1000000, done) \u003c-done \u003c-done show() } ä¸ºäº†æ˜ç¡®çŸ¥é“mainå‡½æ•°çš„ç¡®æ˜¯ç­‰å¾…ä¸¤ä¸ªåç¨‹æ‰§è¡Œå®Œæ¯•äº†çš„, æˆ‘ä»¬åœ¨å…¶ä¸­åŠ å…¥äº†fmt.Println(\"sub done\")è¿™æ ·çš„è¾“å‡º è¿è¡Œç¨‹åº, å¾—åˆ° add done sub done 824933 Opps, è™½ç„¶addå’Œsub éƒ½æ‰§è¡Œå®Œæ¯•äº†,ä½†æ˜¯ç»“æœä¸å¯¹(å¹¶ä¸”å¤šæ¬¡è¿è¡Œçš„ç»“æœè¿˜ä¸ç›¸åŒ), æœŸæœ›æ¥æ”¶åº”è¯¥æ˜¯0 å†è¿è¡Œä¸€æ¬¡, å¾—åˆ°: sub done add done -481342 åŸå› æ˜¯addå’Œsubåœ¨äº¤å‰è¯»å–å’Œå†™å…¥sharedCounterè¿™ä¸ªå˜é‡, ä»–ä»¬å…±äº«äº†å˜é‡, ä½†åœ¨è¯»å–å’Œå†™å…¥çš„æ—¶å€™å‡ºç°**â€œç«æ€â€** ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ç«æ€ æœ‰å¤šä¸ªåç¨‹è¿è¡Œæ—¶, å¯¹äºæ¯ä¸ªåç¨‹è€Œè¨€,å…¶å†…éƒ¨ä»£ç æ—¶é¡ºåºæ‰§è¡Œçš„, ä½†æ— æ³•ç¡®å®šåç¨‹ä¹‹é—´çš„æ‰§è¡Œé¡ºåº, é‚£ä¹ˆå°±è¯´è¿™äº›åç¨‹æ˜¯å¹¶å‘çš„ å¦‚æœä¸€æ®µä»£ç æ— è®ºæ˜¯é¡ºåºæ‰§è¡Œè¿˜æ˜¯å¹¶å‘æ‰§è¡Œ,å…¶ç»“æœéƒ½æ˜¯ç¡®å®šçš„,é‚£ä¹ˆè¿™ä¸ªä»£ç å°±æ˜¯å¹¶å‘å®‰å…¨çš„. ç›¸å, å¹¶å‘ä¸å®‰å…¨çš„ä»£ç ,å¯èƒ½ä¼šå‡ºç°æ­»é”,æ´»é”,ç«æ€ ç«æ€åˆ™è¡¨ç¤ºä»£ç å¯æ‰§è¡Œ,ä½†å¯èƒ½å‡ºç°ç»“æœä¸ä¸€è‡´(é”™è¯¯ç»“æœ) ###è§£å†³æ–¹æ³•1, åˆ©ç”¨ä¿¡é“ func main() { done := make(chan bool) go add(1000000, done) \u003c-done //1 go sub(1000000, done) \u003c-done //2 show() } åœ¨addæ‰§è¡Œå®Œæ¯•ä¹‹å‰, é¦–å…ˆä¼šå µå¡åœ¨//1å¤„, func add(count int, done chan bool) { //.... done \u003c- true } addå‡½æ•°æ‰§è¡Œæœ€åä¸€å¥ done \u003c- true å \u003c-done //1èƒ½å–åˆ°å€¼, æ¥è§¦é˜»å¡. ç„¶åç»§ç»­å¾€ä¸‹æ‰§è¡Œsubå‡½æ•°. è¿™è™½ç„¶èƒ½å¾—åˆ°æ­£ç¡®è¾“å‡º, ä½†, æˆ‘ä»¬å‘ç°, è¿™å®é™…æ˜¯å°†å¹¶è¡Œæ‰§è¡Œä¿®æ”¹æˆäº†ä¸²è¡Œæ‰§è¡Œ. ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:1","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"è§£å†³æ–¹æ³•2, åˆ©ç”¨ Mutex æˆ– RWMutex sync.Mutex å¯èƒ½æ˜¯åŒæ­¥åŒ…ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„åŸè¯­ã€‚å®ƒå…è®¸å¯¹å…±äº«èµ„æºè¿›è¡Œäº’æ–¥ï¼ˆä¸èƒ½åŒæ—¶è®¿é—®). mutex := \u0026sync.Mutex{} mutex.Lock() //.... æ›´æ–°å…±äº«å˜é‡ mutex.Unlock() æ³¨æ„: åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¿™ä¹ˆä¸€å¥ â€œValues containing the types defined in this package should not be copied.â€ (â€œåŒ…å«è¿™ä¸ªåŒ…ä¸­å®šä¹‰çš„ç±»å‹çš„å€¼ä¸åº”è¯¥è¢«å¤åˆ¶ã€‚â€) . æˆ‘ä»¬ç›´åˆ°å€¼ä¼ é€’å°±æ˜¯å¤åˆ¶ç„¶åä¼ é€’, æ‰€ä»¥æˆ‘ä»¬ä»£ç ä¸­çš„mutexç”¨çš„æ˜¯å¼•ç”¨ä¼ é€’. package main import ( \"fmt\" \"sync\" ) var ( sharedCounter = 0 mutex = \u0026sync.Mutex{} ) func add(count int, done chan bool) { for i := 0; i \u003c count; i++ { mutex.Lock() sharedCounter++ mutex.Unlock() } fmt.Println(\"add done\") done \u003c- true } func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { mutex.Lock() sharedCounter-- mutex.Unlock() } fmt.Println(\"sub done\") done \u003c- true } func show() { fmt.Println(sharedCounter) } func main() { done := make(chan bool) go add(1000000, done) go sub(1000000, done) \u003c-done \u003c-done show() } åœ¨è¯»å†™sharedCounterä¹‹å‰å…ˆLock(), ç”¨å®ŒåUnlock() å¦‚æœæˆ‘ä»¬åœ¨è¿›è¡Œè®¡ç®—çš„æ—¶å€™åŠ ä¸Šç‚¹æ‰“å°(ä»…æµ‹è¯•ç”¨,éå¸¸å½±å“é€Ÿåº¦) for i := 0; i \u003c count; i++ { mutex.Lock() fmt.Println(\"--\") // fmt.Println(\"++\") sharedCounter-- // sharedCounter++ mutex.Unlock() } åˆ™å¯ä»¥çœ‹åˆ° ++ å’Œ â€“ æ˜¯äº¤å‰ç€æ‰“å°çš„, è¯´æ˜æ˜¯å¹¶è¡Œæ‰§è¡Œçš„. å¦å¤–, è¿˜æœ‰RWMutex (è¯»å†™é”), é™¤äº†ä¸Mutexç›¸åŒçš„Lock()å’ŒUnlock()æ–¹æ³•å¤–, å…¶è¿˜æœ‰ç”¨äºå…±äº«è¯»æ“ä½œçš„RLock()å’ŒRUnlock(), åœ¨è¯»å–å…±äº«å˜é‡æ—¶å…è®¸åŒæ—¶å¤šä¸ªè¯»å–å™¨èƒ½æé«˜æ•ˆç‡. æ‰€ä»¥åœ¨é¢‘ç¹è¯»å†™æ“ä½œçš„ä»£ç ä¸­, ä½¿ç”¨RWMutexæ•ˆç‡è¦æ¯”Mutexé«˜ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:2","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"è§£å†³æ–¹æ³•3, åˆ©ç”¨åŸå­æ“ä½œ åŸå­æ“ä½œåœ¨\"sync/atomic\"åŒ…ä¸­. åˆ©ç”¨è¿™ä¸ªåŒ…ä¸­æä¾›çš„å‡½æ•°å¯å®ç°\"æ— é”ç‰ˆ\"çš„å…±äº«å˜é‡è¯»å†™ åŸå­æ“ä½œå³æ˜¯è¿›è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½è¢«ä¸­æ–­çš„æ“ä½œï¼Œé’ˆå¯¹æŸä¸ªå€¼çš„åŸå­æ“ä½œåœ¨è¢«è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒCPUç»ä¸ä¼šå†å»è¿›è¡Œå…¶ä»–çš„é’ˆå¯¹è¯¥å€¼çš„æ“ä½œã€‚ä¸ºäº†å®ç°è¿™æ ·çš„ä¸¥è°¨æ€§ï¼ŒåŸå­æ“ä½œä»…ä¼šç”±ä¸€ä¸ªç‹¬ç«‹çš„CPUæŒ‡ä»¤ä»£è¡¨å’Œå®Œæˆã€‚åŸå­æ“ä½œæ˜¯æ— é”çš„ï¼Œå¸¸å¸¸ç›´æ¥é€šè¿‡CPUæŒ‡ä»¤ç›´æ¥å®ç°ã€‚ äº‹å®ä¸Šï¼Œå…¶å®ƒåŒæ­¥æŠ€æœ¯çš„å®ç°å¸¸å¸¸ä¾èµ–äºåŸå­æ“ä½œ package main import ( \"fmt\" \"sync/atomic\" ) var ( sharedCounter = int64(0) ) func add(count int, done chan bool) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, 1) // } fmt.Println(\"add done\") done \u003c- true } func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, -1) // } fmt.Println(\"sub done\") done \u003c- true } func show() { fmt.Println(sharedCounter) } func main() { done := make(chan bool) go add(1000000, done) go sub(1000000, done) \u003c-done \u003c-done show() } åŸå­æ“ä½œçš„å¸¸ç”¨æ¥å£å¦‚ä¸‹(ä»¥int32ä¸ºä¾‹) //å°†addræŒ‡å‘çš„å€¼å’Œoldè¿›è¡Œæ¯”è¾ƒ, å¦‚æœç›¸ç­‰,åˆ™å°†newèµ‹å€¼åˆ°addræŒ‡å‘çš„ä½ç½®,å¹¶è¿”å›true, å¦‚æœä¸ç›¸ç­‰,åˆ™ç›´æ¥è¿”å›false func CompareAndSwapInt32(addr *int32, old, new int32) (swapped bool) //ä½¿ç”¨åŸå­æ“ä½œ,å°†addræŒ‡å‘çš„ä½ç½®å¢åŠ ä¸€ä¸ªdelta func AddInt32(addr *int32, delta int32) (new int32) //åŸå­è¯»å– //å½“æˆ‘ä»¬è¦è¯»å–ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½è¿™ä¸ªå˜é‡æ­£åœ¨è¢«å†™å…¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¾ˆæœ‰å¯èƒ½è¯»å–åˆ°å†™åˆ°ä¸€åŠçš„æ•°æ®ã€‚ æ‰€ä»¥è¯»å–æ“ä½œæ˜¯éœ€è¦ä¸€ä¸ªåŸå­è¡Œä¸ºçš„ã€‚ func LoadInt32(addr *int32) (val int32) //è¯»å–æ˜¯æœ‰åŸå­æ€§çš„æ“ä½œçš„ï¼ŒåŒæ ·å†™å…¥atomicåŒ…ä¹Ÿæä¾›äº†ç›¸å…³çš„æ“ä½œåŒ… func StoreInt32(addr *int32, val int32) //æ­¤ç±»å‹çš„å€¼ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥è¢«ç”¨æ¥â€œåŸå­åœ°\"å­˜å‚¨ï¼ˆStoreï¼‰å’ŒåŠ è½½ï¼ˆLoadï¼‰ä»»æ„ç±»å‹çš„å€¼ã€‚å½“ç„¶è¿™ä¸ªç±»å‹ä¹Ÿæ˜¯åŸå­æ€§çš„ã€‚ //æœ‰äº†atomic.Valueè¿™ä¸ªç±»å‹ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥åœ¨ä¸ä¾èµ–Goå†…éƒ¨ç±»å‹unsafe.Pointerçš„æƒ…å†µä¸‹ä½¿ç”¨åˆ°atomicæä¾›çš„åŸå­æ“ä½œã€‚ // A Value must not be copied after first use. type Value struct { v interface{} } åŸå­æ“ä½œä¸äº’æ–¥é”çš„åŒºåˆ« é¦–å…ˆatomicæ“ä½œçš„ä¼˜åŠ¿æ˜¯æ›´è½»é‡ï¼Œæ¯”å¦‚CASå¯ä»¥åœ¨ä¸å½¢æˆä¸´ç•ŒåŒºå’Œåˆ›å»ºäº’æ–¥é‡çš„æƒ…å†µä¸‹å®Œæˆå¹¶å‘å®‰å…¨çš„å€¼æ›¿æ¢æ“ä½œã€‚è¿™å¯ä»¥å¤§å¤§çš„å‡å°‘åŒæ­¥å¯¹ç¨‹åºæ€§èƒ½çš„æŸè€—ã€‚ åŸå­æ“ä½œä¹Ÿæœ‰åŠ£åŠ¿ã€‚è¿˜æ˜¯ä»¥CASæ“ä½œä¸ºä¾‹ï¼Œä½¿ç”¨CASæ“ä½œçš„åšæ³•è¶‹äºä¹è§‚ï¼Œæ€»æ˜¯å‡è®¾è¢«æ“ä½œå€¼æœªæ›¾è¢«æ”¹å˜ï¼ˆå³ä¸æ—§å€¼ç›¸ç­‰ï¼‰ï¼Œå¹¶ä¸€æ—¦ç¡®è®¤è¿™ä¸ªå‡è®¾çš„çœŸå®æ€§å°±ç«‹å³è¿›è¡Œå€¼æ›¿æ¢ï¼Œé‚£ä¹ˆåœ¨è¢«æ“ä½œå€¼è¢«é¢‘ç¹å˜æ›´çš„æƒ…å†µä¸‹ï¼ŒCASæ“ä½œå¹¶ä¸é‚£ä¹ˆå®¹æ˜“æˆåŠŸã€‚è€Œä½¿ç”¨äº’æ–¥é”çš„åšæ³•åˆ™è¶‹äºæ‚²è§‚ï¼Œæˆ‘ä»¬æ€»å‡è®¾ä¼šæœ‰å¹¶å‘çš„æ“ä½œè¦ä¿®æ”¹è¢«æ“ä½œçš„å€¼ï¼Œå¹¶ä½¿ç”¨é”å°†ç›¸å…³æ“ä½œæ”¾å…¥ä¸´ç•ŒåŒºä¸­åŠ ä»¥ä¿æŠ¤ã€‚ ä¸‹é¢æ˜¯å‡ ç‚¹åŒºåˆ«ï¼š äº’æ–¥é”æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨æ¥è®©ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç¨‹åºçš„å…³é”®éƒ¨åˆ†ï¼Œå®Œæˆäº’æ–¥çš„å¤šä¸ªæ“ä½œ åŸå­æ“ä½œæ˜¯æ— é”çš„ï¼Œå¸¸å¸¸ç›´æ¥é€šè¿‡CPUæŒ‡ä»¤ç›´æ¥å®ç° åŸå­æ“ä½œä¸­çš„casè¶‹äºä¹è§‚é”ï¼ŒCASæ“ä½œå¹¶ä¸é‚£ä¹ˆå®¹æ˜“æˆåŠŸï¼Œéœ€è¦åˆ¤æ–­ï¼Œç„¶åå°è¯•å¤„ç† å¯ä»¥æŠŠäº’æ–¥é”ç†è§£ä¸ºæ‚²è§‚é”ï¼Œå…±äº«èµ„æºæ¯æ¬¡åªç»™ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œå…¶å®ƒçº¿ç¨‹é˜»å¡ï¼Œç”¨å®Œåå†æŠŠèµ„æºè½¬è®©ç»™å…¶å®ƒçº¿ç¨‹ ä¸è¦è½»æ˜“ä½¿ç”¨atomic https://texlution.com/post/golang-lock-free-values-with-atomic-value/ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:3","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"å…¶å®ƒå¹¶å‘æ§åˆ¶æ–¹æ³• ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨çš„ä¿¡é“æ¥è¿›è¡Œå¹¶å‘æ§åˆ¶ (done \u003c- trueä¸\u003c-done), è¿™åªæ˜¯å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:4:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"WaitGroup sync.WaitGroup æ‹¥æœ‰ä¸€ä¸ªå†…éƒ¨è®¡æ•°å™¨ã€‚å¦‚æœæ­¤è®¡æ•°å™¨ç­‰äº 0ï¼Œåˆ™ Wait() æ–¹æ³•ç«‹å³è¿”å›ã€‚å¦åˆ™ï¼Œå®ƒå°†è¢«é˜»å¡ï¼Œç›´åˆ°è®¡æ•°å™¨ä¸º 0ã€‚ è¦å¢åŠ è®¡æ•°å™¨ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ Add(int)ã€‚è¦å‡å°‘å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Done() ï¼ˆå°†å‡å°‘ 1ï¼‰æˆ–å…·æœ‰è´Ÿå€¼çš„ç›¸åŒ Add(int) æ–¹æ³•ã€‚ package main import ( \"fmt\" \"sync\" \"sync/atomic\" ) var ( sharedCounter = int64(0) ) func add(count int, wg *sync.WaitGroup) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, 1) } fmt.Println(\"add done\") wg.Done() } func sub(count int, wg *sync.WaitGroup) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, -1) } fmt.Println(\"sub done\") wg.Done() } func show() { fmt.Println(sharedCounter) } func main() { wg := sync.WaitGroup{} wg.Add(2) go add(1000000, \u0026wg) go sub(1000000, \u0026wg) wg.Wait() show() } æ³¨æ„:ä¼ é€’ WaitGroupæ—¶è¦ä½¿ç”¨å¼•ç”¨ä¼ é€’(æŒ‡é’ˆ), å…¶ä¸åº”è¯¥è¢«å¤åˆ¶. func sub(count int, wg *sync.WaitGroup) ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:4:1","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"context.Context Contextæä¾›äº†2ä¸ªåŠŸèƒ½ æ§åˆ¶å­åç¨‹ç»“æŸ ä¼ é€’å€¼ å…¶ä¸åœ¨syncåŒ…ä¸­, åé¢ä¸“é—¨è®² ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:4:2","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Pool å¯¹è±¡å¤ç”¨ å…¶æä¾›ä¸€ä¸ª\"å¹¶å‘å®‰å…¨\"çš„å¯å¤ç”¨çš„å¯¹è±¡æ± . ç”¨æ¥å‡å°‘é¢‘ç¹GCæ‰€ä»£ç†çš„å‹åŠ›. å…¶å¤§æ¦‚æ„æ€æ˜¯: å¦‚æœæœ‰æ—§å¯¹è±¡å¯ç”¨,åˆ™ç”¨æ—§çš„, æ²¡æœ‰å†Newä¸€ä¸ª å‚è€ƒè¿™æ‰¹æ–‡ç« : https://www.cnblogs.com/qcrao-2018/p/12736031.html ä»¥åŠè¿™é‡Œ https://geektutu.com/post/hpg-sync-pool.html åœ¨å®é™…å¼€å‘å·¥ä½œä¸­, ä¸è¦ä¸€ä¸Šæ¥å°±æƒ³åšä½¿ç”¨sync.Poolå®ƒé€šå¸¸ä¼šå¸¦æ¥é—®é¢˜(å› ä¸ºå…¶Getå‡ºæ¥çš„å¯¹è±¡çš„çŠ¶æ€æ˜¯ä¸ç¡®å®šçš„), è€Œåº”è¯¥éµå¾ªä¸‹é¢çš„åŸåˆ™: æ ¹æ®ä½ æ”¶é›†åˆ°çš„éœ€æ±‚è®¾è®¡ä½ çš„ä»£ç ï¼ˆä¸è¦è·³è¿‡è¿™ä¸ªæ­¥éª¤ï¼‰ã€‚ ç¼–å†™æœ€ç®€å•ã€æœ€æ¸…æ™°ã€æœ€æ„šè ¢çš„è®¾è®¡å®ç°ã€‚ å¦‚æœå®¢æˆ·æ»¡æ„ï¼Œå°±åœæ­¢ å¦‚æœå®¢æˆ·ä¸æ»¡æ„ï¼Œè€Œä¸”ä»–ä»¬è®¤ä¸ºåº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸èƒ½æ»¡è¶³ä»–ä»¬çš„è¦æ±‚ï¼Œé‚£ä¹ˆå°±å‰–æã€‚ è§£å†³æœ€é«˜æ€§èƒ½çš„ä¸»å¯¼è€… å‰–æå¹¶è¿›å…¥ç¬¬äº”é˜¶æ®µã€‚ç„¶åè¿›å…¥3 å¦‚æœå®åœ¨æä¸å®š, å†æƒ³æƒ³sync.Pool ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:5:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Once åªæ‰§è¡Œä¸€æ¬¡ sync.Once æä¾›äº†ä¸€ç§æ–¹æ³•, è®©ç›¸å…³ä»£ç åªè¢«æ‰§è¡Œä¸€æ¬¡ å®é™…å¼€å‘è¿‡ç¨‹ä¸­, ç»å¸¸æœ‰è¿™æ ·çš„åœºæ™¯: ä½ åšäº†ä¸€ä¸ªå«åšlowLevelApiçš„åŒ…, ç”¨äºæ§åˆ¶åº•å±‚è®¾å¤‡, æ¯”å¦‚å¼€å…³LED, ä½†åœ¨è°ƒç”¨å¼€å…³LEDä¹‹å‰éœ€è¦ç¡®ä¿ä¸€äº›åˆå§‹åŒ–å·¥ä½œå·²ç»å®Œæˆ, æ‰€ä»¥ä½ å†™äº†ä¸€ä¸ªInitEnvçš„å‡½æ•°, å¹¶å‘Šè¯‰å…¶å®ƒå¼€å‘äººå‘˜: ä¸€å®šè¦å…ˆåˆå§‹åŒ–å“¦. package lowLevelApi import \"fmt\" func InitEnv() { fmt.Println(\"init environment\") } func LedOn() { fmt.Println(\"LedOn\") } func LedOff() { fmt.Println(\"LedOff\") } å…¶å®ƒå¼€å‘äººå‘˜ç»å¸¸ä¼šé—®ä½ : è¿™ä¸ªåˆå§‹åŒ–å‡½æ•°å¦‚æœè¢«é‡å¤è°ƒç”¨ä¸ä¼šå‡ºé—®é¢˜å§? å› ä¸ºä»–ä»¬çš„ä»£ç é€šå¸¸ä¼šè¿™æ ·å†™: package main import ( \"fmt\" \"goplayground/lowLevelApi\" ) func turnLedOn() { fmt.Println(\"Turning LED on\") lowLevelApi.InitEnv() lowLevelApi.LedOn() fmt.Println(\"LED on\") } func turnLedOff() { fmt.Println(\"Turning LED off\") lowLevelApi.InitEnv() lowLevelApi.LedOff() fmt.Println(\"LED off\") } func main() { turnLedOn() turnLedOff() } ä¸Šé¢çš„ä»£ç ä¼šè¾“å‡º Turning LED on InitEnv LedOn LED on Turning LED off InitEnv LedOff LED off ä¸ºäº†é˜²æ­¢é‡å¤è°ƒç”¨InitEnv()å¯èƒ½å¸¦æ¥çš„é—®é¢˜, åˆ™å¯ä»¥ä½¿ç”¨sync.Once var ( once sync.Once ) func InitEnv() { once.Do(func() { fmt.Println(\"InitEnv\") }) } è¿™æ ·InitEnv()å³ä½¿è¢«å¤šæ¬¡è°ƒç”¨, å…¶å†…éƒ¨é€»è¾‘åªä¼šæ‰§è¡Œä¸€æ¬¡ Turning LED on InitEnv LedOn LED on Turning LED off LedOff LED off sync.Once å¸¸åº”ç”¨äºå•ä¾‹æ¨¡å¼ï¼Œä¾‹å¦‚åˆå§‹åŒ–é…ç½®ã€ä¿æŒæ•°æ®åº“è¿æ¥ç­‰ã€‚ä½œç”¨ä¸ init å‡½æ•°ç±»ä¼¼ï¼Œä½†æœ‰åŒºåˆ«ã€‚ init å‡½æ•°æ˜¯å½“æ‰€åœ¨çš„ package é¦–æ¬¡è¢«åŠ è½½æ—¶æ‰§è¡Œï¼Œè‹¥è¿Ÿè¿Ÿæœªè¢«ä½¿ç”¨ï¼Œåˆ™æ—¢æµªè´¹äº†å†…å­˜ï¼Œåˆå»¶é•¿äº†ç¨‹åºåŠ è½½æ—¶é—´ã€‚ sync.Once å¯ä»¥åœ¨ä»£ç çš„ä»»æ„ä½ç½®åˆå§‹åŒ–å’Œè°ƒç”¨ï¼Œå› æ­¤å¯ä»¥å»¶è¿Ÿåˆ°ä½¿ç”¨æ—¶å†æ‰§è¡Œï¼Œå¹¶å‘åœºæ™¯ä¸‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:6:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Cond æ¡ä»¶å˜é‡ sync.Cond ç”¨äºåè°ƒå¤šä¸ªåç¨‹è®¿é—®å…±äº«èµ„æº, å…¶ä¸­æŸäº›åç¨‹å¤„äºé˜»å¡çŠ¶æ€, å¦å¤–ä¸€ä¸ªåç¨‹åœ¨æ¡ä»¶å‡†å¤‡å¥½çš„æ—¶å€™æ¥è®²å…¶å®ƒåç¨‹å”¤é†’. ä¸‹é¢çš„ä¾‹å­ä¸­ InitEnvå‡½æ•°éœ€è¦ä¸€ç‚¹æ—¶é—´åœ¨å‡†å¤‡sharedCounter çš„åˆå§‹å€¼, åœ¨è¿™æœŸé—´Addå’Œsubå¤„äºWaitçŠ¶æ€, å½“å‡†å¤‡å¥½å, å°†é€šçŸ¥ Addå’ŒSubç»§ç»­å‘ä¸‹æ‰§è¡Œ package main import ( \"fmt\" \"sync\" \"time\" ) var ( sharedCounter int ) func InitEnv(c *sync.Cond) { fmt.Println(\"begin InitEnv\") time.Sleep(time.Second * 1) c.L.Lock() sharedCounter = 10 c.L.Unlock() fmt.Println(\"Init Env Done, broadcast...\") c.Broadcast() } func Add(cout int, c *sync.Cond) { c.L.Lock() c.Wait() sharedCounter += cout c.L.Unlock() fmt.Println(\"Add Done\") } func Sub(count int, c *sync.Cond) { c.L.Lock() c.Wait() sharedCounter -= count c.L.Unlock() fmt.Println(\"Sub Done\") } func main() { cond := sync.NewCond(\u0026sync.Mutex{}) go InitEnv(cond) go Add(5, cond) go Sub(2, cond) time.Sleep(2 * time.Second) fmt.Println(\"Final Counter:\", sharedCounter) } è¾“å‡º begin InitEnv Init Env Done, broadcast... Add Done Sub Done Final Counter: 13 c.Broadcast()å”¤é†’æ‰€æœ‰ç­‰å¾…çš„åç¨‹, å¦å¤–è¿˜æœ‰ä¸€ä¸ªSignal()æ–¹æ³•, ç”¨äºå”¤é†’ä¸€ä¸ªåç¨‹. sync.Condä¸€èˆ¬ç”¨äºä¸€å¯¹å¤šçš„æƒ…å†µ, å¦‚æœæ˜¯ä¸€å¯¹ä¸€çš„æƒ…å†µ, ç”¨ä¸€ä¸ªä¿¡é“å°±å¯ä»¥è½»æ¾è§£å†³äº† ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:7:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Map å†…ç½®çš„mapä¸æ˜¯å¹¶å‘å®‰å…¨çš„, æ‰€ä»¥ sync.Map æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ä¸mapç±»ä¼¼ä½†æ˜¯å¹¶å‘å®‰å…¨çš„ç‰ˆæœ¬ å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  https://juejin.cn/post/6844903895227957262 ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:8:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"goè¯­è¨€ä¸­net/httpåŒ…å¯¹httpæœåŠ¡ä¸è¯·æ±‚çš„å¤„ç† ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:0:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main import ( \"log\" \"net/http\" ) func main() { err := http.ListenAndServe(\":8080\", http.FileServer(http.Dir(\".\"))) if err != nil { log.Fatal(err) } } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«. ç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­ #æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ echo \"start file server :12345\" cat \u003c\u003cEOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go package main import ( \"log\" \"net/http\" ) func main() { err := http.ListenAndServe(\":12345\", http.FileServer(http.Dir(\".\"))) if err != nil { log.Fatal(err) } } EOF } OSX MP16 ~/Downloads â¯ fileserver start file server :12345 Pythonä¸­æœ‰ç›¸åŒçš„åŠŸèƒ½ python3 -m SimpleHTTPServer 7777 æˆ– python3 -m http.server ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"ä¸€ä¸ªç®€å•çš„WebServer package main import ( \"log\" \"net/http\" ) func main() { http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { _, err := w.Write([]byte(\"Hello World!\\n\")) if err != nil { log.Println(err) } }) err := http.ListenAndServe(\":12345\", nil) if err != nil { log.Fatal(err) } } è®¿é—®ä¸€ä¸‹è¯•è¯•: OSX MP16 ~/Downloads/goplayground â¯ curl http://localhost:12345 Hello World! ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:2:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"http.HandleFunc http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { //... }) è¯¥æ–¹æ³•æä¾›äº†ä¸€ç§æŒ‡å®šå¦‚ä½•å¤„ç†ç‰¹å®šè·¯ç”±çš„è¯·æ±‚çš„æ–¹æ³•, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè·¯ç”±, ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤„ç†å‡½æ•°. å¤„ç†å‡½æ•°å¯å†™æˆåŒ¿åå‡½æ•°, ä¹Ÿå¯ä»¥å£°æ˜ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•° func rootHandler(w http.ResponseWriter, r *http.Request) { _, err := w.Write([]byte(\"\u003ch1 style=\\\"color:Tomato;\\\"\u003eHello World\u003c/h1\u003e\")) if err != nil { log.Println(err) } } func main() { http.HandleFunc(\"/\", rootHandler) //... } å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯http.ResponseWriterç±»å‹çš„å€¼ã€‚è¿™æ˜¯ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº”çš„æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯å“åº”æ ‡å¤´çš„è®¾ç½®æ–¹å¼,æ¯”å¦‚w.WriteHeader(http.StatusOK)ã€‚ç¬¬äºŒä¸ªè®ºç‚¹æ˜¯æŒ‡å‘http.Requestçš„æŒ‡é’ˆã€‚è¿™æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­æ£€ç´¢æ•°æ®çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚æŒ‡é’ˆè®¿é—®è¡¨å•æäº¤çš„è¯¦ç»†ä¿¡æ¯ æ¯”å¦‚ ä¸‹é¢çš„æ–¹æ³•, ä½¿ç”¨ http://127.0.0.1:12345/?key=date æ—¶å°†è¿”å›å½“å‰çš„æ—¥æœŸ, ç¡®å®key=æˆ–keyä¸æ­£ç¡®æ—¶è¿”å›http.StatusBadRequest func rootHandler(w http.ResponseWriter, r *http.Request) { keys, ok := r.URL.Query()[\"key\"] if !ok || len(keys[0]) \u003c 1 { log.Println(\"Url Param 'key' is missing\") w.WriteHeader(http.StatusBadRequest) _, err := w.Write([]byte(\"Url Param 'key' is missing\")) if err != nil { log.Println(err) return } return } key := keys[0] switch key { case \"date\": w.WriteHeader(http.StatusOK) _, err := w.Write([]byte(time.Now().Format(\"2006-01-02\"))) if err != nil { log.Println(err) } default: w.WriteHeader(http.StatusBadRequest) _, _ = w.Write([]byte(\"Invalid key\")) log.Println(\"Invalid key\") } } ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"http.ResponseWriter ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº” è®¾ç½®ç›¸åº”æ ‡å¿—å¤´: w.WriteHeader(http.StatusOK) è·å–æˆ–å®åˆ™å“åº”å¤´ w.Header().Set(\"content-type\", \"application/json\") w.Header().Add(\"foo\", \"bar\") å†™å…¥ç›¸åº”æ•°æ®: w.Write([]byte(time.Now().Format(\"2006-01-02\"))) ä¾‹å­: package main import ( \"encoding/json\" \"log\" \"net/http\" ) type SystemInfo struct { Hostname string `json:\"hostname\"` Uptime string `json:\"uptime\"` } func rootHandler(w http.ResponseWriter, r *http.Request) { info := SystemInfo{ Hostname: \"test\", Uptime: \"2022-01-01 00:00:00\", } w.Header().Set(\"Content-Type\", \"application/json\") w.WriteHeader(http.StatusOK) bytes, _ := json.Marshal(info) _, err := w.Write(bytes) if err != nil { log.Println(\"Error writing response: \", err) } } func main() { http.HandleFunc(\"/\", rootHandler) err := http.ListenAndServe(\":12345\", nil) if err != nil { log.Fatal(err) } } OSX MP16 ~ â¯ curl localhost:12345 {\"hostname\":\"test\",\"uptime\":\"2022-01-01 00:00:00\"} ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:1","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"*http.Request æŒ‡å‘http.Requestçš„æŒ‡é’ˆ, é€šè¿‡æ”¹æŒ‡é’ˆå¯ä»¥è·å–è¯·æ±‚ä¸­çš„å„ç§æ•°æ®, æ¯”å¦‚ è·å–åŸºæœ¬ä¿¡æ¯ func rootHandler(w http.ResponseWriter, r *http.Request) { fmt.Println(\"User Agent: \", r.UserAgent()) fmt.Println(\"Host: \", r.Host) fmt.Println(\"Remote Address: \", r.RemoteAddr) fmt.Println(\"Request URI: \", r.RequestURI) fmt.Println(\"Method: \", r.Method) fmt.Println(\"URL: \", r.URL) fmt.Println(\"Header: \", r.Header) w.WriteHeader(http.StatusOK) } è¾“å‡º: User Agent: curl/7.79.1 Host: localhost:12345 Remote Address: 127.0.0.1:58967 Request URI: / Method: GET URL: / Header: map[Accept:[*/*] User-Agent:[curl/7.79.1]] è·å–cookie func rootHandler(w http.ResponseWriter, r *http.Request) { //è·å–æ‰€æœ‰ for _, c := range r.Cookies() { fmt.Printf(\"%s : %q\\n\", c.Name, c.Value) } //è·å–æŒ‡å®š c, err := r.Cookie(\"token\") if err != nil { log.Println(err) } fmt.Printf(\"%s : %q\\n\", c.Name, c.Value) w.WriteHeader(http.StatusOK) } curl --cookie \"token=abcdefg\" http://localhost:12345 è·å–GETå‚æ•° è·å–æ‰€æœ‰å‚æ•° args := r.URL.Query() è·å–æŒ‡å®šå‚æ•°(æ³¨:å‚æ•°å¯èƒ½è¢«é‡å¤å†™å¤šæ¬¡) æ¯”å¦‚: localhost:12345/?id=5 func rootHandler(w http.ResponseWriter, r *http.Request) { ids, ok := r.URL.Query()[\"id\"] if !ok || len(ids[0]) \u003c 1 { log.Println(\"Url Param 'id' is missing\") return } id := ids[0] log.Println(\"Url Param 'id' is: \" + id) w.WriteHeader(http.StatusOK) } æˆ–è€… func rootHandler(w http.ResponseWriter, r *http.Request) { id := r.FormValue(\"id\") if id == \"\" { log.Println(\"Url Param 'id' is missing\") } fmt.Println(\"id:\", id) w.WriteHeader(http.StatusOK) } ä¹Ÿå¯ä»¥é€šè¿‡r.Formæ¥è·å–Getå‚æ•° è·å–PATCH, POST or PUTå‚æ•° æ¯”å¦‚ curl -d \"id=5\u0026format=1\" http://localhost:12345/ func rootHandler(w http.ResponseWriter, r *http.Request) { //parse err := r.ParseForm() if err != nil { log.Println(\"ParseForm error:\", err) } //get post args for k, v := range r.PostForm { log.Println(\"key:\", k) log.Println(\"val:\", v) // v []string } w.WriteHeader(http.StatusOK) } è¾“å‡º 2022/06/06 15:14:46 key: id 2022/06/06 15:14:46 val: [5] 2022/06/06 15:14:46 key: format 2022/06/06 15:14:46 val: [1] ParseFormä¼šå¡«å……r.Formå’Œr.PostFormã€‚ å¯¹äºæ‰€æœ‰çš„è¯·æ±‚ï¼ŒParseFormè§£ææ¥è‡ªURLçš„åŸå§‹æŸ¥è¯¢å¹¶æ›´æ–°r.Formã€‚ å¯¹äºPOSTã€PUTå’ŒPATCHè¯·æ±‚ï¼Œå®ƒä¹Ÿè¯»å–è¯·æ±‚æ­£æ–‡ï¼Œå°†å…¶è§£æä¸ºä¸€ä¸ªè¡¨å•ï¼Œå¹¶å°†ç»“æœæ”¾å…¥r.PostFormå’Œr.Formä¸­ã€‚åœ¨r.Formä¸­ï¼Œè¯·æ±‚æ­£æ–‡å‚æ•°ä¼˜å…ˆäºURLæŸ¥è¯¢å­—ç¬¦ä¸²å€¼ã€‚ å¦‚æœè¯·æ±‚ä½“çš„å¤§å°è¿˜æ²¡æœ‰è¢«MaxBytesReaderé™åˆ¶ï¼Œé‚£ä¹ˆå…¶å¤§å°å°†è¢«é™åˆ¶åœ¨10MBã€‚ å¯¹äºå…¶ä»–HTTPæ–¹æ³•ï¼Œæˆ–è€…å½“å†…å®¹ç±»å‹ä¸æ˜¯application/x-www-form-urlencodedæ—¶ï¼Œè¯·æ±‚æ­£æ–‡ä¸è¢«è¯»å–ï¼Œå¹¶ä¸”r.PostFormè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªéé›¶çš„ç©ºå€¼ã€‚ ParseMultipartFormè‡ªåŠ¨è°ƒç”¨ParseFormã€‚ParseFormæ˜¯å¹‚ç­‰çš„ã€‚ r.Formå±æ€§åŒ…å«äº†postè¡¨å•å’Œurlä¸­çš„getå‚æ•°ã€‚ r.PostFormå±æ€§åªåŒ…å«äº†postè¡¨å•å‚æ•°ã€‚ è·å–æŒ‡å®šå‚æ•°, æ¯”å¦‚ func rootHandler(w http.ResponseWriter, r *http.Request) { err := r.ParseForm() if err != nil { log.Println(\"ParseForm error:\", err) } ids := r.PostForm.Get(\"id\") //è·å–idå‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼ log.Println(\"id:\", ids) w.WriteHeader(http.StatusOK) } æˆ–è€… func rootHandler(w http.ResponseWriter, r *http.Request) { id := r.PostFormValue(\"id\") if id == \"\" { log.Println(\"Url Param 'id' is missing\") } fmt.Println(\"id:\", id) w.WriteHeader(http.StatusOK) } è·å–ä¸Šä¼ æ–‡ä»¶ æ¯”å¦‚ curl -F \"file=@IMG_1526.PNG;type=image/png\" http://localhost:12345/upload ä¸‹é¢ä»£ç ä¸­: r.ParseMultipartForm(10 \u003c\u003c 20)å°†ä¸€ä¸ªè¯·æ±‚ä½“è§£æä¸ºmultipart/form-dataã€‚æ•´ä¸ªè¯·æ±‚æ­£æ–‡è¢«è§£æï¼Œå¹¶ä¸”å…¶æ–‡ä»¶éƒ¨åˆ†æœ€å¤šå­˜å‚¨åœ¨maxMemoryå­—èŠ‚çš„å†…å­˜ä¸­ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™å­˜å‚¨åœ¨ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ParseMultipartFormåœ¨å¿…è¦æ—¶è°ƒç”¨ParseFormã€‚å¦‚æœParseFormè¿”å›ä¸€ä¸ªé”™è¯¯ï¼ŒParseMultipartFormå°†å…¶è¿”å›ï¼Œä½†ä¹Ÿç»§ç»­è§£æè¯·æ±‚æ­£æ–‡ã€‚åœ¨å¯¹ParseMultipartFormè¿›è¡Œä¸€æ¬¡è°ƒç”¨åï¼Œéšåçš„è°ƒç”¨æ²¡æœ‰ä»»ä½•å½±å“. FormFile è¿”å›æä¾›çš„è¡¨å•keyçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœéœ€è¦ï¼ŒFormFileä¼šè°ƒç”¨ParseMultipartFormå’ŒParseFormã€‚ package main import ( \"io\" \"log\" \"mime/multipart\" \"net/http\" \"os\" ) func uploadHandler(w http.ResponseWriter, r *http.Request) { // Parse the multipart form in the request err := r.ParseMultipartForm(10 \u003c\u003c 20) // 10 MiB if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } // FormFile returns the first file for the given key `file` // it also returns the FileHeader, so we can get the Filename, the Header and the size of the file file, handler, err := r.FormFile(\"file\") if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } defer func(file multipart.File) { err := file.Close() if err != nil { log.Println(err) } }(file) err = os.MkdirAll(\"./upload\", 0777) if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) re","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:2","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"Handler , Handle , HandleFunc ä¸ http.ListenAndServe ä½¿ç”¨é»˜è®¤çš„Handler å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ package main import \"net/http\" func main() { http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello, world!\")) }) http.HandleFunc(\"/blog\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"This is my Blog\")) }) http.ListenAndServe(\":12345\", nil) } åœ¨å¯åŠ¨ä¸€ä¸ªHttpServerçš„æ—¶å€™, å…¶å®æˆ‘ä»¬å°±å…³å¿ƒ2ä¸ªä¸œè¥¿: åœ°å€ è·¯ç”±: å°†è¯·æ±‚å¯¹åº”åˆ°ç›¸åº”çš„å¤„ç†å‡½æ•°ä¸­å» è¿™ä¸¤ä¸ªå‚æ•° åœ¨http.ListenAndServe(\":12345\", nil)ä¸­è¿›è¡Œè®¾ç½®çš„, ç¬¬ä¸€ä¸ªä¸ºåœ°å€, ç¬¬äºŒä¸ªä¼ é€’å¤„ç†å‡½æ•°. å¦‚æœä¼ é€’nil, åˆ™é‡‡ç”¨é»˜è®¤çš„ The handler is typically nil, in which case the DefaultServeMux is used. http.ListenAndServeçš„å®ç°å¦‚ä¸‹: func ListenAndServe(addr string, handler Handler) error { server := \u0026Server{Addr: addr, Handler: handler} return server.ListenAndServe() } type Handler interface { ServeHTTP(ResponseWriter, *Request) } å¯ä»¥çœ‹åˆ° Handleræ˜¯ä¸€ä¸ªæ¥å£, å®ç°è¿™ä¸ªæ¥å£çš„è¯, æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„Handler è‡ªå®šä¹‰Handler å®šä¹‰ä¸€ä¸ªç»“æ„ä½“, ç»“æ„ä½“å®ç° ServeHTTP(w http.ResponseWriter, r *http.Request)æ–¹æ³• ç„¶åä½¿ç”¨ Handleå‡½æ•°è¿›è¡Œè·¯ç”±æ³¨å†Œ package main import \"net/http\" type MyIndexHandler struct { } func (h *MyIndexHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello World\")) } type MyBlogHandler struct { } func (h *MyBlogHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"This is my Blog\")) } func main() { mux := http.NewServeMux() mux.Handle(\"/\", \u0026MyIndexHandler{}) mux.Handle(\"/blog\", \u0026MyBlogHandler{}) http.ListenAndServe(\":12345\", mux) } OSX MP16 ~ â¯ curl localhost:12345 Hello World OSX MP16 ~ â¯ curl localhost:12345/blog This is my Blog OSX MP16 ~ â¯ ä½†è¿™æ˜æ˜¾çœ‹å‡ºæ¥, å¯¹æ¯ä¸€ä¸ªè·¯ç”± éƒ½è¦é«˜å†™ä¸€ä¸ªxxxHandlerç»“æ„ä½“å’Œå®ç°ServeHTTP, çœ‹ä¸Šå»éå¸¸æ··ä¹± è¿™æ—¶å€™å°±å¯ä»¥ç”¨mux.HandleFuncæ¥å®ç°è·¯ç”± package main import \"net/http\" func main() { mux := http.NewServeMux() mux.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello World\")) }) mux.HandleFunc(\"/blog\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"This is my Blog\")) }) http.ListenAndServe(\":12345\", mux) } è‡ªå®šä¹‰ServeMux åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, mux := http.NewServeMux()è¿˜æ˜¯ä½¿ç”¨äº†é»˜è®¤router, å…¶ç®€å•çš„åŒæ—¶ä¹Ÿæœ‰ä¸å°‘ç¼ºç‚¹ æ¯”å¦‚, å…¶æ˜¯é€šè¿‡urlè¿›è¡Œè·¯ç”±, ä½†ä¸æ”¯æŒåŸºäºæ–¹æ³•(GET, POSTâ€¦)çš„è·¯ç”±, ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ç­‰ç­‰ å‚è€ƒè¿™ä¸ª https://www.alexedwards.net/blog/which-go-router-should-i-use ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:3","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"äººæ°”Webæ¡†æ¶ å‚è€ƒè¿™ç¯‡æ–‡ç« , https://blog.51cto.com/coderaction/3001008 å…¶ä¸­æœ‰å„æ¡†æ¶çš„å¯¹æ¯”, åŠŸèƒ½ä¸Širisæœ€å…¨ https://github.com/kataras/iris ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:4:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"}]