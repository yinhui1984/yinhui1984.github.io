<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Golang]Http Server | Zhouyinhui's Space</title><meta name=keywords content="#go#,#golang#"><meta name=description content="ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main  import ( 	&#34;log&#34; 	&#34;net/http&#34; )  func main() { 	err := http.ListenAndServe(&#34;:8080&#34;, http.FileServer(http.Dir(&#34;.&#34;))) 	if err != nil { 	log.Fatal(err) 	} } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«.
ç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­
#æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ 	echo &#34;start file server :12345&#34; 	cat <<EOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go package main import ( &#34;log&#34; &#34;net/http&#34; ) func main() { err := http.ListenAndServe(&#34;:12345&#34;, http.FileServer(http.Dir(&#34;.&#34;))) if err !"><meta name=author content="zhouyinhui"><link rel=canonical href=../../posts/golang_http_server/><link crossorigin=anonymous href=../../assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=../../assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.95.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="[Golang]Http Server"><meta property="og:description" content="ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main  import ( 	&#34;log&#34; 	&#34;net/http&#34; )  func main() { 	err := http.ListenAndServe(&#34;:8080&#34;, http.FileServer(http.Dir(&#34;.&#34;))) 	if err != nil { 	log.Fatal(err) 	} } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«.
ç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­
#æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ 	echo &#34;start file server :12345&#34; 	cat <<EOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go package main import ( &#34;log&#34; &#34;net/http&#34; ) func main() { err := http.ListenAndServe(&#34;:12345&#34;, http.FileServer(http.Dir(&#34;.&#34;))) if err !"><meta property="og:type" content="article"><meta property="og:url" content="/posts/golang_http_server/"><meta property="og:image" content="%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-06T10:04:12+08:00"><meta property="article:modified_time" content="2022-06-06T10:04:12+08:00"><meta property="og:site_name" content="zhouyinhui's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[Golang]Http Server"><meta name=twitter:description content="ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main  import ( 	&#34;log&#34; 	&#34;net/http&#34; )  func main() { 	err := http.ListenAndServe(&#34;:8080&#34;, http.FileServer(http.Dir(&#34;.&#34;))) 	if err != nil { 	log.Fatal(err) 	} } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«.
ç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­
#æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ 	echo &#34;start file server :12345&#34; 	cat <<EOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go package main import ( &#34;log&#34; &#34;net/http&#34; ) func main() { err := http.ListenAndServe(&#34;:12345&#34;, http.FileServer(http.Dir(&#34;.&#34;))) if err !"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"/posts/"},{"@type":"ListItem","position":3,"name":"[Golang]Http Server","item":"/posts/golang_http_server/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Golang]Http Server","name":"[Golang]Http Server","description":"ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main  import ( \t\u0026#34;log\u0026#34; \t\u0026#34;net/http\u0026#34; )  func main() { \terr := http.ListenAndServe(\u0026#34;:8080\u0026#34;, http.FileServer(http.Dir(\u0026#34;.\u0026#34;))) \tif err != nil { \tlog.Fatal(err) \t} } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«.\nç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­\n#æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ \techo \u0026#34;start file server :12345\u0026#34; \tcat \u0026lt;\u0026lt;EOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go package main import ( \u0026#34;log\u0026#34; \u0026#34;net/http\u0026#34; ) func main() { err := http.ListenAndServe(\u0026#34;:12345\u0026#34;, http.FileServer(http.Dir(\u0026#34;.\u0026#34;))) if err !","keywords":["#go#","#golang#"],"articleBody":"ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main  import ( \t\"log\" \t\"net/http\" )  func main() { \terr := http.ListenAndServe(\":8080\", http.FileServer(http.Dir(\".\"))) \tif err != nil { \tlog.Fatal(err) \t} } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«.\nç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­\n#æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ \techo \"start file server :12345\" \tcat package main import ( \"log\" \"net/http\" ) func main() { err := http.ListenAndServe(\":12345\", http.FileServer(http.Dir(\".\"))) if err != nil { log.Fatal(err) } } EOF } OSX MP16 ~/Downloads â¯ fileserver start file server :12345 Pythonä¸­æœ‰ç›¸åŒçš„åŠŸèƒ½\npython3 -m SimpleHTTPServer 7777 æˆ– python3 -m http.server\nä¸€ä¸ªç®€å•çš„WebServer package main  import ( \t\"log\" \t\"net/http\" )  func main() {  \thttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { \t_, err := w.Write([]byte(\"Hello World!\\n\")) \tif err != nil { \tlog.Println(err) \t} \t})  \terr := http.ListenAndServe(\":12345\", nil) \tif err != nil { \tlog.Fatal(err) \t} } è®¿é—®ä¸€ä¸‹è¯•è¯•:\nOSX MP16 ~/Downloads/goplayground â¯ curl http://localhost:12345 Hello World! http.HandleFunc http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { \t//... \t}) è¯¥æ–¹æ³•æä¾›äº†ä¸€ç§æŒ‡å®šå¦‚ä½•å¤„ç†ç‰¹å®šè·¯ç”±çš„è¯·æ±‚çš„æ–¹æ³•, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè·¯ç”±, ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤„ç†å‡½æ•°. å¤„ç†å‡½æ•°å¯å†™æˆåŒ¿åå‡½æ•°, ä¹Ÿå¯ä»¥å£°æ˜ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°\nfunc rootHandler(w http.ResponseWriter, r *http.Request) { \t_, err := w.Write([]byte(\"Hello World\")) \tif err != nil { \tlog.Println(err) \t} }  func main() {  \thttp.HandleFunc(\"/\", rootHandler)  //... } å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯http.ResponseWriterç±»å‹çš„å€¼ã€‚è¿™æ˜¯ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº”çš„æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯å“åº”æ ‡å¤´çš„è®¾ç½®æ–¹å¼,æ¯”å¦‚w.WriteHeader(http.StatusOK)ã€‚ç¬¬äºŒä¸ªè®ºç‚¹æ˜¯æŒ‡å‘http.Requestçš„æŒ‡é’ˆã€‚è¿™æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­æ£€ç´¢æ•°æ®çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚æŒ‡é’ˆè®¿é—®è¡¨å•æäº¤çš„è¯¦ç»†ä¿¡æ¯\næ¯”å¦‚ ä¸‹é¢çš„æ–¹æ³•, ä½¿ç”¨ http://127.0.0.1:12345/?key=date æ—¶å°†è¿”å›å½“å‰çš„æ—¥æœŸ, ç¡®å®key=æˆ–keyä¸æ­£ç¡®æ—¶è¿”å›http.StatusBadRequest\nfunc rootHandler(w http.ResponseWriter, r *http.Request) { \tkeys, ok := r.URL.Query()[\"key\"] \tif !ok || len(keys[0]) 1 { \tlog.Println(\"Url Param 'key' is missing\") \tw.WriteHeader(http.StatusBadRequest) \t_, err := w.Write([]byte(\"Url Param 'key' is missing\")) \tif err != nil { \tlog.Println(err) \treturn \t} \treturn \t}  \tkey := keys[0] \tswitch key { \tcase \"date\": \tw.WriteHeader(http.StatusOK) \t_, err := w.Write([]byte(time.Now().Format(\"2006-01-02\"))) \tif err != nil { \tlog.Println(err) \t} \tdefault: \tw.WriteHeader(http.StatusBadRequest) \t_, _ = w.Write([]byte(\"Invalid key\")) \tlog.Println(\"Invalid key\") \t} } http.ResponseWriter ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº”\nè®¾ç½®ç›¸åº”æ ‡å¿—å¤´: w.WriteHeader(http.StatusOK) è·å–æˆ–å®åˆ™å“åº”å¤´ w.Header().Set(\"content-type\", \"application/json\") w.Header().Add(\"foo\", \"bar\") å†™å…¥ç›¸åº”æ•°æ®: w.Write([]byte(time.Now().Format(\"2006-01-02\"))) ä¾‹å­:\npackage main  import ( \t\"encoding/json\" \t\"log\" \t\"net/http\" )  type SystemInfo struct { \tHostname string `json:\"hostname\"` \tUptime string `json:\"uptime\"` }  func rootHandler(w http.ResponseWriter, r *http.Request) { \tinfo := SystemInfo{ \tHostname: \"test\", \tUptime: \"2022-01-01 00:00:00\", \t} \tw.Header().Set(\"Content-Type\", \"application/json\") \tw.WriteHeader(http.StatusOK) \tbytes, _ := json.Marshal(info) \t_, err := w.Write(bytes) \tif err != nil { \tlog.Println(\"Error writing response: \", err) \t} }  func main() {  \thttp.HandleFunc(\"/\", rootHandler)  \terr := http.ListenAndServe(\":12345\", nil) \tif err != nil { \tlog.Fatal(err) \t} } OSX MP16 ~ â¯ curl localhost:12345 {\"hostname\":\"test\",\"uptime\":\"2022-01-01 00:00:00\"} *http.Request æŒ‡å‘http.Requestçš„æŒ‡é’ˆ, é€šè¿‡æ”¹æŒ‡é’ˆå¯ä»¥è·å–è¯·æ±‚ä¸­çš„å„ç§æ•°æ®, æ¯”å¦‚\nè·å–åŸºæœ¬ä¿¡æ¯ func rootHandler(w http.ResponseWriter, r *http.Request) {  \tfmt.Println(\"User Agent: \", r.UserAgent()) \tfmt.Println(\"Host: \", r.Host) \tfmt.Println(\"Remote Address: \", r.RemoteAddr) \tfmt.Println(\"Request URI: \", r.RequestURI) \tfmt.Println(\"Method: \", r.Method) \tfmt.Println(\"URL: \", r.URL) \tfmt.Println(\"Header: \", r.Header)  \tw.WriteHeader(http.StatusOK) } è¾“å‡º:\nUser Agent: curl/7.79.1 Host: localhost:12345 Remote Address: 127.0.0.1:58967 Request URI: / Method: GET URL: / Header: map[Accept:[*/*] User-Agent:[curl/7.79.1]] è·å–cookie func rootHandler(w http.ResponseWriter, r *http.Request) {  \t//è·å–æ‰€æœ‰ \tfor _, c := range r.Cookies() { \tfmt.Printf(\"%s : %q\\n\", c.Name, c.Value) \t}  \t//è·å–æŒ‡å®š \tc, err := r.Cookie(\"token\") \tif err != nil { \tlog.Println(err) \t} \tfmt.Printf(\"%s : %q\\n\", c.Name, c.Value)  \tw.WriteHeader(http.StatusOK) } curl --cookie \"token=abcdefg\" http://localhost:12345\nè·å–GETå‚æ•°   è·å–æ‰€æœ‰å‚æ•° args := r.URL.Query()\n  è·å–æŒ‡å®šå‚æ•°(æ³¨:å‚æ•°å¯èƒ½è¢«é‡å¤å†™å¤šæ¬¡)\næ¯”å¦‚: localhost:12345/?id=5\nfunc rootHandler(w http.ResponseWriter, r *http.Request) { \tids, ok := r.URL.Query()[\"id\"] \tif !ok || len(ids[0]) 1 { \tlog.Println(\"Url Param 'id' is missing\") \treturn \t} \tid := ids[0] \tlog.Println(\"Url Param 'id' is: \" + id)  \tw.WriteHeader(http.StatusOK) }   æˆ–è€…\nfunc rootHandler(w http.ResponseWriter, r *http.Request) {  \tid := r.FormValue(\"id\") \tif id == \"\" { \tlog.Println(\"Url Param 'id' is missing\") \t} \tfmt.Println(\"id:\", id)  \tw.WriteHeader(http.StatusOK) }  ä¹Ÿå¯ä»¥é€šè¿‡r.Formæ¥è·å–Getå‚æ•°\n è·å–PATCH, POST or PUTå‚æ•° æ¯”å¦‚ curl -d \"id=5\u0026format=1\" http://localhost:12345/\nfunc rootHandler(w http.ResponseWriter, r *http.Request) { \t//parse \terr := r.ParseForm() \tif err != nil { \tlog.Println(\"ParseForm error:\", err) \t} \t//get post args \tfor k, v := range r.PostForm { \tlog.Println(\"key:\", k) \tlog.Println(\"val:\", v) // v []string \t}  \tw.WriteHeader(http.StatusOK) } è¾“å‡º\n2022/06/06 15:14:46 key: id 2022/06/06 15:14:46 val: [5] 2022/06/06 15:14:46 key: format 2022/06/06 15:14:46 val: [1] ParseFormä¼šå¡«å……r.Formå’Œr.PostFormã€‚ å¯¹äºæ‰€æœ‰çš„è¯·æ±‚ï¼ŒParseFormè§£ææ¥è‡ªURLçš„åŸå§‹æŸ¥è¯¢å¹¶æ›´æ–°r.Formã€‚ å¯¹äºPOSTã€PUTå’ŒPATCHè¯·æ±‚ï¼Œå®ƒä¹Ÿè¯»å–è¯·æ±‚æ­£æ–‡ï¼Œå°†å…¶è§£æä¸ºä¸€ä¸ªè¡¨å•ï¼Œå¹¶å°†ç»“æœæ”¾å…¥r.PostFormå’Œr.Formä¸­ã€‚åœ¨r.Formä¸­ï¼Œè¯·æ±‚æ­£æ–‡å‚æ•°ä¼˜å…ˆäºURLæŸ¥è¯¢å­—ç¬¦ä¸²å€¼ã€‚ å¦‚æœè¯·æ±‚ä½“çš„å¤§å°è¿˜æ²¡æœ‰è¢«MaxBytesReaderé™åˆ¶ï¼Œé‚£ä¹ˆå…¶å¤§å°å°†è¢«é™åˆ¶åœ¨10MBã€‚ å¯¹äºå…¶ä»–HTTPæ–¹æ³•ï¼Œæˆ–è€…å½“å†…å®¹ç±»å‹ä¸æ˜¯application/x-www-form-urlencodedæ—¶ï¼Œè¯·æ±‚æ­£æ–‡ä¸è¢«è¯»å–ï¼Œå¹¶ä¸”r.PostFormè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªéé›¶çš„ç©ºå€¼ã€‚ ParseMultipartFormè‡ªåŠ¨è°ƒç”¨ParseFormã€‚ParseFormæ˜¯å¹‚ç­‰çš„ã€‚\n r.Formå±æ€§åŒ…å«äº†postè¡¨å•å’Œurlä¸­çš„getå‚æ•°ã€‚\nr.PostFormå±æ€§åªåŒ…å«äº†postè¡¨å•å‚æ•°ã€‚\n è·å–æŒ‡å®šå‚æ•°, æ¯”å¦‚\nfunc rootHandler(w http.ResponseWriter, r *http.Request) {  \terr := r.ParseForm() \tif err != nil { \tlog.Println(\"ParseForm error:\", err) \t} \tids := r.PostForm.Get(\"id\") //è·å–idå‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼ \tlog.Println(\"id:\", ids)  \tw.WriteHeader(http.StatusOK) } æˆ–è€…\nfunc rootHandler(w http.ResponseWriter, r *http.Request) {  \tid := r.PostFormValue(\"id\") \tif id == \"\" { \tlog.Println(\"Url Param 'id' is missing\") \t} \tfmt.Println(\"id:\", id)  \tw.WriteHeader(http.StatusOK) } è·å–ä¸Šä¼ æ–‡ä»¶ æ¯”å¦‚ curl -F \"file=@IMG_1526.PNG;type=image/png\" http://localhost:12345/upload\nä¸‹é¢ä»£ç ä¸­:\nr.ParseMultipartForm(10 å°†ä¸€ä¸ªè¯·æ±‚ä½“è§£æä¸ºmultipart/form-dataã€‚æ•´ä¸ªè¯·æ±‚æ­£æ–‡è¢«è§£æï¼Œå¹¶ä¸”å…¶æ–‡ä»¶éƒ¨åˆ†æœ€å¤šå­˜å‚¨åœ¨maxMemoryå­—èŠ‚çš„å†…å­˜ä¸­ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™å­˜å‚¨åœ¨ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ParseMultipartFormåœ¨å¿…è¦æ—¶è°ƒç”¨ParseFormã€‚å¦‚æœParseFormè¿”å›ä¸€ä¸ªé”™è¯¯ï¼ŒParseMultipartFormå°†å…¶è¿”å›ï¼Œä½†ä¹Ÿç»§ç»­è§£æè¯·æ±‚æ­£æ–‡ã€‚åœ¨å¯¹ParseMultipartFormè¿›è¡Œä¸€æ¬¡è°ƒç”¨åï¼Œéšåçš„è°ƒç”¨æ²¡æœ‰ä»»ä½•å½±å“.\nFormFile è¿”å›æä¾›çš„è¡¨å•keyçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœéœ€è¦ï¼ŒFormFileä¼šè°ƒç”¨ParseMultipartFormå’ŒParseFormã€‚\npackage main  import ( \t\"io\" \t\"log\" \t\"mime/multipart\" \t\"net/http\" \t\"os\" )  func uploadHandler(w http.ResponseWriter, r *http.Request) {  \t// Parse the multipart form in the request \terr := r.ParseMultipartForm(10  20) // 10 MiB \tif err != nil { \thttp.Error(w, err.Error(), http.StatusInternalServerError) \treturn \t} \t\t\t// FormFile returns the first file for the given key `file` \t// it also returns the FileHeader, so we can get the Filename, the Header and the size of the file \tfile, handler, err := r.FormFile(\"file\") \tif err != nil { \thttp.Error(w, err.Error(), http.StatusInternalServerError) \treturn \t} \tdefer func(file multipart.File) { \terr := file.Close() \tif err != nil { \tlog.Println(err) \t} \t}(file) \terr = os.MkdirAll(\"./upload\", 0777) \tif err != nil { \thttp.Error(w, err.Error(), http.StatusInternalServerError) \treturn \t} \tlocalFile, err := os.OpenFile(\"./upload/\"+handler.Filename, os.O_WRONLY|os.O_CREATE, 0666) \tif err != nil { \thttp.Error(w, err.Error(), http.StatusInternalServerError) \treturn \t} \tdefer func(localFile *os.File) { \terr := localFile.Close() \tif err != nil { \tlog.Println(err) \t} \t}(localFile) \t_, err = io.Copy(localFile, file) \tif err != nil { \thttp.Error(w, \"\", http.StatusInternalServerError)  return \t}  \tw.WriteHeader(http.StatusOK) }  func main() {  \thttp.HandleFunc(\"/upload\", uploadHandler)  \terr := http.ListenAndServe(\":12345\", nil) \tif err != nil { \tlog.Fatal(err) \t} } ğŸ‘å„ç§è·å–å‚æ•°æ–¹å¼æ¯”è¾ƒ    æ“ä½œ è§£æ è¯»å–URLå‚æ•° è¯»å–Bodyè¡¨å• æ”¯æŒæ–‡æœ¬ æ”¯æŒäºŒè¿›åˆ¶     r.Form r.ParseForm() Y Y Y    r.PostForm r.ParseForm()  Y Y    r.FormValue() è‡ªåŠ¨è°ƒç”¨r.ParseForm() Y Y Y    r.PostFormValue() è‡ªåŠ¨è°ƒç”¨r.ParseForm()  Y Y    r.MultipartForm ParseMultipartForm()  Y Y Y   r.FormFile è‡ªåŠ¨è°ƒç”¨ParseMultipartForm()  Y  Y    Handler , Handle , HandleFunc ä¸ http.ListenAndServe ä½¿ç”¨é»˜è®¤çš„Handler å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­\npackage main  import \"net/http\"  func main() { \thttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { \tw.Write([]byte(\"Hello, world!\")) \t}) \thttp.HandleFunc(\"/blog\", func(w http.ResponseWriter, r *http.Request) { \tw.Write([]byte(\"This is my Blog\")) \t})  \thttp.ListenAndServe(\":12345\", nil) } åœ¨å¯åŠ¨ä¸€ä¸ªHttpServerçš„æ—¶å€™, å…¶å®æˆ‘ä»¬å°±å…³å¿ƒ2ä¸ªä¸œè¥¿:\n åœ°å€ è·¯ç”±: å°†è¯·æ±‚å¯¹åº”åˆ°ç›¸åº”çš„å¤„ç†å‡½æ•°ä¸­å»  è¿™ä¸¤ä¸ªå‚æ•° åœ¨http.ListenAndServe(\":12345\", nil)ä¸­è¿›è¡Œè®¾ç½®çš„, ç¬¬ä¸€ä¸ªä¸ºåœ°å€, ç¬¬äºŒä¸ªä¼ é€’å¤„ç†å‡½æ•°.\nå¦‚æœä¼ é€’nil, åˆ™é‡‡ç”¨é»˜è®¤çš„\n The handler is typically nil, in which case the DefaultServeMux is used.\n http.ListenAndServeçš„å®ç°å¦‚ä¸‹:\nfunc ListenAndServe(addr string, handler Handler) error { \tserver := \u0026Server{Addr: addr, Handler: handler} \treturn server.ListenAndServe() } type Handler interface {  ServeHTTP(ResponseWriter, *Request) } å¯ä»¥çœ‹åˆ° Handleræ˜¯ä¸€ä¸ªæ¥å£, å®ç°è¿™ä¸ªæ¥å£çš„è¯, æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„Handler\nè‡ªå®šä¹‰Handler å®šä¹‰ä¸€ä¸ªç»“æ„ä½“, ç»“æ„ä½“å®ç° ServeHTTP(w http.ResponseWriter, r *http.Request)æ–¹æ³•\nç„¶åä½¿ç”¨ Handleå‡½æ•°è¿›è¡Œè·¯ç”±æ³¨å†Œ\npackage main  import \"net/http\"  type MyIndexHandler struct { }  func (h *MyIndexHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { \tw.Write([]byte(\"Hello World\")) }  type MyBlogHandler struct { }  func (h *MyBlogHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { \tw.Write([]byte(\"This is my Blog\")) }  func main() { \tmux := http.NewServeMux() \tmux.Handle(\"/\", \u0026MyIndexHandler{}) \tmux.Handle(\"/blog\", \u0026MyBlogHandler{}) \thttp.ListenAndServe(\":12345\", mux) } OSX MP16 ~ â¯ curl localhost:12345 Hello World OSX MP16 ~ â¯ curl localhost:12345/blog This is my Blog OSX MP16 ~ â¯ ä½†è¿™æ˜æ˜¾çœ‹å‡ºæ¥, å¯¹æ¯ä¸€ä¸ªè·¯ç”± éƒ½è¦é«˜å†™ä¸€ä¸ªxxxHandlerç»“æ„ä½“å’Œå®ç°ServeHTTP, çœ‹ä¸Šå»éå¸¸æ··ä¹±\nè¿™æ—¶å€™å°±å¯ä»¥ç”¨mux.HandleFuncæ¥å®ç°è·¯ç”±\npackage main  import \"net/http\"  func main() {  mux := http.NewServeMux()  mux.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {  w.Write([]byte(\"Hello World\"))  })  mux.HandleFunc(\"/blog\", func(w http.ResponseWriter, r *http.Request) {  w.Write([]byte(\"This is my Blog\"))  })   http.ListenAndServe(\":12345\", mux) } è‡ªå®šä¹‰ServeMux åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, mux := http.NewServeMux()è¿˜æ˜¯ä½¿ç”¨äº†é»˜è®¤router, å…¶ç®€å•çš„åŒæ—¶ä¹Ÿæœ‰ä¸å°‘ç¼ºç‚¹\næ¯”å¦‚, å…¶æ˜¯é€šè¿‡urlè¿›è¡Œè·¯ç”±, ä½†ä¸æ”¯æŒåŸºäºæ–¹æ³•(GET, POSTâ€¦)çš„è·¯ç”±, ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ç­‰ç­‰\nå‚è€ƒè¿™ä¸ª https://www.alexedwards.net/blog/which-go-router-should-i-use\näººæ°”Webæ¡†æ¶ å‚è€ƒè¿™ç¯‡æ–‡ç« ,\nhttps://blog.51cto.com/coderaction/3001008\nå…¶ä¸­æœ‰å„æ¡†æ¶çš„å¯¹æ¯”, åŠŸèƒ½ä¸Širisæœ€å…¨\nhttps://github.com/kataras/iris\n","wordCount":"1105","inLanguage":"en","datePublished":"2022-06-06T10:04:12+08:00","dateModified":"2022-06-06T10:04:12+08:00","author":{"@type":"Person","name":"zhouyinhui"},"mainEntityOfPage":{"@type":"WebPage","@id":"/posts/golang_http_server/"},"publisher":{"@type":"Organization","name":"Zhouyinhui's Space","logo":{"@type":"ImageObject","url":"%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href accesskey=h title="Zhouyinhui's Space (Alt + H)">Zhouyinhui's Space</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=../../ title=home><span>home</span></a></li><li><a href=../../tags/ title=tags><span>tags</span></a></li><li><a href=../../archives/ title=archives><span>archives</span></a></li><li><a href=../../search/ title="ğŸ”search (Alt + /)" accesskey=/><span>ğŸ”search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href>Home</a>&nbsp;Â»&nbsp;<a href=../../posts/>Posts</a></div><h1 class=post-title>[Golang]Http Server</h1><div class=post-meta><span title="2022-06-06 10:04:12 +0800 CST">June 6, 2022</span>&nbsp;Â·&nbsp;zhouyinhui</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%ae%80%e5%8d%95%e7%9a%84%e6%96%87%e4%bb%b6%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨>ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨</a></li><li><a href=#%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84webserver aria-label=ä¸€ä¸ªç®€å•çš„WebServer>ä¸€ä¸ªç®€å•çš„WebServer</a></li><li><a href=#httphandlefunc aria-label=http.HandleFunc>http.HandleFunc</a><ul><li><a href=#httpresponsewriter aria-label=http.ResponseWriter>http.ResponseWriter</a><ul><li><a href=#%e8%ae%be%e7%bd%ae%e7%9b%b8%e5%ba%94%e6%a0%87%e5%bf%97%e5%a4%b4 aria-label=è®¾ç½®ç›¸åº”æ ‡å¿—å¤´:>è®¾ç½®ç›¸åº”æ ‡å¿—å¤´:</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e6%88%96%e5%ae%9e%e5%88%99%e5%93%8d%e5%ba%94%e5%a4%b4 aria-label=è·å–æˆ–å®åˆ™å“åº”å¤´>è·å–æˆ–å®åˆ™å“åº”å¤´</a></li><li><a href=#%e5%86%99%e5%85%a5%e7%9b%b8%e5%ba%94%e6%95%b0%e6%8d%ae aria-label=å†™å…¥ç›¸åº”æ•°æ®:>å†™å…¥ç›¸åº”æ•°æ®:</a></li></ul></li><li><a href=#httprequest aria-label=*http.Request>*http.Request</a><ul><li><a href=#%e8%8e%b7%e5%8f%96%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label=è·å–åŸºæœ¬ä¿¡æ¯>è·å–åŸºæœ¬ä¿¡æ¯</a></li><li><a href=#%e8%8e%b7%e5%8f%96cookie aria-label=è·å–cookie>è·å–cookie</a></li><li><a href=#%e8%8e%b7%e5%8f%96get%e5%8f%82%e6%95%b0 aria-label=è·å–GETå‚æ•°>è·å–GETå‚æ•°</a></li><li><a href=#%e8%8e%b7%e5%8f%96patch-post-or-put%e5%8f%82%e6%95%b0 aria-label="è·å–PATCH, POST or PUTå‚æ•°">è·å–PATCH, POST or PUTå‚æ•°</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6 aria-label=è·å–ä¸Šä¼ æ–‡ä»¶>è·å–ä¸Šä¼ æ–‡ä»¶</a></li><li><a href=#%e5%90%84%e7%a7%8d%e8%8e%b7%e5%8f%96%e5%8f%82%e6%95%b0%e6%96%b9%e5%bc%8f%e6%af%94%e8%be%83 aria-label=ğŸ‘å„ç§è·å–å‚æ•°æ–¹å¼æ¯”è¾ƒ>ğŸ‘å„ç§è·å–å‚æ•°æ–¹å¼æ¯”è¾ƒ</a></li></ul></li><li><a href=#handler--handle--handlefunc-%e4%b8%8e-httplistenandserve aria-label="Handler , Handle , HandleFunc ä¸ http.ListenAndServe">Handler , Handle , HandleFunc ä¸ http.ListenAndServe</a><ul><li><a href=#%e4%bd%bf%e7%94%a8%e9%bb%98%e8%ae%a4%e7%9a%84handler aria-label=ä½¿ç”¨é»˜è®¤çš„Handler>ä½¿ç”¨é»˜è®¤çš„Handler</a></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89handler aria-label=è‡ªå®šä¹‰Handler>è‡ªå®šä¹‰Handler</a></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89servemux aria-label=è‡ªå®šä¹‰ServeMux>è‡ªå®šä¹‰ServeMux</a></li></ul></li></ul></li><li><a href=#%e4%ba%ba%e6%b0%94web%e6%a1%86%e6%9e%b6 aria-label=äººæ°”Webæ¡†æ¶>äººæ°”Webæ¡†æ¶</a></li></ul></div></details></div><div class=post-content><h2 id=ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨>ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨<a hidden class=anchor aria-hidden=true href=#ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:8080&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>FileServer</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Dir</span>(<span style=color:#e6db74>&#34;.&#34;</span>)))
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«.</p><p>ç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#æ–‡ä»¶æœåŠ¡å™¨</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> fileserver<span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>	echo <span style=color:#e6db74>&#34;start file server :12345&#34;</span>
</span></span><span style=display:flex><span>	cat <span style=color:#e6db74>&lt;&lt;EOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>package main
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>import (
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	&#34;log&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	&#34;net/http&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>func main() {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	err := http.ListenAndServe(&#34;:12345&#34;, http.FileServer(http.Dir(&#34;.&#34;)))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	if err != nil {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		log.Fatal(err)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>OSX MP16 ~/Downloads â¯ fileserver                                                         
</span></span><span style=display:flex><span>start file server :12345
</span></span></code></pre></div><p>Pythonä¸­æœ‰ç›¸åŒçš„åŠŸèƒ½</p><p><code>python3 -m SimpleHTTPServer 7777</code> æˆ– <code>python3 -m http.server</code></p><h2 id=ä¸€ä¸ªç®€å•çš„webserver>ä¸€ä¸ªç®€å•çš„WebServer<a hidden class=anchor aria-hidden=true href=#ä¸€ä¸ªç®€å•çš„webserver>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;Hello World!\n&#34;</span>))
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:12345&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è®¿é—®ä¸€ä¸‹è¯•è¯•:</p><pre tabindex=0><code>OSX MP16 ~/Downloads/goplayground â¯ curl http://localhost:12345          
Hello World!
</code></pre><h2 id=httphandlefunc>http.HandleFunc<a hidden class=anchor aria-hidden=true href=#httphandlefunc>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>		<span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	})
</span></span></code></pre></div><p>è¯¥æ–¹æ³•æä¾›äº†ä¸€ç§æŒ‡å®šå¦‚ä½•å¤„ç†ç‰¹å®šè·¯ç”±çš„è¯·æ±‚çš„æ–¹æ³•, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè·¯ç”±, ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤„ç†å‡½æ•°. å¤„ç†å‡½æ•°å¯å†™æˆåŒ¿åå‡½æ•°, ä¹Ÿå¯ä»¥å£°æ˜ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;&lt;h1 style=\&#34;color:Tomato;\&#34;&gt;Hello World&lt;/h1&gt;&#34;</span>))
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>rootHandler</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>//...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>http.ResponseWriter</code>ç±»å‹çš„å€¼ã€‚è¿™æ˜¯ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº”çš„æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯å“åº”æ ‡å¤´çš„è®¾ç½®æ–¹å¼,æ¯”å¦‚<code>w.WriteHeader(http.StatusOK)</code>ã€‚ç¬¬äºŒä¸ªè®ºç‚¹æ˜¯æŒ‡å‘<code>http.Request</code>çš„æŒ‡é’ˆã€‚è¿™æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­æ£€ç´¢æ•°æ®çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚æŒ‡é’ˆè®¿é—®è¡¨å•æäº¤çš„è¯¦ç»†ä¿¡æ¯</p><p>æ¯”å¦‚ ä¸‹é¢çš„æ–¹æ³•, ä½¿ç”¨ <code>http://127.0.0.1:12345/?key=date</code> æ—¶å°†è¿”å›å½“å‰çš„æ—¥æœŸ, ç¡®å®<code>key=</code>æˆ–<code>key</code>ä¸æ­£ç¡®æ—¶è¿”å›<code>http.StatusBadRequest</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>keys</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Query</span>()[<span style=color:#e6db74>&#34;key&#34;</span>]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>ok</span> <span style=color:#f92672>||</span> len(<span style=color:#a6e22e>keys</span>[<span style=color:#ae81ff>0</span>]) &lt; <span style=color:#ae81ff>1</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Url Param &#39;key&#39; is missing&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;Url Param &#39;key&#39; is missing&#34;</span>))
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>keys</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>key</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;date&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Format</span>(<span style=color:#e6db74>&#34;2006-01-02&#34;</span>)))
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusBadRequest</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;Invalid key&#34;</span>))
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Invalid key&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=httpresponsewriter>http.ResponseWriter<a hidden class=anchor aria-hidden=true href=#httpresponsewriter>#</a></h3><p>ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº”</p><h4 id=è®¾ç½®ç›¸åº”æ ‡å¿—å¤´>è®¾ç½®ç›¸åº”æ ‡å¿—å¤´:<a hidden class=anchor aria-hidden=true href=#è®¾ç½®ç›¸åº”æ ‡å¿—å¤´>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span></code></pre></div><h4 id=è·å–æˆ–å®åˆ™å“åº”å¤´>è·å–æˆ–å®åˆ™å“åº”å¤´<a hidden class=anchor aria-hidden=true href=#è·å–æˆ–å®åˆ™å“åº”å¤´>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;content-type&#34;</span>, <span style=color:#e6db74>&#34;application/json&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Add</span>(<span style=color:#e6db74>&#34;foo&#34;</span>, <span style=color:#e6db74>&#34;bar&#34;</span>)
</span></span></code></pre></div><h4 id=å†™å…¥ç›¸åº”æ•°æ®>å†™å…¥ç›¸åº”æ•°æ®:<a hidden class=anchor aria-hidden=true href=#å†™å…¥ç›¸åº”æ•°æ®>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Format</span>(<span style=color:#e6db74>&#34;2006-01-02&#34;</span>)))
</span></span></code></pre></div><p>ä¾‹å­:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;encoding/json&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>SystemInfo</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Hostname</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;hostname&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Uptime</span>   <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`json:&#34;uptime&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>info</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>SystemInfo</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Hostname</span>: <span style=color:#e6db74>&#34;test&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Uptime</span>:   <span style=color:#e6db74>&#34;2022-01-01 00:00:00&#34;</span>,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Type&#34;</span>, <span style=color:#e6db74>&#34;application/json&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>bytes</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Marshal</span>(<span style=color:#a6e22e>info</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>(<span style=color:#a6e22e>bytes</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Error writing response: &#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>rootHandler</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:12345&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>OSX MP16 ~ â¯ curl localhost:12345                                                         
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#34;hostname&#34;</span>:<span style=color:#e6db74>&#34;test&#34;</span>,<span style=color:#e6db74>&#34;uptime&#34;</span>:<span style=color:#e6db74>&#34;2022-01-01 00:00:00&#34;</span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=httprequest>*http.Request<a hidden class=anchor aria-hidden=true href=#httprequest>#</a></h3><p>æŒ‡å‘<code>http.Request</code>çš„æŒ‡é’ˆ, é€šè¿‡æ”¹æŒ‡é’ˆå¯ä»¥è·å–è¯·æ±‚ä¸­çš„å„ç§æ•°æ®, æ¯”å¦‚</p><h4 id=è·å–åŸºæœ¬ä¿¡æ¯>è·å–åŸºæœ¬ä¿¡æ¯<a hidden class=anchor aria-hidden=true href=#è·å–åŸºæœ¬ä¿¡æ¯>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;User Agent: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>UserAgent</span>())
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Host: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Host</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Remote Address: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>RemoteAddr</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Request URI: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>RequestURI</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Method: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Method</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;URL: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>URL</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Header: &#34;</span>, <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Header</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¾“å‡º:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>User Agent:  curl/7.79.1
</span></span><span style=display:flex><span>Host:  localhost:12345
</span></span><span style=display:flex><span>Remote Address:  127.0.0.1:58967
</span></span><span style=display:flex><span>Request URI:  /
</span></span><span style=display:flex><span>Method:  GET
</span></span><span style=display:flex><span>URL:  /
</span></span><span style=display:flex><span>Header:  map<span style=color:#f92672>[</span>Accept:<span style=color:#f92672>[</span>*/*<span style=color:#f92672>]</span> User-Agent:<span style=color:#f92672>[</span>curl/7.79.1<span style=color:#f92672>]]</span>
</span></span></code></pre></div><h4 id=è·å–cookie>è·å–cookie<a hidden class=anchor aria-hidden=true href=#è·å–cookie>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>//è·å–æ‰€æœ‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Cookies</span>() {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%s : %q\n&#34;</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Name</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Value</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>//è·å–æŒ‡å®š
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>c</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Cookie</span>(<span style=color:#e6db74>&#34;token&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%s : %q\n&#34;</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Name</span>, <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Value</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>curl --cookie "token=abcdefg" http://localhost:12345</code></p><h4 id=è·å–getå‚æ•°>è·å–GETå‚æ•°<a hidden class=anchor aria-hidden=true href=#è·å–getå‚æ•°>#</a></h4><ul><li><p>è·å–æ‰€æœ‰å‚æ•° <code>args := r.URL.Query()</code></p></li><li><p>è·å–æŒ‡å®šå‚æ•°(æ³¨:å‚æ•°å¯èƒ½è¢«é‡å¤å†™å¤šæ¬¡)</p><p>æ¯”å¦‚: <code>localhost:12345/?id=5</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ids</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Query</span>()[<span style=color:#e6db74>&#34;id&#34;</span>]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>ok</span> <span style=color:#f92672>||</span> len(<span style=color:#a6e22e>ids</span>[<span style=color:#ae81ff>0</span>]) &lt; <span style=color:#ae81ff>1</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Url Param &#39;id&#39; is missing&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ids</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Url Param &#39;id&#39; is: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul><p>æˆ–è€…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>FormValue</span>(<span style=color:#e6db74>&#34;id&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Url Param &#39;id&#39; is missing&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;id:&#34;</span>, <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>ä¹Ÿå¯ä»¥é€šè¿‡r.Formæ¥è·å–Getå‚æ•°</p></blockquote><h4 id=è·å–patch-post-or-putå‚æ•°>è·å–PATCH, POST or PUTå‚æ•°<a hidden class=anchor aria-hidden=true href=#è·å–patch-post-or-putå‚æ•°>#</a></h4><p>æ¯”å¦‚ <code>curl -d "id=5&format=1" http://localhost:12345/</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#75715e>//parse
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>ParseForm</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;ParseForm error:&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#75715e>//get post args
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>PostForm</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;key:&#34;</span>, <span style=color:#a6e22e>k</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;val:&#34;</span>, <span style=color:#a6e22e>v</span>) <span style=color:#75715e>// v []string
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¾“å‡º</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>2022/06/06 15:14:46 key: id
</span></span><span style=display:flex><span>2022/06/06 15:14:46 val: <span style=color:#f92672>[</span>5<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>2022/06/06 15:14:46 key: format
</span></span><span style=display:flex><span>2022/06/06 15:14:46 val: <span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>ParseFormä¼šå¡«å……r.Formå’Œr.PostFormã€‚
å¯¹äºæ‰€æœ‰çš„è¯·æ±‚ï¼ŒParseFormè§£ææ¥è‡ªURLçš„åŸå§‹æŸ¥è¯¢å¹¶æ›´æ–°r.Formã€‚
å¯¹äºPOSTã€PUTå’ŒPATCHè¯·æ±‚ï¼Œå®ƒä¹Ÿè¯»å–è¯·æ±‚æ­£æ–‡ï¼Œå°†å…¶è§£æä¸ºä¸€ä¸ªè¡¨å•ï¼Œå¹¶å°†ç»“æœæ”¾å…¥r.PostFormå’Œr.Formä¸­ã€‚åœ¨r.Formä¸­ï¼Œè¯·æ±‚æ­£æ–‡å‚æ•°ä¼˜å…ˆäºURLæŸ¥è¯¢å­—ç¬¦ä¸²å€¼ã€‚
å¦‚æœè¯·æ±‚ä½“çš„å¤§å°è¿˜æ²¡æœ‰è¢«MaxBytesReaderé™åˆ¶ï¼Œé‚£ä¹ˆå…¶å¤§å°å°†è¢«é™åˆ¶åœ¨10MBã€‚
å¯¹äºå…¶ä»–HTTPæ–¹æ³•ï¼Œæˆ–è€…å½“å†…å®¹ç±»å‹ä¸æ˜¯application/x-www-form-urlencodedæ—¶ï¼Œè¯·æ±‚æ­£æ–‡ä¸è¢«è¯»å–ï¼Œå¹¶ä¸”r.PostFormè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªéé›¶çš„ç©ºå€¼ã€‚
ParseMultipartFormè‡ªåŠ¨è°ƒç”¨ParseFormã€‚ParseFormæ˜¯å¹‚ç­‰çš„ã€‚</p><blockquote><p>r.Formå±æ€§åŒ…å«äº†postè¡¨å•å’Œurlä¸­çš„getå‚æ•°ã€‚</p><p>r.PostFormå±æ€§åªåŒ…å«äº†postè¡¨å•å‚æ•°ã€‚</p></blockquote><p>è·å–æŒ‡å®šå‚æ•°, æ¯”å¦‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>ParseForm</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;ParseForm error:&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ids</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>PostForm</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;id&#34;</span>) <span style=color:#75715e>//è·å–idå‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;id:&#34;</span>, <span style=color:#a6e22e>ids</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æˆ–è€…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>rootHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>id</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>PostFormValue</span>(<span style=color:#e6db74>&#34;id&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>id</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Url Param &#39;id&#39; is missing&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;id:&#34;</span>, <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=è·å–ä¸Šä¼ æ–‡ä»¶>è·å–ä¸Šä¼ æ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#è·å–ä¸Šä¼ æ–‡ä»¶>#</a></h4><p>æ¯”å¦‚ <code>curl -F "file=@IMG_1526.PNG;type=image/png" http://localhost:12345/upload</code></p><p>ä¸‹é¢ä»£ç ä¸­:</p><p><code>r.ParseMultipartForm(10 &lt;&lt; 20)</code>å°†ä¸€ä¸ªè¯·æ±‚ä½“è§£æä¸ºmultipart/form-dataã€‚æ•´ä¸ªè¯·æ±‚æ­£æ–‡è¢«è§£æï¼Œå¹¶ä¸”å…¶æ–‡ä»¶éƒ¨åˆ†æœ€å¤šå­˜å‚¨åœ¨maxMemoryå­—èŠ‚çš„å†…å­˜ä¸­ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™å­˜å‚¨åœ¨ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ParseMultipartFormåœ¨å¿…è¦æ—¶è°ƒç”¨ParseFormã€‚å¦‚æœParseFormè¿”å›ä¸€ä¸ªé”™è¯¯ï¼ŒParseMultipartFormå°†å…¶è¿”å›ï¼Œä½†ä¹Ÿç»§ç»­è§£æè¯·æ±‚æ­£æ–‡ã€‚åœ¨å¯¹ParseMultipartFormè¿›è¡Œä¸€æ¬¡è°ƒç”¨åï¼Œéšåçš„è°ƒç”¨æ²¡æœ‰ä»»ä½•å½±å“.</p><p><code>FormFile</code> è¿”å›æä¾›çš„è¡¨å•keyçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœéœ€è¦ï¼ŒFormFileä¼šè°ƒç”¨ParseMultipartFormå’ŒParseFormã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;io&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;mime/multipart&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;os&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>uploadHandler</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Parse the multipart form in the request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>ParseMultipartForm</span>(<span style=color:#ae81ff>10</span> <span style=color:#f92672>&lt;&lt;</span> <span style=color:#ae81ff>20</span>) <span style=color:#75715e>// 10 MiB
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>(), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#75715e>// FormFile returns the first file for the given key `file`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// it also returns the FileHeader, so we can get the Filename, the Header and the size of the file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>file</span>, <span style=color:#a6e22e>handler</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>FormFile</span>(<span style=color:#e6db74>&#34;file&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>(), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>file</span> <span style=color:#a6e22e>multipart</span>.<span style=color:#a6e22e>File</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}(<span style=color:#a6e22e>file</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>MkdirAll</span>(<span style=color:#e6db74>&#34;./upload&#34;</span>, <span style=color:#ae81ff>0777</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>(), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>localFile</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>OpenFile</span>(<span style=color:#e6db74>&#34;./upload/&#34;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>handler</span>.<span style=color:#a6e22e>Filename</span>, <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>O_WRONLY</span>|<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>O_CREATE</span>, <span style=color:#ae81ff>0666</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>(), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>localFile</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>File</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>localFile</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}(<span style=color:#a6e22e>localFile</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Copy</span>(<span style=color:#a6e22e>localFile</span>, <span style=color:#a6e22e>file</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/upload&#34;</span>, <span style=color:#a6e22e>uploadHandler</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:12345&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=å„ç§è·å–å‚æ•°æ–¹å¼æ¯”è¾ƒ>ğŸ‘å„ç§è·å–å‚æ•°æ–¹å¼æ¯”è¾ƒ<a hidden class=anchor aria-hidden=true href=#å„ç§è·å–å‚æ•°æ–¹å¼æ¯”è¾ƒ>#</a></h4><table><thead><tr><th>æ“ä½œ</th><th>è§£æ</th><th>è¯»å–URLå‚æ•°</th><th>è¯»å–Bodyè¡¨å•</th><th>æ”¯æŒæ–‡æœ¬</th><th>æ”¯æŒäºŒè¿›åˆ¶</th></tr></thead><tbody><tr><td>r.Form</td><td>r.ParseForm()</td><td>Y</td><td>Y</td><td>Y</td><td></td></tr><tr><td>r.PostForm</td><td>r.ParseForm()</td><td></td><td>Y</td><td>Y</td><td></td></tr><tr><td>r.FormValue()</td><td>è‡ªåŠ¨è°ƒç”¨r.ParseForm()</td><td>Y</td><td>Y</td><td>Y</td><td></td></tr><tr><td>r.PostFormValue()</td><td>è‡ªåŠ¨è°ƒç”¨r.ParseForm()</td><td></td><td>Y</td><td>Y</td><td></td></tr><tr><td>r.MultipartForm</td><td>ParseMultipartForm()</td><td></td><td>Y</td><td>Y</td><td>Y</td></tr><tr><td>r.FormFile</td><td>è‡ªåŠ¨è°ƒç”¨ParseMultipartForm()</td><td></td><td>Y</td><td></td><td>Y</td></tr></tbody></table><h3 id=handler--handle--handlefunc-ä¸-httplistenandserve>Handler , Handle , HandleFunc ä¸ http.ListenAndServe<a hidden class=anchor aria-hidden=true href=#handler--handle--handlefunc-ä¸-httplistenandserve>#</a></h3><h4 id=ä½¿ç”¨é»˜è®¤çš„handler>ä½¿ç”¨é»˜è®¤çš„Handler<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨é»˜è®¤çš„handler>#</a></h4><p>å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;Hello, world!&#34;</span>))
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/blog&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;This is my Blog&#34;</span>))
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:12345&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>åœ¨å¯åŠ¨ä¸€ä¸ªHttpServerçš„æ—¶å€™, å…¶å®æˆ‘ä»¬å°±å…³å¿ƒ2ä¸ªä¸œè¥¿:</p><ul><li>åœ°å€</li><li>è·¯ç”±: å°†è¯·æ±‚å¯¹åº”åˆ°ç›¸åº”çš„å¤„ç†å‡½æ•°ä¸­å»</li></ul><p>è¿™ä¸¤ä¸ªå‚æ•° åœ¨<code>http.ListenAndServe(":12345", nil)</code>ä¸­è¿›è¡Œè®¾ç½®çš„, ç¬¬ä¸€ä¸ªä¸ºåœ°å€, ç¬¬äºŒä¸ªä¼ é€’å¤„ç†å‡½æ•°.</p><p>å¦‚æœä¼ é€’<code>nil</code>, åˆ™é‡‡ç”¨é»˜è®¤çš„</p><blockquote><p>The handler is typically nil, in which case the DefaultServeMux is used.</p></blockquote><p><code>http.ListenAndServe</code>çš„å®ç°å¦‚ä¸‹:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#a6e22e>addr</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>handler</span> <span style=color:#a6e22e>Handler</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>server</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Server</span>{<span style=color:#a6e22e>Addr</span>: <span style=color:#a6e22e>addr</span>, <span style=color:#a6e22e>Handler</span>: <span style=color:#a6e22e>handler</span>}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>ListenAndServe</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Handler</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>ServeHTTP</span>(<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>Request</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ° <code>Handler</code>æ˜¯ä¸€ä¸ªæ¥å£, å®ç°è¿™ä¸ªæ¥å£çš„è¯, æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„Handler</p><h4 id=è‡ªå®šä¹‰handler>è‡ªå®šä¹‰Handler<a hidden class=anchor aria-hidden=true href=#è‡ªå®šä¹‰handler>#</a></h4><p>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“, ç»“æ„ä½“å®ç° <code>ServeHTTP(w http.ResponseWriter, r *http.Request)</code>æ–¹æ³•</p><p>ç„¶åä½¿ç”¨ <code>Handle</code>å‡½æ•°è¿›è¡Œè·¯ç”±æ³¨å†Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MyIndexHandler</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>MyIndexHandler</span>) <span style=color:#a6e22e>ServeHTTP</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;Hello World&#34;</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>MyBlogHandler</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>MyBlogHandler</span>) <span style=color:#a6e22e>ServeHTTP</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;This is my Blog&#34;</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mux</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewServeMux</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mux</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>MyIndexHandler</span>{})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mux</span>.<span style=color:#a6e22e>Handle</span>(<span style=color:#e6db74>&#34;/blog&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>MyBlogHandler</span>{})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:12345&#34;</span>, <span style=color:#a6e22e>mux</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>OSX MP16 ~ â¯ curl localhost:12345                                                          
</span></span><span style=display:flex><span>Hello World
</span></span><span style=display:flex><span>OSX MP16 ~ â¯ curl localhost:12345/blog                                                     
</span></span><span style=display:flex><span>This is my Blog
</span></span><span style=display:flex><span>OSX MP16 ~ â¯
</span></span></code></pre></div><p>ä½†è¿™æ˜æ˜¾çœ‹å‡ºæ¥, å¯¹æ¯ä¸€ä¸ªè·¯ç”± éƒ½è¦é«˜å†™ä¸€ä¸ªxxxHandlerç»“æ„ä½“å’Œå®ç°ServeHTTP, çœ‹ä¸Šå»éå¸¸æ··ä¹±</p><p>è¿™æ—¶å€™å°±å¯ä»¥ç”¨<code>mux.HandleFunc</code>æ¥å®ç°è·¯ç”±</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>mux</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewServeMux</span>()
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>mux</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;Hello World&#34;</span>))
</span></span><span style=display:flex><span>   })
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>mux</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/blog&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;This is my Blog&#34;</span>))
</span></span><span style=display:flex><span>   })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#e6db74>&#34;:12345&#34;</span>, <span style=color:#a6e22e>mux</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=è‡ªå®šä¹‰servemux>è‡ªå®šä¹‰ServeMux<a hidden class=anchor aria-hidden=true href=#è‡ªå®šä¹‰servemux>#</a></h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, <code>mux := http.NewServeMux()</code>è¿˜æ˜¯ä½¿ç”¨äº†é»˜è®¤router, å…¶ç®€å•çš„åŒæ—¶ä¹Ÿæœ‰ä¸å°‘ç¼ºç‚¹</p><p>æ¯”å¦‚, å…¶æ˜¯é€šè¿‡urlè¿›è¡Œè·¯ç”±, ä½†ä¸æ”¯æŒåŸºäºæ–¹æ³•(GET, POST&mldr;)çš„è·¯ç”±, ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ç­‰ç­‰</p><p>å‚è€ƒè¿™ä¸ª <a href=https://www.alexedwards.net/blog/which-go-router-should-i-use>https://www.alexedwards.net/blog/which-go-router-should-i-use</a></p><h2 id=äººæ°”webæ¡†æ¶>äººæ°”Webæ¡†æ¶<a hidden class=anchor aria-hidden=true href=#äººæ°”webæ¡†æ¶>#</a></h2><p>å‚è€ƒè¿™ç¯‡æ–‡ç« ,</p><p><a href=https://blog.51cto.com/coderaction/3001008>https://blog.51cto.com/coderaction/3001008</a></p><p>å…¶ä¸­æœ‰å„æ¡†æ¶çš„å¯¹æ¯”, åŠŸèƒ½ä¸Širisæœ€å…¨</p><p><a href=https://github.com/kataras/iris>https://github.com/kataras/iris</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=../../tags/#go%23/>#go#</a></li><li><a href=../../tags/#golang%23/>#golang#</a></li></ul><nav class=paginav><a class=prev href=../../posts/golang_goroutings_under_the_hood/><span class=title>Â« Prev Page</span><br><span>[Golang]goroutingsæœ¬è´¨</span></a>
<a class=next href=../../posts/go_talk_about_sync/><span class=title>Next Page Â»</span><br><span>[Golang]èŠèŠsync</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href>Zhouyinhui's Space</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>